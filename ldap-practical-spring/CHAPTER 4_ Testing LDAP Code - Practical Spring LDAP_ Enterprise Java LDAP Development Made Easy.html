<!DOCTYPE html>
<!-- saved from url=(0102)https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml -->
<html class="js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom fa-events-icons-ready" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="6866040" data-user-uuid="39a88cd5-54f5-4d61-aec6-7884d06dfba1" data-username="vrad201" data-account-type="Trial" data-activated-trial-date="04/04/2020" data-archive="9781430263975" data-publishers="Apress" data-htmlfile-name="9781430263975_Ch04.xhtml" data-epub-title="Practical Spring LDAP: Enterprise Java LDAP Development Made Easy" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781430263975"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script crossorigin="anonymous" integrity="sha256-4ZnAISy2+rbOaVUOBtJrqxBTrJ5kctu9r4qBJBt0Oo0=" type="text/javascript" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/appcues.main.40a6b605d29a66b083aa6d74c07bb73eae19e31b.js" async=""></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/ec.js"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/2508.js"></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/443792972845831" async=""></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/1732687426968531" async=""></script><script async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/fbevents.js"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f.txt"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/analytics.js"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/bat.js"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f.txt"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/insight.min.js"></script><script type="text/javascript" async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f.txt"></script><script async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/gtm.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"510f1a6865",applicationID:"172641827"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/css" rel="stylesheet" type="text/css"><title>CHAPTER 4: Testing LDAP Code - Practical Spring LDAP: Enterprise Java LDAP Development Made Easy</title><link rel="stylesheet" href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/output.8054605313ed.css" type="text/css"><link rel="stylesheet" type="text/css" href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content div{margin:1em 1em 1em 1em}#sbo-rt-content a{text-decoration:none}#sbo-rt-content img{max-width:100%;margin-top:10pt}#sbo-rt-content p.booktitle{font-weight:bold;font-size:2.5em;margin-top:2em;margin-bottom:1em;text-align:center}#sbo-rt-content p.bookauthor{font-weight:bold;font-size:1.7em;margin-top:0;margin-right:2em;margin-bottom:0;text-align:left}#sbo-rt-content p.booksubtitle{font-weight:bold;font-size:1.7em;margin-top:0;margin-bottom:9em;text-align:center;color:#8A8A8A}#sbo-rt-content .bookimage{font-size:1.2em;margin-top:0;margin-bottom:1em;text-align:left}#sbo-rt-content .fmpara{font-size:.9em;text-indent:0;margin-top:.5em;margin-bottom:.3em;text-align:justify}#sbo-rt-content .fmpara1{font-size:.9em;text-indent:0;margin-top:.4em;margin-bottom:.3em;text-align:right}#sbo-rt-content .inpara{text-indent:0;margin-top:.4em;margin-left:3em;margin-bottom:.3em}#sbo-rt-content .pub{margin-top:10em;margin-bottom:1em;text-align:right;margin-right:5em}#sbo-rt-content .copyright{font-size:.9em;margin-top:.4em;margin-bottom:.4em;margin-left:1.2em;margin-right:1.2em;text-align:left}#sbo-rt-content .copyright1{font-size:.9em;margin-top:.1em;margin-bottom:.1em;margin-left:4em;margin-right:3.3em;text-align:left;text-indent:-1.6em}#sbo-rt-content .copyright2{font-size:.9em;margin-top:.1em;margin-bottom:.1em;margin-left:4.2em}#sbo-rt-content .dedication{font-size:1.2em;margin-bottom:0;margin-top:3.5em;text-align:center;margin-right:1em;font-style:italic}#sbo-rt-content .dedication1{font-size:1.2em;margin-bottom:0;margin-top:.5em;text-align:center;margin-right:1em;font-style:normal}#sbo-rt-content .dedication2{font-size:1.2em;margin-bottom:0;margin-top:1.5em;text-align:center;margin-right:1em;font-style:italic}#sbo-rt-content .content-title{font-size:1.6em;margin-top:3em;margin-bottom:.1em;text-align:left;font-weight:bold}#sbo-rt-content .fmtitle{font-size:2.5em;margin-top:1em;margin-bottom:1em;text-align:left;font-weight:bold;border-bottom:1.1px solid black;padding-bottom:.8em}#sbo-rt-content .right{text-indent:0;margin-top:1em;margin-right:1.5em;margin-bottom:.3em;text-align:right}#sbo-rt-content .right1{text-indent:0;margin-top:0;margin-right:1.5em;margin-bottom:.2em;text-align:right}#sbo-rt-content .chapimage{margin-left:.2em;margin-top:1.5em;margin-bottom:1.5em;text-align:left}#sbo-rt-content p.ChapterNumber{font-weight:bold;font-size:1.7em;margin-top:10px;margin-left:0;margin-bottom:5px;text-align:left}#sbo-rt-content p.ChapterTitle{font-weight:bold;font-size:2.5em;margin-top:0;margin-bottom:1em;margin-left:0;text-align:left;border-bottom:1.1px solid black;padding-bottom:.8em}#sbo-rt-content p.PartNumber{font-weight:bold;font-size:1.7em;margin-top:10px;margin-left:0;margin-bottom:5px;text-align:left;padding-bottom:.8em}#sbo-rt-content p.partTitle{font-weight:bold;font-size:2.5em;margin-top:1em;margin-bottom:1em;margin-left:0;text-align:left}#sbo-rt-content .paraaftertitle{font-size:100%;text-indent:0;margin-top:0;margin-left:0;margin-bottom:0}#sbo-rt-content p.noindent{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:0;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.noindent1{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:1em}#sbo-rt-content p.noindent2{font-size:100%;text-indent:0;margin-top:1.5em;margin-bottom:1em}#sbo-rt-content p.noindent3{font-size:100%;text-indent:0;margin-top:.8em;margin-bottom:.2em;margin-left:0;margin-right:0;text-align:center}#sbo-rt-content p.noindent4{font-size:100%;text-indent:0;margin-top:.8em;margin-bottom:.2em;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content span.listing{font-weight:bold}#sbo-rt-content p.indent{font-size:100%;text-indent:1.2em;margin-top:.1em;margin-bottom:.1em;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.indent1{font-size:100%;text-indent:1.2em;margin-top:0;margin-bottom:0;margin-left:0;margin-right:0;text-align:left}#sbo-rt-content p.indent1a{font-size:100%;text-indent:1.5em;margin-top:0;margin-bottom:0;margin-left:0;margin-right:4.5em;text-align:right}#sbo-rt-content p.indent2{font-size:100%;margin-top:.8em;margin-bottom:.8em;margin-left:1em;margin-right:2.4em;text-align:justify;font-style:italic}#sbo-rt-content p.indent21{font-size:100%;margin-top:.8em;margin-bottom:.8em;margin-left:1.2em;margin-right:2.4em;text-align:justify;font-style:italic}#sbo-rt-content p.indent22{font-size:100%;margin-top:.8em;margin-bottom:.8em;margin-left:13.4em;margin-right:2.4em;text-align:justify;font-style:italic}#sbo-rt-content p.indent3{font-size:100%;text-indent:1em;margin-top:.8em;margin-bottom:.8em;margin-left:1.8em;margin-right:1.8em;text-align:left}#sbo-rt-content p.indent4{font-size:100%;text-indent:1.3em;margin-top:.5em;margin-bottom:.5em;margin-left:2em;margin-right:0;text-align:left}#sbo-rt-content .blockquote{font-size:100%;text-indent:.2em;margin-top:1em;margin-left:3em;margin-bottom:1em;font-style:italic}#sbo-rt-content .blockquote1{font-size:100%;text-indent:.2em;margin-top:1em;margin-left:3em;margin-bottom:0;font-style:italic}#sbo-rt-content p.Heading1{font-weight:bold;font-size:2em;text-indent:0;margin-top:1.3em;margin-bottom:.3em}#sbo-rt-content p.Heading2{font-size:1.6em;text-indent:0;margin-top:1.3em;margin-bottom:.3em}#sbo-rt-content p.Heading2a{font-size:1.5em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;font-weight:bold}#sbo-rt-content p.Heading3{font-weight:bold;font-size:1.45em;text-indent:0;margin-top:1.2em;margin-bottom:.1em}#sbo-rt-content p.Heading3a{font-weight:normal;font-size:1.25em;text-indent:0;margin-top:1.2em;margin-bottom:.1em}#sbo-rt-content p.Heading4{font-size:1.3em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;text-align:left}#sbo-rt-content .img{max-width:100%;margin-top:10pt}#sbo-rt-content .img1{text-align:left}#sbo-rt-content .img1a{text-align:right;margin-right:5em;margin-top:5em}#sbo-rt-content .img2{text-align:left}#sbo-rt-content div.Figure{font-size:small;margin-top:1.5em;margin-bottom:1.5em}#sbo-rt-content .para-1{font-size:100%;margin-top:1em;text-indent:1.5em;margin-bottom:0;text-align:left}#sbo-rt-content .para-2{font-size:.9em;text-indent:-1.4em;margin-left:2.4em;margin-top:.5em;margin-bottom:0}#sbo-rt-content .figurecaption{font-size:small;margin-top:0;margin-bottom:0;text-align:justify}#sbo-rt-content .image{text-align:center}#sbo-rt-content .codecaption{font-size:100%;margin-top:.6em;margin-bottom:.6em;text-align:justify;font-style:italic}#sbo-rt-content .PCode{font-size:small;margin-top:1em;margin-bottom:1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-1{font-size:small;margin-top:1em;margin-bottom:.1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-2{font-size:small;margin-top:0;margin-bottom:0;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode-3{font-size:small;margin-top:0;margin-bottom:1em;margin-left:0;text-align:left;font-family:monospace}#sbo-rt-content div.singlethin{border-bottom:solid 3px;margin-left:1em;margin-right:1em;margin-bottom:1em}#sbo-rt-content div.singlethin1{margin-left:2em;margin-right:2em}#sbo-rt-content .inlinecode{font-family:monospace}#sbo-rt-content div.notepara{font-size:110%;text-indent:0;margin-top:1em;border-top:solid 1px;border-bottom:solid 1px;margin-bottom:1em;text-align:justify}#sbo-rt-content span.pink-box{font-weight:bold;padding-left:1.3em;padding-right:1.3em;border:1.1px solid black;font-size:1.5em;margin-top:.5em;margin-bottom:.5em;text-indent:0;text-align:justify}#sbo-rt-content span.courier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%}#sbo-rt-content div.courier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%;margin-top:1em;margin-bottom:1em}#sbo-rt-content div.boxcourier{font-family:Courier New;font-weight:normal;font-style:normal;font-size:100%;margin-top:1em;margin-bottom:1em;margin-left:1.5em;margin-right:1.5em;text-align:left}#sbo-rt-content span.courier1{font-family:Courier New;font-weight:normal;font-style:normal;font-size:95%}#sbo-rt-content .boxhead{font-size:1.25em;font-weight:bold;padding-left:.1em;padding-bottom:.1em;padding-top:.1em;margin-top:0;text-indent:0;text-align:center;border:3px solid black}#sbo-rt-content div.box{margin-top:1em;margin-bottom:1em}#sbo-rt-content .boxpara{font-size:110%;text-indent:0;margin-left:1.5em;margin-right:1.5em;margin-top:.5em;margin-bottom:.5em;text-align:left}#sbo-rt-content .alpha{font-size:1.2em;font-weight:bold;margin-left:.2em;margin-top:1em;margin-bottom:.3em;text-align:left}#sbo-rt-content .index{font-size:small;margin-left:.2em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .index1{font-size:small;margin-left:1em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .index2{font-size:small;margin-left:2em;margin-top:0;margin-bottom:0;text-align:left}#sbo-rt-content .cover{text-align:center}#sbo-rt-content .top{border-top:1.1px solid black;border-bottom:2px solid black}#sbo-rt-content .bot{border-bottom:2px solid black}#sbo-rt-content table.bodytable,#sbo-rt-content table{border-collapse:collapse;margin-bottom:8px;font-size:small;margin-top:10pt;width:95%;border-top:0 solid black;border-bottom:0 solid black}#sbo-rt-content table.fmtable{margin-bottom:1em;font-size:1em;margin-left:4em;border-top:0 solid #FFF;border-bottom:0 solid #FFF}#sbo-rt-content th{border-top:1px solid black;border-bottom:1px solid black;padding-right:1.5em}#sbo-rt-content .tablepara{font-size:small;text-indent:0;margin-top:0;margin-bottom:.5em;padding-right:1.5em}#sbo-rt-content .tablepara1{font-size:small;margin-left:2em;margin-top:0;margin-bottom:0;padding-right:1.5em}#sbo-rt-content .header{border-bottom:1.1px solid black;text-indent:0;text-align:left}#sbo-rt-content .TabCapt{margin-bottom:0;font-style:italic;margin-left:0;text-indent:0}#sbo-rt-content .FigCapt{font-style:italic;font-size:.9em}#sbo-rt-content .CaptNr{font-weight:bold}#sbo-rt-content .ttitle{font-style:Italic;margin-bottom:1em}#sbo-rt-content p.paraaftertitle1{font-size:.9em;text-indent:0;margin-top:.5em;margin-bottom:.8em;text-align:left}#sbo-rt-content p.para{font-size:small;text-indent:20px;margin-top:0;margin-bottom:0;text-align:justify}#sbo-rt-content p.quote{font-style:italic;font-size:100%;margin-top:1.5em;margin-left:2.5em;margin-right:2.5em;margin-bottom:0}#sbo-rt-content p.quotesource{font-size:small;text-indent:0;margin-top:1em;margin-bottom:1em;text-align:right}#sbo-rt-content p.chaptersubtitle{font-size:x-large;text-indent:0;margin-top:0;margin-left:0;margin-bottom:0;text-align:left}#sbo-rt-content p.line{margin-top:.3em;border-bottom:1px solid black}#sbo-rt-content p.line1{margin-top:.3em;margin-bottom:1.5em;border-bottom:1px solid black}#sbo-rt-content p.line2{margin-top:5em;margin-bottom:5em;border-bottom:1px solid black;text-align:center;margin-left:15em;margin-right:15em}#sbo-rt-content li{margin-bottom:.5em;margin-top:.5em}#sbo-rt-content p.alpha{font-size:1.2em;font-weight:bold;margin-left:.2em;margin-top:1em;margin-bottom:.3em;text-align:left}#sbo-rt-content ul.bulleted{font-size:100%;text-align:justify;margin-left:2.5em;margin-right:3em;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content ol.OrderedList{font-size:100%;text-align:left;margin-left:2.5em;margin-right:3em;margin-top:1em;margin-bottom:1em}#sbo-rt-content ul.bulleted1{font-size:100%;text-align:left;margin-left:0;margin-right:5em;margin-top:1em;margin-bottom:1em;list-style-type:none}#sbo-rt-content ul.bulleted1_a{font-size:100%;text-align:justify;margin-left:0;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0;list-style-type:none}#sbo-rt-content ul.bulleted2{font-size:100%;text-align:justify;margin-left:2.3em;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content ul.bulleted4{font-size:100%;text-align:center;margin-left:1.3em;margin-right:5em;margin-top:1em;margin-bottom:1em;text-indent:0;list-style-type:none}#sbo-rt-content .numbered{font-size:small;text-align:justify;margin-left:2em;margin-right:2em;margin-top:.5em;margin-bottom:.5em;text-indent:1em}#sbo-rt-content .bulletedin{font-size:100%;text-align:justify;margin-left:4em;margin-right:4em;margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.None{font-size:.9em;text-align:justify;margin-left:3em;margin-right:2em;margin-top:.5em;margin-bottom:.5em;list-style-type:none}#sbo-rt-content .Listing{font-size:small;margin-bottom:0}#sbo-rt-content .PCode1{font-size:small;margin-top:.7em;margin-bottom:0;text-align:left;font-family:monospace}#sbo-rt-content .PCode2{font-size:small;margin-top:1em;margin-bottom:.1em;margin-left:2.2em;text-align:left;font-family:monospace}#sbo-rt-content .PCode3{font-size:small;margin-top:0;margin-left:2.2em;margin-bottom:.1em;text-align:left;font-family:monospace}#sbo-rt-content .NoteCaption{font-size:small;margin-top:1.3em;margin-left:5em;margin-right:5em;border:1.1px solid black;padding:.5em;margin-bottom:1.3em}#sbo-rt-content table{margin-bottom:1em;border-top:1.1px solid black;border-bottom:1.1px solid black;border-collapse:collapse}#sbo-rt-content table.table1{margin-bottom:.3em;border-top:0 solid black;border-bottom:0 solid black}#sbo-rt-content td{font-size:small;vertical-align:top;padding-right:1.5em;margin-top:0;margin-bottom:1em}#sbo-rt-content .Table{font-size:100%;margin-bottom:1em;margin-left:0}#sbo-rt-content .toc{font-size:1.1em;margin-top:.2em;margin-bottom:.2em;text-align:left;font-weight:bold}#sbo-rt-content .toca{font-size:1.1em;margin-top:.8em;margin-bottom:.4em;text-align:left;font-weight:bold}#sbo-rt-content .toc1{font-size:1.1em;margin-top:.4em;margin-bottom:.3em;text-align:left;text-indent:1.3em;font-weight:normal}#sbo-rt-content .toc2{font-size:1.2em;margin-top:.4em;margin-bottom:.3em;text-align:left;font-weight:bold}#sbo-rt-content .toc3{font-size:.9em;margin-top:.4em;margin-bottom:.3em;text-align:left;text-indent:2.9em;font-weight:normal}#sbo-rt-content .toc4{font-size:1.1em;margin-top:.2em;margin-bottom:.5em;text-align:left;font-weight:bold}#sbo-rt-content .tocch{font-size:1.3em;margin-top:.7em;margin-bottom:.7em;text-align:left;font-weight:bold}#sbo-rt-content .noborder{margin-bottom:1em;border-top:0 solid #FFF;border-bottom:0 solid #FFF}#sbo-rt-content .authurright{text-align:right;margin-top:0;margin-bottom:0}#sbo-rt-content .FormalPara{font-size:small;margin-bottom:.7em}#sbo-rt-content .FontName1{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content span.FontName2{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content span.FontName3{font-size:100%;font-family:"Courier New",Courier,monospace}#sbo-rt-content .rightarrow{margin-top:0}#sbo-rt-content div.thinline{margin-top:1em;margin-bottom:1em;border-top:solid 4px #AFAFB0;border-bottom:solid 4px #AFAFB0}#sbo-rt-content span.line{text-decoration:underline}#sbo-rt-content span.underline{text-decoration:underline}#sbo-rt-content div.box{border-top:solid 2px;border-bottom:solid 2px}#sbo-rt-content .app{font-size:150%;margin-left:.8em}#sbo-rt-content .page{text-decoration:none;color:#000}#sbo-rt-content .cXXX{text-decoration:none;color:#000}#sbo-rt-content .textindent{margin-left:1.7em;margin-top:1em;margin-bottom:1em;font-size:100%}#sbo-rt-content .textindent1{margin-left:1.7em;margin-top:0;margin-bottom:0;font-size:100%}#sbo-rt-content .textindent2{margin-left:1.7em;margin-top:0;margin-bottom:0;font-size:100%;text-indent:1em}#sbo-rt-content p.FootNote{margin-top:.8em;margin-bottom:0;font-size:85%;text-indent:0;text-align:left;margin-left:1.1em;margin-right:1.1em}#sbo-rt-content p.FootNote1{margin-top:.8em;margin-bottom:0;font-size:85%;text-indent:2em;text-align:left;margin-left:1.1em;margin-right:1.1em}#sbo-rt-content pre{margin-left:0;font-family:monospace;white-space:pre-wrap}#sbo-rt-content p.Heading4a{font-size:1.15em;font-weight:bold;text-indent:1em;margin-top:1.3em;margin-bottom:.3em;border-top:3px solid #4d4d4c;border-left:solid 3px #4d4d4c;border-right:solid 3px #4d4d4c;border-bottom:solid 3px #4d4d4c;text-align:center}#sbo-rt-content p.noindent8{font-size:100%;text-indent:0;margin-top:1em;margin-bottom:1em;text-align:center;font-weight:bold;color:#8A8A8A}#sbo-rt-content .tocb{font-size:1.4em;margin-top:.5em;margin-bottom:.2em;text-align:left;font-weight:bold}#sbo-rt-content .part{font-weight:normal;font-size:1em;margin-bottom:5px;text-align:left;padding-left:1.3em;padding-bottom:10em;padding-right:1.3em;border:1.1px solid black}#sbo-rt-content p.Heading5{font-size:1em;text-indent:0;margin-top:1.3em;margin-bottom:.3em;text-align:center}#sbo-rt-content p.noindent5s{font-size:100%;text-indent:0;margin-top:.1em;margin-bottom:.1em;margin-left:0;margin-right:0;text-align:right}#sbo-rt-content span.strike{text-decoration:line-through}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781430263975/chapter/9781430263975_Ch04.xhtml",
          "book_id": "9781430263975",
          "chapter_uri": "9781430263975_Ch04.xhtml",
          "position": 0,
          "user_uuid": "39a88cd5-54f5-4d61-aec6-7884d06dfba1",
          "next_chapter_uri": "/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch05.xhtml"
        
      },
      title: "Practical Spring LDAP: Enterprise Java LDAP Development Made Easy",
      author_list: "Balaji Varanasi",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml"><meta name="description" content="CHAPTER 4 Testing LDAP Code In this chapter, you will learn The basics of unit/mock/integration testing. Testing using an embedded LDAP server. Mock testing using EasyMock. Generating test data. Testing ... "><meta property="og:title" content="CHAPTER 4: Testing LDAP Code"><meta itemprop="isPartOf" content="/library/view/practical-spring-ldap/9781430263975/"><meta itemprop="name" content="CHAPTER 4: Testing LDAP Code"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9781430263975/"><meta property="og:description" itemprop="description" content="CHAPTER 4 Testing LDAP Code In this chapter, you will learn The basics of unit/mock/integration testing. Testing using an embedded LDAP server. Mock testing using EasyMock. Generating test data. Testing ... "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781430263975"><meta property="og:book:author" itemprop="author" content="Balaji Varanasi"><meta property="og:book:tag" itemprop="about" content="Certification"><meta property="og:book:tag" itemprop="about" content="Java"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '39a88cd5-54f5-4d61-aec6-7884d06dfba1';
      dataLayer.push({userIdentifier: '39a88cd5-54f5-4d61-aec6-7884d06dfba1'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'c1ff3208-121f-489a-a3cd-0b219a28ba6e';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/vendor.667e7ada497a.js"></script><script defer="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/reader.d25c5547507a.js"></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f(1).txt"></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f(2).txt"></script><script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/f(3).txt"></script><script async="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 2147483667;
}
.annotator-filter {
  z-index: 2147483657;
}</style><link href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/840a321d95.css" media="all" rel="stylesheet"><iframe src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource.html"></iframe><iframe src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource(2).html"></iframe><iframe src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource(3).html"></iframe><link rel="stylesheet" type="text/css" href="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/container.40a6b605d29a66b083aa6d74c07bb73eae19e31b.css"><iframe src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource(4).html"></iframe></head>


<body class="reading sidenav nav-collapsed scalefonts subscribe-panel library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/39a88cd5-54f5-4d61-aec6-7884d06dfba1/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=collection&amp;sort=date_added&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Expert Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Practice</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/" class="l2 nav-icn"><span>Katacoda Scenarios</span></a></li><li><a href="https://learning.oreilly.com/interactive/#notebooks" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M10.0440191,12.1582649 C10.177209,12.3351976 10.2476998,12.552011 10.2434767,12.7742985 L10.2434767,13.9482829 L1.96869684,13.9482829 L1.96869684,12.7742985 C1.96418597,12.536863 2.04491894,12.3056731 2.19625329,12.1226596 L2.20142503,12.1226596 C3.18373453,10.9898864 4.60930376,10.339179 6.10867266,10.339179 C7.30793519,10.339179 8.45998426,10.7554703 9.37576632,11.5017585 L14.3434936,11.5017585 L14.3434936,3.65650645 L1.65650645,3.65650645 L1.65650645,11.5017585 L2.06682298,11.5017585 L1.82063306,12.1582649 L1.32825322,12.1582649 C1.14771395,12.1582649 1,12.010551 1,11.8300117 L1,3.32825322 C1,3.14771395 1.14771395,3 1.32825322,3 L14.6717468,3 C14.852286,3 15,3.14771395 15,3.32825322 L15,11.8300117 C15,12.010551 14.852286,12.1582649 14.6717468,12.1582649 L10.0440191,12.1582649 Z M12.5483683,7.16419284 C12.6159362,7.20929881 12.6563112,7.2853432 12.6558247,7.36658194 C12.6553382,7.44782068 12.6140555,7.5233761 12.5459522,7.56766966 L10.4270949,8.91581376 C10.3903366,8.94010203 10.3431312,8.9419685 10.3045699,8.9206583 C10.2660086,8.89934811 10.2424712,8.85838696 10.2434767,8.81434055 L10.2434767,5.91510593 C10.2420711,5.86982855 10.2666257,5.82771857 10.3067229,5.80664182 C10.3468202,5.78556507 10.3954292,5.7892172 10.431927,5.81604875 L12.5483683,7.16419284 Z M6.10608679,9.81089299 C4.9635781,9.81089299 4.03739181,8.8847067 4.03739181,7.74219802 C4.03739181,6.59968933 4.9635781,5.67350304 6.10608679,5.67350304 C7.24859547,5.67350304 8.17478176,6.59968933 8.17478176,7.74219802 C8.17478176,8.8847067 7.24859547,9.81089299 6.10608679,9.81089299 Z"></path></svg><span>Sandboxes</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/kubernetes-sandbox/9781492062820/" class="l2 nav-icn"><span>Kubernetes</span></a></li><li><a href="https://learning.oreilly.com/scenarios/python-sandbox/9781492062844/" class="l2 nav-icn"><span>Python</span></a></li><li><a href="https://learning.oreilly.com/scenarios/tensorflow-sandbox/9781492062851/" class="l2 nav-icn"><span>TensorFlow</span></a></li><li><a href="https://learning.oreilly.com/scenarios/ubuntu-sandbox/9781492062837/" class="l2 nav-icn"><span>Ubuntu</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/r/" class="l2 nav-icn"><span>Recommendations</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Release</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.4 9.8a.6.6 0 0 1 .6.6v1.2h-1.2l-.6 2.4H3.8l-.6-2.4H2v-1.2a.6.6 0 0 1 .6-.6h10.8zM8 5.6a1.8 1.8 0 1 1-.001-3.599A1.8 1.8 0 0 1 8 5.6zm3.6 2.35v.95H4.4v-.95c0-.167.066-.33.19-.443A5.08 5.08 0 0 1 8 6.2a5.08 5.08 0 0 1 3.41 1.307c.124.113.19.276.19.444z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Training</span></a></li></ul></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Practical Spring LDAP: Enterprise Java LDAP Development Made Easy
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781430263975/chapter/9781430263975_Ch04.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml&amp;text=Practical%20Spring%20LDAP%3A%20Enterprise%20Java%20LDAP%20Development%20Made%20Easy&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%20CHAPTER%204%3A%20Testing%20LDAP%20Code&amp;body=https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml%0D%0Afrom%20Practical%20Spring%20LDAP%3A%20Enterprise%20Java%20LDAP%20Development%20Made%20Easy%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/djangoMessagesPage.61a28d591d16.js"></script>


        <script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/48743.js"></script>
<script>
  var userId = "6866040";

  var userObject = {
    firstName: "MACKYNZIE",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "April 4, 2020, 9:28 a.m.",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch03.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">CHAPTER 3: Introducing Spring LDAP</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch05.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">CHAPTER 5: Advanced Spring LDAP</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><p class="ChapterNumber"><a id="Chap_4"></a>CHAPTER 4</p>
<p class="chapimage"><img src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/frontdot.jpg" alt="image" width="82" height="25" data-mfp-src="/library/view/practical-spring-ldap/9781430263975/images/frontdot.jpg"></p>
<p class="ChapterTitle">Testing LDAP Code</p>
<div>
<p class="noindent">In this chapter, you will learn</p>
<ul class="bulleted">
<li>The basics of unit/mock/integration testing.</li>
<li>Testing using an embedded LDAP server.</li>
<li>Mock testing using EasyMock.</li>
<li>Generating test data.</li>
</ul>
<p class="indent">Testing<a id="cXXX.59r"></a><a id="cXXX.101"></a> is an important aspect of any software development process. As well as detecting bugs, it also helps to verify that all requirements are met and that the software works as expected. Today, formally or informally, testing is included in almost every phase of the software development process. Depending on what is being tested and the purpose behind the test, we end up with several different types of testing<a id="cXXX.59m"></a>. The most common testing done by developers is unit testing, which ensures that individual units are working as expected. Integration testing usually follows unit testing and focuses on the interaction between previously tested components. Developers are usually involved in creating automated integration tests, especially the tests that deal with databases and directories. Next is system testing where the complete, integrated system is evaluated to ensure that all the requirements have been met. Non-functional requirements such as performance and efficiency are also tested as part of system testing. Acceptance testing is usually done at the end to make sure that the delivered software meets the customer/business user needs.</p>
<p id="Sec1" class="Heading1">Unit Testing</p>
<p class="noindent">Unit testing<a id="cXXX.102"></a> is a testing methodology where the smallest parts of the application, referred to as units, are verified and validated individually in isolation. In structural programming, the unit could be an individual method or function. In object-oriented programming (OOP)<a id="cXXX.103"></a>, an object is the smallest executable unit. Interaction between objects is central to any OO design and is usually done by invoking methods. Thus, unit testing in OOP<a id="cXXX.104"></a> can range from testing individual methods to testing a cluster of objects.</p>
<p class="indent">Writing unit tests requires a developers time and effort. But this investment has been proven to deliver several undeniable benefits.</p>
<div class="notepara">
<p class="paraaftertitle1"><img src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/sq.jpg" alt="image" width="12" height="12" data-mfp-src="/library/view/practical-spring-ldap/9781430263975/images/sq.jpg">&nbsp;<b>Note</b>&nbsp;&nbsp; It is important to measure how much of the code is covered by unit tests. Tools like Clover and Emma provide metrics for code coverage. These metrics can also be used to highlight any paths that are exercised by few unit tests (or none at all).</p></div>
<p class="indent">The biggest advantage<a id="cXXX.105"></a> of unit testing is that it can help identify bugs at early stages of development. Bugs that are discovered only during QA or in production consume a lot more debugging time and money. Also, a good set of unit tests acts as a safety net and gives confidence when code is refactored. Unit tests can help improve design and even serve as documentation.</p>
<p class="indent">Good unit tests have the following characteristics<a id="cXXX.106"></a>:</p>
<ul class="bulleted">
<li>Every unit test must be independent of other tests. This atomic nature is very important and each test must not cause any side effects to other tests. Unit tests should also be order independent.</li>
<li>A unit test must be repeatable. For a unit test to be of any value, it must produce consistent results. Otherwise, it cannot be used as a sanity check during refactoring.</li>
<li>Unit tests must be easy to set up and clean up. So they should not rely on external systems such as databases and servers.</li>
<li>Unit tests must be fast and provide immediate feedback. It would not be productive to wait on long-running tests before you make another change.</li>
<li>Unit tests must be self-validating. Each test should contain enough information to determine automatically if a test passes or fails. No manual intervention should be needed to interpret the results.</li>
</ul>
<p class="indent">Enterprise applications often use external systems like databases, directories, and web services. This is especially true in the DAO layer<a id="cXXX.107"></a>. Unit testing database code, for example, may involve starting a database server, loading it with schema and data, running tests, and shutting down the server. This quickly becomes tricky and complex. One approach is to use mock objects and hide the external dependencies. Where this is not sufficient, it may be necessary to use integration testing and test the code with external dependencies intact. Lets look at each case in little more detail.</p>
<p id="Sec2" class="Heading1">Mock Testing<a id="cXXX.60k"></a></p>
<p class="noindent">The goal of mock testing<a id="cXXX.108"></a> is to use mock objects to simulate real objects in controlled ways. Mock objects implement the same interface as that of the real objects but are scripted to mimic/fake and track their behavior.</p>
<p class="indent">For example, consider a <span class="FontName3">UserAccountService</span><a id="cXXX.109"></a> that has a method to create new user accounts. The implementation of such a service usually involves validating the account information against business rules, storing the newly created account in a database, and sending out a confirmation e-mail. Persisting data and e-mailing information are usually abstracted out to classes in other layers. Now, when writing a unit test to validate the business rules associated with the account creation, you might not really care about the intricacies involved in the e-mail notification part. However, you do want to verify that an e-mail got generated. This is exactly where mock objects come in handy. To achieve this, you just need to give the <span class="FontName3">UserAccountService</span> a mock implementation of the <span class="FontName3">EmailService</span> that is responsible for sending e-mails. The mock implementation will simply mark the e-mail request and return a hardcoded result. Mock objects are a great way to isolate tests from complex dependencies, allowing them to run faster.</p>
<p class="indent">There are several open source frameworks<a id="cXXX.110"></a> that make working with mock objects easier. Popular ones include Mockito, EasyMock, and JMock. A complete comparison list of these frameworks can be found at <span class="FontName3"><a href="http://code.google.com/p/jmockit/wiki/MockingToolkitComparisonMatrix">http://code.google.com/p/jmockit/wiki/MockingToolkitComparisonMatrix</a></span><span class="FontName3">.</span></p>
<p class="indent">Some of these frameworks allow creating mocks for classes that dont implement any interfaces. Regardless of the framework used, unit testing using mock objects usually involves the following steps:</p>
<ul class="bulleted">
<li>Create a new mock instance.</li>
<li>Set up the mock. This involves instructing the mock what to expect and what to return.</li>
<li>Run the tests, passing the mock instance to the component under test.</li>
<li>Verify the results.</li>
</ul>
<p id="Sec3" class="Heading1">Integration Testing<a id="cXXX.111"></a></p>
<p class="noindent">Even though mock objects serve as great placeholders, very soon you will run into cases where faking will not be enough. This is especially true for DAO<a id="cXXX.34b"></a> layer code where you need to validate SQL query executions and verify modifications to database records. Testing this kind of code falls under the umbrella of integration testing. As mentioned earlier, integration testing focuses on testing interactions between components with their dependencies in place.</p>
<p class="indent">It has become common for developers to write automated integration tests using unit-testing tools, thereby blurring the distinction between the two. However, it is important to remember that integration tests dont run in isolation and are usually slower. Frameworks such as Spring provide container support for writing and executing integration tests easily. The improved availability of embedded databases, directories, and servers enables developers to write faster integration tests.</p>
<p id="Sec4" class="Heading1">JUnit<a id="cXXX.62h"></a></p>
<p class="noindent">JUnit has become the de facto standard when it comes to unit testing Java applications. The introduction of annotations in JUnit 4.x made it even easier to create tests and assert test results for expected values. JUnit can easily be integrated with build tools<a id="cXXX.112"></a> like ANT and Maven. It also has great tooling support available in all popular IDEs.</p>
<p class="indent">With JUnit, the standard practice is to write a separate class that holds test methods. This class is often referred to as a test case, and each test method is intended to test a single unit of work. It is also possible to organize test cases into groups referred to as test suites.</p>
<p class="indent">The best way to learn JUnit is to write a test method. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list1" id="_list1">Listing 4-1</a> shows a simple <span class="FontName3">StringUtils</span> class<a id="cXXX.113"></a> with an <span class="FontName3">isEmpty</span> method. The method takes a <span class="FontName3">String</span> as parameter and returns true if it is either null or an empty string.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list1" id="list1"><b><i>Listing 4-1.</i></b></a></p>
<pre><span class="FontName3">public class StringUtils {</span><br>&nbsp;&nbsp; <span class="FontName3">public static boolean isEmpty(String text) {</span><br>&nbsp;&nbsp; <span class="FontName3">return test == null || "".equals(test);</span><br>&nbsp;&nbsp;<span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<p class="indent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list2" id="_list2">Listing 4-2</a> is the JUnit class with a method to test the code.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list2" id="list2"><b><i>Listing 4-2.</i></b></a></p>
<pre><span class="FontName3">public class StringUtilsTest {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">@Test</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">public void testIsEmpty() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">Assert.assertTrue(StringUtils.isEmpty(null));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">Assert.assertTrue(StringUtils.isEmpty(""));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">Assert.assertFalse(StringUtils.isEmpty("Practical Spring Ldap"));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<p class="indent">Notice that I have followed the convention &lt;Class Under Test&gt;Test for naming the test class. Prior to JUnit 4.x, test methods needed to begin with the word test. With 4.x, test methods just need to be marked with annotation @Test. Also notice that the <span class="FontName3">testIsEmpty</span> method holds several assertions for testing the <span class="FontName3">isEmpty</span> methods logic.</p>
<p class="indent"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#Tab1" id="_Tab1">Table 4-1</a> lists some of the important annotations available in JUnit 4.</p>
<div class="Table">
<p class="TabCapt"><span class="CaptNr"><a id="Tab1" href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_Tab1">Table 4-1</a>. </span>JUnit 4 Annotations<a id="cXXX.114"></a></p>
<table>
<thead>
<tr class="header">
<th>Annotation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>@Test</td>
<td>Annotates a method as a JUnit test method. The method should be of public scope and have void return type.</td>
</tr>
<tr>
<td>@Before</td>
<td>Marks a method to run before every test method. Useful for setting up test fixtures. The @Before method of a superclass is run before the current class.</td>
</tr>
<tr>
<td>@After</td>
<td>Marks a method to be run after every test method. Useful for tearing down test fixtures. The @After method of a superclass is run before the current class.</td>
</tr>
<tr>
<td>@Ignore</td>
<td>Marks a method to be ignored during test runs. This helps avoid the need for commenting half-baked test methods.</td>
</tr>
<tr>
<td>@BeforeClass</td>
<td>Annotates a method to run before any test method is run. For a test case, the method is run only once and can be used to provide class level setup work.</td>
</tr>
<tr>
<td>@AfterClass</td>
<td>Annotates a method to run after all the test methods are run. This can be useful for performing any cleanups at a class level.</td>
</tr>
<tr>
<td>@RunWith</td>
<td>Specifies the class that is used to run the JUnit test case.</td>
</tr>
</tbody>
</table>
</div>
<p id="Sec5" class="Heading1">Testing Using Embedded LDAP Server</p>
<p class="noindent">ApacheDS, OpenDJ, and UnboundID are open source LDAP directories that can be embedded into Java applications. Embedded directories<a id="cXXX.115"></a> are part of the applications JVM, making it easy to automate tasks such as startup and shutdown. They have a small startup time and typically run fast. Embedded directories also eliminate the need for a dedicated, standalone LDAP server for each developer or build machine.</p>
<div class="notepara">
<p class="paraaftertitle1"><img src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/sq.jpg" alt="image" width="12" height="12" data-mfp-src="/library/view/practical-spring-ldap/9781430263975/images/sq.jpg">&nbsp;<b>Note</b>&nbsp;&nbsp;Note Concepts discussed here serve as the foundation for the LdapUnit open source project. You will be using LdapUnit for testing code in all future chapters. Please visit <span class="FontName3"><a href="http://ldapunit.org/">http://ldapunit.org</a></span> to download project artifacts and browse through the complete source code.</p></div>
<p class="indent">Embedding an LDAP server involves programmatically creating the server and starting/stopping it. However, despite their maturity, programmatically interacting with ApacheDS or OpenDJ is cumbersome. In the next section, you will look at the setup necessary to configure and use ApacheDS LDAP server.</p>
<p id="Sec6" class="Heading1">Setting Up Embedded ApacheDS<a id="cXXX.64s"></a></p>
<p class="noindent">Central to ApacheDS<a id="cXXX.116"></a> is the directory service that stores data and supports search operations. Thus, starting an ApacheDS LDAP server<a id="cXXX.122a"></a> first involves creating and configuring a directory service. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list3" id="_list3">Listing 4-3</a> shows the code associated with creating a directory service. Note that you are simply using the <span class="FontName3">DefaultDirectoryServiceFactory</span><a id="cXXX.117"></a> and initializing it.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list3" id="list3"><b><i>Listing 4-3.</i></b></a></p>
<pre><span class="FontName3">DirectoryServiceFactory dsf = DefaultDirectoryServiceFactory.DEFAULT;</span><br><span class="FontName3">dsf.init( "default" + UUID.randomUUID().toString() );</span><br><span class="FontName3">directoryService = dsf.getDirectoryService();</span></pre>
<p class="indent">ApacheDS uses partitions to store LDAP entries. (A partition can be viewed as a logical container that holds an entire DIT). It is possible that a single ApacheDS instance can have multiple partitions. Associated with each partition is a root Distinguished Name (DN)<a id="cXXX.118"></a> called the partition suffix. All the entries in that partition are stored under that root DN. The code in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list4" id="_list4">Listing 4-4</a> creates a partition and adds it to the <span class="FontName3">directoryService</span> created in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list3">Listing 4-3</a>.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list4" id="list4"><b><i>Listing 4-4.</i></b></a></p>
<pre><span class="FontName3">PartitionFactory partitionFactory =</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">DefaultDirectoryServiceFactory.DEFAULT.getPartitionFactory();</span><br><span class="FontName3">/* Create Partition takes id, suffix, cache size, working directory*/</span><br><span class="FontName3">Partition partition = partitionFactory.createPartition("dc=inflinx,dc=com", "dc=inflinx,dc=com", 1000, new File(</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">directoryService.getWorkingDirectory(),rootDn));</span><br><span class="FontName3">partition.setSchemaManager(directoryService.getSchemaManager());</span><br>&nbsp;<br><span class="FontName3">// Inject the partition into the DirectoryService</span><br><span class="FontName3">directoryService.addPartition( partition );</span></pre>
<p class="indent">You create the partition using the partition factory. In order to create a new partition, you must provide the following information: a name that uniquely identifies the partition, a partition suffix or rootDn, cache size, and a working directory. In <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list4">Listing 4-4</a>, you have used the rootDn as the partition name also.</p>
<p class="indent">With the directory service created and configured, the next step is to create an LDAP server. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list5" id="_list5">Listing 4-5</a> shows the code associated with it. To the newly created LDAP Server, you provide a name. Then you create a <span class="FontName3">TcpTransport</span><a id="cXXX.119"></a> object that will be listening on port 12389. The <span class="FontName3">TcpTransport</span> instance allows a client to communicate with your LDAP server.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list5" id="list5"><b><i>Listing 4-5.</i></b></a></p>
<pre><span class="FontName3">// Create the LDAP server</span><br><span class="FontName3">LdapServer ldapServer = new LdapServer();</span><br><span class="FontName3">ldapServer.setServiceName("Embedded LDAP service");</span><br><span class="FontName3">TcpTransport ldapTransport = new TcpTransport(12389); ldapServer.setTransports(ldapTransport);</span><br><span class="FontName3">ldapServer.setDirectoryService( directoryService );</span></pre>
<p class="indent">The final step is to start the service, <a id="cXXX.120"></a>which is achieved with the following code:</p>
<pre><span class="FontName3">directoryService.startup();</span><br><span class="FontName3">ldapServer.start();</span></pre>
<p class="indent">This completes the implementation of the <a id="cXXX.121"></a><span class="FontName3">startup</span> method<a id="cXXX.119a"></a>. The implementation of the <span class="FontName3">shutdown</span> method is described in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list6" id="_list6">Listing 4-6</a>.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list6" id="list6"><b><i>Listing 4-6.</i></b></a></p>
<pre><span class="FontName3">public void stopServer() {</span><br>&nbsp;&nbsp; <span class="FontName3">try {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println("Shutting down LDAP Server ....");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">ldapServer.stop();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">directoryService.shutdown();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">FileUtils.deleteDirectory( directoryService.getWorkingDirectory() );</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println("LDAP Server shutdown" + " successful ....");</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;&nbsp; <span class="FontName3">catch(Exception e) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">throw new RuntimeException(e);</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<p class="indent">In addition to invoking the stop/shutdown method, notice that you have deleted the <span class="FontName3">DirectoryService</span>s working directory. The complete code for the embedded ApacheDS implementation is shown in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list7" id="_list7">Listing 4-7</a>.<a id="cXXX.122"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list7" id="list7"><b><i>Listing 4-7.</i></b></a></p>
        <pre><span class="FontName3">package org.ldapunit.server;</span><br>&nbsp;<br><span class="FontName3">import java.io.File;</span><br><span class="FontName3">import java.util.UUID;</span><br><span class="FontName3">import org.apache.commons.io.FileUtils;</span><br><span class="FontName3">import org.apache.directory.server.core.DirectoryService;</span><br><span class="FontName3">import org.apache.directory.server.core.factory.DefaultDirectoryServiceFactory;</span><br><span class="FontName3">import org.apache.directory.server.core.factory. DirectoryServiceFactory;</span><br><span class="FontName3">import org.apache.directory.server.core.factory.PartitionFactory;</span><br><span class="FontName3">import org.apache.directory.server.core.partition.Partition;</span><br><span class="FontName3">import org.apache.directory.server.ldap.LdapServer;</span><br><span class="FontName3">import org.apache.directory.server.protocol.shared. transport.TcpTransport;</span><br>&nbsp;<br><span class="FontName3">public class ApacheDSConfigurer implements EmbeddedServerConfigurer {</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">private DirectoryService directoryService;</span><br>&nbsp;&nbsp; <span class="FontName3">private LdapServer ldapServer;</span><br>&nbsp;&nbsp; <span class="FontName3">private String rootDn;</span><br>&nbsp;&nbsp; <span class="FontName3">private int port;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">public ApacheDSConfigurer(String rootDn, int port) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">this.rootDn = rootDn;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">this.port = port;</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">public void startServer() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">try {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">System.out.println("Starting Embedded " + <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ApacheDS LDAP Server ....");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">DirectoryServiceFactory dsf = DefaultDirectoryServiceFactory.</span><span class="FontName3"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEFAULT;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">dsf.init( "default" + UUID.randomUUID().toString());</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">directoryService = dsf.getDirectoryService();</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">PartitionFactory partitionFactory = DefaultDirectoryServiceFactory.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DEFAULT.getPartitionFactory();</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">/* Create Partition takes id, suffix, cache size, working <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;directory*/</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">Partition partition = partitionFactory.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;createPartition(rootDn,rootDn, 1000, new File(directoryService.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getWorkingDirectory(), rootDn));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">partition.setSchemaManager(directoryService.getSchemaManager());</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">// Inject the partition into the DirectoryService</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">directoryService.addPartition( partition );</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">// Create the LDAP server ldapServer = new LdapServer();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">ldapServer.setServiceName("Embedded LDAP service");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">TcpTransport ldapTransport = new TcpTransport(port);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">ldapServer.setTransports(ldapTransport);</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">ldapServer.setDirectoryService( directoryService );</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">directoryService.startup();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">ldapServer.start();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">System.out.println("Embedded ApacheDS LDAP server" + "has started <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;successfully ....");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">catch(Exception e) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">throw new RuntimeException(e);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">public void stopServer() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">try {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">System.out.println("Shutting down Embedded " + "ApacheDS LDAP <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server ....");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">ldapServer.stop();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">directoryService.shutdown();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">FileUtils.deleteDirectory( directoryService.getWorkingDirectory() );</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">System.out.println("Embedded ApacheDS LDAP " + "Server shutdown <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;successful ....");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">catch(Exception e) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">throw new RuntimeException(e);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<div>
<p id="Sec7" class="Heading2">Creating Embedded Context Factory</p>
<p class="noindent">With the above code in place, the next step is to automatically start the server and create contexts that you can use to interact with the embedded server. In Spring, you can achieve this by implementing a custom <span class="FontName3">FactoryBean</span> that creates new instances of <span class="FontName3">ContextSource</span>. In <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list8" id="_list8">Listing 4-8</a>, you start the creation of the context factory.<a id="cXXX.123"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list8" id="list8"><b><i>Listing 4-8.</i></b></a></p>
<pre><span class="FontName3">package com.practicalspring.ldap.test;</span><br>&nbsp;<br><span class="FontName3">import org.springframework.beans.factory.config. AbstractFactoryBean;</span><br><span class="FontName3">import org.springframework.ldap.core.ContextSource;</span><br><span class="FontName3">import org.springframework.ldap.core.support.DefaultDirObjectFactory;</span><br><span class="FontName3">import org.ldapunit.server.ApacheDSConfigurer;</span><br><span class="FontName3">import org.apache.directory.server.ldap.LdapServer;</span><br>&nbsp;<br><span class="FontName3">public class EmbeddedContextSourceFactory extends <br>AbstractFactoryBean&lt;ContextSource&gt; {</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">private int port;</span><br>&nbsp;&nbsp; <span class="FontName3">private String rootDn;</span><br>&nbsp;&nbsp; <span class="FontName3">private ApacheDSConfigurer apacheDsConfigurer;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Override</span><br>&nbsp;&nbsp; <span class="FontName3">public Class&lt;?&gt; getObjectType() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">return ContextSource.class;</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Override</span><br>&nbsp;&nbsp; <span class="FontName3">protected ContextSource createInstance() throws Exception {</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">// To be implemented later.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">return null;</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;&nbsp; <span class="FontName3">public void setRootDn(String rootDn) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">this.rootDn = rootDn;</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;&nbsp; <span class="FontName3">public void setPort(int port) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">this.port = port;</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<p class="indent">Notice that the <span class="FontName3">EmbeddedContextSourceFactory</span> bean uses two setter methods: <span class="FontName3">setPort</span> and <span class="FontName3">setRootDn</span>. The <span class="FontName3">setPort</span> method<a id="cXXX.124"></a> can be used to set the port on which the embedded server should run. The <span class="FontName3">setRootDn</span> method can be used to provide the name of the root context. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list9" id="_list9">Listing 4-9</a> shows the implementation of the <span class="FontName3">createInstance</span> method, which creates a new instance of <span class="FontName3">ApacheDSConfigurer</span> and starts the server. Then it creates a new <span class="FontName3">LdapContenxtSource</span> and populates it with the embedded LDAP server information.<a id="cXXX.125"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list9" id="list9"><b><i>Listing 4-9.</i></b></a></p>
<pre><span class="FontName3">apacheDsConfigurer = new ApacheDSConfigurer(rootDn, port);</span><br><span class="FontName3">apacheDsConfigurer.startServer();</span><br>&nbsp;<br><span class="FontName3">LdapContextSource targetContextSource = new LdapContextSource();</span><br><span class="FontName3">targetContextSource.setUrl("ldap://localhost:" + port);</span><br><span class="FontName3">targetContextSource.setUserDn(ADMIN_DN);</span><br><span class="FontName3">targetContextSource.setPassword(ADMIN_PWD);</span><br><span class="FontName3">targetContextSource.setDirObjectFactory(DefaultDirObjectFactory.class);</span><br><span class="FontName3">targetContextSource.afterPropertiesSet();</span><br>&nbsp;<br><span class="FontName3">return targetContextSource;</span></pre>
<p class="indent">The implementation of <span class="FontName3">destroyInstance</span> is provided in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list10" id="_list10">Listing 4-10</a>. It simply involves cleaning up the created context and stopping the embedded server.<a id="cXXX.126"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list10" id="list10"><b><i>Listing 4-10.</i></b></a></p>
<pre><span class="FontName3">@Override</span><br><span class="FontName3">protected void destroyInstance(ContextSource instance) throws Exception {</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">super.destroyInstance(instance);</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">apacheDsConfigurer.stopServer();</span><br><span class="FontName3">}</span></pre>
<p class="indent">The final step is to create a Spring context file that uses the new context factory. This is shown in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list11" id="_list11">Listing 4-11</a>. Notice that the embedded context source is being injected into the <span class="FontName3">ldapTemplate</span>.<a id="cXXX.127"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list11" id="list11"><b><i>Listing 4-11.</i></b></a></p>
<pre><span class="FontName3">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br>&nbsp;<br><span class="FontName3">&lt;beans xmlns="</span><span class="FontName3"><a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a></span><span class="FontName3">"</span><br>&nbsp;&nbsp; <span class="FontName3">xmlns:xsi="</span><span class="FontName3"><a href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a></span><span class="FontName3">"</span><br>&nbsp;&nbsp; <span class="FontName3">xmlns:context="</span><span class="FontName3"><a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></span><span class="FontName3">"</span><br>&nbsp;&nbsp; <span class="FontName3">xsi:schemaLocation="</span><span class="FontName3"><a href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a></span><br>&nbsp;&nbsp; <span class="FontName3"><a href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a></span><br>&nbsp;&nbsp; <span class="FontName3"><a href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a></span><br>&nbsp;&nbsp; <span class="FontName3"><a href="http://www.springframework.org/schema/context/spring-context.xsd">http://www.springframework.org/schema/context/spring-context.xsd</a></span><span class="FontName3">"&gt;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">&lt;bean id="contextSource" class="com.inflinx.ldap.test.<br>&nbsp;&nbsp;&nbsp;EmbeddedContextSourceFactory"&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">&lt;property name="port" value="12389" /&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">&lt;property name="rootDn" value="dc=inflinx,dc=com" /&gt;</span><br>&nbsp;&nbsp; <span class="FontName3">&lt;/bean&gt;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">&lt;bean id="ldapTemplate" class="org.springframework.ldap.core.<br>&nbsp;&nbsp;&nbsp;LdapTemplate"&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">&lt;constructor-arg ref="contextSource" /&gt;</span><br>&nbsp;&nbsp; <span class="FontName3">&lt;/bean&gt;</span><br><span class="FontName3">&lt;/beans&gt;</span></pre>
<p class="indent">Now you have the entire infrastructure needed to write JUnit test cases. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list12" id="_list12">Listing 4-12</a> shows a simple JUnit test case. This test case has a <span class="FontName3">setup</span> method that runs before each test method. In the <span class="FontName3">setup</span> method you load the data so that the LDAP server will be in a known state. <a id="cXXX.128"></a>In <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list12">Listing 4-12</a>, you are loading data from <span class="FontName3">employees.ldif</span> file. The <span class="FontName3">teardown</span> method runs after each test method is run. In the <span class="FontName3">teardown</span> method, you are deleting all the entries in LDAP server. This will allow you to start clean with a new test. The three test methods are very rudimentary and simply print the information on the console.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list12" id="list12"><b><i>Listing 4-12.</i></b></a></p>
<pre><span class="FontName3">package com.inflinx.book.ldap.test;</span><br>&nbsp;<br><span class="FontName3">import java.util.List;</span><br>&nbsp;<br><span class="FontName3">import org.junit.After;</span><br><span class="FontName3">import org.junit.Before;</span><br><span class="FontName3">import org.junit.Test;</span><br><span class="FontName3">import org.junit.runner.RunWith;</span><br>&nbsp;<br><span class="FontName3">import org.springframework.beans.factory.annotation.Autowired;</span><br><span class="FontName3">import org.springframework.core.io.ClassPathResource;</span><br><span class="FontName3">import org.springframework.ldap.core.ContextMapper;</span><br><span class="FontName3">import org.springframework.ldap.core.ContextSource;</span><br><span class="FontName3">import org.springframework.ldap.core.DirContextAdapter;</span><br><span class="FontName3">import org.springframework.ldap.core.DistinguishedName;</span><br><span class="FontName3">import org.springframework.ldap.core.LdapTemplate;</span><br><span class="FontName3">import org.springframework.test.context.ContextConfiguration;</span><br><span class="FontName3">import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;</span><br>&nbsp;<br><span class="FontName3">@RunWith(SpringJUnit4ClassRunner.class )</span><br><span class="FontName3">@ContextConfiguration(locations= {"classpath:repositoryContext-test.xml"})</span><br><span class="FontName3">public class TestRepository {</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Autowired</span><br>&nbsp;&nbsp; <span class="FontName3">ContextSource contextSource;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Autowired</span><br>&nbsp;&nbsp; <span class="FontName3">LdapTemplate ldapTemplate;</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Before</span><br>&nbsp;&nbsp; <span class="FontName3">public void setup() throws Exception {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println("Inside the setup");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">LdapUnitUtils.loadData(contextSource, new ClassPathResource<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("employees.ldif"));</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@After</span><br>&nbsp;&nbsp; <span class="FontName3">public void teardown() throws Exception {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println("Inside the teardown");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">LdapUnitUtils.clearSubContexts(contextSource, new DistinguishedName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;("dc=inflinx,dc=com"));</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Test</span><br>&nbsp;&nbsp; <span class="FontName3">public void testMethod() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println(getCount(ldapTemplate));</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Test</span><br>&nbsp;&nbsp; <span class="FontName3">public void testMethod2() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">ldapTemplate.unbind(new DistinguishedName("uid=employee0,ou=employees,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dc=inflinx,dc=com"));</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println(getCount(ldapTemplate));</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Test</span><br>&nbsp;&nbsp; <span class="FontName3">public void testMethod3() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">System.out.println(getCount(ldapTemplate));</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">private int getCount(LdapTemplate ldapTemplate) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">List results = ldapTemplate.search("dc=inflinx,dc=com",<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(objectClass=inetOrgPerson)", new ContextMapper() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">@Override</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">public Object mapFromContext(Object ctx) {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">return ((DirContextAdapter)ctx).getDn();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">});</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">return results.size();</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
</div>
<p id="Sec8" class="Heading1">Mocking LDAP Using EasyMock<a id="cXXX.71p"></a></p>
<p class="noindent">In the previous section you looked at testing your LDAP code using an embedded LDAP server. Now lets look at testing LDAP code using the EasyMock framework.</p>
<p class="indent">EasyMock is an open source library that makes creating and using mock objects easy. Beginning with version 3.0, EasyMock natively supports mocking both interfaces and concrete classes. The latest version of EasyMock can be downloaded from <span class="FontName3"><a href="http://easymock.org/Downloads.html">http://easymock.org/Downloads.html</a></span>. In order to mock concrete classes, two additional libraries namely CGLIB and Objenesis are needed. <a id="cXXX.129"></a>Maven users can obtain the required jar files by simply adding the following dependency in their <span class="FontName3">pom.xml</span>:</p>
<pre><span class="FontName3">&lt;dependency&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">&lt;groupId&gt;org.easymock&lt;/groupId&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">&lt;artifactId&gt;easymock&lt;/artifactId&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">&lt;version&gt;3.2&lt;/version&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">&lt;scope&gt;test&lt;/scope&gt;</span><br><span class="FontName3">&lt;/dependency&gt;</span></pre>
<p class="indent">Creating a mock using EasyMock involves calling the <span class="FontName3">createMock</span> method on the <span class="FontName3">EasyMock</span> class. The following example creates a mock object for <span class="FontName3">LdapTemplate</span><a id="cXXX.130"></a>:</p>
<pre><span class="FontName3">LdapTemplate ldapTemplate = EasyMock.createMock(LdapTemplate. class);</span></pre>
<p class="indent">Each newly created mock object starts in the recording mode. In this mode you record the expected behavior or expectation of the mock. For example, you can tell the mock that if this method gets called, return this value. For example, the following code adds a new expectation to the <span class="FontName3">LdapTemplate</span> mock:</p>
<pre><span class="FontName3">EasyMock.expect(ldapTemplate.bind(isA(DirContextOperations. class)));</span></pre>
<p class="indent">In this code you are instructing the mock that a <span class="FontName3">bind</span> method<a id="cXXX.131"></a> will be invoked and an instance of <span class="FontName3">DirContextOperations</span> will be passed in as its parameter.</p>
<p class="indent">Once all the expectations are recorded, the mock needs to be able to replay these expectations. This is done by invoking the <span class="FontName3">replay</span> method<a id="cXXX.132"></a> on EasyMock and passing in the mock objects that needs to be replayed as parameters.</p>
<pre><span class="FontName3">EasyMock.replay(ldapTemplate);</span></pre>
<p class="indent">The mock object can now be used in test cases. Once the code under test completes its execution, you can verify if all the expectations on the mock are met. This is done by invoking the <span class="FontName3">verify</span> method<a id="cXXX.133"></a> on <span class="FontName3">EasyMock</span>.</p>
<pre><span class="FontName3">EasyMock.verify(ldapTemplate);</span></pre>
<p class="indent">Mocking can be especially useful for verifying context row mappers used in the search methods. As you have seen before, <a id="cXXX.134"></a>a row mapper implementation converts an LDAP context/entry into a Java domain object. Here is the method signature in the <span class="FontName3">ContextMapper</span> interface that performs the conversion:</p>
<pre><span class="FontName3">public Object mapFromContext(Object ctx)</span></pre>
<p class="indent">The <span class="FontName3">ctx</span> parameter in this method will typically be an instance of the <span class="FontName3">DirContextOperations</span> implementation. So, in order to unit test <span class="FontName3">ContextMapper</span> implementations, you need to pass in a mock <span class="FontName3">DirContextOperations</span> instance to the <span class="FontName3">mapFromContext</span> method. The mock <span class="FontName3">DirContextOperations</span> should return dummy but valid data so that the <span class="FontName3">ContextMapper</span> implementation can create a domain object from it. <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list13" id="_list13">Listing 4-13</a> shows the code to mock and populate a <span class="FontName3">DirContextOperations</span> instance. The <span class="FontName3">mockContextOperations</span> loops through the passed-in dummy attribute data and adds expectations for single- and multi-valued attributes.<a id="cXXX.135"></a></p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list13" id="list13"><b><i>Listing 4-13.</i></b></a></p>
<pre><span class="FontName3">public static DirContextOperations mockContextOperations(Map&lt;String, Object&gt; <br>attributes) {</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">DirContextOperations contextOperations = createMock(DirContextOperations.<br>&nbsp;&nbsp;&nbsp;class);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">for(Entry&lt;String, Object&gt; entry : attributes.entrySet()){</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">if(entry.getValue() instanceof String){</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">expect(contextOperations.getStringAttribute(eq(entry.<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getKey()))).andReturn((String)entry.getValue());</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">expectLastCall().anyTimes();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">else if(entry.getValue() instanceof String[]){</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">expect(contextOperations.</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">getStringAttributes(eq(entry.getKey()))).andReturn((String[])<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry.getValue());</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">expectLastCall().anyTimes();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">}</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">}</span><br>&nbsp;&nbsp; <span class="FontName3">return contextOperations;</span><br><span class="FontName3">}</span></pre>
<p class="indent">With this code in place, <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list14" id="_list14">Listing 4-14</a> shows the code that uses the <span class="FontName3">mockContextOperations</span> method for mock testing context row mapper.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list14" id="list14"><i><b>Listing 4-14</b></i></a>.<a id="cXXX.136"></a></p>
<pre><span class="FontName3">public class ContextMapperExample {</span><br>&nbsp;<br>&nbsp;&nbsp; <span class="FontName3">@Test</span><br>&nbsp;&nbsp; <span class="FontName3">public void testConextMapper() {</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">Map&lt;String, Object&gt; attributes = new HashMap&lt;String, Object&gt;();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">attributes.put("uid", "employee1");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">attributes.put("givenName", "John"); attributes.put("surname", "Doe");</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">attributes.put("telephoneNumber", new String[]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"8011001000","8011001001"});</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">DirContextOperations contextOperations = LdapMockUtils.mockContextOperations(attributes);</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="FontName3">replay(contextOperations);</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">//Now we can use the context operations to test a mapper</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">EmployeeContextMapper mapper = new EmployeeContextMapper();</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">Employee employee = (Employee)mapper.mapFromContext(contextOperations);</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">verify(contextOperations);</span><br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">// test the employee object</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">assertEquals(employee.getUid(), "employee1");</span><br>&nbsp;&nbsp;&nbsp;&nbsp; <span class="FontName3">assertEquals(employee.getFirstName(), "John");</span><br>&nbsp;&nbsp; <span class="FontName3">}</span><br><span class="FontName3">}</span></pre>
<p id="Sec9" class="Heading1">Test Data Generation</p>
<p class="noindent">For testing purposes, you often need to generate initial test data. OpenDJ provides a great command-line utility called make- ldif that makes generating test LDAP data a breeze. Please refer to <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch03.xhtml">Chapter 3</a> for instructions on installing OpenDJ. The command-line tools for Windows OS are located in the <span class="FontName3">bat</span> folder under the OpenDJ installation.</p>
<p class="indent">The make-ldif tool requires a template for creating test data. You will use the <span class="FontName3">patron.template</span> file shown in <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#list15" id="_list15">Listing 4-15</a> for generating patron entries.</p>
<p class="noindent2"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_list15" id="list15"><i><b>Listing 4-15</b></i></a>.<a id="cXXX.137"></a></p>
<pre><span class="FontName3">define suffix=dc=inflinx,dc=com</span><br><span class="FontName3">define</span> <span class="FontName3"><a href="http://maildomain%3Dinflinx.com/">maildomain=inflinx.com</a></span><br><span class="FontName3">define numusers=101</span><br>&nbsp;<br><span class="FontName3">branch: [suffix]</span><br>&nbsp;<br><span class="FontName3">branch: ou=patrons,[suffix]</span><br><span class="FontName3">subordinateTemplate: person:[numusers]</span><br>&nbsp;<br><span class="FontName3">template: person</span><br><span class="FontName3">rdnAttr: uid</span><br><span class="FontName3">objectClass: top</span><br><span class="FontName3">objectClass: person</span><br><span class="FontName3">objectClass: organizationalPerson</span><br><span class="FontName3">objectClass: inetOrgPerson</span><br><span class="FontName3">givenName: &lt;first&gt;</span><br><span class="FontName3">sn: &lt;last&gt;</span><br><span class="FontName3">cn: {givenName} {sn}</span><br><span class="FontName3">initials: {givenName:1}&lt;random:chars:ABCDEFGHIJKLMNOPQRSTUVWXYZ:1&gt;{sn:1}</span><br><span class="FontName3">employeeNumber: &lt;sequential:0&gt;</span><br><span class="FontName3">uid: patron&lt;sequential:0&gt;</span><br><span class="FontName3">mail: {uid}@[maildomain]</span><br><span class="FontName3">userPassword: password</span><br><span class="FontName3">telephoneNumber: &lt;random:telephone&gt;</span><br><span class="FontName3">homePhone: &lt;random:telephone&gt;</span><br><span class="FontName3">mobile: &lt;random:telephone&gt;</span><br><span class="FontName3">street: &lt;random:numeric:5&gt; &lt;file:streets&gt; Street</span><br><span class="FontName3">l: &lt;file:cities&gt;</span><br><span class="FontName3">st: &lt;file:states&gt;</span><br><span class="FontName3">postalCode: &lt;random:numeric:5&gt;</span><br><span class="FontName3">postalAddress: {cn}${street}${l}, {st} {postalCode}</span></pre>
<p class="indent">This is a simple modification to the <span class="FontName3">example.template</span> file that comes out of the box with the installation. The <span class="FontName3">example.template</span> is located in <span class="FontName3">&lt;OpenDJ_Install&gt;\config\MakeLDIF</span> folder. The <span class="FontName3">uid</span> has been modified to use the prefix patron instead of user. Also, the <span class="FontName3">numUsers</span> value has been changed to 101. This indicates the number of test users you would like the script to generate. To generate the test data, run the following command in a command line:</p>
<pre><span class="FontName3">C:\ practicalldap\opendj\bat&gt;make-ldif --ldifFile <br>c:\ practicalldap\testdata\patrons.ldif --templateFile <br>c:\ practicalldap\templates\patron.template --randomSeed 1</span></pre>
<p class="indent"> </p>
<ul class="bulleted">
<li>The <span class="FontName3">--ldifFile</span><a id="cXXX.138"></a> option is used to specify the target file location. Here you are storing it under the name <span class="FontName3">patrons.ldif</span> in the <span class="FontName3">testdata</span> directory</li>
<li>The <span class="FontName3">--templateFile</span><a id="cXXX.139"></a> is used to specify the template file to be used.</li>
<li>The <span class="FontName3">--randomSeed</span><a id="cXXX.140"></a> is an integer that needs to be used to seed the random number generator used during data generation.</li>
</ul>
<p class="indent">Upon successful creation, you will see a screen similar to <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#Fig1" id="_Fig1">Figure 4-1</a>. In addition to the 101 test entries, the script creates two additional base entries.</p>
<div class="Figure" id="Fig1">
<p class="img">
<img src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/9781430263975_Fig04-01.jpg" alt="9781430263975_Fig04-01.jpg" width="713" height="360" data-mfp-src="/library/view/practical-spring-ldap/9781430263975/images/9781430263975_Fig04-01.jpg"></p>
<p class="FigCapt"><span class="CaptNr">
<a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#_Fig1">Figure 4-1</a>. </span>Make LDIF command result</p>
</div>
<p id="Sec10" class="Heading1">Summary</p>
<p class="noindent">In this chapter, you took a deep dive into testing LDAP code. You started with an overview of testing concepts. Then you spent time setting up ApacheDS for embedded testing. Although embedded testing simplifies things, there are times where you want to test code, minimizing the need for external infrastructure dependencies. You can address those situations using mock testing. Finally, you used OpenDJ tools to generate test data.</p>
<p class="indent">In the next chapter, you will look at creating Data Access Objects (DAOs) that interact with LDAP using object factories.</p>
</div>
<div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch03.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">CHAPTER 3: Introducing Spring LDAP</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch05.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">CHAPTER 5: Advanced Spring LDAP</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          
          

          
            <p>You have 7 days left in your trial, Vrad201. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          
        
        

      </div>

    
    



        
      </div><script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1732687426968531");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1732687426968531&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/embed.js"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("set","agent","tmgoogletagmanager","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>
<script type="text/javascript" id="">window._pp=window._pp||[];if("\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Ch04.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Title.xhtml"=="https://learning.oreilly.com/register/")_pp.targetUrl="/confirm/trial";else if("\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Ch04.xhtml"=="/confirmation/nv/"&&"https:\/\/learning.oreilly.com\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Title.xhtml"=="https://learning.oreilly.com/subscribe/")_pp.targetUrl="/confirm/paid";else if("\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Ch04.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/practical-spring-ldap\/9781430263975\/9781430263975_Title.xhtml"=="https://learning.oreilly.com/signup/")_pp.targetUrl="/confirm/paid";_pp.siteId="2508";
_pp.siteUId="39a88cd5-54f5-4d61-aec6-7884d06dfba1";_pp.orderValue="undefined";_pp.orderId="undefined";(function(){var ppjs=document.createElement("script");ppjs.type="text/javascript";ppjs.async=true;ppjs.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.pbbl.co/r/"+_pp.siteId+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ppjs,s)})();</script><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.1550794677657077"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.14560020915341565" width="0" height="0" alt="" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/0"></div><iframe height="0" width="0" frameborder="0" style="display: none;" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/pp.html"></iframe>
      
        


<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/u/preferences/">Settings</a></li>
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright"> 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"applicationTime":151,"queueTime":2,"beacon":"bam.nr-data.net","agent":"","licenseKey":"510f1a6865","transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","applicationID":"172641827,79672898,93931619","errorBeacon":"bam.nr-data.net"}</script>

      
    
    <script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource" charset="utf-8"></script>
    <script src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource(1)" charset="utf-8"></script>
  

<iframe id="nr-ext-rsicon" style="position: absolute; display: none; width: 50px; height: 50px; z-index: 2147483647; border-style: none; background: transparent;" src="./CHAPTER 4_ Testing LDAP Code - Practical Spring LDAP_ Enterprise Java LDAP Development Made Easy_files/saved_resource(5).html"></iframe><div class="annotator-notice"></div><div class="font-flyout" style="top: 201.009px; left: 1119px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/practical-spring-ldap/9781430263975/9781430263975_Ch04.xhtml#">Reset</a>
</div>
</div><div></div><div></div><div id="eJOY__extension_root" style="all: unset;"></div></body><div class="XTranslate"></div></html>