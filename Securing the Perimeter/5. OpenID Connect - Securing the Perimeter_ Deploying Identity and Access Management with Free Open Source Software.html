<!DOCTYPE html>
<!-- saved from url=(0111)https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml -->
<html class="js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom fa-events-icons-ready" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="6866040" data-user-uuid="39a88cd5-54f5-4d61-aec6-7884d06dfba1" data-username="vrad201" data-account-type="Trial" data-activated-trial-date="04/04/2020" data-archive="9781484226018" data-publishers="Apress" data-htmlfile-name="425975_1_En_5_Chapter.xhtml" data-epub-title="Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781484226018"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script id="twitter-wjs" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widgets.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/cool-2.1.15.min.js"></script><script type="text/javascript" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/510f1a6865"></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/nr-1167.min.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ec.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/2508.js"></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/443792972845831" async=""></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/1732687426968531" async=""></script><script async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/fbevents.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/analytics.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/bat.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/insight.min.js"></script><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script crossorigin="anonymous" integrity="sha256-4ZnAISy2+rbOaVUOBtJrqxBTrJ5kctu9r4qBJBt0Oo0=" type="text/javascript" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/appcues.main.40a6b605d29a66b083aa6d74c07bb73eae19e31b.js" async=""></script><script async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/gtm.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"510f1a6865",applicationID:"172641827"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/css" rel="stylesheet" type="text/css"><title>5.&nbsp;OpenID Connect - Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software</title><link rel="stylesheet" href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/output.8054605313ed.css" type="text/css"><link rel="stylesheet" type="text/css" href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content a{text-decoration:none}#sbo-rt-content a:link,#sbo-rt-content a:active{color:#0176C3}#sbo-rt-content a:visited{color:#5f5f5f}#sbo-rt-content div{font-family:"Cambria","Minion Pro","Times New Roman","Times",serif;}#sbo-rt-content img{border:0;vertical-align:middle}#sbo-rt-content video{display:block;margin-top:1em;max-width:100%;text-indent:0;width:100%}#sbo-rt-content p{margin:0}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading,#sbo-rt-content .ContextInformation,#sbo-rt-content .MainTitleSection,#sbo-rt-content .PartTitle,#sbo-rt-content .SeriesTitle,#sbo-rt-content .SeriesSubTitle,#sbo-rt-content .SubSeriesTitle,#sbo-rt-content .SubSeriesSubTitle,#sbo-rt-content .BookTitle,#sbo-rt-content .BookSubTitle,#sbo-rt-content .ForewordTitle,#sbo-rt-content .PrefaceTitle,#sbo-rt-content .BookAcknowledgmentsTitle,#sbo-rt-content .BookNotesTitle{text-align:left !important}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading{display:block;font-weight:bold}#sbo-rt-content .ArticleContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ArticleContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ArticleContextInformation .JournalTitle:after,#sbo-rt-content .ArticleContextInformation .JournalSubTitle:after{content:", "}#sbo-rt-content .ArticleCopyright{display:inline}#sbo-rt-content .ArticleCopyright .CopyrightComment,#sbo-rt-content .ArticleContextInformation .ArticleDOI{display:block}#sbo-rt-content .ChapterContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ChapterContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ChapterCopyright .CopyrightComment{display:block}#sbo-rt-content .ChapterContextInformation .BookEdition:before{content:", "}#sbo-rt-content .ChapterContextInformation .ContextInformationAuthorEditorNames:after{content:", "}#sbo-rt-content .ChapterContextInformation .BookTitle{font-style:italic}#sbo-rt-content .ChapterContextInformation .SeriesTitle:before{content:", "}#sbo-rt-content .ChapterContextInformation .SeriesSubTitle:before{content:": "}#sbo-rt-content .ChapterContextInformation .ContextInformationVolumeNumber:before{content:" "}#sbo-rt-content .ChapterContextInformation .ChapterDOI{display:block}#sbo-rt-content .Categories{color:#666;margin-bottom:1em;margin-top:1em}#sbo-rt-content .ArticleCategory,#sbo-rt-content .ChapterCategory{font-size:1.2rem}#sbo-rt-content .ArticleSubCategory,#sbo-rt-content .ChapterSubCategory{font-size:1rem}#sbo-rt-content .MainTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1.2em}#sbo-rt-content .ArticleSuperTitle{font-size:1.2rem}#sbo-rt-content .MainTitleSection .ArticleTitle,#sbo-rt-content .ForeignLanguageHeader .ArticleTitle,#sbo-rt-content .MainTitleSection .ChapterTitle,#sbo-rt-content .ForeignLanguageHeader .ChapterTitle{font-size:1.73rem;margin:0}#sbo-rt-content .ArticleSubTitle,#sbo-rt-content .ChapterSubTitle{font-size:1.2rem;padding-top:.2em}#sbo-rt-content div>.AuthorGroup .AuthorNames,#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-size:100%;margin-bottom:1em;margin-top:1em;text-align:left !important}#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-weight:bold}#sbo-rt-content .AuthorNames sup{font-size:70%}#sbo-rt-content .Prefix:after{content:" "}#sbo-rt-content .Suffix:before{content:" "}#sbo-rt-content .Degrees:before{content:", "}#sbo-rt-content .NativeName:before,#sbo-rt-content .Role:before{content:" ("}#sbo-rt-content .NativeName:after,#sbo-rt-content .Role:after{content:")"}#sbo-rt-content .AffiliationNumber{float:left;padding-right:.5em}#sbo-rt-content .AffiliationText{margin-left:2em}#sbo-rt-content .AffiliationHint{font-style:italic}#sbo-rt-content .AuthorNames .DeceasedSymbol:before{content:"†";padding-left:3px}#sbo-rt-content .AuthorNames .EqualContributionSymbol:before{content:"*";padding-left:3px}#sbo-rt-content .InstitutionMembers:before{content:" ("}#sbo-rt-content .InstitutionMembers:after{content:")"}#sbo-rt-content .AffiliationLegend .DeceasedSymbol:before{content:"†";display:inline-block;width:14px}#sbo-rt-content .AffiliationLegend .EqualContributionSymbol:before{content:"*";display:inline-block;width:14px}#sbo-rt-content .ClearBoth{clear:both;font-size:0;line-height:0 !important}#sbo-rt-content .Contact,#sbo-rt-content .AffiliationLegend{margin-bottom:1em;margin-top:1em}#sbo-rt-content .ContactIcon{background-image:url(envelope.png);background-repeat:no-repeat;background-size:contain;width:.8rem}#sbo-rt-content .AuthorNames .ContactIcon{display:inline-block}#sbo-rt-content .Contact .ContactIcon{float:left;margin-top:4px;margin-right:4px}#sbo-rt-content .ContactAuthorLine{padding-left:20px;font-weight:bold}#sbo-rt-content .ContactAdditionalLine{padding-left:20px}#sbo-rt-content .ContactType{font-weight:bold}#sbo-rt-content .ArticleHistory{margin-bottom:1em;margin-top:1em}#sbo-rt-content .HistoryLabel{font-weight:bold}#sbo-rt-content .History+.History{padding-left:.5em}#sbo-rt-content .ArticleOrChapterToc{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .ArticleOrChapterToc .HeadingNumber{font-weight:bold;padding-right:.3em}#sbo-rt-content .Abstract{margin-top:1em}#sbo-rt-content .Abstract>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbstractSection{margin-top:.3em}#sbo-rt-content .Heading+.AbstractSection{margin-top:0}#sbo-rt-content .AbstractSection>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin:0}#sbo-rt-content .KeywordGroup{margin-top:1em}#sbo-rt-content .KeywordGroup .Heading{display:inline;font-size:1em;margin:0;padding-right:.5em}#sbo-rt-content .Keyword+.Keyword:before{content:" – "}#sbo-rt-content .ArticleExternalID{margin-top:1em}#sbo-rt-content .ArticleExternalIDLabel{font-weight:bold}#sbo-rt-content .ForeignLanguageHeader{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ForeignLanguageTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1rem}#sbo-rt-content .AbbreviationGroup{margin-top:1em}#sbo-rt-content .ForeignLanguageHeader+.AbbreviationGroup{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .AbbreviationGroup>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbbreviationGroup .DefinitionList{margin-top:0;margin-bottom:0;padding-right:.1em;padding-top:.1em;padding-bottom:.1em}#sbo-rt-content .AbbreviationGroupSection>.Heading{font-size:1em;margin:0;padding-top:.2em}#sbo-rt-content .ArticleNote{margin-top:1em}#sbo-rt-content .ArticleNote>.Heading{font-size:1em;margin:0}#sbo-rt-content .ArticleNoteMotto{font-style:italic;margin-left:1.5em;margin-right:1.5em;text-align:right}#sbo-rt-content .Biography{display:block;margin-top:.8em;padding-bottom:0;width:100%}#sbo-rt-content .Loc .AuthorGroup .Biography{margin-top:0}#sbo-rt-content .Biography .FormalPara,#sbo-rt-content .Biography .BiographyFigure{display:block;margin-top:0;margin-bottom:0}#sbo-rt-content .Biography .BiographyFigure{float:right;margin-left:6px}#sbo-rt-content .Biography .Figure{border-bottom:none;margin-top:.5em;margin-bottom:0}#sbo-rt-content .Fulltext>.Para:first-of-type>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .BlockQuote{margin:1em 1.5em}#sbo-rt-content .BlockQuote>.Heading{font-size:1em;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .BlockQuote>.Para{text-indent:0}#sbo-rt-content .Heading+.Para>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .Caption,#sbo-rt-content .TableFooter{display:block;text-align:left}#sbo-rt-content .TableFooter .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .Caption{margin-top:.5em}#sbo-rt-content .CaptionContent{font-size:90%}#sbo-rt-content .TableFooter{margin-top:1em}#sbo-rt-content .Table .Caption{margin-top:.5em}#sbo-rt-content .Figure .Caption,#sbo-rt-content video+.Caption{margin-bottom:1em}#sbo-rt-content .Table .Caption{margin-bottom:.5em}#sbo-rt-content .CaptionNumber{font-style:italic;font-weight:bold;padding-right:.6em}#sbo-rt-content .CaptionContent>span.Heading{display:inline}#sbo-rt-content .CaptionContent>span.SimplePara{display:block}#sbo-rt-content .CaptionContent>.SimplePara:first-child,#sbo-rt-content .CaptionContent>.CaptionNumber+.SimplePara,#sbo-rt-content .CaptionContent>a+.SimplePara{display:inline;margin-top:0}#sbo-rt-content .Credit>.SimplePara{text-indent:1.5em}#sbo-rt-content .DefinitionList{margin-top:1em;margin-bottom:1em;padding:.1em}#sbo-rt-content .DefinitionList>.Heading{font-size:1rem;margin:0;text-indent:0}#sbo-rt-content dl{margin:0}#sbo-rt-content .DefinitionList:after{content:"";clear:both;display:table}#sbo-rt-content .Term{clear:both;float:left;font-style:italic;padding-right:1em;text-indent:0;vertical-align:top}#sbo-rt-content .Description{padding-bottom:.3em;margin-left:0}#sbo-rt-content .Description .Para:first-child{text-indent:0}#sbo-rt-content .Heading+.Para>div.DefinitionList:first-child{margin-top:0}#sbo-rt-content .EmphasisTypeBold{font-weight:bold}#sbo-rt-content .EmphasisTypeItalic{font-style:italic}#sbo-rt-content .EmphasisTypeUnderline{text-decoration:underline}#sbo-rt-content .EmphasisTypeDoubleUnderline{border-bottom-style:double}#sbo-rt-content .EmphasisTypeSmallCaps{font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalic{font-weight:bold;font-style:italic}#sbo-rt-content .EmphasisTypeBoldUnderline{font-weight:bold;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldDoubleUnderline{font-weight:bold;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldSmallCaps{font-weight:bold;font-variant:small-caps}#sbo-rt-content .EmphasisTypeItalicUnderline{font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeItalicDoubleUnderline{font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeItalicSmallCaps{font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalicUnderline{font-weight:bold;font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldItalicDoubleUnderline{font-weight:bold;font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldItalicSmallCaps{font-weight:bold;font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeUnderlineSmallCaps{text-decoration:underline;font-variant:small-caps}#sbo-rt-content .EmphasisTypeDoubleUnderlineSmallCaps{border-bottom-style:double;font-variant:small-caps}#sbo-rt-content .EmphasisFontCategoryNonProportional{font-family:"Courier New",Courier,monospace}#sbo-rt-content :not(.ParaTypeProgramcode)>.EmphasisFontCategoryNonProportional{font-size:95%}#sbo-rt-content .EmphasisFontCategorySansSerif{font-family:"Arial","Helvetica",sans-serif;font-size:75%}#sbo-rt-content .EmphasisTypeStrikethrough{text-decoration:line-through}#sbo-rt-content .Equation{display:block;text-indent:0;vertical-align:middle}#sbo-rt-content .NumberedEquation{display:table;width:100%}#sbo-rt-content .NumberedEquation .EquationWrapper{display:table-row}#sbo-rt-content .NumberedEquation .EquationContent{display:table-cell}#sbo-rt-content .EquationContent{margin-top:.5em;margin-bottom:0;width:100%;text-align:center;text-indent:0;vertical-align:middle}#sbo-rt-content .EquationContent div{margin-top:.5em}#sbo-rt-content .EquationContent .MediaObject{margin-left:auto;margin-right:auto}#sbo-rt-content .EquationContent img{background:white;max-width:100%}#sbo-rt-content .EquationNumber{display:table-cell;margin-bottom:.4em;text-align:right;vertical-align:middle}#sbo-rt-content .EquationSourceXml{white-space:nowrap}#sbo-rt-content .InlineEquation img{background:white;vertical-align:text-top}#sbo-rt-content .Figure{margin-top:1em;margin-bottom:1em;margin-left:0;margin-right:0;text-align:center;text-indent:0}#sbo-rt-content .Figure img{height:auto;margin:0;max-width:100%;padding:2px}#sbo-rt-content .MediaObject{display:block;text-align:center}#sbo-rt-content .MediaObject:last-child{margin-bottom:1em}#sbo-rt-content .EquationContent>.MediaObject:last-child{margin-bottom:0}#sbo-rt-content .MediaObject+.MediaObject{margin-top:1em}#sbo-rt-content .FootnoteSection{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .FootnoteSection>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Footnote{clear:both;font-size:90%;text-align:left}#sbo-rt-content .FootnoteNumber{float:left;padding-right:.5em}#sbo-rt-content .FootnoteParas>div{margin-left:1em;margin-top:.3em}#sbo-rt-content .FormalPara{margin-top:1em;margin-bottom:1em}#sbo-rt-content .FormalPara .Heading{font-size:1em;margin:0}#sbo-rt-content .FormalParaRenderingStyle1>.Heading{display:inline;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle2>.Heading{display:inline;font-style:italic;font-weight:normal;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle3>.Heading{padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle1>p:first-of-type,#sbo-rt-content .FormalParaRenderingStyle2>p:first-of-type{display:inline}#sbo-rt-content .Heading+.FormalPara{margin-top:0}#sbo-rt-content .FormalPara .AuthorNames{font-style:italic;font-weight:normal !important}#sbo-rt-content .HeadingNumber{padding-right:.3em}#sbo-rt-content .RenderAsSection1>.Heading{font-size:1.44rem;margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .RenderAsSection2>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section2>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection3>.Heading{font-size:1.2rem;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section3>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection4>.Heading{font-size:100%;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section4>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection5>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section5>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection6>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section6>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection7>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section7>.Heading:first-child{margin-top:0}#sbo-rt-content .Literal{font-family:"Courier New",Courier,monospace}#sbo-rt-content .OrderedList{margin-top:.5em;margin-bottom:.5em;text-indent:0;display:table}#sbo-rt-content .OrderedList>ol{margin:0;padding:0}#sbo-rt-content .OrderedList .Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0;display:table-caption}#sbo-rt-content .OrderedList .Heading+.ListItem{margin-top:0}#sbo-rt-content .Heading+.Para>div.OrderedList:first-child,#sbo-rt-content .Heading+.Para>div.OrderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .ListItem{margin-top:.5em;display:table-row}#sbo-rt-content .ItemNumber{padding-right:.5em;display:table-cell;vertical-align:top}#sbo-rt-content .ItemContent{display:table-cell}#sbo-rt-content .Fulltext>.Para:first-of-type{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .Fulltext>.Para~.Para:first-of-type{border-top:none;margin-top:0;padding-top:0}#sbo-rt-content .Para+.Para{margin-top:0;text-indent:1.5em}#sbo-rt-content .ParaTextBreak{margin-top:1em !important;text-indent:0 !important}#sbo-rt-content .ParaTypeExample{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:1em}#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeTip{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:.5em}#sbo-rt-content .ParaTypeImportant{background:#bbb;border:2px solid;padding:.5em;margin-top:.8em !important;margin-bottom:.8em}#sbo-rt-content .ParaTypeImportant img{background-color:transparent}#sbo-rt-content .ParaTypeGeneticSequence,#sbo-rt-content .ParaTypeLiteral,#sbo-rt-content .ParaTypeProgramcode{font-family:"Courier New",Courier,monospace;font-size:95%}#sbo-rt-content .ParaTypeProgramcode{text-indent:0 !important;word-wrap:break-word}#sbo-rt-content .Para:not(.ParaTypeProgramcode)+.ParaTypeProgramcode{margin-top:.5em}#sbo-rt-content .ParaTypeProgramcode+.Para:not(.ParaTypeProgramcode){margin-top:.5em}#sbo-rt-content .ParaTypeLegalText{font-weight:bold;margin-left:1em;text-align:left}#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .ParaTypeSource{font-style:italic}#sbo-rt-content .ParaTypeTrailer,#sbo-rt-content .ParaTypeLearningGoals{font-weight:bold;padding-left:.5em;padding-right:.5em}#sbo-rt-content .ParaTypeWarning{font-weight:bold}#sbo-rt-content .ParaTypeExample,#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeImportant,#sbo-rt-content .ParaTypeLegalText,#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeTip,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{text-indent:0 !important}#sbo-rt-content .Para+.ParaOneEmphasisChild{margin-top:1em;text-indent:0 !important}#sbo-rt-content .ParaOneEmphasisChild+.Para{text-indent:0 !important}#sbo-rt-content .PartNumber{display:block;font-size:1.73rem}#sbo-rt-content .PartTitle{display:block;font-size:1.73rem}#sbo-rt-content .SubPartTitle{display:block;font-size:1.44rem}#sbo-rt-content .ProgramCode{margin-top:1em;margin-bottom:1em}#sbo-rt-content .ProgramCode .FixedLine{font-family:"Courier New",Courier,monospace;font-size:95%;word-wrap:break-word}#sbo-rt-content .LineGroup+.LineGroup{margin-top:1em}#sbo-rt-content .Heading+.Para>.Quiz>.Heading{margin-top:0;}#sbo-rt-content .Quiz .Heading{font-size:1rem;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .QuizTask{display:table;margin-top:.5em;margin-bottom:.5em;width:100%;text-indent:0}#sbo-rt-content .QuizTask+.QuizTask{margin-top:1.5em}#sbo-rt-content .QuizItem{padding:.1em}#sbo-rt-content .QuizItemTypeSolution{border:2px solid #aaa;margin-top:.5em;padding:10px}#sbo-rt-content .QuizTask>input{display:none}#sbo-rt-content .QuizItem>label{color:#0176C3}#sbo-rt-content .QuizTask>input~.QuizItem>label+div{display:none}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label+div{display:table-cell}#sbo-rt-content .QuizTask>input~.QuizItem>label:after{content:"  »"}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label:after{content:"  «"}#sbo-rt-content .QuizTask>input~.QuizItemTypeCorrectAnswer{background-color:transparent;transition:background .4s}#sbo-rt-content .QuizTask>input:checked~.QuizItemTypeCorrectAnswer{background-color:#EAF2DB;transition:background .4s}#sbo-rt-content .ReviewTitle{font-weight:bold;margin-top:1em;text-indent:0}#sbo-rt-content .Review .AuthorName+.AuthorName:before{content:", "}#sbo-rt-content .Review .ISBN,#sbo-rt-content .ReviewDataUnstructured{text-indent:0}#sbo-rt-content .Review .Para:first-of-type{margin-top:1em;text-indent:0}#sbo-rt-content .BookBackmatter>.Appendix:first-child>div:first-child{border-top:none !important;margin-top:0 !important;padding-top:0 !important}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child,#sbo-rt-content .BookNotesBody>.RenderAsSection1:first-child,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child,#sbo-rt-content .BookBackmatter>.Appendix:first-child>.RenderAsSection1:first-child{border-top:none;margin-top:0}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child>.Heading{margin-top:0}#sbo-rt-content .Section1 .AuthorNames,#sbo-rt-content .Section2 .AuthorNames,#sbo-rt-content .Section3 .AuthorNames{font-weight:bold;margin-top:.3em;margin-bottom:.5em}#sbo-rt-content .Section1 .AuthorNames sup,#sbo-rt-content .Section2 .AuthorNames sup,#sbo-rt-content .Section3 .AuthorNames sup{font-size:70%}#sbo-rt-content .Section1 .Affiliations,#sbo-rt-content .Section2 .Affiliations,#sbo-rt-content .Section3 .Affiliations{margin-bottom:.5em}#sbo-rt-content .SectionTypeBackgroundInformation,#sbo-rt-content .SectionTypeExcurse{font-size:90%}#sbo-rt-content .SectionTypeBox,#sbo-rt-content .SectionTypeOverview,#sbo-rt-content .SectionTypeQuestionnaire{background-color:#BBB;margin-top:1em !important;padding:.5em}#sbo-rt-content .SectionTypeCaseStudy,#sbo-rt-content .SectionTypeExample,#sbo-rt-content .SectionTypeTip{border-left:4px solid;margin-top:1em !important;padding-top:0;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}#sbo-rt-content .SectionTypeTrailer,#sbo-rt-content .SectionTypeLearningGoals{font-weight:bold;text-align:left}#sbo-rt-content .SectionTypeLegalText{font-weight:bold;margin-left:1em;text-align:left;text-indent:0 !important}#sbo-rt-content .SectionTypeProcedure,#sbo-rt-content .SectionTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .SectionTypeWarning{font-weight:bold}#sbo-rt-content .RenderAsSection1{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .SectionTypeBox+.RenderAsSection1,#sbo-rt-content .SectionTypeOverview+.RenderAsSection1,#sbo-rt-content .SectionTypeQuestionnaire+.RenderAsSection1{border-top:0;}#sbo-rt-content .SectionTypeBox>.Heading,#sbo-rt-content .SectionTypeOverview>.Heading,#sbo-rt-content .SectionTypeQuestionnaire>.Heading,#sbo-rt-content .SectionTypeProcedure>.Heading,#sbo-rt-content .SectionTypeRecipe>.Heading{margin-top:0}#sbo-rt-content .InternalRefSidebarLexicon{background-image:url(sidebar.gif);background-repeat:no-repeat;font-weight:bold;padding-left:20px}#sbo-rt-content .SidebarDialog{border:1px solid;margin-left:1.5em;margin-top:.4em;margin-bottom:.2em;padding:.2em;text-indent:0}#sbo-rt-content .SidebarNumber{font-weight:bold;padding-right:.5em}#sbo-rt-content .SimplePara+.SimplePara{margin-top:0;text-indent:1.5em}#sbo-rt-content .Stack{display:inline-table;vertical-align:top}#sbo-rt-content .Stack sub{display:table-row}#sbo-rt-content .Stack sup{display:table-header-group}#sbo-rt-content table{border-collapse:collapse;font-size:80%;max-width:100%;text-indent:0}#sbo-rt-content table .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content table,#sbo-rt-content tr,#sbo-rt-content td{border-color:#bbb !important}#sbo-rt-content th{border-color:#999 !important}#sbo-rt-content thead{background:#bbb;color:#000 !important}#sbo-rt-content .Table{margin-bottom:1em;text-indent:0}#sbo-rt-content .Caption .Table{margin-bottom:0}#sbo-rt-content .Table img{height:auto;margin:0;max-width:100%}#sbo-rt-content th div{text-align:left}#sbo-rt-content td div,#sbo-rt-content td p,#sbo-rt-content th div,#sbo-rt-content th p{padding:.2em}#sbo-rt-content .Para+.Table,#sbo-rt-content .Para>.Table{margin-top:1em}#sbo-rt-content .SimplePara>.Table{margin-top:.5em}#sbo-rt-content thead,#sbo-rt-content tdiv{vertical-align:top}#sbo-rt-content tbody+tbody tr:first-child td{padding-top:1em}#sbo-rt-content .ExternalTable{background-color:#F8F8F8;border-top:1px solid;border-bottom:1px solid;margin-top:1em;margin-bottom:1em;padding-top:0;padding-bottom:0}#sbo-rt-content .ExternalTable .Table{padding-bottom:.3em}#sbo-rt-content .UnorderedList>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0}#sbo-rt-content .Heading+.Para>div.UnorderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .UnorderedList li .Para:first-child{text-indent:0}#sbo-rt-content .Heading+ul{margin-top:0}#sbo-rt-content ul{margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.UnorderedListMarkBullet{list-style-type:disc;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkBullet div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkBullet .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkNone{list-style-type:none;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkNone div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkNone .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkDash{list-style:none;padding-left:1.1em;text-indent:-.8em}#sbo-rt-content ul.UnorderedListMarkDash>li>*:first-child{display:inline}#sbo-rt-content ul.UnorderedListMarkDash div{text-indent:0;margin-top:.3em;margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkDash>li:before{content:"– "}#sbo-rt-content .Verse{margin-top:1em;margin-bottom:1em}#sbo-rt-content .Verse .Heading{font-size:1rem;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content .Acknowledgments,#sbo-rt-content .AuthorContribution,#sbo-rt-content .Ethics{margin-top:1em}#sbo-rt-content .Acknowledgments>.Heading,#sbo-rt-content .AuthorContribution>.Heading,#sbo-rt-content .FundingInformation>.Heading,#sbo-rt-content .DataAvailability>.Heading,#sbo-rt-content .Ethics>.Heading{font-size:1.2rem;margin-bottom:0}#sbo-rt-content .License{font-size:.9rem !important;margin-top:1em;margin-bottom:1em}#sbo-rt-content .License>a:first-child img{float:left;height:1.9rem;padding-right:.5em;padding-bottom:0;padding-top:.2em}#sbo-rt-content .Glossary{border-top:1px solid #bbb;margin-top:1em;margin-bottom:1em;padding-top:.3em}#sbo-rt-content .Glossary .Headings{margin-top:.8em;margin-bottom:.8em}#sbo-rt-content .Glossary>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Glossary>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .GlossarySection .Headings{margin-top:.8em;margin-bottom:.4em}#sbo-rt-content .GlossarySection>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .GlossarySection>.Headings>.SubHeading{font-size:100%}#sbo-rt-content .GlossaryTerm{float:left;font-style:italic;padding-right:.5em}#sbo-rt-content .GlossarySeeLabel,#sbo-rt-content .GlossarySeeAlsoLabel{font-style:italic;padding-right:.3em}#sbo-rt-content .GlossaryDef{display:inline;margin-top:.3em}#sbo-rt-content .GlossaryDef>.SimplePara,#sbo-rt-content .GlossaryDef>.GlossarySee,#sbo-rt-content .GlossaryDef>.GlossarySeeAlso{display:block}#sbo-rt-content .GlossaryDef>:first-child{display:inline;margin-top:0;margin-left:0}#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySee,#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySeeAlso{text-indent:0}#sbo-rt-content .GlossaryTerm{display:inline}#sbo-rt-content .GlossaryTerm+.GlossarySee,#sbo-rt-content .GlossaryTerm+.GlossarySeeAlso{display:inline}#sbo-rt-content .InternalRefGlossaryEntry{border-bottom:thin dotted;cursor:help}#sbo-rt-content .InternalRefGlossaryEntry:hover{border-bottom:none}#sbo-rt-content .InternalRefGlossaryEntry a:link,#sbo-rt-content .InternalRefGlossaryEntry a:active,#sbo-rt-content .InternalRefGlossaryEntry a:visited{color:inherit}#sbo-rt-content .InternalRefGlossaryEntry .InlineGlossaryDefinition{background:#fff;display:none;margin:0 3em 0 2em;padding:3px 3px 3px 6px;border-style:solid;border-color:#49546F;border-width:2px;border-radius:5px;box-shadow:5px 5px 5px #888}#sbo-rt-content .InternalRefGlossaryEntry:hover .InlineGlossaryDefinition{display:block;z-index:6}#sbo-rt-content .TocAppendix{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .BookContextInformation+.Appendix>.TocAppendix:first-child{border-top:none;padding-top:0}#sbo-rt-content .TocAppendix .Headings{margin-bottom:.5em}#sbo-rt-content .TocAppendix>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .TocAppendix>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .TocEntry,#sbo-rt-content .TocPart,#sbo-rt-content .TocBack{margin-top:.5em;text-align:left !important}#sbo-rt-content .TocItem{font-weight:bold}#sbo-rt-content .TocPageNumber{display:none}#sbo-rt-content .TocAuthors{padding-left:1.5em}#sbo-rt-content .TocSection1,#sbo-rt-content .TocSection2,#sbo-rt-content .TocSection3,#sbo-rt-content .TocSection4,#sbo-rt-content .TocSection5,#sbo-rt-content .TocSection6,#sbo-rt-content .TocSection7{padding-left:1.5em}#sbo-rt-content .Index{border-top:1px solid #bbb;margin-top:1em;padding-top:.3em;margin-bottom:.8em}#sbo-rt-content .BookBackmatter>.Index:first-child{border-top:none;margin-top:0}#sbo-rt-content .Index .Headings{margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BookBackmatter>.Index:first-child>.Headings{margin-top:0}#sbo-rt-content .Index>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Index>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .IndexDiv .Headings{margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .IndexDiv>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .IndexDiv>.Headings>.SubHeading{font-size:100%;font-style:italic}#sbo-rt-content .IndexEntrySeeLabel{font-style:italic;margin-left:1em;padding-right:.3em}#sbo-rt-content .SecondaryIE{margin-left:1em}#sbo-rt-content .TertiaryIE{margin-left:2em}#sbo-rt-content .ChangeHistory{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ChangeHistory>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.3em}#sbo-rt-content .ChangeDate{font-weight:bold;padding-right:1em}#sbo-rt-content .ChangeDetails{display:inline}#sbo-rt-content .ChangeDetails>p:first-of-type{display:inline}#sbo-rt-content .Bibliography{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .BookBackmatter>.Bibliography:first-child{border-top:none}#sbo-rt-content .Bibliography>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BibliographyWrapper{display:table;margin:0;padding:0}#sbo-rt-content .Bibliography>.BibliographyWrapper{padding-top:1em}#sbo-rt-content .Bibliography>.Heading+.BibliographyWrapper{padding-top:0}#sbo-rt-content .BibSection>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.2em}#sbo-rt-content .BibliographyWrapper>.BibSection:first-child>.Heading:first-child{margin-top:.3em}#sbo-rt-content .Citation{display:table-row;font-size:90%}#sbo-rt-content .CitationNumber{display:table-cell}#sbo-rt-content .CitationNumber+.CitationContent{padding-left:.5em;text-align:left}#sbo-rt-content .CitationContent{padding-top:1em;display:table-cell}#sbo-rt-content .BibliographyWrapper>.Citation:first-child>.CitationContent{padding-top:0}#sbo-rt-content .Occurrences{display:block}#sbo-rt-content .Occurrence{margin-right:0}#sbo-rt-content .Occurrence:before{content:"["}#sbo-rt-content .Occurrence:after{content:"]"}#sbo-rt-content .Citation .ArticleTitle:before,#sbo-rt-content .Citation .ChapterTitle:before{content:" “";}#sbo-rt-content .Citation .ArticleTitle,#sbo-rt-content .Citation .ChapterTitle{display:inline}#sbo-rt-content .Citation .ArticleTitle:after{content:"”\ ";}#sbo-rt-content .Citation .ChapterTitle:after{content:"”\ In: ";}#sbo-rt-content .Citation .Year:before{content:" ("}#sbo-rt-content .Citation .Year:after{content:") "}#sbo-rt-content .Citation .JournalTitle:after{content:" "}#sbo-rt-content .Citation .VolumeID:after{content:":"}#sbo-rt-content .BibChapter .FirstPage:before,#sbo-rt-content .BibBook .FirstPage:before{content:", pp "}#sbo-rt-content .Citation .FirstPage+.LastPage:before{content:"–";}#sbo-rt-content .Citation .BookTitle:after,#sbo-rt-content .Citation .BibEditorName:after,#sbo-rt-content .Citation .EditionNumber:after,#sbo-rt-content .Citation .PublisherName:after{content:", "}#sbo-rt-content .BibComments{display:block}#sbo-rt-content .CoverFigure img{margin:0 auto 6px;width:100%;max-width:480px;height:auto}#sbo-rt-content .SeriesTitlePage{padding-bottom:1.5em;padding-top:1em}#sbo-rt-content .SeriesTitlePage .VolumeNumber{font-size:1.44rem}#sbo-rt-content .SeriesTitlePage span.SeriesTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SeriesSubTitle{display:block;font-size:1.44rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .SubSeriesTitle{display:block;font-size:1.44rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SubSeriesSubTitle{display:block;font-size:1.2rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .CollaboratorDesignation{display:block;font-weight:bold;padding-top:3em}#sbo-rt-content .SeriesTitlePage .Collaborators{display:block}#sbo-rt-content .SeriesTitlePage .AffiliationText{font-style:italic;margin-left:0}#sbo-rt-content .SeriesTitlePage .Affiliation+.CollaboratorName{display:inline-block;margin-top:1em}#sbo-rt-content .SeriesInformationText{padding-top:3em}#sbo-rt-content .BookTitlePage{padding-top:1em}#sbo-rt-content .BookTitlePageAfterSeriesTitlePage{border-top:1px solid #bbb;page-break-before:always}#sbo-rt-content .BookContextInformation+.BookTitlePage{border-top:none;padding-top:0}#sbo-rt-content .BookTitlePage .BookEditors,#sbo-rt-content .BookTitlePage .BookAuthors,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{text-align:left !important}#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{margin-top:1em}#sbo-rt-content .BookTitlePage .BookEditorGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup .CollaboratorDesignation{font-style:italic}#sbo-rt-content .BookTitlePage .BookTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:1em}#sbo-rt-content .BookTitlePage .BookSubTitle{display:block;font-size:1.44rem;font-weight:bold;margin-bottom:.5em}#sbo-rt-content .BookTitlePage .BookEdition{display:block;font-size:1rem;font-weight:normal;margin-top:.5em}#sbo-rt-content .BookTitlePage .CollaboratorLine{padding-top:.5em}#sbo-rt-content .BookFeatureText{margin-top:.5em}#sbo-rt-content .BookTitlePage .PublisherLogo .Figure,#sbo-rt-content .BookTitlePage .PublisherImprintName{font-size:1.2rem;margin-top:4em;margin-bottom:1.5em;text-align:left}#sbo-rt-content .CopyrightPage{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .CopyrightPage .CollaboratorDesignation{display:block;font-style:italic;padding-bottom:.5em}#sbo-rt-content .CopyrightPageOriginators{padding-bottom:4em}#sbo-rt-content .CopyrightPage div+.CollaboratorDesignation{padding-top:2em}#sbo-rt-content .CopyrightPage .EditorGroup+.AuthorGroup{padding-top:2em}#sbo-rt-content .CopyrightPage .Author+.Author,#sbo-rt-content .CopyrightPage .Author+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.Author,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .Editor+.Editor,#sbo-rt-content .CopyrightPage .Editor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.Editor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .Collaborator+.Collaborator{padding-top:1em}#sbo-rt-content .CopyrightPage .Affiliation{margin-top:0}#sbo-rt-content .CopyrightPage .AffiliationText{margin-left:0}#sbo-rt-content .CopyrightPage .CollaboratorLine{padding-top:1em}#sbo-rt-content .CopyrightPage .CollaboratorLineTranslatedBy{padding-top:2em}#sbo-rt-content .CopyrightPage .CollaboratorLine .CollaboratorDesignation{display:inline;font-style:normal}#sbo-rt-content .BookFrontmatter .CopyrightPage .ArticleNoteESMHint{border:none;padding-bottom:0;page-break-before:auto}#sbo-rt-content .CopyrightPageISBNs,#sbo-rt-content .CopyrightPageISSNs,#sbo-rt-content .SpringerLocationsLine,#sbo-rt-content .CatalogingInformation,#sbo-rt-content .MathematicsSubjectClassification,#sbo-rt-content .CopyrightLine,#sbo-rt-content .CopyrightPage .CopyrightComment,#sbo-rt-content .BookCopublishingInformation .SimplePara,#sbo-rt-content .CopyrightStandardText,#sbo-rt-content .TrademarkQualifierText,#sbo-rt-content .ProductLiability,#sbo-rt-content .LegalNotice,#sbo-rt-content .CoverDesigner,#sbo-rt-content .BookCoverFigureText,#sbo-rt-content .PaperInfo,#sbo-rt-content .SpringerReferenceLine{margin-top:1em}#sbo-rt-content .CopyrightComment+.CopyrightLine{margin-top:.5em}#sbo-rt-content .SeriesTitle+.CopyrightPageISBNs,#sbo-rt-content .SubSeriesTitle+.CopyrightPageISBNs{margin-top:0}#sbo-rt-content .CopyrightPage .SeriesTitle{display:block;margin-top:1em}#sbo-rt-content .SeriesTitle+.CopyrightPageISSNs,#sbo-rt-content .CopyrightPageISSNs+.SeriesTitle,#sbo-rt-content .CopyrightPageISSNs+.SubSeriesTitle{margin-top:0}#sbo-rt-content .CopyrightPagePrintISSN,#sbo-rt-content .CopyrightPagePrintISBN{display:inline-block;min-width:12em}#sbo-rt-content .SpringerReferenceLine .SimplePara+.SimplePara,#sbo-rt-content .BookCoverFigureText .SimplePara+.SimplePara,#sbo-rt-content .BookCopublishingInformation .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .CopyrightPagePrintISSN+.CopyrightPageElectronicISSN{padding-left:1.5em}#sbo-rt-content .CopyrightPagePrintISBN+.CopyrightPageElectronicISBN{padding-left:1.5em}#sbo-rt-content .CopyrightComment .SimplePara+.SimplePara{padding-top:.5em;text-indent:0}#sbo-rt-content .MathematicsSubjectClassificationCode+.MathematicsSubjectClassificationCode:before{content:", "}#sbo-rt-content .Endorsement{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Frontispiece{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Dedication{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Foreword{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter h1:first-child+.Foreword{border-top:none;padding-top:0;page-break-before:auto}#sbo-rt-content .ForewordTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Foreword .AuthorName{margin-top:.2em}#sbo-rt-content .Foreword .AuthorName,#sbo-rt-content .ForewordLocations,#sbo-rt-content .ForewordDate{font-weight:bold;text-align:right}#sbo-rt-content .ForewordLocation+.ForewordLocation:before{content:", "}#sbo-rt-content .Foreword .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Foreword .RenderAsSection2>.Heading,#sbo-rt-content .Foreword .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .Preface{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PrefaceTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Preface .AuthorName{margin-top:.2em}#sbo-rt-content .Preface .AuthorName,#sbo-rt-content .PrefaceLocations,#sbo-rt-content .PrefaceDate{font-weight:bold;text-align:right}#sbo-rt-content .PrefaceLocation+.PrefaceLocation:before{content:", "}#sbo-rt-content .Preface .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Preface .RenderAsSection2>.Heading,#sbo-rt-content .Preface .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookFrontmatterArticleNote{border-top:1px solid #bbb;margin-top:0;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .ArticleNote{padding-bottom:1em}#sbo-rt-content .PartFrontmatter h1:first-child+.ArticleNote{border-top:none;page-break-before:auto}#sbo-rt-content .BookFrontmatter .ArticleNote .Heading,#sbo-rt-content .PartFrontmatter .ArticleNote .Heading{font-size:1.44rem;font-style:normal;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookAcknowledgmentsTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments .AuthorName{font-weight:bold;margin-top:1em}#sbo-rt-content .BookAcknowledgments .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .BookAcknowledgments .RenderAsSection2>.Heading,#sbo-rt-content .BookAcknowledgments .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookNotes{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookNotesTitle{font-size:1.44rem;font-weight:bold;margin-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookNotes .AuthorName{font-weight:bold}#sbo-rt-content .BookFrontmatterAbbreviationGroup{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .AbbreviationGroup{padding-bottom:1em;margin-top:1em}#sbo-rt-content .BookFrontmatter .AbbreviationGroup .Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroup .Heading{font-size:1.44rem;font-weight:bold;padding-top:1em;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection>.Heading{font-size:1.2rem;padding-top:1em;padding-bottom:0}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading{padding-top:.5em}#sbo-rt-content .Toc{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Toc .Headings{margin-bottom:.5em}#sbo-rt-content .Toc>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Toc>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .Loh{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loh .Headings{margin-bottom:.1em}#sbo-rt-content .Loh>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Loh>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LohPageNumber{display:none}#sbo-rt-content .LocWithHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loc .Headings{margin-bottom:.1em}#sbo-rt-content .LocWithHeading>.Headings>.Heading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .LocWithHeading>.Headings>.SubHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LocWithHeading .LocDiv{margin-top:1em}#sbo-rt-content .LocWithHeading .LocDiv .Heading{font-size:1.2rem;margin-bottom:.1em}#sbo-rt-content .LocWithHeading .LocDiv .SubHeading{font-size:100%;font-style:italic;font-weight:normal}#sbo-rt-content .LocDiv .FormalPara .Heading{font-size:100%}#sbo-rt-content .Loc .AuthorGroup+.AuthorGroup,#sbo-rt-content .Loc .AuthorGroup+.EditorGroup,#sbo-rt-content .Loc .EditorGroup+.AuthorGroup,#sbo-rt-content .Loc .EditorGroup+.EditorGroup{margin-top:1em}#sbo-rt-content .Loc .Author,#sbo-rt-content .Loc .Editor,#sbo-rt-content .Loc .InstitutionalAuthor,#sbo-rt-content .Loc .InstitutionalEditor{font-weight:bold}#sbo-rt-content .Loc .AffiliationText{margin-left:0}#sbo-rt-content .Loc .Email+.Email:before{content:", "}#sbo-rt-content .Loc .Emails,#sbo-rt-content .Loc .URLs{display:inline}#sbo-rt-content .Loc .Emails+.URLs:before{content:", "}#sbo-rt-content .Loc .URL+.URL:before{content:", "}#sbo-rt-content .BookFrontmatterFootnoteSection{border-top:1px solid #bbb;margin-top:0;page-break-before:always}#sbo-rt-content .PartFrontmatter .FootnoteSection{border-top:none;margin-top:0}#sbo-rt-content .Colophon{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em;font-style:italic}#sbo-rt-content .ConferenceInfo{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em}#sbo-rt-content .ConfEventAbbreviation,#sbo-rt-content .ConfNumber+.ConfSeriesName,#sbo-rt-content .ConfEventAbbreviation+.Year,#sbo-rt-content .ConfEventDateStart,#sbo-rt-content .ConfEventDateEnd{display:inline}#sbo-rt-content .ConfEventAbbreviation:after{content:" "}#sbo-rt-content .ConfEventLocation .City:after{content:", "}#sbo-rt-content .ConfEventDateEnd:before{content:"–"}#sbo-rt-content .ConfEventDateStart .Year:after,#sbo-rt-content .ConfEventDateStart .Month:after,#sbo-rt-content .ConfEventDateEnd .Year:after,#sbo-rt-content .ConfEventDateEnd .Month:after{content:"/"}#sbo-rt-content .ConfEventDate .Month:after{content:"/"}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781484226018/chapter/html/425975_1_En_5_Chapter.xhtml",
          "book_id": "9781484226018",
          "chapter_uri": "html/425975_1_En_5_Chapter.xhtml",
          "position": 0,
          "user_uuid": "39a88cd5-54f5-4d61-aec6-7884d06dfba1",
          "next_chapter_uri": "/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml"
        
      },
      title: "Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software",
      author_list: "Michael Schwartz, Maciej Machulak",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml"><meta name="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_5 5. OpenID Connect Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   Despite OAuth’s close ...!--end&gt;!--begin&gt; "><meta property="og:title" content="5. OpenID Connect"><meta itemprop="isPartOf" content="/library/view/securing-the-perimeter/9781484226018/"><meta itemprop="name" content="5. OpenID Connect"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9781484226018/"><meta property="og:description" itemprop="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_5 5. OpenID Connect Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   Despite OAuth’s close ...!--end&gt;!--begin&gt; "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781484226018"><meta property="og:book:author" itemprop="author" content="Michael Schwartz"><meta property="og:book:author" itemprop="author" content="Maciej Machulak"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '39a88cd5-54f5-4d61-aec6-7884d06dfba1';
      dataLayer.push({userIdentifier: '39a88cd5-54f5-4d61-aec6-7884d06dfba1'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'c1ff3208-121f-489a-a3cd-0b219a28ba6e';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/vendor.667e7ada497a.js"></script><script defer="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/reader.d25c5547507a.js"></script><iframe src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource.html"></iframe><iframe src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(2).html"></iframe><iframe src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(3).html"></iframe><link rel="stylesheet" type="text/css" href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/container.40a6b605d29a66b083aa6d74c07bb73eae19e31b.css"><iframe src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(4).html"></iframe><script async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style><link href="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/840a321d95.css" media="all" rel="stylesheet"><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(1).txt"></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(2).txt"></script><script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(3).txt"></script><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav nav-collapsed scalefonts subscribe-panel library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/39a88cd5-54f5-4d61-aec6-7884d06dfba1/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=collection&amp;sort=date_added&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Expert Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Practice</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/" class="l2 nav-icn"><span>Katacoda Scenarios</span></a></li><li><a href="https://learning.oreilly.com/interactive/#notebooks" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M10.0440191,12.1582649 C10.177209,12.3351976 10.2476998,12.552011 10.2434767,12.7742985 L10.2434767,13.9482829 L1.96869684,13.9482829 L1.96869684,12.7742985 C1.96418597,12.536863 2.04491894,12.3056731 2.19625329,12.1226596 L2.20142503,12.1226596 C3.18373453,10.9898864 4.60930376,10.339179 6.10867266,10.339179 C7.30793519,10.339179 8.45998426,10.7554703 9.37576632,11.5017585 L14.3434936,11.5017585 L14.3434936,3.65650645 L1.65650645,3.65650645 L1.65650645,11.5017585 L2.06682298,11.5017585 L1.82063306,12.1582649 L1.32825322,12.1582649 C1.14771395,12.1582649 1,12.010551 1,11.8300117 L1,3.32825322 C1,3.14771395 1.14771395,3 1.32825322,3 L14.6717468,3 C14.852286,3 15,3.14771395 15,3.32825322 L15,11.8300117 C15,12.010551 14.852286,12.1582649 14.6717468,12.1582649 L10.0440191,12.1582649 Z M12.5483683,7.16419284 C12.6159362,7.20929881 12.6563112,7.2853432 12.6558247,7.36658194 C12.6553382,7.44782068 12.6140555,7.5233761 12.5459522,7.56766966 L10.4270949,8.91581376 C10.3903366,8.94010203 10.3431312,8.9419685 10.3045699,8.9206583 C10.2660086,8.89934811 10.2424712,8.85838696 10.2434767,8.81434055 L10.2434767,5.91510593 C10.2420711,5.86982855 10.2666257,5.82771857 10.3067229,5.80664182 C10.3468202,5.78556507 10.3954292,5.7892172 10.431927,5.81604875 L12.5483683,7.16419284 Z M6.10608679,9.81089299 C4.9635781,9.81089299 4.03739181,8.8847067 4.03739181,7.74219802 C4.03739181,6.59968933 4.9635781,5.67350304 6.10608679,5.67350304 C7.24859547,5.67350304 8.17478176,6.59968933 8.17478176,7.74219802 C8.17478176,8.8847067 7.24859547,9.81089299 6.10608679,9.81089299 Z"></path></svg><span>Sandboxes</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/kubernetes-sandbox/9781492062820/" class="l2 nav-icn"><span>Kubernetes</span></a></li><li><a href="https://learning.oreilly.com/scenarios/python-sandbox/9781492062844/" class="l2 nav-icn"><span>Python</span></a></li><li><a href="https://learning.oreilly.com/scenarios/tensorflow-sandbox/9781492062851/" class="l2 nav-icn"><span>TensorFlow</span></a></li><li><a href="https://learning.oreilly.com/scenarios/ubuntu-sandbox/9781492062837/" class="l2 nav-icn"><span>Ubuntu</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/r/" class="l2 nav-icn"><span>Recommendations</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Release</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.4 9.8a.6.6 0 0 1 .6.6v1.2h-1.2l-.6 2.4H3.8l-.6-2.4H2v-1.2a.6.6 0 0 1 .6-.6h10.8zM8 5.6a1.8 1.8 0 1 1-.001-3.599A1.8 1.8 0 0 1 8 5.6zm3.6 2.35v.95H4.4v-.95c0-.167.066-.33.19-.443A5.08 5.08 0 0 1 8 6.2a5.08 5.08 0 0 1 3.41 1.307c.124.113.19.276.19.444z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Training</span></a></li></ul></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781484226018/chapter/html/425975_1_En_5_Chapter.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml&amp;text=Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%205.%C2%A0OpenID%20Connect&amp;body=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml%0D%0Afrom%20Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/djangoMessagesPage.61a28d591d16.js"></script>


        <script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/48743.js"></script>
<script>
  var userId = "6866040";

  var userObject = {
    firstName: "MACKYNZIE",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "April 4, 2020, 9:28 a.m.",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">4.&nbsp;OAuth</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">6.&nbsp;Proxy</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><div class="ChapterContextInformation"><div class="ContextInformation" id="b978-1-4842-2601-8_5"><div class="ChapterCopyright">©&nbsp;Michael Schwartz, Maciej Machulak&nbsp;2018</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" epub:type="title" lang="en">Securing the Perimeter</span></span><span class="ChapterDOI"><a href="https://doi.org/10.1007/978-1-4842-2601-8_5">https://doi.org/10.1007/978-1-4842-2601-8_5</a></span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" lang="en">5.&nbsp;OpenID Connect</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Aff3" class="totri-footnote">1</a>&nbsp;<span class="ContactIcon"></span></sup> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Aff4" class="totri-footnote">2</a></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff3"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Austin, TX, USA</div></div><div class="Affiliation" id="Aff4"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">London, UK</div></div><div class="ClearBoth">&nbsp;</div></div></div><!--End Abstract--><div class="Fulltext"><p class="Para" id="Par2">Despite OAuth’s close association with authentication, if you want to use it for web or mobile login, you’ll should use OpenID Connect. Both a profile and extension of OAuth, OpenID Connect defines some of the features necessary to use <span id="ITerm1">OAuth</span> for federated identity.</p><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar1"><h3 class="Heading">Note</h3><p class="Para" id="Par3">To save space, sometimes “OpenID Connect” is shortened to simply “Connect”. “OpenID” would not be specific enough, because there are several OpenID working groups with product standards.</p></div><p class="Para" id="Par4">OpenID Connect was <span id="ITerm2">formulated</span> at a time when Google, Microsoft, Facebook, and other large consumer identity providers had already introduced their own OAuth based identity APIs. These services were already processing millions of transactions per day, and the design of Connect benefited from the experience collected on security, developer usability, and end user behavior. It was confusing for developers to keep track of the little differences between the OAuth login services of the various consumer services. For example, the identity service of Google was almost the same as that of Facebook. But these little differences were annoying, and resulted in one-off code.</p><p class="Para" id="Par5">OpenID Connect has many parallels to <span id="ITerm3">SAML</span>. The OpenID Provider (OP) is analogous to the SAML IDP—the software component that authenticates the person and returns an assertion to the relying party (or RP), roughly equivalent to the SAML SP. While in SAML we might call pieces of information about a person “attributes,” in Connect, we call these things “<span id="ITerm4">user claims</span>”. The equivalent of the SAML assertion (signed XML document that contains information about the authentication event, and optionally attributes of the person), is an <span id="ITerm5">
            <span class="EmphasisFontCategoryNonProportional ">id_token</span>
            
            
          </span>, a signed JSON Web Token, or JWT (pronounced “jot”) that contains very similar information.</p><p class="Para" id="Par6">The <span id="ITerm6">overriding design</span> goal of Connect was to keep simple things simple, but also make complex things possible. As opposed to SAML, which was developed before the release of the iPhone in 2007, the initial Connect functional specifications released in 2011 incorporated new requirements brought about by mobile use cases. Connect also embraced JSON data structures and RESTful web services. This architecture is more efficient on the wire than XML data structures, and it requires less compute power on small devices. Also, the complexity of parsing XML has resulted in many security problems, as different implementations may mess it up. Also, while SAML was primarily focused on enterprise use cases, Connect was designed to address both enterprise and consumer requirements, which included a wider range of security levels, from non-sensitive information to highly secure transactions.</p><div class="Para" id="Par7">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig1">5-1</a></span>, which is based on a slide from one of Nat Sakimura’s presentations, shows how Connect layers security. Depending on the Connect <span id="ITerm7">features</span> you use, you can mitigate additional risk. In the implicit flow, tokens are retrieved from the authorization endpoint without client credentials. This results in less security than for the hybrid flow, where the client is authenticated and signing and encryption are used for the request and responses.<figure class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig1_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig1_HTML.png" style="height:15.52em" width="1717" height="621" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig1_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-1</span><p class="SimplePara">OpenID Connect <span id="ITerm8">security levels</span></p></div></figcaption></figure></div><p class="Para" id="Par8">Connect is an <span id="ITerm9">architecture</span> that leverages several related standards developed by the OpenID Connect working group and standards from the IETF. This chapter provides a deep dive into those components and provides some examples for how you can put Connect to use in your organization for access management.</p><section class="Section1 RenderAsSection1" id="Sec1"><h2 class="Heading">OpenID Connect Overview</h2><div class="Para" id="Par9">If you think back to Figure&nbsp;<span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml#Fig2"><span class="RefSource">4-2</span></a></span> about OAuth, it showed three software roles (the client, resource server, and authorization server) and three human roles (resource owner, requesting party, and developer). All six are present in Connect, although there are two <span id="ITerm10">conflations</span>, illustrated in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig2">5-2</a></span>:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par10">The OpenID Provider (hereafter referred to as the OP) is a combination of the authorization and resource server.</p></li><li><p class="Para" id="Par11">The subject is both the resource owner and the requesting party.</p></li></ul></div><figure class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig2_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig2_HTML.jpg" style="height:23.17em" width="1180" height="927" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig2_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-2</span><p class="SimplePara">Conflated OAuth2 <span id="ITerm11">roles</span> in OpenID Connect</p></div></figcaption></figure></div><p class="Para" id="Par12">In OAuth terms, the OP is the authorization server—it issues access token and publishes the authorization and token endpoints. It is also the <span id="ITerm12">resource server</span>, because it hosts the protected endpoint—the “Userinfo endpoint” that returns a JSON object containing the user claims of the subject. When you log in, you are both the requesting party (the person asking to get access) and the resource owner. It’s information about you that you are authorizing the client to access. Note that in Connect, unlike in most OAuth scenarios, a developer does not code the protected API—only the client.</p><p class="Para" id="Par13">OpenID Connect introduces a new token, called the <span id="ITerm13">
              <span class="EmphasisFontCategoryNonProportional ">id_token</span>
              
            </span><span id="ITerm14">
              
              
            </span>, which is like a SAML assertion. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> contains a subject identifier (for example, a username) and other information about the authentication event, such as who issued the token, to whom it was issued, when the authentication occurred, or what type of authentication happened. Like SAML, <span id="ITerm15">
              <span class="EmphasisFontCategoryNonProportional ">id_token</span>
              
            </span><span id="ITerm16">
              
              
            </span> may contain attributes (user claims). We’ll go into more detail on the <span class="EmphasisFontCategoryNonProportional ">id_token</span> later in this chapter. The key thing to keep in mind is that it’s not really a token—something that grants access. It’s an identity assertion.</p><p class="Para" id="Par14">OpenID Connect also introduces a new flow—the <span id="ITerm17">hybrid flow</span>. As you might remember from Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml" class="totri-footnote"><span class="RefSource">4</span></a></span>, the <span id="ITerm18">implicit flow</span> allows the client to request a token from the authorization endpoint without client authentication. Using the <span id="ITerm19">authorization code flow</span>, after the subject authorizes, the client receives a code from the OAuth authorization endpoint (front-channel) and obtains a token after presenting the code plus client credentials at the OAuth token endpoint (back-channel). The hybrid flow combines the implicit and code flows, in that an <span class="EmphasisFontCategoryNonProportional ">id_token</span> is returned on the front-channel from the authorization endpoint. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> is typically signed by the OP and may be encrypted. Verifying the contents of the <span class="EmphasisFontCategoryNonProportional ">id_token</span> adds an extra layer of security to the front-channel response by introducing the <span class="EmphasisFontCategoryNonProportional ">c_hash</span> and <span class="EmphasisFontCategoryNonProportional ">s_hash</span> claims, which enable the client to verify the integrity of the code and state, respectively.</p><div class="Para" id="Par15">In general, OpenID Connect fills in a lot of important details that are necessary to use OAuth for a <span id="ITerm20">secure sign-in flow</span>. It incorporates the cryptographic features of the the <span id="ITerm21">JSON Object Signing and Encryption standards</span> (<span id="ITerm22">JOSE</span>) and describes how to use them together within an OAuth framework. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig3">5-3</a></span>, adapted from the OpenID Connect website, provides an overview of OpenID Connect features and the underpinnings in OAuth.<figure class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig3_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig3_HTML.jpg" style="height:14.38em" width="1725" height="575" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig3_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-3</span><p class="SimplePara">OpenID Connect overview with <span id="ITerm23">OAuth underpinnings</span></p></div></figcaption></figure></div><div class="Para" id="Par16">While new OpenID Connect <span id="ITerm24">specifications</span> are under development, there are four key specifications:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par17"><strong class="EmphasisTypeBold ">Core</strong>—How a person is authenticated and authorizes the release of claims.</p></li><li><p class="Para" id="Par18"><strong class="EmphasisTypeBold ">Dynamic Client Registration</strong>—How a client obtains a client_id and a secret (or registers a public key).</p></li><li><p class="Para" id="Par19"><strong class="EmphasisTypeBold ">Discovery</strong>—How a client figures out how to bootstrap authentication with an OP (many similarities to the publication of SAML IDP metadata).</p></li><li><p class="Para" id="Par20"><strong class="EmphasisTypeBold ">Logout</strong>—How clients can attempt to implement single-logout (SLO).</p></li></ul></div></div><section class="Section2 RenderAsSection2" id="Sec2"><h3 class="Heading">OpenID Connect Authorization Server Endpoints</h3><div class="Para" id="Par21">The OpenID Connect authorization server endpoints are described in Table <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Tab1">5-1</a></span>.<div class="Table" id="Tab1"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-1</span><p class="SimplePara">OpenID Connect <span id="ITerm25">Authorization Server Endpoints</span></p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Endpoint</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Front-channel web pages that render the login page and authorization (consent) pages.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Token</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Back-channel endpoint, normally requiring authentication, where a client can obtain an access token, id_token, and refresh token.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Userinfo</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Access token protected API at which the client can request claims about a subject.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Configuration</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Provider metadata published at <span class="EmphasisFontCategoryNonProportional ">.well-known/openid-configuration</span>, including the location of endpoints, supported cryptographic algorithms, and other information needed by the client to interact with the OP.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWKS</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">The current public keys of the OP used for signing and encryption.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Client registration</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Endpoint for an application to create or update an OAuth client.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Session management</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Used by all three OpenID logout specs (none working that well) <span id="ITerm26">
                            
                            
                          </span>.</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">WebFinger</p></td><td style="text-align: left;"><p class="SimplePara">Used to bootstrap OP discovery working backwards from an email address (or other identifier), i.e. how do you figure out the configuration endpoint for a <span id="ITerm27">domain</span>.</p></td></tr></tbody></table></div></div><div class="Para" id="Par22">If the OP supports the OpenID Federation specification (an implementer’s draft at the time of this book's publication), it would also optionally publish these endpoints in Table <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Tab2">5-2</a></span>.<div class="Table" id="Tab2"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-2</span><p class="SimplePara">OpenID <span id="ITerm28">Federation Endpoints</span></p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Endpoint</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Signing keys</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Stable keys used for signing and encryption, published to a federation.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Signed JWKS</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Signed version of the JWKS endpoint.</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">Metadata Statements</p></td><td style="text-align: left;"><p class="SimplePara">JWTs issued to an OP by federations to indicate membership.</p></td></tr></tbody></table></div></div></section><section class="Section2 RenderAsSection2" id="Sec3"><h3 class="Heading">id_token</h3><div class="Para" id="Par23">The <span id="ITerm29">
                <span class="EmphasisFontCategoryNonProportional ">id_token</span>
                
              </span><span id="ITerm30">
                
                
              </span> is a JWT that binds the subject identifier (and potentially other claims) with the authentication event. As previously mentioned, it is analogous to the SAML assertion. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> must be signed by the OP and may be encrypted if the client so requests. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig4">5-4</a></span> shows a summary of the <span class="EmphasisFontCategoryNonProportional ">id_token</span> claims. For a full list, see the OpenID Connect Core specification.<figure class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig4_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig4_HTML.png" style="height:20em" width="1421" height="800" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig4_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-4</span><p class="SimplePara">id_token <span id="ITerm31">claims</span><span id="ITerm32">
                        
                        
                      </span></p></div></figcaption></figure></div><div class="Para" id="Par24">An example of the JSON representation of an <span class="EmphasisFontCategoryNonProportional ">id_token</span> is shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC1">5-1</a></span>.<div class="ProgramCode" id="PC1"><div class="LineGroup"><div class="FixedLine">{</div><div class="FixedLine">&nbsp;&nbsp;"iss"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: "https://login.example.com",</div><div class="FixedLine">&nbsp;&nbsp;"sub"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: "foo@example.com",</div><div class="FixedLine">&nbsp;&nbsp;"aud"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: "b250c4a7-5551",</div><div class="FixedLine">&nbsp;&nbsp;"nonce"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: "5zTdd3302Rf9",</div><div class="FixedLine">&nbsp;&nbsp;"auth_time" : 1530986231,</div><div class="FixedLine">&nbsp;&nbsp;"acr"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: "otp",</div><div class="FixedLine">&nbsp;&nbsp;"iat"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 1530986231,</div><div class="FixedLine">&nbsp;&nbsp;"exp"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 1311288231,</div><div class="FixedLine">&nbsp;&nbsp;"orgClaim"&nbsp;&nbsp;: "spam"</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-1</span><p class="SimplePara">Sample id_token JSON Object</p></div></div></div></div><p class="Para" id="Par25">If you're wondering if <span class="EmphasisFontCategoryNonProportional ">orgClaim</span> is valid, good eye! The Core spec says the <span class="EmphasisFontCategoryNonProportional ">id_token</span> MAY contain other claims. Similarly, a SAML IDP may include user attributes in a SAML identity assertion. Sending user claims in the <span class="EmphasisFontCategoryNonProportional ">id_token</span> impacts security. It may lack interoperability—RPs may not expect it. But it's not contrary to the specification.</p><div class="Para" id="Par26">When sent over the wire, the <span class="EmphasisFontCategoryNonProportional ">id_token</span> is base-64 encoded. Remember, according to RFC 7619, JWTs have three parts: the header, payload, and signature. For example, with a header of <span class="EmphasisFontCategoryNonProportional ">{"alg": "HS512","typ": "JWT"}</span> and using a shared secret of <span class="EmphasisFontCategoryNonProportional ">spam</span>, the example <span class="EmphasisFontCategoryNonProportional ">id_token</span> looks like this:<div class="ProgramCode" id="PC2"><div class="LineGroup"><div class="FixedLine">eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJodHRwczovL2xvZ2luLmV4YW1wbGUuY29tIiwic3ViIjoiZm9vQGV4YW1wbGUuY29tIiwiYXVkIjoiYjI1MGM0YTctNTU1MSIsIm5vbmNlIjoiNXpUZGQzMzAyUmY5IiwiYXV0aF90aW1lIjoxNTMwOTg2MjMxLCJhY3IiOiJvdHAiLCJpYXQiOjE1MzA5ODYyMzEsImV4cCI6MTMxMTI4ODIzMSwib3JnQ2xhaW0iOiJzcGFtIn0.OLG72c2GstOGaBhrSHaksCkpld7uU9qpPb32CdisIesXsUhQifoWHrAj_PBe7MzviVOw_yB23SSYXu9W2zxREA</div></div></div></div></section><section class="Section2 RenderAsSection2" id="Sec4"><h3 class="Heading">OpenID Authentication on the&nbsp;Fly</h3><div class="Para" id="Par27">An interesting feature of Connect is that it describes how a client could bootstrap <span id="ITerm33">authentication</span> against an external Internet domain without knowing anything more than a person’s email address. Although rarely used in practice, and keeping in mind that there are some potential security vulnerabilities associated with dynamic discovery and client registration, it offers a glimpse into a future in which cross-domain security is possible without prior out-of-band configuration. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig5">5-5</a></span> summarizes this discovery process for a hypothetical person <span class="EmphasisFontCategoryNonProportional ">foo@bar.com</span>. In this very simple sequence diagram, the Person and User Agent are combined into one unit.<figure class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig5_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig5_HTML.jpg" style="height:48.9em" width="1473" height="1956" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig5_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-5</span><p class="SimplePara">OpenID Connect Dynamic cross-domain <span id="ITerm34">authentication</span></p></div></figcaption></figure></div><p class="Para" id="Par28">Here is the scenario: imagine you are browsing around, and you decide you need to buy a cool T-shirt from an open source project. You don’t have an account on the ecommerce site, but you notice that it supports OpenID Connect. That’s great, because your organization uses an OP, and you don’t want to have to remember yet another username and password. You click login, provide your email address, and voilà, you are presented with the login page of your home OP. After authentication, you complete the necessary shipping and billing information. Your home OP does not release any personally identifiable information about you—only a “pairwise” ID that is different for every website you visit. If you ever need to return to this ecommerce site, for example to check the status of your T-shirt order, you won’t need to remember site-specific credentials. In fact, you don’t even have to sign in if you already have a session with your home OP. You simply click Login and you are presented with your order <span id="ITerm35">history</span>.</p></section><section class="Section2 RenderAsSection2" id="Sec5"><h3 class="Heading">OpenID Connect Discovery</h3><p class="Para" id="Par29">The OpenID Provider configuration URL can be located at a domain using the <span id="ITerm36">WebFinger protocol</span><span id="ITerm37">
                
              </span> (or an out-of-band mechanism). An <span class="EmphasisFontCategoryNonProportional ">https</span> GET request to the configuration URL returns a <span id="ITerm38">JSON document</span>, including the endpoints where it provides the <span id="ITerm39">OpenID Connect API</span>. The path used to publish an OP’s configuration endpoint is <span class="EmphasisFontCategoryNonProportional ">https://domain/optional-path/.well-known/openid-configuration</span>. You’ll see this quite often with different services, such as WebFinger, UMA, and other standards. The <span class="EmphasisFontCategoryNonProportional ">/.well-known/</span> path is defined in RFC 5785 as a standard location to publish site metadata.</p><div class="Para" id="Par30">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig6">5-6</a></span> shows a sample Connect discovery response from a local test server. If you think that this looks like SAML IDP metadata in JSON format, you’re right. SAML metadata provides the keys, service URLs, and other configuration or organizational information. One difference is that the keys are not present in the Connect configuration document, but are referenced by the <span class="EmphasisFontCategoryNonProportional ">jwks_uri</span> claim. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig7">5-7</a></span> shows a sample JWKS from Google’s Connect service. You can read more about JSON Web Keys in RFC 7517.<figure class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig6_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig6_HTML.jpg" style="height:49.92em" width="1462" height="1997" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig6_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-6</span><p class="SimplePara">Sample OpenID Connect <span id="ITerm40">configuration response</span></p></div></figcaption></figure><figure class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig7_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig7_HTML.jpg" style="height:23.32em" width="1725" height="933" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig7_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-7</span><p class="SimplePara">Sample JWKS from Google’s OpenID Connect <span id="ITerm41">service</span></p></div></figcaption></figure></div><p class="Para" id="Par31">From the client perspective, after receiving and processing the Connect discovery <span id="ITerm42">configuration response</span>, a request can be made to obtain client credentials. In addition to knowing the URLs where the service is hosted, the client can also discover which cryptographic algorithms, scopes, user claims, and features are supported. The OpenID Connect Discovery <span id="ITerm43">specification</span> defines what each of these values means, and conventions for some of the values. Some of the values are out of scope of the specification and are addressed in other standards.</p><p class="Para" id="Par32">Because the OP’s <span id="ITerm44">public key</span> is required to validate the signatures of the <span class="EmphasisFontCategoryNonProportional ">id_token</span> and Userinfo JWTs, publishing OpenID Connect discovery information is a requirement for most OPs. It is a best practice to rotate keys every two days. Many <span id="ITerm45">SAML IDPs rotate keys</span> much less frequently—once a year is not uncommon. The design goal behind such quick key rotation is to quickly identify problems. If key rotation is broken on the RP, and you find out a year later, the developers may have moved onto another project and lost familiarity with the client.</p><p class="Para" id="Par33">As with all security APIs, it is essential that <span class="EmphasisFontCategoryNonProportional ">https</span> is used and that the <span id="ITerm46">certificate</span> is properly validated. If an attacker can return incorrect discovery information, bad things can happen. For example, what if the hacker leaves the <span class="EmphasisFontCategoryNonProportional ">authorization_endpoint</span> the same as the target OP, so the client obtains a valid code, but changes the <span class="EmphasisFontCategoryNonProportional ">token_endpoint</span> so the client presents its client credentials and code to the hacker! Or if your client redirects the subject to the OP of an attacker, and it presents a reasonable looking login page, the person may leak their username and password!</p><p class="Para" id="Par34">This is also one of the risks that multi-party federations seek to mitigate—providing a trusted source for clients to obtain OP configuration metadata.</p></section><section class="Section2 RenderAsSection2" id="Sec6"><h3 class="Heading">Client Registration</h3><p class="Para" id="Par35">As OpenID Connect is a profile of <span id="ITerm47">OAuth</span><span id="ITerm48">
                
                
              </span>, the client must tell the AS its <span id="ITerm49">
                <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span>
                
              </span>—where to send the browser and authorization response after user interaction at the AS is complete. After processing a registration request, the OP will issue the client an identifier (<span id="ITerm50">
                <span class="EmphasisFontCategoryNonProportional ">client_id</span>
                
              </span>). Depending on the implementation, the client either registers or is issued a client secret. Client authentication is used to increase the security of obtaining a token on the back-channel. After successful registration, the OP may also return a registration access token, which can be used for subsequent update operations.</p><p class="Para" id="Par36">Client registration enables a client to register a JWKS document (containing its public key) or to specify a <span class="EmphasisFontCategoryNonProportional ">jwks_uri</span>. This improves security because it avoids authentication based on a shared secret with the authorization server.</p><p class="Para" id="Par37">In SAML, the IDP normally either imports the SP metadata or manually configures the endpoints and imports its public certificates. The SP itself chooses its identifier—the <span id="ITerm51">
                <span class="EmphasisFontCategoryNonProportional ">entityID</span>
                
              </span><span id="ITerm52">
                
              </span><span id="ITerm53">
                
                
              </span>. In OAuth, this process is reversed: the OP issues the client identifier and sometimes even a shared secret used for client authentication.</p><div class="Para" id="Par38">In the interest of making this process more streamlined, the OpenID Connect Dynamic Client Registration API was introduced. In parallel, at around the same time, work began on OAuth client registration, which became RFC 7592. Other protocols, like the User Managed Access protocol, also take advantage of OpenID client registration. OpenID Connect client registration is simple: you can register and obtain information about your registration. In OAuth, there is also a client configuration API that can be used to update or delete client configuration. In practice, it is beneficial for OPs to also support the OAuth client configuration API. Figure&nbsp;<span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig8">5-8</a></span> shows the registration flow from RFC 7592.<figure class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig8_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig8_HTML.png" style="height:34.28em" width="1429" height="1371" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig8_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-8</span><p class="SimplePara">RFC 7592 dynamic client registration flow <span id="ITerm54">diagram</span><span id="ITerm55">
                        
                        
                      </span></p></div></figcaption></figure></div><p class="Para" id="Par39">One of the most important parts of the Connect client registration specification is the section entitled “Client Metadata”. In addition to specifying the <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span>, the client can tell the OP how it wants to interact—what algorithms to use for signing and encryption, what grant types it needs, what responses types it expects, and so on. While most OPs implement default values to keep client registration simple, to use advanced features, you’ll need to understand the more esoteric parameters.</p><p class="Para" id="Par40">The Connect client registration API by itself is not always enough information to handle the requirements of enterprise IAM services. There is policy to consider. For example, in some cases, a client may request a certain configuration preference, but the OP may not allow it. The OP may also have client configuration requirements to handle enterprise requirements. For example, the Gluu Server has a client configuration parameter to signal to the OP to suppress the authorization approval message. In a corporate portal, which may be comprised on several client applications, it would be confusing to present the subject with multiple approval requests. Also, authorization is not needed if the websites in the portal are controlled by the same organization that operates the OP. Another example from the Gluu Server regarding authorization is a setting to enable the OP to only ask the subject to authorize a client once—remembering the person’s past decision for subsequent requests.</p><p class="Para" id="Par41">Although there is a client registration API, there may be a manual workflow to approve registration requests—trust may require manual intervention. If unknown clients can register with an OP, what personal information about the subject should be released by default? In most situations, the OP should not release any PII in that situation. Connect requires the OP to release the <span class="EmphasisFontCategoryNonProportional ">openid</span> scope to the client, which includes the subject identifier (which could be pairwise, thus not leaking any PII). An administrator at the OP may approve the release of additional information about the subject post-registration.</p><p class="Para" id="Par42">Another way to authorize clients to dynamically register, but request PII is to issue it a “software statement,” which is like a registration access token. The software statement could be a signed JWT that the client presents to the OP to automate trust management. If the software statement is issued from a trusted source, like a federation operator, it can enable an OP to release claims without requiring a manual approval workflow. However, the mechanism for acquiring registration access tokens and software statements, presenting them during registration, or validating them is currently unspecified in the Connect and OAuth client registration <span id="ITerm56">specifications</span><span id="ITerm57">
                
                
              </span>.</p></section><section class="Section2 RenderAsSection2" id="Sec7"><h3 class="Heading">Authentication/Authorization</h3><p class="Para" id="Par43">Like SAML, Connect is a federation <span id="ITerm58">protocol</span><span id="ITerm59">
                
                
              </span>, not an authentication protocol. And like SAML, it is based on redirecting the person’s web browser to an identity provider. Whether the person is authenticated by matching a password or validating possession of a hardware token, it doesn’t matter—the authentication mechanism is outside the scope of Connect. However, Connect does care that the person was authenticated—that the physical person was present at some point to provide the necessary input. After the subject has been authenticated, Connect defines a flow to enable the person to authorize the release of user claims. The authentication and authorization processes are both defined in the Connect Core specification.</p><p class="Para" id="Par44">As discussed, after the client is registered, it can use the three endpoints that will enable it to authenticate a subject: the authorization endpoint, token endpoint, and Userinfo endpoint. Depending on the flow used, one, two, or three of these endpoints may be utilized. Different flows have different security profiles. Even the same flow used with different parameters can have a different security profile. The next few sections provide more details about how to use these different flows.</p></section><section class="Section2 RenderAsSection2" id="Sec8"><h3 class="Heading">Response Types</h3><div class="Para" id="Par45">OAuth 2.0 RFC 6749 defines <span id="ITerm60">
                <span class="EmphasisFontCategoryNonProportional ">response_type</span>
                
              </span> as a space-delimited list of values used by the client to signal to the authorization server the desired grant <span id="ITerm61">type</span>. An OpenID Connect specification describes the use of multiple response types. The most common response type is <span class="EmphasisFontCategoryNonProportional ">code</span>—which specifies the authorization code flow. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig9">5-9</a></span> summarizes the <span class="EmphasisFontCategoryNonProportional ">response_type</span> values you might use. The <span id="ITerm62">
                <span class="EmphasisFontCategoryNonProportional ">none response_type</span>
                
              </span> is used to signal to the client a successful authorization without granting access to any API. Like the <span class="EmphasisFontCategoryNonProportional ">token</span> response, it is not used for authentication, which would require an <span class="EmphasisFontCategoryNonProportional ">id_token</span>.<figure class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig9_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig9_HTML.png" style="height:23.98em" width="1421" height="959" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig9_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-9</span><p class="SimplePara">OpenID Connect <span id="ITerm63">response types</span></p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec9"><h3 class="Heading">Scopes</h3><p class="Para" id="Par46">In OAuth <span id="ITerm64">scopes</span> communicate the extent of access. In OpenID Connect, the extent of access maps to the release of user claims—the granting of a client access to certain information about the subject. Using <span id="ITerm65">scopes</span>, an OP can group the release of user claims and present a person with one human understandable description for approval. For example, let’s say we have a scope called <span class="EmphasisFontCategoryNonProportional ">address</span> that includes information about a person’s street, city, state, ZIP code, and country. Instead of prompting the person to approve each claim individually, the OP can simply ask, “Is it okay to release to this client information about your physical mailing address?” Connect requires that the <span class="EmphasisFontCategoryNonProportional ">openid</span> <span id="ITerm66">scope</span> is always present. This scope maps the subject identifier. If the <span class="EmphasisFontCategoryNonProportional ">openid</span> scope is not present, you’re not using OpenID Connect! How clients are assigned additional <span id="ITerm67">scopes</span> can vary between OP implementations and trust models.</p></section><section class="Section2 RenderAsSection2" id="Sec10"><h3 class="Heading">Authorization Code Flow</h3><div class="Para" id="Par47">The code flow is the most common OpenID Connect <span id="ITerm68">authentication</span> flow. Server-side applications should use it or the hybrid flow—not the implicit flow. Over-simplifying, it's a <span id="ITerm69">three step process</span>:<div class="OrderedList"><ol><li class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><p class="Para" id="Par48">Redirect the subject to the authorization endpoint.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><p class="Para" id="Par49">Use the code and client credentials at the token endpoint to get the access token, <span class="EmphasisFontCategoryNonProportional ">id_token</span>, and refresh token.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><p class="Para" id="Par50">Use the access token at the Userinfo endpoint to get user claims.</p></div><div class="ClearBoth">&nbsp;</div></li></ol></div></div><section class="Section3 RenderAsSection3" id="Sec11"><h4 class="Heading">Code Flow Step 1: Redirect to Authorization Endpoint</h4><div class="Para" id="Par51">An example authentication request to an imaginary OP <span class="EmphasisFontCategoryNonProportional ">login.example.com</span> is shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC3">5-2</a></span>.<div class="ProgramCode" id="PC3"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 302 Found</div><div class="FixedLine">Location: https://login.example.com/authorize?</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response_type=code</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;scope=openid</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;client_id=b250c4a7-5551</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;redirect_uri=https%3A%2F%2Fclient.example.com%2Fcb</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;state=6d19327</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;nonce=b722ff419a24</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;acr_values=otp</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-2</span><p class="SimplePara">Sample Redirect to the Authorization <span id="ITerm70">Endpoint</span>, an OpenID Authentication Request</p></div></div></div></div><div class="Para" id="Par52">The <span id="ITerm71">OP</span> will render the login and authorization pages, as necessary. If everything goes well (i.e., the subject successfully authenticates and authorizes the request), the OP will respond with the code and state (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC4">5-3</a></span>).<div class="ProgramCode" id="PC4"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 302 Found</div><div class="FixedLine">Location: https://client.example.com/cb?</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;code=00e33be00c97</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;state=6d19327</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-3</span><p class="SimplePara">Sample Successful Authentication Response</p></div></div></div></div><p class="Para" id="Par53">The client must validate that the code returned is the one sent. This prevents cross-site request forgery (CSRF), which tries to execute unwanted actions on the client web application.</p></section><section class="Section3 RenderAsSection3" id="Sec12"><h4 class="Heading">Code Flow Step 2: Get Tokens</h4><div class="Para" id="Par54">Using the code and <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span> from Step 1, and base-64 encoded client credentials (or other supported client authentication methods), the client calls the token endpoint (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC5">5-4</a></span>).<div class="ProgramCode" id="PC5"><div class="LineGroup"><div class="FixedLine">POST /token HTTP/1.1</div><div class="FixedLine">Host: login.example.com</div><div class="FixedLine">Content-Type: application/x-www-form-urlencoded</div><div class="FixedLine">Authorization: Basic YjI1MGM0YTctNTU1MTpzZWNyZXQ=</div></div><div class="LineGroup"><div class="FixedLine">grant_type=authorization_code</div><div class="FixedLine">&nbsp;&amp;code=00e33be00c97</div><div class="FixedLine">&nbsp;&amp;redirect_uri=https%3A%2F%2Fclient.example.com%2Fcb</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-4</span><p class="SimplePara">Sample <span id="ITerm72">Token Request</span></p></div></div></div></div><div class="Para" id="Par55">If the <span id="ITerm73">code</span> and the client credentials are valid, the OP should return tokens (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC6">5-5</a></span>).<div class="ProgramCode" id="PC6"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 200 OK</div><div class="FixedLine">Content-Type: application/json</div><div class="FixedLine">Cache-Control: no-store</div><div class="FixedLine">Pragma: no-cache</div></div><div class="LineGroup"><div class="FixedLine">{</div><div class="FixedLine">&nbsp;&nbsp;"access_token": "3b32043dbc5d",</div><div class="FixedLine">&nbsp;&nbsp;"refresh_token": "8984e43005c4",</div><div class="FixedLine">&nbsp;&nbsp;"token_type": "Bearer",</div><div class="FixedLine">&nbsp;&nbsp;"expires_in": 300,</div><div class="FixedLine">&nbsp;&nbsp;"id_token": "{header}.{payload}.{signature} )"</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-5</span><p class="SimplePara">Sample <span id="ITerm74">Token Response</span></p></div></div></div></div><p class="Para" id="Par56">Note that this response is identical to an OAuth2 token response, as described in section 5.1 of RFC 6749, with the exception of the <span class="EmphasisFontCategoryNonProportional ">id_token</span>, which is defined by OpenID Connect.</p></section><section class="Section3 RenderAsSection3" id="Sec13"><h4 class="Heading">Step 3: Call Userinfo</h4><div class="Para" id="Par57">In Step 3, you call the Userinfo endpoint with the access token you got in Step 2 (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC7">5-6</a></span>).<div class="ProgramCode" id="PC7"><div class="LineGroup"><div class="FixedLine">GET /userinfo HTTP/1.1</div><div class="FixedLine">&nbsp;&nbsp;Host: login.example.com</div><div class="FixedLine">&nbsp;&nbsp;Authorization: Bearer 3b32043dbc5d</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-6</span><p class="SimplePara">Sample Userinfo <span id="ITerm75">Request</span></p></div></div></div></div><div class="Para" id="Par58">A sample Userinfo response from the OpenID Connect Core specification is shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC8">5-7</a></span> (the request we showed above would have been pretty boring because it only requested the <span class="EmphasisFontCategoryNonProportional ">openid</span> scope). A more complete discussion of the Userinfo endpoint follows. This sample in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC8">5-7</a></span> will give you an idea of what it looks like.<div class="ProgramCode" id="PC8"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 200 OK</div><div class="FixedLine">&nbsp;&nbsp;Content-Type: application/json</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"sub": "248289761001",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"name": "Jane Doe",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"given_name": "Jane",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"family_name": "Doe",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"preferred_username": "j.doe",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"email": "janedoe@example.com",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"picture": "http://example.com/janedoe/me.jpg"</div><div class="FixedLine">&nbsp;&nbsp;}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-7</span><p class="SimplePara">Sample Userinfo <span id="ITerm76">Response</span></p></div></div></div></div><div class="Para" id="Par59">Connect defines several <span id="ITerm77">parameters</span> that can be used during the call to the <span id="ITerm78">
                  <span class="EmphasisFontCategoryNonProportional ">authorization_endpoint</span>
                  
                </span>, which are summarized in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig10">5-10</a></span>.<figure class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig10_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig10_HTML.png" style="height:29.9em" width="1421" height="1196" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig10_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-10</span><p class="SimplePara">Authentication request <span id="ITerm79">parameters</span></p></div></figcaption></figure></div><p class="Para" id="Par60">A few of these parameters need some more explaining. First of all, the <span class="EmphasisFontCategoryNonProportional ">response_mode</span> parameter can use <span class="EmphasisFontCategoryNonProportional ">query</span>, <span class="EmphasisFontCategoryNonProportional ">fragment</span>, or <span class="EmphasisFontCategoryNonProportional ">form</span>. <span class="EmphasisFontCategoryNonProportional ">query</span> uses parameters in the URL to send back response data (key/value pairs after the <span class="EmphasisFontCategoryNonProportional ">?</span> in the URL); <span class="EmphasisFontCategoryNonProportional ">fragment</span> puts information after the <span class="EmphasisFontCategoryNonProportional ">#</span> in a URL; <span class="EmphasisFontCategoryNonProportional ">fragment</span> includes some security advantages. On a redirect, the query is sent to the host, whereas the fragment is evaluated locally by the browser. The form <span id="ITerm80">
                  <span class="EmphasisFontCategoryNonProportional ">response_mode</span>
                  
                </span> is a Connect extension—it is not in defined in the OAuth specifications. There is an OpenID specification called OAuth 2.0 Form Post Response Mode that defines a mechanism to return a response to the client, which is similar to SAML’s <span class="EmphasisFontCategoryNonProportional ">POST</span> binding<span id="ITerm81">
                  
                </span>—response <span id="ITerm82">parameters</span> are included in an HTML form, which uses JavaScript to automatically post back to the client <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span>.</p><p class="Para" id="Par61">Another interesting parameter is <span class="EmphasisFontCategoryNonProportional ">prompt</span>. If you want to re-authenticate the subject, you can use <span id="ITerm83">
                  <span class="EmphasisFontCategoryNonProportional ">prompt=login</span>
                  
                </span>. If you want to receive a new access token without prompting the subject, you can use <span class="EmphasisFontCategoryNonProportional ">prompt=none</span> with the <span class="EmphasisFontCategoryNonProportional ">id_token_hint</span> parameter<span id="ITerm84">
                  
                </span>. Using <span class="EmphasisFontCategoryNonProportional ">prompt=none</span> may trigger error responses if interaction with the end user is required, so if you use this feature, make sure you check for errors. Requesting <span class="EmphasisFontCategoryNonProportional ">prompt=consent</span> should force re-authorization. If you wanted to achieve stepped-up authentication, you could use the <span class="EmphasisFontCategoryNonProportional ">prompt=login</span> and <span class="EmphasisFontCategoryNonProportional ">acr</span>_values <span id="ITerm85">parameters</span> together.</p><p class="Para" id="Par62">On success, after the authorization <span id="ITerm86">endpoint returns</span> a code, the client will make a request to the token endpoint. While this request is largely similar to the token request outlined in OAuth, Connect provides some extra considerations, the first of which is client authentication. During <span id="ITerm87">registration</span>, the client can specify the <span id="ITerm88">
                  <span class="EmphasisFontCategoryNonProportional ">token_endpoint_auth_method</span>
                  
                </span> parameter. The options are <span class="EmphasisFontCategoryNonProportional ">client_secret_post</span>, <span class="EmphasisFontCategoryNonProportional ">client_secret_basic</span>, <span class="EmphasisFontCategoryNonProportional ">client_secret_jwt</span>, <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span>, and none. The default value is <span class="EmphasisFontCategoryNonProportional ">client_secret_basic</span>. Of particular interest for enterprise IAM is <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span>. Web SSO agents have been using asymmetric client credential secrets for some time, so using a shared client secret seems like a downgrade. One challenge with this is that it’s harder for clients to generate a JWKS credentials.</p><p class="Para" id="Par63">If you are wondering how to create a <span id="ITerm89">JWK</span>S, you can use a free utility published at <span class="ExternalRef"><a href="https://mkjwk.org/"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://mkjwk.org/</span>
                  </span></a></span>. Or you can download the command-line tool from GitHub at <span class="ExternalRef"><a href="https://github.com/mitreid-connect/json-web-key-generator/"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://github.com/mitreid-connect/json-web-key-generator/</span>
                  </span></a></span>. You’ll have to follow the instructions on the README to compile the package and generate your keys, but it’s pretty easy.</p><p class="Para" id="Par64">The <span id="ITerm90">token response</span> from the OP will include an access token and an <span class="EmphasisFontCategoryNonProportional ">id_token</span>, and usually a refresh token. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> will be a signed JWT, and as previously mentioned, will be encrypted if the client provided a JWKS and requested encryption during client registration. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> should be validated in a similar manner as the implicit flow.</p></section></section><section class="Section2 RenderAsSection2" id="Sec14"><h3 class="Heading">Implicit Flow</h3><p class="Para" id="Par65">The main difference between the OAuth and <span id="ITerm91">OpenID Connect implicit flows</span><span id="ITerm92">
                
                
              </span> lies in the use of the <span class="EmphasisFontCategoryNonProportional ">id_token</span>, which must be returned in Connect. The <span class="EmphasisFontCategoryNonProportional ">id_token</span> adds some extra security. When the client calls the authorization endpoint, it includes a <span class="EmphasisFontCategoryNonProportional ">nonce</span> value. This value is returned unmodified in the signed <span class="EmphasisFontCategoryNonProportional ">id_token</span>. The client must validate that the <span class="EmphasisFontCategoryNonProportional ">nonce</span> has not changed, which mitigates a replay attack. The <span class="EmphasisFontCategoryNonProportional ">nonce</span> may be stored in HTML5 local storage, or a hash of the <span class="EmphasisFontCategoryNonProportional ">nonce</span> can be stored in a browser session cookie. The OAuth2 state parameter should still be used—it serves a different purpose (to quickly discard bad requests).</p><div class="Para" id="Par66">There is one more step to ensure the integrity of the transaction. Connect defines an <span class="EmphasisFontCategoryNonProportional ">id_token</span> claim called <span class="EmphasisFontCategoryNonProportional ">at_hash</span>, which can be used to verify that the value of the access token has not changed from when it was issued. If the <span class="EmphasisFontCategoryNonProportional ">id_token</span> and <span class="EmphasisFontCategoryNonProportional ">token</span> are both returned from the authorization endpoint, as shown in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig11">5-11</a></span>, then the client must verify the <span class="EmphasisFontCategoryNonProportional ">at_hash</span>.<figure class="Figure" id="Fig11"><div class="MediaObject" id="MO11"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig11_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig11_HTML.jpg" style="height:49.07em" width="1473" height="1963" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig11_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-11</span><p class="SimplePara">OpenID Connect implicit <span id="ITerm93">flow</span><span id="ITerm94">
                        
                      </span> sequence diagram</p></div></figcaption></figure></div><p class="Para" id="Par67">You can see that Connect adds quite a bit of security over the generic flow described in OAuth. Also, other features are available to the client developer, such as use of the login parameter. For more information, or if you are a developer writing a client, you should read the <em class="EmphasisTypeItalic ">Implicit Client Implementer’s Guide.</em></p><p class="Para" id="Par68">As mentioned previously, the authorization code flow is more secure than the implicit flow because the tokens are never exposed to the web browser (and possibly malicious applications with access to the browser). The code flow also adds client authentication at the token endpoint.</p><div class="Para" id="Par69">Validating the <span class="EmphasisFontCategoryNonProportional ">id_token</span> improves the security of the implicit flow:<div class="OrderedList"><ol><li class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><p class="Para" id="Par70">Validate the JWT signature to ensure integrity.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><p class="Para" id="Par71">Use encryption to protect against data leaking.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><p class="Para" id="Par72"><span class="EmphasisFontCategoryNonProportional ">aud</span> verification protects against token re-use—you want to make sure you're using a token issued for you.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><p class="Para" id="Par73">The token issuance, expiration, and authentication times protect against stale information</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><p class="Para" id="Par74">The <span class="EmphasisFontCategoryNonProportional ">nonce</span> prevents CSRF attacks, like the OAuth state parameter, but is signed.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><p class="Para" id="Par75">The <span class="EmphasisFontCategoryNonProportional ">acr</span> and <span class="EmphasisFontCategoryNonProportional ">amr</span> claims convey information about how the subject was authenticated.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">7.</span><div class="ItemContent"><p class="Para" id="Par76">The access token can be validated using the <span class="EmphasisFontCategoryNonProportional ">at_hash</span> value<span id="ITerm95">
                        
                        
                      </span><span id="ITerm96">
                        
                      </span>.</p></div><div class="ClearBoth">&nbsp;</div></li></ol></div></div></section><section class="Section2 RenderAsSection2" id="Sec15"><h3 class="Heading">Hybrid Flow</h3><p class="Para" id="Par77"><span id="ITerm97">Hybrid flow</span><span id="ITerm98">
                
              </span> is one of the least understood Connect features, but it’s actually not that complicated. The <span class="EmphasisFontCategoryNonProportional ">response_type</span> for hybrid flow always includes code, plus <span class="EmphasisFontCategoryNonProportional ">token</span>, <span class="EmphasisFontCategoryNonProportional ">id_token</span>, or both. As Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig1">5-1</a></span> shows, the hybrid flow can be used to achieve higher security levels—by returning the <span class="EmphasisFontCategoryNonProportional ">id_token</span> from the authorization endpoint, the client can verify the integrity of the code by verifying the <span class="EmphasisFontCategoryNonProportional ">id_token</span> claim <span class="EmphasisFontCategoryNonProportional ">c_hash</span>. The most logical hybrid flow <span class="EmphasisFontCategoryNonProportional ">response_type</span> is <span class="EmphasisFontCategoryNonProportional ">code id_token</span>. You can also get back an access token from the authorization endpoint in the hybrid flow, but it’s not clear to me why you would want to do this—you’re going to get a new access token when you use the code at the token endpoint.</p><div class="Para" id="Par78">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig12">5-12</a></span> provides an overview of the hybrid flow for response type code <span class="EmphasisFontCategoryNonProportional ">id_token</span><span id="ITerm99">
                
                
              </span><span id="ITerm100">
                
              </span>.<figure class="Figure" id="Fig12"><div class="MediaObject" id="MO12"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig12_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig12_HTML.jpg" style="height:53.5em" width="1354" height="2140" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig12_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-12</span><p class="SimplePara">OpenID Connect hybrid flow sequence <span id="ITerm101">diagram</span><span id="ITerm102">
                        
                      </span></p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec16"><h3 class="Heading">Request Object</h3><p class="Para" id="Par79">The parameters used to call the Connect <span id="ITerm103">authorization</span> endpoint may be sent as one consolidated JSON object, instead of as individual parameters. This JSON request object can optionally be signed and encrypted in JWT format. You can also mix and match—sending some parameters in the request and others in the request object. Some claims may even be repeated (sent as both a parameter and in the JSON object). To comply with OAuth and OpenID requirements, this might be necessary. For example, OAuth specifies that the <span class="EmphasisFontCategoryNonProportional ">client_id</span> must be present in the request to the authorization endpoint. Mixing parameters with request objects can also make sense for certain parameters that change—like the <span class="EmphasisFontCategoryNonProportional ">nonce</span> and <span class="EmphasisFontCategoryNonProportional ">state</span>.</p><div class="Para" id="Par80">There are three ways the client can send the request object to the OP.<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par81">It can be sent as a request parameter.</p></li><li><p class="Para" id="Par82">It can be stored on a web server and referenced with the <span class="EmphasisFontCategoryNonProportional ">request_uri</span> parameter<span id="ITerm104">
                      
                    </span>. This is known as passing the request by reference.</p></li><li><p class="Para" id="Par83">It can be registered with the OP during client registration or some other request registration process.</p></li></ul></div></div><div class="Para" id="Par84">It’s interesting to note that using the <span class="EmphasisFontCategoryNonProportional ">request</span> object<span id="ITerm105">
                
              </span> enables the client to increase the security level of the OAuth flow, primarily due to the signing and encryption. Why would you want to send the request object as a URI, or pre-register it? There are a few good reasons listed in the OpenID Core Specification:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par85">The set of request parameters can become large and can exceed browser URI size limitations. Passing the request parameters by reference can solve this problem.</p></li><li><p class="Para" id="Par86">Passing a <span class="EmphasisFontCategoryNonProportional ">request_uri</span> value, rather than a complete request by value, can reduce request latency.</p></li><li><p class="Para" id="Par87">Most requests for claims from an RP are constant. The <span class="EmphasisFontCategoryNonProportional ">request_uri</span> is a way of creating and sometimes also signing and encrypting a constant set of request parameters in advance. (The <span class="EmphasisFontCategoryNonProportional ">request_uri</span> value<span id="ITerm106">
                      
                    </span> becomes an “artifact” representing a particular fixed set of request parameters.) <span id="ITerm107">
                      
                      
                    </span></p></li><li><p class="Para" id="Par88">Pre-registering a fixed set of request parameters at registration time enables OPs to cache and pre-validate the request parameters at registration time, meaning they need not be retrieved at request time.</p></li><li><p class="Para" id="Par89">Pre-registering a fixed set of request parameters at registration time also enables OPs to vet the contents of the request from consumer protection and other points of views, either itself or by utilizing a third party.</p></li></ul></div></div></section><section class="Section2 RenderAsSection2" id="Sec17"><h3 class="Heading">Userinfo Endpoint</h3><p class="Para" id="Par90">The subject <span id="ITerm108">identifier</span><span id="ITerm109">
                
                
              </span> is intrinsically interesting. It allows you to correlate a person’s visits to your website. But very often, you want to know more information about the person that was identified at the OpenID Provider. While some of this information may be passed in the <span class="EmphasisFontCategoryNonProportional ">id_token</span> itself, the Userinfo endpoint can provide additional claims about the subject (attributes in SAML or LDAP jargon).</p><p class="Para" id="Par91">In order to access the Userinfo endpoint, the client needs to obtain an access token from the token endpoint. One interesting characteristic of an OpenID Provider is that the Userinfo endpoint is that only protected API, as shown in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig2">5-2</a></span>. Thus the OAuth resource server and authorization server are conflated into one logical unit.</p><p class="Para" id="Par92">Connect defines standard user claims. For dynamic configuration, the standardization of claims and scopes reduces one of the barriers to interoperability—agreement on user claim schema. Although standards people are famous for not agreeing on schema, there are a few issues with this part of the OpenID Connect standard. The first thing that could use improvement is that as the standard claims are defined in Section 5.1 of the Connect Core specification are difficult to reference. LDAP and SAML both provide a better mechanism for the identification of user attributes.</p><p class="Para" id="Par93">For example, no identifier is used other than the claim name—LDAP uses OIDs, SAML uses URIs. Another questionable decision is the use of the underscore character in the attribute names, which is not valid for an LDAP attribute name. The only explanation I’ve heard about why there are underscores in these attribute names is that an engineer at Facebook said that developers like them. If you want to do a direct mapping to LDAP, you’ll have to do some kind of claims mapping.</p><p class="Para" id="Par94">Connect also defines four standard <span id="ITerm110">scopes</span><span id="ITerm111">
                
                
              </span>, which enable a person to authorize the release of personal information in bulk: profile, email, address, and phone. Profile is interesting because it contains many commonly released attributes, including first name, last name, and username. It’s handy to use OAuth scopes to enable a person to authorize the release of a group of claims. SAML never provided such a mechanism, so it’s not clear how to handle this requirement—although people have tried (for example, search the Internet for Shibboleth uApprove).</p><div class="Para" id="Par95">But what if you have your own custom attributes? You could define your own scope and map your custom claims to this scope. The Connect Discovery specification enables an OP to publish <span class="EmphasisFontCategoryNonProportional ">scopes_supported</span> and <span class="EmphasisFontCategoryNonProportional ">claims_supported</span>. Unfortunately, there is no way for an OP to specify which claims are associated with which scopes. For this reason, the Gluu Server OP publishes a non-standard attribute called <span class="EmphasisFontCategoryNonProportional ">scope_to_claims_mapping</span>. But even without this OP discovery claim, the correct scope could be communicated out-of-band. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig13">5-13</a></span> shows a custom OpenID scope being configured in the Gluu <span id="ITerm112">Server</span><span id="ITerm113">
                
                
              </span>.<figure class="Figure" id="Fig13"><div class="MediaObject" id="MO13"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig13_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig13_HTML.jpg" style="height:33.85em" width="1725" height="1354" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig13_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-13</span><p class="SimplePara">Custom scope configuration in the Gluu Server</p></div></figcaption></figure></div><p class="Para" id="Par96">It is also possible to request individual claims from the Userinfo endpoint. The OP signals to the client that this is possible by publishing the <span class="EmphasisFontCategoryNonProportional ">claims_parameter_supported</span> discovery claim. The claims parameter value is a JSON object that provides details about the desired data. It may be advantageous to obtain specific combinations of claims that cannot be specified using scope <span id="ITerm114">values</span><span id="ITerm115">
                
                
              </span>.</p></section><section class="Section2 RenderAsSection2" id="Sec18"><h3 class="Heading">Logout</h3><p class="Para" id="Par97">The bane of IAM professionals is currently <span id="ITerm116">logout</span><span id="ITerm117">
                
                
              </span>—especially “single logout” or SLO. One of the challenges is that expectations vary. Consider this example: let’s say you are logged into Google, and you have used Google login to authenticate to several websites, each open in a browser tab. After a while, you close some of these tabs (without indicated that you want to log out). And after some more time, you click the logout button on a website. What is your expectation? Would you expect to be logged out of Google? What about the other applications? What if, instead of Google as the OP, we change the scenario to websites that are hosted by your organization and connected to your corporate OP. Your expectation might be different?</p><p class="Para" id="Par98">The other challenge is that SLO is an inherently asynchronous process, and it’s hard to solve with synchronous protocols that define requests and responses. In this example, to achieve SLO, we need to send messages to each of the applications, and to the OP. Some of those messages may be lost on the network and require retransmission. But how long does a person who just clicked a logout button want to wait to see a confirmation that they’ve been logged out?</p><p class="Para" id="Par99">OpenID Connect has defined three different imperfect mechanisms to affect SLO. The first is called Session Management, and involves using a JavaScript component in each tab that listens for a logout event, and sends a notification to the respective backend web server to end the application session. This is rarely implemented because it’s so unreliable—if the browser tab is closed at the time logout is needed, it will never be executed, and the backend application will never be notified. It’s also been logistically difficult to get applications to update their content to support this mechanism.</p><p class="Para" id="Par100">The other two <span id="ITerm118">mechanisms</span><span id="ITerm119">
                
                
              </span> were introduced after OpenID Connect 1.0 was released, as it became apparent that the JavaScript logout approach was flawed. The two new specifications define front-channel and back-channel logout mechanisms, and overload the same <span class="EmphasisFontCategoryNonProportional ">end_session</span> endpoint that was previously defined in the Session Management specification. <span id="ITerm120">Back-channel logout</span> requires the OP to notify the application that a logout event happened. Front-channel logout requires the OP to return an HTML page, with an iFrame for each application that requires logout. The iFrame should cause the browser to call the logout page for each application. When it works, front-channel logout is a good option because it offloads the network traffic and processing to the browser. Also, the web applications can clean up cookies in the browser. The disadvantage of front-channel logout is that a person may disable third-party cookies, breaking logout. The other problem is that the OP has no idea what happened. Its best efforts—it returned the logout URLs to the browser and never receives any confirmation if each logout was successful. Consequently, it’s possible that failed logouts won’t be retried, and application sessions may persist.</p><p class="Para" id="Par101">Keep in mind that sessions are always in the context of a browser. If you have two different browsers open, and you log out of one browser, you would not expect to be logged out of the other browser. You would probably be even more surprised if you logged out on your laptop, and your sessions on your mobile device ended! It’s up to the OP to track which clients are associated with each session and to attempt logout <span id="ITerm121">appropriately</span><span id="ITerm122">
                
                
              </span>.</p><p class="Para" id="Par102">The elusive nature of logout may frustrate management at your organization. The best way to handle this is to make sure you understand the expectations for logout and try your best to achieve them. Things may get even more complicated if you have to consider logout across multiple protocols—for example if you are using both SAML and OpenID Connect in your <span id="ITerm123">organization</span><span id="ITerm124">
                
                
              </span>.</p></section><section class="Section2 RenderAsSection2" id="Sec19"><h3 class="Heading">Pairwise Identifiers</h3><p class="Para" id="Par103">In our new world of big data analysis <span id="ITerm125">tools</span><span id="ITerm126">
                
              </span>, the more websites you visit, the more digital breadcrumbs you leave across the Internet. It’s important for some websites to know who we are—for example, your bank or the government. But other websites, you’d rather they not know your true identity. In the Shibboleth SAML IDP, there is a feature called “persistent non-correlatable identifiers”. In Connect, the same idea exists, called “pairwise identifiers”. The goal is to release a different subject identifier to each website, but to always release the same identifier for that person, each time the website is visited. This prevents several websites from colluding to correlate your identity, thereby protecting your privacy.</p><p class="Para" id="Par104">There are a few strategies for generating pairwise identifiers. The OP could store the information in a database and lookup the identifier when the subject returns. The other option is to use an algorithm to generate the identifier. You could for example use a hash of the subject’s username, the <span class="EmphasisFontCategoryNonProportional ">client_id</span>, and a salt value. Every time the person visits the site, the value for this function would be the same—so it avoids the need to write this information to the database.</p><p class="Para" id="Par105">A complication arises: what if there are a group of related websites that need a consistent identifier for the subject across the domain? Think of a portal application that is comprised of several related web components. If we issue each client a different identifier, it could break the portal. Connect defines a client claim called <span id="ITerm127">
                <span class="EmphasisFontCategoryNonProportional ">sector_identifier_uri</span>
                
              </span>. This URI is hosted by the RP and should return a JSON document with an array of related <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span> values<span id="ITerm128">
                
              </span>. By specifying the <span id="ITerm129">
                <span class="EmphasisFontCategoryNonProportional ">sector_identifier_uri</span>
                
              </span> at registration, the client signals to the OP to use it instead of the client identifier to generate pairwise identifiers. Aspects of the algorithm for pairwise identifiers are defined in the Connect Core specification, but the exact algorithm is up to the OP <span id="ITerm130">implementation</span><span id="ITerm131">
                
              </span>.</p></section><section class="Section2 RenderAsSection2" id="Sec20"><h3 class="Heading">ACR/AMR Parameters</h3><p class="Para" id="Par106">Since 1983, when the <em class="EmphasisTypeItalic ">WarGames</em> protagonist David Lightman (played by Matthew Broderick) snatched the password for his school district’s mainframe (“pencil”), it’s been well known that passwords are vulnerable to compromise. Connect defines two parameters to facilitate the use of strong authentication technologies: “acr” (Authentication Context Class Reference), and “amr” (Authentication Methods <span id="ITerm132">Reference</span>)<span id="ITerm133">
                
                
              </span><span id="ITerm134">
                
              </span>.</p><p class="Para" id="Par107">The acr concept has existed since SAML, which defines a <span class="EmphasisFontCategoryNonProportional ">AuthnContextClassRef</span> element<span id="ITerm135">
                
              </span> as part of a <span class="EmphasisFontCategoryNonProportional ">RequestedAuthnContext</span>. The values used for acr vary based on the administrative domain. The acr can carry meaning about trust, not just authentication strength. For example, the acr value is sometimes used to specify a NIST 800-63 level of assurance (1-4). The Connect Core specification indicates that an acr value of 0 signals to the RP that the authentication should not be used to secure a transaction of any monetary value. A common convention is to use a URI for the value of the acr, to enable the policies and procedures around to be externally defined. URIs are a good choice because they are in a collision-resistant namespace.</p><p class="Para" id="Par108">The amr authentication claim is new in Connect. This value is returned in the id_token, and it provides the OP with an opportunity to provide additional context around the authentication event. An OAuth draft proposes standard values for the amr claim, including <span class="EmphasisFontCategoryNonProportional ">face</span>, <span class="EmphasisFontCategoryNonProportional ">pwd</span>, <span class="EmphasisFontCategoryNonProportional ">iris</span>, and <span class="EmphasisFontCategoryNonProportional ">mfa</span>. The OP and client would have to know from some out-of-band mechanism what these values mean.</p><p class="Para" id="Par109">Let’s consider an end-to-end example. Let’s say a person uses a password to authenticate at the Gluu Server, and then navigates to a website. The Gluu Server returns an integer value as the first value of the amr array. This value corresponds to a “level,” which can be associated with different types of authentication. Integers are convenient for automated policy evaluation. If the level is not sufficient, the client can direct the person back to the authorization endpoint, with an extra parameter <span class="EmphasisFontCategoryNonProportional ">prompt=login</span>. This signals to the OP to re-authenticate the person. At that time, the client can also use the <span class="EmphasisFontCategoryNonProportional ">acr_values</span> parameter to request a specific type of <span id="ITerm136">authentication</span>.</p></section></section><section class="Section1 RenderAsSection1" id="Sec21"><h2 class="Heading">The Gluu Server OpenID Connect Provider</h2><p class="Para" id="Par110">While there are several open source OpenID Connect provider implementations, the <span id="ITerm137">Gluu Server</span><span id="ITerm138">
              
              
            </span> was one of the first, and it is used in a wide array of consumer facing industries such as banking, telco, healthcare, government, education, and retail.</p><p class="Para" id="Par111">If you have been reading this book sequentially, you may already have installed it in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_1_Chapter.xhtml" class="totri-footnote"><span class="RefSource">1</span></a></span>. OpenID Connect is a required component. You may want to tweak some of the OpenID Connect settings. For example, perhaps you want to disable dynamic client registration. In general, the default settings ardently protect privacy. In a trusted enterprise setting, you may want to loosen some of the defaults, like token and session timeouts. You may want to extend client expiration time beyond one day.</p><p class="Para" id="Par112">The OpenID Connect features are derived from the oxAuth component. oxTrust is the administrative web interface for oxAuth to configure system settings, manually add or configure clients, define scopes, and associate user claims with scopes. You can script configuration using oxTrust administrative APIs.</p><div class="Para" id="Par113">The Gluu Server uses “interception scripts” to enable you to customize the behavior of the OpenID Provider. There are four in particular that apply to OpenID Connect, as outlined in Table <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Tab3">5-3</a></span>.<div class="Table" id="Tab3"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-3</span><p class="SimplePara">Gluu Server Login Related Interception <span id="ITerm139">Scripts</span><span id="ITerm140">
                      
                      
                    </span></p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Script</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Person Authentication</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Allows the definition of multi-step authentication workflows, including adaptive authentication, where the number of steps varies depending on the context.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Consent Gathering</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Allows exact customization of the authorization (or consent) process. By default, the OP will request authorization for each scope, and display the respective scope description.</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Dynamic Scopes</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Enables admin to generate scopes on the fly, for example by calling external APIs.</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">Application Session</p></td><td style="text-align: left;"><p class="SimplePara">Called at the end of a web browser session to clean up third-party sessions or implement other business logic.</p></td></tr></tbody></table></div></div><p class="Para" id="Par114">The Gluu Server was designed for high performance. You can use Redis to store short-lived objects, like the authorization code and access tokens. Long-lived data is written to the database—version 3.x uses LDAP and version 4.x introduces a database option for Couchbase, which allows for sharded deployments for very large data sets with requirements for high concurrency. For elasticity and automation, Docker and Kubernetes versions are also available, in addition to the virtual machine distribution you installed in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_1_Chapter.xhtml" class="totri-footnote"><span class="RefSource">1</span></a></span>. Following are some highlights of Gluu OpenID Connect features.</p><p class="Para" id="Par115">Gluu has some OpenID Connect client configuration options that you may find handy. One is called “Pre-Authorization”. You can enable this if you trust a client and don't want to present the authorization (consent) screen when a person is accessing an application. For example, when you use a third-party application, Google asks for your permission. But when you use a Google application, they do not.</p><p class="Para" id="Par116">The Gluu Server supports pairwise identifiers and gives you two options to generate them: algorithmic and persistent. The former are generated dynamically as needed based on a hash of the <span class="EmphasisFontCategoryNonProportional ">client_id</span> and subject identifier. If multiple clients are grouped using a <span class="EmphasisFontCategoryNonProportional ">sector_identifier_uri</span>, it is used instead of the <span class="EmphasisFontCategoryNonProportional ">client_id</span>. The advantage of algorithmically generated subject identifiers is that they reduce storage requirements. However, it's hard to search for a person with a specific algorithmic pairwise identifier. So the other approach is to generate a pairwise identifier for each client (or <span class="EmphasisFontCategoryNonProportional ">sector_identifier_uri</span>) and store it in the database. This data is stored with the person's entry in LDAP or Couchbase.</p><p class="Para" id="Par117">The Gluu Server supports all authentication types at the token endpoint, including private key. Client_id and secret is a shared secret. If the client registers a public key for token authentication during registration, it improves security by avoiding shared secrets.</p><p class="Para" id="Par118">The <span id="ITerm141">Gluu Server</span><span id="ITerm142">
              
              
            </span> provides a way to publish <span class="EmphasisFontCategoryNonProportional ">sector_identifier</span> URIs. You could use a flat file for this, but the oxTrust provides an interface to search for clients, or to manually add redirect URIs.</p><p class="Para" id="Par119">For more information on the Gluu Server, see the documentation at <span class="ExternalRef"><a href="https://gluu.org/docs"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional ">https://gluu.org/docs</span>
              </span></a></span>.</p></section><section class="Section1 RenderAsSection1" id="Sec22"><h2 class="Heading">Developing OpenID Connect Client Code</h2><p class="Para" id="Par120">Now for the fun part! The next four sections will provide just an overview of client <span id="ITerm143">software</span>, and a few examples of how to use OpenID Connect. All of these examples can be tested against the Gluu Server you setup in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_1_Chapter.xhtml" class="totri-footnote"><span class="RefSource">1</span></a></span>, although they should work against any OpenID Provider.</p><section class="Section2 RenderAsSection2" id="Sec23"><h3 class="Heading">Easy JavaScript Client</h3><p class="Para" id="Par121">This <span id="ITerm144">JavaScript</span> client is one of the easiest ways to test OpenID <span id="ITerm145">Connect</span>, although it’s not the most secure (remember Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig1">5-1</a></span>). The client we will use was forked from a sample application written to demonstrate how easy it is to use Connect. Gluu forked the code and has enhanced it since that time. The project can be found at <span class="ExternalRef"><a href="https://github.com/GluuFederation/openid-implicit-client"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://github.com/GluuFederation/openid-implicit-client</span>
                </span></a></span>.</p><div class="Para" id="Par122">It’s not a fancy app—it sends the person to the authorization endpoint to be authenticated and then prints the claims that are returned in the <span id="ITerm146">
                <span class="EmphasisFontCategoryNonProportional ">id_token</span>
                
                
              </span>. Figures <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig12">5-12</a></span> and <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig13">5-13</a></span> are the two pages of the demo from that project. This client doesn't support dynamic client registration, so you’ll have to add the client manually to the Gluu Server via the oxTrust Admin UI (or use the oxAuth RP web application, described later). When adding the client in oxTrust, the fields you should configure for the client are shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC9">5-8</a></span>.<div class="ProgramCode" id="PC9"><div class="LineGroup"><div class="FixedLine">Client Name: Implicit Test Client</div><div class="FixedLine">response_type: token id_token</div><div class="FixedLine">Application Type: Web</div><div class="FixedLine">Pre-Authorization: Enabled</div><div class="FixedLine">Subject Type: public</div><div class="FixedLine">Scopes:openid, profile, email</div><div class="FixedLine">Response Types: token id_token</div><div class="FixedLine">Grant Types: implicit</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-8</span><p class="SimplePara">oxTrust Client <span id="ITerm147">Configuration</span> for the OpenID Implicit Client Sample</p></div></div></div></div><div class="Para" id="Par123">Once you have registered the <span id="ITerm148">client</span>, all you need to do is to update the <span class="EmphasisFontCategoryNonProportional ">client_id</span>, <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span>, and <span class="EmphasisFontCategoryNonProportional ">providerInfo</span> values<span id="ITerm149">
                
                
              </span> in the login page HTML. Assuming you’ve checked out the project into a web accessible folder, then navigate to the page and test (see Figures <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig14">5-14</a></span> and <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig15">5-15</a></span>)! Check the latest documentation for other features, like logout or calling the Userinfo endpoint. In this demo, you should configure the Gluu Server to return user claims in the <span class="EmphasisFontCategoryNonProportional ">id_token</span>. Unfortunately, this client does not support <span id="ITerm150">logout</span>.<figure class="Figure" id="Fig14"><div class="MediaObject" id="MO14"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig14_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig14_HTML.jpg" style="height:13.28em" width="1725" height="531" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig14_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-14</span><p class="SimplePara"><span id="ITerm151">Login page</span> for OpenID Connect implicit client (implicit-test.html)</p></div></figcaption></figure><figure class="Figure" id="Fig15"><div class="MediaObject" id="MO15"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig15_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig15_HTML.jpg" style="height:27.68em" width="1725" height="1107" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig15_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-15</span><p class="SimplePara"><span id="ITerm152">Callback page</span> for the OpenID Connect implicit client (login-callback.html) <span id="ITerm153">
                        
                        
                      </span></p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec24"><h3 class="Heading">Apache httpd Module</h3><div class="Para" id="Par124">One of the common approaches to protect a web application is to use a web <span id="ITerm154">server</span> filter to intercept the request and make sure the person using that connection is authenticated and authorized (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig16">5-16</a></span>). The web server with the filter may directly serve the application, or may proxy to a backend service. Leveraging the web server is a well-established pattern, used by older access management platforms as old as CA Siteminder and SAML platforms like the Shibboleth SP.<figure class="Figure" id="Fig16"><div class="MediaObject" id="MO16"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig16_HTML.png" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig16_HTML.png" style="height:26.98em" width="1425" height="1079" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig16_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-16</span><p class="SimplePara">Two approaches to web access <span id="ITerm155">management</span></p></div></figcaption></figure></div><p class="Para" id="Par125">One of the advantages of the web server filter <span id="ITerm156">approach</span> is that the application developer does not need to know that much about the security protocols—if the request makes it through to the application, the person has been authenticated, and the request is authorized. Another advantage is that application security is administered by the system administrators, not by developers. It may be easier to manage and audit Apache configuration files than to read a bunch of code.</p><p class="Para" id="Par126">One of the best OpenID Connect relying party implementations was written by Hans Zandbelt, called <span id="ITerm157">
                <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span>
                
                
              </span>. It is an authentication/authorization module for the Apache 2.x HTTP server that authenticates users against an <span id="ITerm158">OpenID Connect Provider</span>. Currently, the software can be found at <span class="ExternalRef"><a href="https://github.com/zmartzone/mod_auth_openidc"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://github.com/zmartzone/mod_auth_openidc</span>
                </span></a></span> and is included in the package management system for several Linux distributions. There are binary packages available, and if you are good at compiling C code, you can build it yourself from the source. Note, if you are an Nginx fan, you can also take a look at a similar extension, also by Zandbelt, at <span class="ExternalRef"><a href="https://github.com/zmartzone/lua-resty-openidc"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://github.com/zmartzone/lua-resty-openidc</span>
                </span></a></span>.</p><p class="Para" id="Par127">Following are instructions for setting up an Apache HTTPD server on Ubuntu 14 (trusty). If you’re using a Red Hat based system, you may have to adjust some of these commands to align with its style of Apache HTTPD deployment.</p><section class="Section3 RenderAsSection3" id="Sec25"><h4 class="Heading">Basic Web Server Installation</h4><div class="Para" id="Par128">Before you can install <span class="EmphasisFontCategoryNonProportional ">mod_auth_ope</span>nidc, you need to have an Apache httpd server running with SSL enabled. It is assumed that all the hostnames will be DNS resolvable. If not, then add the entries in the <span class="EmphasisFontCategoryNonProportional ">/etc/hosts</span> file on both the web server and Gluu Server. If you don’t have the Apache HTTPD server installed, use <span class="EmphasisFontCategoryNonProportional ">apt-get</span> to <span id="ITerm159">install</span> the Ubuntu standard distribution:<div class="ProgramCode" id="PC10"><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;apt-get install apache2</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;service apache2 start</div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec26"><h4 class="Heading">SSL Configuration</h4><div class="Para" id="Par129">Enable the SSL module in <span id="ITerm160">Apache2</span>.<div class="ProgramCode" id="PC11"><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;#&nbsp;&nbsp;a2enmod ssl</div></div></div></div><div class="Para" id="Par130">Create a self-signed certificate. Answer the certificate signing request questions, using the server hostname for the “Common Name”. If this is a production deployment, you should replace this with a <span id="ITerm161">certificate</span> with one issued by a certification authority whose public key is in most browsers, like LetsEncrypt, <span class="ExternalRef"><a href="https://letsencrypt.org/"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://letsencrypt.org</span>
                  </span></a></span><div class="ProgramCode" id="PC12"><div class="LineGroup"><div class="FixedLine"># openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout/etc/ssl/private/server.key -out /etc/ssl/certs/server.crt</div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec27"><h4 class="Heading">Configure Apache to Use SSL</h4><div class="Para" id="Par131">Open the <span class="EmphasisFontCategoryNonProportional ">default-ssl.conf</span> file and update the certificate locations with the newly created private key and certificate:<div class="ProgramCode" id="PC13"><div class="LineGroup"><div class="FixedLine"># vi /etc/apache2/sites-available/default-ssl.conf</div></div></div></div><div class="Para" id="Par132">Activate the <span id="ITerm162">SSL virtual host and CGI</span>:<div class="ProgramCode" id="PC14"><div class="LineGroup"><div class="FixedLine"># a2ensite default-ssl.conf</div><div class="FixedLine"># a2enmod cgid</div><div class="FixedLine"># service apache2 restart</div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec28"><h4 class="Heading">Configuration of mod_auth_openid</h4><div class="Para" id="Par133">The <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span> module depends on the Ubuntu package <span class="EmphasisFontCategoryNonProportional ">libjansson4</span>:<div class="ProgramCode" id="PC15"><div class="LineGroup"><div class="FixedLine"># apt-get install libjansson</div></div></div></div><p class="Para" id="Par134">You'll also need the <span id="ITerm163">
                  <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span>
                  
                </span> and <span class="EmphasisFontCategoryNonProportional ">libjose</span> packages<span id="ITerm164">
                  
                </span>, which can be downloaded from the Releases page at <span class="ExternalRef"><a href="https://github.com/zmartzone/lua-resty-openidc/releases"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://github.com/zmartzone/lua-resty-openidc/releases</span>
                  </span></a></span>. If there is no binary package for your distribution, you can build from source. Follow the instructions on the GitHub project page README.</p><div class="Para" id="Par135">For example, at this time the current release is 2.3.7, which depends on libjose 2.3 (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC16">5-9</a></span>).<div class="ProgramCode" id="PC16"><div class="LineGroup"><div class="FixedLine"># wget https://github.com/zmartzone/mod_auth_openidc/releases/download/v2.3.0/libcjose0_0.5.1-1.trusty.1_amd64.deb</div><div class="FixedLine"># wget https://github.com/zmartzone/mod_auth_openidc/releases/download/v2.3.7/libapache2-mod-auth-openidc_2.3.7-1.trusty.1_amd64.deb</div><div class="FixedLine"># dpkg -i libcjose0_0.5.1-1.trusty.1_amd64.deb</div><div class="FixedLine"># dpkg -i libapache2-mod-auth-openidc_2.3.7-1.trusty.1_amd64.deb</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-9</span><p class="SimplePara">Installing <span id="ITerm165">mod_auth_openidc</span></p></div></div></div></div><div class="Para" id="Par136">Now you can enable the module:<div class="ProgramCode" id="PC17"><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;# sudo a2enmod auth_openidc</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;# sudo service apache2 restart<span id="ITerm166">
                        
                        
                      </span></div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec29"><h4 class="Heading">Client Registration</h4><div class="Para" id="Par137">You could use either dynamic or manual <span id="ITerm167">client registration</span> with <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span>. For this example, let's create the client manually in the Gluu Server. When you add the client, use the parameters in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC18">5-10</a></span>.<div class="ProgramCode" id="PC18"><div class="LineGroup"><div class="FixedLine">Name: mod_auth_openidc</div><div class="FixedLine">Client Secret: something-sufficiently-unguessable</div><div class="FixedLine">Application Type: Web</div><div class="FixedLine">Pre-Authorization: Enabled</div><div class="FixedLine">login uri: https://www.mydomain.com/callback</div><div class="FixedLine">Subject Type: Public</div><div class="FixedLine">copes: openid, profile, email</div><div class="FixedLine">Response Types: code</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-10</span><p class="SimplePara">oxTrust configuration the OpenID Connect Client for mod_auth_openidc</p></div></div></div></div><p class="Para" id="Par138">Make a note of the client secret (you won't get to see it again)! You'll also need the <span class="EmphasisFontCategoryNonProportional ">client_id</span> for the next step.</p></section><section class="Section3 RenderAsSection3" id="Sec30"><h4 class="Heading">Configuring the Apache <span id="ITerm168">VirtualHost</span></h4><div class="Para" id="Par139">You are almost done! You'll need to configure <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span> to protect your server.<div class="ProgramCode" id="PC19"><div class="LineGroup"><div class="FixedLine"># vi /etc/apache2/sites-available/default-ssl.conf</div></div></div></div><div class="Para" id="Par140">Add the code from Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC20">5-11</a></span> right under <span class="EmphasisFontCategoryNonProportional ">&lt;VirtualHost _default_:443&gt;</span>.<div class="ProgramCode" id="PC20"><div class="LineGroup"><div class="FixedLine">OIDCProviderMetadataURL https://idp.mydomain.com/.well-known/openid-configuration</div><div class="FixedLine">OIDCClientID (client-id-you-got-back-when-you-added-the-client)</div><div class="FixedLine">OIDCClientSecret (your-client-secret)</div><div class="FixedLine">OIDCRedirectURI https://www.mydomain.com/callback</div><div class="FixedLine">OIDCResponseType code</div><div class="FixedLine">OIDCScope "openid profile email"</div><div class="FixedLine">OIDCSSLValidateServer Off</div><div class="FixedLine">OIDCCryptoPassphrase (a-random-seed-value)</div><div class="FixedLine">OIDCPassClaimsAs environment</div><div class="FixedLine">OIDCClaimPrefix Userinfo_</div><div class="FixedLine">OIDCPassIDTokenAs payload</div><div class="FixedLine">&lt;Location "/"&gt;</div><div class="FixedLine">Require valid-user</div><div class="FixedLine">AuthType openid-connect</div><div class="FixedLine">&lt;/Location&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-11</span><p class="SimplePara">mod_auth_openidc Apache Web Server Directives</p></div></div></div></div><div class="Para" id="Par141">Then restart Apache to affect the changes.<div class="ProgramCode" id="PC21"><div class="LineGroup"><div class="FixedLine"># service apache2 restart</div></div></div></div><p class="Para" id="Par142">The most confusing part here is the <span class="EmphasisFontCategoryNonProportional ">OIDCRedirectURI</span>—don't set this to a path used by your server. The Apache filter uses the <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span> to process the response from the OP.</p></section><section class="Section3 RenderAsSection3" id="Sec31"><h4 class="Heading">Install CGI script</h4><div class="Para" id="Par143">We’re going to use the same sample script that we used in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml" class="totri-footnote"><span class="RefSource">3</span></a></span>. If you don't have a copy somewhere, edit the <span class="EmphasisFontCategoryNonProportional ">printHeaders.cgi</span> file and add the content from Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#PC22">5-12</a></span>.<div class="ProgramCode" id="PC22"><div class="LineGroup"><div class="FixedLine">#!/usr/bin/python</div></div><div class="LineGroup"><div class="FixedLine"># Install in /usr/lib/cgi-bin/printHeaders.cgi</div></div><div class="LineGroup"><div class="FixedLine">import os</div></div><div class="LineGroup"><div class="FixedLine">d = os.environ</div><div class="FixedLine">k = d.keys()</div><div class="FixedLine">k.sort()</div></div><div class="LineGroup"><div class="FixedLine">print "Content-type: text/html\n\n"</div></div><div class="LineGroup"><div class="FixedLine">print "&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;printHeaders.cgi&lt;/TITLE&gt;&lt;/Head&gt;&lt;BODY&gt;"</div><div class="FixedLine">print "&lt;h1&gt;Environment Variables&lt;/H1&gt;"</div><div class="FixedLine">for item in k:</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "&lt;p&gt;&lt;B&gt;%s&lt;/B&gt;: %s &lt;/p&gt;" % (item, d[item])</div><div class="FixedLine">print "&lt;/BODY&gt;&lt;/HTML&gt;"</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 5-12</span><p class="SimplePara">Sample Python cgi-script to Print the HTTP <span id="ITerm169">Headers</span></p></div></div></div></div><div class="Para" id="Par144">Then you'll need to make the script executable by the Apache.<div class="ProgramCode" id="PC23"><div class="LineGroup"><div class="FixedLine"># chown www-data:www-data /usr/lib/cgi-bin/printHeaders.cgi</div><div class="FixedLine"># chmod ug+x /usr/lib/cgi-bin/printHeaders.cgi</div></div></div></div><p class="Para" id="Par145">Now you’re ready to test. Open your web browser and point it at <span class="ExternalRef"><a href="https://www.mydomain.com/cgi-bin/printHeaders.py"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://www.mydomain.com/cgi-bin/printHeaders.py</span>
                  </span></a></span>.</p><p class="Para" id="Par146">If you’re not logged in already, you should be redirected to the authentication page. If you are logged in, you should just see an HTML page with the <span class="EmphasisFontCategoryNonProportional ">REMOTE_USER</span> variable populated. Also check out <span class="EmphasisFontCategoryNonProportional ">OIDC_id_token_payload</span> and all the claims for Userinfo.</p></section></section><section class="Section2 RenderAsSection2" id="Sec32"><h3 class="Heading">oxAuth RP</h3><div class="Para" id="Par147">The Gluu Server ships with an optional OpenID <span id="ITerm170">Connect</span><span id="ITerm171">
                
                
              </span> relying party web application, called <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span>, which is handy for testing because it prints the full request and response. During setup, you’ll be asked if you want to install it, which you should on a development environment. It will be deployed on <span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/oxauth-rp</span>. Using this tool, you can exercise all of the basic OpenID Connect APIs, including discovery, client registration, authorization, token, Userinfo, and <span class="EmphasisFontCategoryNonProportional ">end_session</span>. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig17">5-17</a></span> shows a screenshot of the form you should see if <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span> was installed successfully.<figure class="Figure" id="Fig17"><div class="MediaObject" id="MO17"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig17_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig17_HTML.jpg" style="height:30.97em" width="1725" height="1239" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig17_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-17</span><p class="SimplePara">oxauth-rp screenshot</p></div></figcaption></figure></div><p class="Para" id="Par148">If you want to test an OP like the Gluu Server, you can follow this procedure. First, in the Discovery section, enter the hostname or email address of the OP. This will trigger a WebFinger request, which will return the configuration URL at which the OP’s endpoints and configuration can be detected. The <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span> web <span id="ITerm172">application</span><span id="ITerm173">
                
                
              </span> parses the configuration JSON and populates the form accordingly. One handy feature of <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span> is that it will show you the corresponding requests and responses.</p><p class="Para" id="Par149">Second, you’ll want to register a client. Use the URL of <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span> as the Redirect URI, for example, <span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/oxauth-rp/home.htm.</span> You should also specify Response Type as <span class="EmphasisFontCategoryNonProportional ">CODE</span>, Grant Type as <span class="EmphasisFontCategoryNonProportional ">AUTHORIZATION_CODE</span>, the Application Type as <span class="EmphasisFontCategoryNonProportional ">WEB</span>, Client Name as <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span>, Subject Type as <span class="EmphasisFontCategoryNonProportional ">PUBLIC</span>. Make sure the response returns a <span class="EmphasisFontCategoryNonProportional ">client_id</span> and <span class="EmphasisFontCategoryNonProportional ">client_secret</span>.</p><p class="Para" id="Par150">Third, you can move to the Authorization Endpoint form. If you registered as specified, use the Response Type as <span class="EmphasisFontCategoryNonProportional ">CODE</span>, Scope as <span class="EmphasisFontCategoryNonProportional ">openid</span>, <span class="EmphasisFontCategoryNonProportional ">redirect_uri</span> should be populated for you already, State set to <span class="EmphasisFontCategoryNonProportional ">12345</span>, <span class="EmphasisFontCategoryNonProportional ">nonce</span> set to <span class="EmphasisFontCategoryNonProportional ">abcd12345</span>, Display set to <span class="EmphasisFontCategoryNonProportional ">Page</span>, and Claims set to <span class="EmphasisFontCategoryNonProportional ">{}.</span> After clicking Submit, you should be redirected the OP login page (if you don’t already have a session). After authentication and authorization, you should be redirected back to <span class="EmphasisFontCategoryNonProportional ">oxauth-rp</span>.</p><p class="Para" id="Par151">Fourth, you should be able to submit your request to the token endpoint. You’ll need to add Grant Type as <span class="EmphasisFontCategoryNonProportional ">AUTHORIZATION CODE</span>, Redirect URI to <span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/oxauth-rp/home.htm</span>, and Scope to <span class="EmphasisFontCategoryNonProportional ">openid</span>. This response should include a JSON object that includes the <span id="ITerm174">
                <span class="EmphasisFontCategoryNonProportional ">access_token</span>
                
              </span>, refresh token, and <span class="EmphasisFontCategoryNonProportional ">id_token</span> as keys in a JSON object. Finally, you’ll just click Submit on the Userinfo form. The access token should already be populated.</p></section><section class="Section2 RenderAsSection2" id="Sec33"><h3 class="Heading">AppAuth Mobile Applications</h3><div class="Para" id="Par152">One of the most compelling reasons to use OpenID Connect is to authenticate people from a mobile <span id="ITerm175">application</span><span id="ITerm176">
                
                
              </span> (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig18">5-18</a></span>). RFC 8252 “OAuth2 for Native Apps” provides an overview of an improved design for mobile security. In addition to the security features of OpenID Connect, this draft suggests the use of PKCE (briefly discussed in the previous chapter on OAuth) and custom URI schemes (i.e., an application can register a URI such as <span class="EmphasisFontCategoryNonProportional ">myapp://</span> instead of <span class="EmphasisFontCategoryNonProportional ">https://</span>). You can test AppAuth against the Gluu Server, as it supports PKCE and custom URI schemes.<figure class="Figure" id="Fig18"><div class="MediaObject" id="MO18"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig18_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig18_HTML.jpg" style="height:29.18em" width="1418" height="1167" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig18_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-18</span><p class="SimplePara">AppAuth mobile SSO <span id="ITerm177">overview</span><span id="ITerm178">
                        
                        
                      </span></p></div></figcaption></figure></div><div class="Para" id="Par153">In 2016, Google released and then donated code to the OpenID Foundation called AppAuth for Android and IOS. Simultaneously, Google announced that it was deprecating the use of WebView—a strategy used by mobile application developers that is vulnerable to malicious application code. Not only does AppAuth provide secure authentication, it also enables SSO across the system browser and mobile applications. It uses operating system hooks so that the system browser does not enable an application developer to steal a person’s credentials, codes, or tokens. Using this approach, mobile application developers can use the authorization code or hybrid flow. You can find the AppAuth code on <span id="ITerm179">GitHub</span><span id="ITerm180">
                
                
              </span>:<div class="ProgramCode" id="PC24"><div class="LineGroup"><div class="FixedLine">https://github.com/openid/AppAuth-Android https://github.com/openid/AppAuth-iOS https://github.com/openid/AppAuth-JS</div></div></div></div></section><section class="Section2 RenderAsSection2" id="Sec34"><h3 class="Heading">oxd Client Middleware Service</h3><div class="Para" id="Par154">Many <span id="ITerm181">applications</span><span id="ITerm182">
                
              </span> are “server-side,” meaning the web page displays content, but most of the dynamic business logic resides on the web server. Many server-side libraries, some of which are free open source, are listed on the OpenID Foundation website at <span class="ExternalRef"><a href="http://openid.net/developers/libraries"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">http://openid.net/developers/libraries</span>
                </span></a></span>. The features of these libraries vary. At a high level, the OpenID Foundation RP certification program sheds light on which libraries support which flows (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig19">5-19</a></span>). However, the certification tests don’t tell you anything about optional features (like private key authentication at the token endpoint) or usability. Unfortunately, some libraries are hard to use, not well documented, or lack examples.<figure class="Figure" id="Fig19"><div class="MediaObject" id="MO19"><img alt="../images/425975_1_En_5_Chapter/425975_1_En_5_Fig19_HTML.jpg" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_5_Fig19_HTML.jpg" style="height:9.9em" width="1725" height="396" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_5_Chapter/425975_1_En_5_Fig19_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 5-19</span><p class="SimplePara">oxd overview</p></div></figcaption></figure></div><p class="Para" id="Par155">Even if a client library makes it possible to use certain Connect features, developers may not bother. After login works, developers have a tendency to ignore extras, like checking signatures and state values. For this reason, Gluu releases the <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> client middleware service. It provides an easy RESTful interface that helps Connect client developers quickly use an OP, while letting the <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> do some of the heavy lifting, like checking the state and signature.</p><p class="Para" id="Par156">Another good reason to use the <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> is to facilitate updates. If your organization uses several client libraries, you need to make sure they are kept up-to-date. Also, because oxd provides a higher level API than OpenID Connect itself, it can implement new features of Connect or OAuth without changing the interface to your application, which may break something or trigger a new QA cycle. It's likely that attacks will be discovered against OAuth and Connect. An abstraction layer makes it easier to update the client code quickly.</p><p class="Para" id="Par157">Installation <span id="ITerm183">instructions</span><span id="ITerm184">
                
              </span> for <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> can be found on <span class="ExternalRef"><a href="https://gluu.org/docs/oxd/install"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://gluu.org/docs/oxd/install</span>
                </span></a></span>. You don’t need to create a client manually because the <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> uses dynamic client registration. You may want to extend the registration of oxd registered clients, so they don't expire in the default one day time period for dynamic clients.</p><p class="Para" id="Par158">There are two configuration files that you’ll need to configure in the <span class="EmphasisFontCategoryNonProportional ">/etc/oxd</span> folder: <span class="EmphasisFontCategoryNonProportional ">oxd-conf.json</span> (which contains basic configuration information for the service) and <span class="EmphasisFontCategoryNonProportional ">oxd-default-site-config.json</span> (where you should add the URL of your OP). Make sure that you start the oxd service and see it listening on the default port 8443.</p><p class="Para" id="Par159">oxd is not a proxy—it is middleware. For front-channel calls (authorize and logout), it returns a URL that’s used by your application to redirect the person’s browser to the OP. However, oxd makes back-channel calls directly to the <span class="EmphasisFontCategoryNonProportional ">Token</span> and <span class="EmphasisFontCategoryNonProportional ">Userinfo</span> endpoints. That’s why in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Fig16">5-16</a></span>, there are lines both from the person and between oxd and the OP. oxd validates the <span class="EmphasisFontCategoryNonProportional ">id_token</span>, caches the <span class="EmphasisFontCategoryNonProportional ">nonce</span> and <span class="EmphasisFontCategoryNonProportional ">state</span> parameters, uses private key authentication at the token endpoint, and is constantly being updated and improved to support the latest and greatest Connect and OAuth security features.</p><p class="Para" id="Par160">Originally, Gluu published client libraries for oxd in Python, Java, php, Ruby, and several other popular languages. However, it was a challenge to maintain all these libraries. Luckily, a better solution emerged: OpenAPI (i.e., Swagger). The advantage of publishing a OpenAPI document for oxd APIs is that you can generate client libraries in your favorite language. It's easy to do using a platform like SwaggerHub, or your favorite code generator.</p><div class="Para" id="Par161">There is one caveat to calling oxd APIs: they are protected with OAuth. That means you'll need to obtain a client access token before you call them. Luckily, the <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> has an API that makes this easy to do—there is also an API for this. So the basic flow for using <span id="ITerm185">oxd</span><span id="ITerm186">
                
              </span> is as follows:<div class="OrderedList"><ol><li class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><p class="Para" id="Par162">Obtain OAuth client token with scope oxd.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><p class="Para" id="Par163">Call the <span class="EmphasisFontCategoryNonProportional ">get_authorization_url</span> endpoint, which returns the URL to which your application should redirect the person's browser. Make sure you obtain the <span class="EmphasisFontCategoryNonProportional ">state</span> and <span class="EmphasisFontCategoryNonProportional ">code</span> from the OP response.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><p class="Para" id="Par164">Call the <span class="EmphasisFontCategoryNonProportional ">get_tokens_by_code</span> endpoint and present the code and state from the previous step.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><p class="Para" id="Par165">Call the <span class="EmphasisFontCategoryNonProportional ">get_user_info</span> endpoint using the access token returned from the previous step.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><p class="Para" id="Par166">Call the <span class="EmphasisFontCategoryNonProportional ">get_logout_uri</span> endpoint when you’re done and send the person’s browser to the returned URL.</p></div><div class="ClearBoth">&nbsp;</div></li></ol></div></div><p class="Para" id="Par167">The <span class="EmphasisFontCategoryNonProportional ">oxd-server</span> also has APIs for UMA and OAuth and is used as a component of the Gluu Gateway, which is discussed at the end of Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml" class="totri-footnote"><span class="RefSource">6</span></a></span> on web proxies.</p></section></section><section class="Section1 RenderAsSection1" id="Sec35"><h2 class="Heading">OpenID Connect Glossary and IANA Registry Terms</h2><div class="Para" id="Par168">Just like OAuth, Connect has introduced many terms that were registered at IANA. Tables <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Tab4">5-4</a></span> to <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#Tab9">5-9</a></span> show summaries of these terms. For an updated list, see <span class="ExternalRef"><a href="http://www.iana.org/assignments/oauth-parameters/oauth-parameters.xhtml"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional ">http://www.iana.org/assignments/oauth-parameters/oauth-parameters.xhtml</span>
              </span></a></span>.<div class="Table" id="Tab4"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-4</span><p class="SimplePara">OpenID Connect <span id="ITerm187">OAuth Authorization Endpoint Response Type</span> (Specified in OAuth 2.0 Multiple Response Type Encoding Practices)</p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Implicit flow</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token token</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Implicit flow</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">code id_token</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Hybrid flow</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">code token</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Hybrid flow</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">code id_token token</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Hybrid flow</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">None</span>
                      </p></td><td style="text-align: left;"><p class="SimplePara">No client access credentials returned</p></td></tr></tbody></table></div><div class="Table" id="Tab5"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-5</span><p class="SimplePara">OpenID Connect <span id="ITerm188">OAuth Extensions Errors</span> (Specified in OpenID Connect Core)</p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">interaction_required</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP requires end user interaction of some form to proceed, but <span class="EmphasisFontCategoryNonProportional ">prompt=none</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">login_required</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP requires end user authentication, but <span class="EmphasisFontCategoryNonProportional ">prompt=none</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">account_selection_required</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP requires end user to select account, but <span class="EmphasisFontCategoryNonProportional ">prompt=none</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">consent_required</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP requires the end user to authorize, but <span class="EmphasisFontCategoryNonProportional ">prompt=none</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">invalid_request_uri</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP cannot read request object specified at URI</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">invalid_request_object</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP cannot parse the JSON request object</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_not_supported</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP does not support request objects</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_uri_not_supported</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">OP does not support request <span id="ITerm189">URIs</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">registration_not_supported</span>
                      </p></td><td style="text-align: left;"><p class="SimplePara">OP does not support registration parameter</p></td></tr></tbody></table></div><div class="Table" id="Tab6"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-6</span><p class="SimplePara">OpenID Connect <span id="ITerm190">OAuth Parameter</span> (Specified in OpenID Connect Core Specification, Except session_state, Which Is Defined in the Session Management Specification)</p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"><col class="tcol3 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter Usage Location</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">nonce</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Per-session state and be unguessable to attackers</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">display</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Client preference for end user authentication and consent user interface</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">prompt</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Client preference for end user interaction</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">max_age</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Maximum authentication age</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">ui_locales</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">End user's language preference for UI</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">claims_locales</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">End user's language preference for claims</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token_hint</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Hint by client about an end user’s past session</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">login_hint</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Hint to the OP about the end user's preferred identifier or account</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">acr_values</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Space-separated string specifying the <span class="EmphasisFontCategoryNonProportional ">acr</span> values requested by the client</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">claims</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization <span id="ITerm191">request</span></p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Used to specify specific claims</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">registration</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Used to request client registration simultaneous with authorization request</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Specify request object JSON</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_uri</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization request</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Specify location of request object JSON</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization response, access token response</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWT returned with information about the subject and authentication event</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">session_state</span>
                      </p></td><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorization response, access token response</p></td><td style="text-align: left;"><p class="SimplePara"><span class="EmphasisFontCategoryNonProportional ">session_state</span> value at the OP</p></td></tr></tbody></table></div><div class="Table" id="Tab7"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-7</span><p class="SimplePara">OpenID Connect Dynamic <span id="ITerm192">Client Registration Metadata</span> (All These Parameters Are Defined in the OpenID Connect Dynamic Client Registration 1.0 Incorporating Errata Set 1)</p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">application_type</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Kind of the application: <span class="EmphasisFontCategoryNonProportional ">native</span> or <span class="EmphasisFontCategoryNonProportional ">web</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">sector_identifier_uri</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">URL using the <span class="EmphasisFontCategoryNonProportional ">https</span> scheme to be used in calculating pseudonymous identifiers by the OP</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">subject_type</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara"><span class="EmphasisFontCategoryNonProportional ">subject_type</span> requested for responses to this client: <span class="EmphasisFontCategoryNonProportional ">pairwise</span> or <span class="EmphasisFontCategoryNonProportional ">public</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token_signed_response_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWS alg algorithm REQUIRED for signing the ID token issued to this client</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token_encrypted_response_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE alg algorithm REQUIRED for encrypting the ID token issued to this <span id="ITerm193">client</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">id_token_encrypted_response_enc</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE enc algorithm REQUIRED for encrypting the ID token issued to this client</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">Userinfo_signed_response_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWS alg algorithm REQUIRED for signing userinfo responses</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">Userinfo_encrypted_response_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE alg algorithm REQUIRED for encrypting userinfo responses</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">Userinfo_encrypted_response_enc</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE enc algorithm REQUIRED for encrypting userinfo <span id="ITerm194">responses</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_object_signing_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWS alg algorithm that MUST be used for signing request objects sent to the OP</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_object_encryption_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE alg algorithm the RP is declaring that it may use for encrypting request objects sent to the OP</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_object_encryption_enc</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWE enc algorithm the RP is declaring that it may use for encrypting request objects sent to the OP</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">token_endpoint_auth_signing_alg</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">JWS alg algorithm that MUST be used for signing the JWT used to authenticate the client at the token endpoint for the <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span> and <span class="EmphasisFontCategoryNonProportional ">client_secret_jwt</span> authentication methods</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">default_max_age</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Default maximum authentication <span id="ITerm195">age</span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">require_auth_time</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Boolean value specifying whether the <span class="EmphasisFontCategoryNonProportional ">auth_time</span> claim in the ID token is REQUIRED</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">default_acr_values</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Default requested authentication context class reference values</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">initiate_login_uri</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">URI using the <span class="EmphasisFontCategoryNonProportional ">https</span> scheme that a third party can use to initiate a login by the RP</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">request_uris</span>
                      </p></td><td style="text-align: left;"><p class="SimplePara">Array of <span class="EmphasisFontCategoryNonProportional ">request_uri</span> values that are pre-registered by the RP for use at the OP</p></td></tr></tbody></table></div><div class="Table" id="Tab8"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-8</span><p class="SimplePara">OpenID Connect <span id="ITerm196">OAuth Token Endpoint Authentication Methods</span></p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"><col class="tcol3 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Reference</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">client_secret_jwt</span>
                      </p></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">RFC 7591</p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Mechanism to send client credentials as JWT</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span>
                      </p></td><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">RFC 7591</p></td><td style="text-align: left;"><p class="SimplePara">Mechanism to send client credentials as JWT, using previously registered public key to verify client identity</p></td></tr></tbody></table></div><div class="Table" id="Tab9"><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Table 5-9</span><p class="SimplePara">OpenID Connect <span id="ITerm197">JSON Web Token Claims</span><span id="ITerm198">
                      
                      
                    </span> (Specified in OpenID Connect Core Specification)</p></div></div><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="tcol1 align-left"><col class="tcol2 align-left"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Parameter</p></th><th style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Description</p></th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">given_name</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Given name(s) or first name(s)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">family_name</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Surname(s) or last name(s)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">middle_name</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Middle name(s)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">nickname</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Casual name</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">preferred_username</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Shorthand name by which the end user wishes to be referred</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">profile</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Profile page URL</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">picture</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Profile picture URL</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">website</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Web page or blog URL</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">email</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Preferred email address</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">email_verified</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">True if the email address has been verified; otherwise <span id="ITerm199">false</span><span id="ITerm200">
                          
                          
                        </span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">gender</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Gender</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">birthdate</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Birthday</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">zoneinfo</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Time zone</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">locale</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Locale</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">phone_number</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Preferred telephone number</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">phone_number_verified</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">True if the phone number has been verified; otherwise false</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">address</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Preferred postal address</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">updated_at</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Time the information was last updated</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">azp</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authorized party: the party to which the ID token was issued</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">nonce</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Value used to associate a client session with an ID token</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">auth_time</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Time when the authentication <span id="ITerm201">occurred</span><span id="ITerm202">
                          
                          
                        </span></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">at_hash</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Access token hash value</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">c_hash</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Code hash value</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">acr</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authentication context class reference</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">amr</span>
                      </p></td><td style="border-bottom: 0.5pt solid ; text-align: left;"><p class="SimplePara">Authentication methods references</p></td></tr><tr><td style="border-right: 0.5pt solid ; text-align: left;"><p class="SimplePara">
                        <span class="EmphasisFontCategoryNonProportional ">sub_jwk</span>
                      </p></td><td style="text-align: left;"><p class="SimplePara">Public key used to check the signature of an ID <span id="ITerm203">token</span><span id="ITerm204">
                          
                          
                        </span></p></td></tr></tbody></table></div></div></section><section class="Section1 RenderAsSection1" id="Sec36"><h2 class="Heading">Conclusion</h2><p class="Para" id="Par169">Hopefully you now have a better idea of what OpenID Connect is. Whether you have a consumer facing application with low security requirements, or a top-secret application with high security requirements, Connect is a good choice as the interface to centralize identity. Over time, it’s likely we’ll see fewer applications that add support for SAML, and more applications that add support for OpenID Connect. Federated identity is a moving target, but Connect and OAuth seem well positioned to adapt to new technology and meet new requirements as they arise.</p></section><section class="Section1 RenderAsSection1" id="Sec37"><h2 class="Heading">References</h2><div class="Para" id="Par170">
            <div class="OrderedList"><ol><li class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><p class="Para" id="Par171">“OpenID Connect Discovery 1.0 incorporating errata set 1,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-discovery-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-discovery-1_0.html</span>
                      </span></a></span>, Sakimura, Bradley, Jones, Jay, November, 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><p class="Para" id="Par172">“OpenID Connect Dynamic Client Registration 1.0,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-registration-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-registration-1_0.html</span>
                      </span></a></span>, Sakimura, Bradley, Jones, May 2015.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><p class="Para" id="Par173">“OAuth 2.0 Dynamic Client Registration Management Protocol,” <span class="ExternalRef"><a href="https://tools.ietf.org/html/rfc7592"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">https://tools.ietf.org/html/rfc7592</span>
                      </span></a></span>, Jones, Bradley, Machulak, July 2015.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><p class="Para" id="Par174">“OpenID Connect Dynamic Client Registration 1.0 incorporating errata set 1,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-registration-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-registration-1_0.html</span>
                      </span></a></span>, Sakimura, Bradley, Jones, November, 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><p class="Para" id="Par175">“OAuth 2.0 Multiple Response Type Encoding Practices,” <span class="ExternalRef"><a href="http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html</span>
                      </span></a></span>, de Medeiros, Scurtescu, Tarjan, Jones, February 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><p class="Para" id="Par176">“OpenID Connect Implicit Clint Implementer’s Guide 1.0,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-implicit-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-implicit-1_0.html</span>
                      </span></a></span>, Sakimura, Bradley, Jones, de Medeiros, Mortimore, August 2015.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">7.</span><div class="ItemContent"><p class="Para" id="Par177">OAuth 2.0 Form Post Response Mode, <span class="ExternalRef"><a href="http://openid.net/specs/oauth-v2-form-post-response-mode-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/oauth-v2-form-post-response-mode-1_0.html</span>
                      </span></a></span>, Jones, Cambell, April 2015.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">8.</span><div class="ItemContent"><p class="Para" id="Par178">“OpenID Connect Core 1.0 incorporating errata set 1,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-core-1_0.html%2523RequestUriRationale"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-core-1_0.html#RequestUriRationale</span>
                      </span></a></span>, Sakimura, Bradley, Jones, de Medeiros, Mortimore, November 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">9.</span><div class="ItemContent"><p class="Para" id="Par179">“OAuth 2.0 for Native Apps,” <span class="ExternalRef"><a href="https://tools.ietf.org/html/draft-ietf-oauth-native-apps-06"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">https://tools.ietf.org/html/draft-ietf-oauth-native-apps-06</span>
                      </span></a></span>, Denniss, Bradley November 2016.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">10.</span><div class="ItemContent"><p class="Para" id="Par180">“OAuth 2.0 Multiple Response Type Encoding Practices,” <span class="ExternalRef"><a href="http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/oauth-v2-multiple-response-types-1_0.html</span>
                      </span></a></span>, de Medeiros, Scurtescu, Tarjan, Jones, February 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">11.</span><div class="ItemContent"><p class="Para" id="Par181">“OpenID Connect Core 1.0 incorporating errata set 1,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-core-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-core-1_0.html</span>
                      </span></a></span>, Sakumura, Bradley, Jones, de Medeiros, Mortimore, November 2014.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">12.</span><div class="ItemContent"><p class="Para" id="Par182">OpenID Connect Session Management 1.0 - draft 27,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-session-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-session-1_0.html</span>
                      </span></a></span>, de Medeiros, Agarwal, Sakimura, Bradley, Jones, August 2016.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">13.</span><div class="ItemContent"><p class="Para" id="Par183">“OpenID Connect Dynamic Client Registration 1.0 incorporating errata set 1,” <span class="ExternalRef"><a href="http://openid.net/specs/openid-connect-registration-1_0.html"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">http://openid.net/specs/openid-connect-registration-1_0.html</span>
                      </span></a></span>, Sakimura, Bradley, Jones, November 2014.</p></div><div class="ClearBoth">&nbsp;</div></li></ol></div>
          </div></section></div><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">4.&nbsp;OAuth</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">6.&nbsp;Proxy</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          
          
            <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          

          
        
        

      </div>

    
    



        
      </div>
      
        


<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/u/preferences/">Settings</a></li>
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"agent":"","applicationID":"172641827,79672898,93931619","applicationTime":197,"transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","errorBeacon":"bam.nr-data.net","licenseKey":"510f1a6865","queueTime":2,"beacon":"bam.nr-data.net"}</script>

      
    
    <script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource" charset="utf-8"></script><script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1732687426968531");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1732687426968531&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/embed.js"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("set","agent","tmgoogletagmanager","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>
<script type="text/javascript" id="">window._pp=window._pp||[];if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_5_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/register/")_pp.targetUrl="/confirm/trial";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_5_Chapter.xhtml"=="/confirmation/nv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/subscribe/")_pp.targetUrl="/confirm/paid";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_5_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/signup/")_pp.targetUrl="/confirm/paid";_pp.siteId="2508";
_pp.siteUId="39a88cd5-54f5-4d61-aec6-7884d06dfba1";_pp.orderValue="undefined";_pp.orderId="undefined";(function(){var ppjs=document.createElement("script");ppjs.type="text/javascript";ppjs.async=true;ppjs.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.pbbl.co/r/"+_pp.siteId+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ppjs,s)})();</script>
    <script src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(1)" charset="utf-8"></script>
  

<div></div><div></div><div class="annotator-notice"></div><div class="font-flyout" style="top: 151.006px; left: 1583px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml#">Reset</a>
</div>
</div><iframe id="nr-ext-rsicon" style="position: absolute; display: none; width: 50px; height: 50px; z-index: 2147483647; border-style: none; background: transparent;" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(5).html"></iframe><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.2376849242954442"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.19487891342408603" width="0" height="0" alt="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/0"></div><iframe height="0" width="0" frameborder="0" style="display: none;" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pp.html"></iframe><iframe src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pixel.html" style="display: none;"></iframe><script type="text/javascript" async="" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/generic1585109433606.js" charset="UTF-8"></script><span></span><div style="display: none; visibility: hidden;"><script>(function(){if(null!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')&&void 0!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')){var a=!1;window.addEventListener("blur",function(){a&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"facebook",eventVal:0,nonInteraction:0})});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseover",function(){window.focus();
a=!0});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseout",function(){a=!1})}if(null!==document.querySelector("iframe.twitter-share-button")&&void 0!==document.querySelector("iframe.twitter-share-button")){var b=!1;window.addEventListener("blur",function(){b&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0})});document.querySelector("iframe.twitter-share-button").addEventListener("mouseover",
function(){window.focus();b=!0});document.querySelector("iframe.twitter-share-button").addEventListener("mouseout",function(){b=!1})}try{window.twttr=function(a,b,d){var c,e=a.getElementsByTagName(b)[0];if(!a.getElementById(d))return a=a.createElement(b),a.id=d,a.src="//platform.twitter.com/widgets.js",e.parentNode.insertBefore(a,e),window.twttr||(c={_e:[],ready:function(a){c._e.push(a)}})}(document,"script","twitter-wjs"),twttr.ready(function(a){a.events.bind("tweet",trackTwitter)})}catch(c){}})();
null!==document.querySelector(".IN-widget")&&void 0!==document.querySelector(".IN-widget")&&document.querySelector(".IN-widget").addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"linkedin",eventVal:0,nonInteraction:0})});
function trackTwitter(a){a&&(a.target&&"IFRAME"==a.target.nodeName&&(opt_target=extractParamFromUri(a.target.src,"url")),dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0}))}function extractParamFromUri(a,b){if(a&&(b=new RegExp("[\\?\x26#]"+b+"\x3d([^\x26#]*)"),a=b.exec(a),null!=a))return unescape(a[1])};</script></div><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./5. OpenID Connect - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widget_iframe.d0f13be8321eb432fba28cfc1c3351b1.html" title="Twitter settings iframe" style="display: none;"></iframe><div id="eJOY__extension_root" style="all: unset;"></div></body><div class="XTranslate"></div></html>