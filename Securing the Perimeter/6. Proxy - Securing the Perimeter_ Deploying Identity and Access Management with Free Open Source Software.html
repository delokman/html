<!DOCTYPE html>
<!-- saved from url=(0111)https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml -->
<html class="js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom fa-events-icons-ready" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="6866040" data-user-uuid="39a88cd5-54f5-4d61-aec6-7884d06dfba1" data-username="vrad201" data-account-type="Trial" data-activated-trial-date="04/04/2020" data-archive="9781484226018" data-publishers="Apress" data-htmlfile-name="425975_1_En_6_Chapter.xhtml" data-epub-title="Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781484226018"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script id="twitter-wjs" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widgets.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/cool-2.1.15.min.js"></script><script type="text/javascript" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/510f1a6865"></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/nr-1167.min.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ec.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/2508.js"></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/443792972845831" async=""></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/1732687426968531" async=""></script><script async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/fbevents.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/analytics.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/bat.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/insight.min.js"></script><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script crossorigin="anonymous" integrity="sha256-4ZnAISy2+rbOaVUOBtJrqxBTrJ5kctu9r4qBJBt0Oo0=" type="text/javascript" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/appcues.main.40a6b605d29a66b083aa6d74c07bb73eae19e31b.js" async=""></script><script async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/gtm.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"510f1a6865",applicationID:"172641827"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/css" rel="stylesheet" type="text/css"><title>6.&nbsp;Proxy - Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software</title><link rel="stylesheet" href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/output.8054605313ed.css" type="text/css"><link rel="stylesheet" type="text/css" href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content a{text-decoration:none}#sbo-rt-content a:link,#sbo-rt-content a:active{color:#0176C3}#sbo-rt-content a:visited{color:#5f5f5f}#sbo-rt-content div{font-family:"Cambria","Minion Pro","Times New Roman","Times",serif;}#sbo-rt-content img{border:0;vertical-align:middle}#sbo-rt-content video{display:block;margin-top:1em;max-width:100%;text-indent:0;width:100%}#sbo-rt-content p{margin:0}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading,#sbo-rt-content .ContextInformation,#sbo-rt-content .MainTitleSection,#sbo-rt-content .PartTitle,#sbo-rt-content .SeriesTitle,#sbo-rt-content .SeriesSubTitle,#sbo-rt-content .SubSeriesTitle,#sbo-rt-content .SubSeriesSubTitle,#sbo-rt-content .BookTitle,#sbo-rt-content .BookSubTitle,#sbo-rt-content .ForewordTitle,#sbo-rt-content .PrefaceTitle,#sbo-rt-content .BookAcknowledgmentsTitle,#sbo-rt-content .BookNotesTitle{text-align:left !important}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading{display:block;font-weight:bold}#sbo-rt-content .ArticleContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ArticleContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ArticleContextInformation .JournalTitle:after,#sbo-rt-content .ArticleContextInformation .JournalSubTitle:after{content:", "}#sbo-rt-content .ArticleCopyright{display:inline}#sbo-rt-content .ArticleCopyright .CopyrightComment,#sbo-rt-content .ArticleContextInformation .ArticleDOI{display:block}#sbo-rt-content .ChapterContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ChapterContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ChapterCopyright .CopyrightComment{display:block}#sbo-rt-content .ChapterContextInformation .BookEdition:before{content:", "}#sbo-rt-content .ChapterContextInformation .ContextInformationAuthorEditorNames:after{content:", "}#sbo-rt-content .ChapterContextInformation .BookTitle{font-style:italic}#sbo-rt-content .ChapterContextInformation .SeriesTitle:before{content:", "}#sbo-rt-content .ChapterContextInformation .SeriesSubTitle:before{content:": "}#sbo-rt-content .ChapterContextInformation .ContextInformationVolumeNumber:before{content:" "}#sbo-rt-content .ChapterContextInformation .ChapterDOI{display:block}#sbo-rt-content .Categories{color:#666;margin-bottom:1em;margin-top:1em}#sbo-rt-content .ArticleCategory,#sbo-rt-content .ChapterCategory{font-size:1.2rem}#sbo-rt-content .ArticleSubCategory,#sbo-rt-content .ChapterSubCategory{font-size:1rem}#sbo-rt-content .MainTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1.2em}#sbo-rt-content .ArticleSuperTitle{font-size:1.2rem}#sbo-rt-content .MainTitleSection .ArticleTitle,#sbo-rt-content .ForeignLanguageHeader .ArticleTitle,#sbo-rt-content .MainTitleSection .ChapterTitle,#sbo-rt-content .ForeignLanguageHeader .ChapterTitle{font-size:1.73rem;margin:0}#sbo-rt-content .ArticleSubTitle,#sbo-rt-content .ChapterSubTitle{font-size:1.2rem;padding-top:.2em}#sbo-rt-content div>.AuthorGroup .AuthorNames,#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-size:100%;margin-bottom:1em;margin-top:1em;text-align:left !important}#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-weight:bold}#sbo-rt-content .AuthorNames sup{font-size:70%}#sbo-rt-content .Prefix:after{content:" "}#sbo-rt-content .Suffix:before{content:" "}#sbo-rt-content .Degrees:before{content:", "}#sbo-rt-content .NativeName:before,#sbo-rt-content .Role:before{content:" ("}#sbo-rt-content .NativeName:after,#sbo-rt-content .Role:after{content:")"}#sbo-rt-content .AffiliationNumber{float:left;padding-right:.5em}#sbo-rt-content .AffiliationText{margin-left:2em}#sbo-rt-content .AffiliationHint{font-style:italic}#sbo-rt-content .AuthorNames .DeceasedSymbol:before{content:"†";padding-left:3px}#sbo-rt-content .AuthorNames .EqualContributionSymbol:before{content:"*";padding-left:3px}#sbo-rt-content .InstitutionMembers:before{content:" ("}#sbo-rt-content .InstitutionMembers:after{content:")"}#sbo-rt-content .AffiliationLegend .DeceasedSymbol:before{content:"†";display:inline-block;width:14px}#sbo-rt-content .AffiliationLegend .EqualContributionSymbol:before{content:"*";display:inline-block;width:14px}#sbo-rt-content .ClearBoth{clear:both;font-size:0;line-height:0 !important}#sbo-rt-content .Contact,#sbo-rt-content .AffiliationLegend{margin-bottom:1em;margin-top:1em}#sbo-rt-content .ContactIcon{background-image:url(envelope.png);background-repeat:no-repeat;background-size:contain;width:.8rem}#sbo-rt-content .AuthorNames .ContactIcon{display:inline-block}#sbo-rt-content .Contact .ContactIcon{float:left;margin-top:4px;margin-right:4px}#sbo-rt-content .ContactAuthorLine{padding-left:20px;font-weight:bold}#sbo-rt-content .ContactAdditionalLine{padding-left:20px}#sbo-rt-content .ContactType{font-weight:bold}#sbo-rt-content .ArticleHistory{margin-bottom:1em;margin-top:1em}#sbo-rt-content .HistoryLabel{font-weight:bold}#sbo-rt-content .History+.History{padding-left:.5em}#sbo-rt-content .ArticleOrChapterToc{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .ArticleOrChapterToc .HeadingNumber{font-weight:bold;padding-right:.3em}#sbo-rt-content .Abstract{margin-top:1em}#sbo-rt-content .Abstract>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbstractSection{margin-top:.3em}#sbo-rt-content .Heading+.AbstractSection{margin-top:0}#sbo-rt-content .AbstractSection>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin:0}#sbo-rt-content .KeywordGroup{margin-top:1em}#sbo-rt-content .KeywordGroup .Heading{display:inline;font-size:1em;margin:0;padding-right:.5em}#sbo-rt-content .Keyword+.Keyword:before{content:" – "}#sbo-rt-content .ArticleExternalID{margin-top:1em}#sbo-rt-content .ArticleExternalIDLabel{font-weight:bold}#sbo-rt-content .ForeignLanguageHeader{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ForeignLanguageTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1rem}#sbo-rt-content .AbbreviationGroup{margin-top:1em}#sbo-rt-content .ForeignLanguageHeader+.AbbreviationGroup{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .AbbreviationGroup>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbbreviationGroup .DefinitionList{margin-top:0;margin-bottom:0;padding-right:.1em;padding-top:.1em;padding-bottom:.1em}#sbo-rt-content .AbbreviationGroupSection>.Heading{font-size:1em;margin:0;padding-top:.2em}#sbo-rt-content .ArticleNote{margin-top:1em}#sbo-rt-content .ArticleNote>.Heading{font-size:1em;margin:0}#sbo-rt-content .ArticleNoteMotto{font-style:italic;margin-left:1.5em;margin-right:1.5em;text-align:right}#sbo-rt-content .Biography{display:block;margin-top:.8em;padding-bottom:0;width:100%}#sbo-rt-content .Loc .AuthorGroup .Biography{margin-top:0}#sbo-rt-content .Biography .FormalPara,#sbo-rt-content .Biography .BiographyFigure{display:block;margin-top:0;margin-bottom:0}#sbo-rt-content .Biography .BiographyFigure{float:right;margin-left:6px}#sbo-rt-content .Biography .Figure{border-bottom:none;margin-top:.5em;margin-bottom:0}#sbo-rt-content .Fulltext>.Para:first-of-type>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .BlockQuote{margin:1em 1.5em}#sbo-rt-content .BlockQuote>.Heading{font-size:1em;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .BlockQuote>.Para{text-indent:0}#sbo-rt-content .Heading+.Para>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .Caption,#sbo-rt-content .TableFooter{display:block;text-align:left}#sbo-rt-content .TableFooter .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .Caption{margin-top:.5em}#sbo-rt-content .CaptionContent{font-size:90%}#sbo-rt-content .TableFooter{margin-top:1em}#sbo-rt-content .Table .Caption{margin-top:.5em}#sbo-rt-content .Figure .Caption,#sbo-rt-content video+.Caption{margin-bottom:1em}#sbo-rt-content .Table .Caption{margin-bottom:.5em}#sbo-rt-content .CaptionNumber{font-style:italic;font-weight:bold;padding-right:.6em}#sbo-rt-content .CaptionContent>span.Heading{display:inline}#sbo-rt-content .CaptionContent>span.SimplePara{display:block}#sbo-rt-content .CaptionContent>.SimplePara:first-child,#sbo-rt-content .CaptionContent>.CaptionNumber+.SimplePara,#sbo-rt-content .CaptionContent>a+.SimplePara{display:inline;margin-top:0}#sbo-rt-content .Credit>.SimplePara{text-indent:1.5em}#sbo-rt-content .DefinitionList{margin-top:1em;margin-bottom:1em;padding:.1em}#sbo-rt-content .DefinitionList>.Heading{font-size:1rem;margin:0;text-indent:0}#sbo-rt-content dl{margin:0}#sbo-rt-content .DefinitionList:after{content:"";clear:both;display:table}#sbo-rt-content .Term{clear:both;float:left;font-style:italic;padding-right:1em;text-indent:0;vertical-align:top}#sbo-rt-content .Description{padding-bottom:.3em;margin-left:0}#sbo-rt-content .Description .Para:first-child{text-indent:0}#sbo-rt-content .Heading+.Para>div.DefinitionList:first-child{margin-top:0}#sbo-rt-content .EmphasisTypeBold{font-weight:bold}#sbo-rt-content .EmphasisTypeItalic{font-style:italic}#sbo-rt-content .EmphasisTypeUnderline{text-decoration:underline}#sbo-rt-content .EmphasisTypeDoubleUnderline{border-bottom-style:double}#sbo-rt-content .EmphasisTypeSmallCaps{font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalic{font-weight:bold;font-style:italic}#sbo-rt-content .EmphasisTypeBoldUnderline{font-weight:bold;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldDoubleUnderline{font-weight:bold;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldSmallCaps{font-weight:bold;font-variant:small-caps}#sbo-rt-content .EmphasisTypeItalicUnderline{font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeItalicDoubleUnderline{font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeItalicSmallCaps{font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalicUnderline{font-weight:bold;font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldItalicDoubleUnderline{font-weight:bold;font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldItalicSmallCaps{font-weight:bold;font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeUnderlineSmallCaps{text-decoration:underline;font-variant:small-caps}#sbo-rt-content .EmphasisTypeDoubleUnderlineSmallCaps{border-bottom-style:double;font-variant:small-caps}#sbo-rt-content .EmphasisFontCategoryNonProportional{font-family:"Courier New",Courier,monospace}#sbo-rt-content :not(.ParaTypeProgramcode)>.EmphasisFontCategoryNonProportional{font-size:95%}#sbo-rt-content .EmphasisFontCategorySansSerif{font-family:"Arial","Helvetica",sans-serif;font-size:75%}#sbo-rt-content .EmphasisTypeStrikethrough{text-decoration:line-through}#sbo-rt-content .Equation{display:block;text-indent:0;vertical-align:middle}#sbo-rt-content .NumberedEquation{display:table;width:100%}#sbo-rt-content .NumberedEquation .EquationWrapper{display:table-row}#sbo-rt-content .NumberedEquation .EquationContent{display:table-cell}#sbo-rt-content .EquationContent{margin-top:.5em;margin-bottom:0;width:100%;text-align:center;text-indent:0;vertical-align:middle}#sbo-rt-content .EquationContent div{margin-top:.5em}#sbo-rt-content .EquationContent .MediaObject{margin-left:auto;margin-right:auto}#sbo-rt-content .EquationContent img{background:white;max-width:100%}#sbo-rt-content .EquationNumber{display:table-cell;margin-bottom:.4em;text-align:right;vertical-align:middle}#sbo-rt-content .EquationSourceXml{white-space:nowrap}#sbo-rt-content .InlineEquation img{background:white;vertical-align:text-top}#sbo-rt-content .Figure{margin-top:1em;margin-bottom:1em;margin-left:0;margin-right:0;text-align:center;text-indent:0}#sbo-rt-content .Figure img{height:auto;margin:0;max-width:100%;padding:2px}#sbo-rt-content .MediaObject{display:block;text-align:center}#sbo-rt-content .MediaObject:last-child{margin-bottom:1em}#sbo-rt-content .EquationContent>.MediaObject:last-child{margin-bottom:0}#sbo-rt-content .MediaObject+.MediaObject{margin-top:1em}#sbo-rt-content .FootnoteSection{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .FootnoteSection>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Footnote{clear:both;font-size:90%;text-align:left}#sbo-rt-content .FootnoteNumber{float:left;padding-right:.5em}#sbo-rt-content .FootnoteParas>div{margin-left:1em;margin-top:.3em}#sbo-rt-content .FormalPara{margin-top:1em;margin-bottom:1em}#sbo-rt-content .FormalPara .Heading{font-size:1em;margin:0}#sbo-rt-content .FormalParaRenderingStyle1>.Heading{display:inline;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle2>.Heading{display:inline;font-style:italic;font-weight:normal;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle3>.Heading{padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle1>p:first-of-type,#sbo-rt-content .FormalParaRenderingStyle2>p:first-of-type{display:inline}#sbo-rt-content .Heading+.FormalPara{margin-top:0}#sbo-rt-content .FormalPara .AuthorNames{font-style:italic;font-weight:normal !important}#sbo-rt-content .HeadingNumber{padding-right:.3em}#sbo-rt-content .RenderAsSection1>.Heading{font-size:1.44rem;margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .RenderAsSection2>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section2>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection3>.Heading{font-size:1.2rem;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section3>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection4>.Heading{font-size:100%;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section4>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection5>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section5>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection6>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section6>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection7>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section7>.Heading:first-child{margin-top:0}#sbo-rt-content .Literal{font-family:"Courier New",Courier,monospace}#sbo-rt-content .OrderedList{margin-top:.5em;margin-bottom:.5em;text-indent:0;display:table}#sbo-rt-content .OrderedList>ol{margin:0;padding:0}#sbo-rt-content .OrderedList .Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0;display:table-caption}#sbo-rt-content .OrderedList .Heading+.ListItem{margin-top:0}#sbo-rt-content .Heading+.Para>div.OrderedList:first-child,#sbo-rt-content .Heading+.Para>div.OrderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .ListItem{margin-top:.5em;display:table-row}#sbo-rt-content .ItemNumber{padding-right:.5em;display:table-cell;vertical-align:top}#sbo-rt-content .ItemContent{display:table-cell}#sbo-rt-content .Fulltext>.Para:first-of-type{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .Fulltext>.Para~.Para:first-of-type{border-top:none;margin-top:0;padding-top:0}#sbo-rt-content .Para+.Para{margin-top:0;text-indent:1.5em}#sbo-rt-content .ParaTextBreak{margin-top:1em !important;text-indent:0 !important}#sbo-rt-content .ParaTypeExample{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:1em}#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeTip{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:.5em}#sbo-rt-content .ParaTypeImportant{background:#bbb;border:2px solid;padding:.5em;margin-top:.8em !important;margin-bottom:.8em}#sbo-rt-content .ParaTypeImportant img{background-color:transparent}#sbo-rt-content .ParaTypeGeneticSequence,#sbo-rt-content .ParaTypeLiteral,#sbo-rt-content .ParaTypeProgramcode{font-family:"Courier New",Courier,monospace;font-size:95%}#sbo-rt-content .ParaTypeProgramcode{text-indent:0 !important;word-wrap:break-word}#sbo-rt-content .Para:not(.ParaTypeProgramcode)+.ParaTypeProgramcode{margin-top:.5em}#sbo-rt-content .ParaTypeProgramcode+.Para:not(.ParaTypeProgramcode){margin-top:.5em}#sbo-rt-content .ParaTypeLegalText{font-weight:bold;margin-left:1em;text-align:left}#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .ParaTypeSource{font-style:italic}#sbo-rt-content .ParaTypeTrailer,#sbo-rt-content .ParaTypeLearningGoals{font-weight:bold;padding-left:.5em;padding-right:.5em}#sbo-rt-content .ParaTypeWarning{font-weight:bold}#sbo-rt-content .ParaTypeExample,#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeImportant,#sbo-rt-content .ParaTypeLegalText,#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeTip,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{text-indent:0 !important}#sbo-rt-content .Para+.ParaOneEmphasisChild{margin-top:1em;text-indent:0 !important}#sbo-rt-content .ParaOneEmphasisChild+.Para{text-indent:0 !important}#sbo-rt-content .PartNumber{display:block;font-size:1.73rem}#sbo-rt-content .PartTitle{display:block;font-size:1.73rem}#sbo-rt-content .SubPartTitle{display:block;font-size:1.44rem}#sbo-rt-content .ProgramCode{margin-top:1em;margin-bottom:1em}#sbo-rt-content .ProgramCode .FixedLine{font-family:"Courier New",Courier,monospace;font-size:95%;word-wrap:break-word}#sbo-rt-content .LineGroup+.LineGroup{margin-top:1em}#sbo-rt-content .Heading+.Para>.Quiz>.Heading{margin-top:0;}#sbo-rt-content .Quiz .Heading{font-size:1rem;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .QuizTask{display:table;margin-top:.5em;margin-bottom:.5em;width:100%;text-indent:0}#sbo-rt-content .QuizTask+.QuizTask{margin-top:1.5em}#sbo-rt-content .QuizItem{padding:.1em}#sbo-rt-content .QuizItemTypeSolution{border:2px solid #aaa;margin-top:.5em;padding:10px}#sbo-rt-content .QuizTask>input{display:none}#sbo-rt-content .QuizItem>label{color:#0176C3}#sbo-rt-content .QuizTask>input~.QuizItem>label+div{display:none}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label+div{display:table-cell}#sbo-rt-content .QuizTask>input~.QuizItem>label:after{content:"  »"}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label:after{content:"  «"}#sbo-rt-content .QuizTask>input~.QuizItemTypeCorrectAnswer{background-color:transparent;transition:background .4s}#sbo-rt-content .QuizTask>input:checked~.QuizItemTypeCorrectAnswer{background-color:#EAF2DB;transition:background .4s}#sbo-rt-content .ReviewTitle{font-weight:bold;margin-top:1em;text-indent:0}#sbo-rt-content .Review .AuthorName+.AuthorName:before{content:", "}#sbo-rt-content .Review .ISBN,#sbo-rt-content .ReviewDataUnstructured{text-indent:0}#sbo-rt-content .Review .Para:first-of-type{margin-top:1em;text-indent:0}#sbo-rt-content .BookBackmatter>.Appendix:first-child>div:first-child{border-top:none !important;margin-top:0 !important;padding-top:0 !important}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child,#sbo-rt-content .BookNotesBody>.RenderAsSection1:first-child,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child,#sbo-rt-content .BookBackmatter>.Appendix:first-child>.RenderAsSection1:first-child{border-top:none;margin-top:0}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child>.Heading{margin-top:0}#sbo-rt-content .Section1 .AuthorNames,#sbo-rt-content .Section2 .AuthorNames,#sbo-rt-content .Section3 .AuthorNames{font-weight:bold;margin-top:.3em;margin-bottom:.5em}#sbo-rt-content .Section1 .AuthorNames sup,#sbo-rt-content .Section2 .AuthorNames sup,#sbo-rt-content .Section3 .AuthorNames sup{font-size:70%}#sbo-rt-content .Section1 .Affiliations,#sbo-rt-content .Section2 .Affiliations,#sbo-rt-content .Section3 .Affiliations{margin-bottom:.5em}#sbo-rt-content .SectionTypeBackgroundInformation,#sbo-rt-content .SectionTypeExcurse{font-size:90%}#sbo-rt-content .SectionTypeBox,#sbo-rt-content .SectionTypeOverview,#sbo-rt-content .SectionTypeQuestionnaire{background-color:#BBB;margin-top:1em !important;padding:.5em}#sbo-rt-content .SectionTypeCaseStudy,#sbo-rt-content .SectionTypeExample,#sbo-rt-content .SectionTypeTip{border-left:4px solid;margin-top:1em !important;padding-top:0;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}#sbo-rt-content .SectionTypeTrailer,#sbo-rt-content .SectionTypeLearningGoals{font-weight:bold;text-align:left}#sbo-rt-content .SectionTypeLegalText{font-weight:bold;margin-left:1em;text-align:left;text-indent:0 !important}#sbo-rt-content .SectionTypeProcedure,#sbo-rt-content .SectionTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .SectionTypeWarning{font-weight:bold}#sbo-rt-content .RenderAsSection1{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .SectionTypeBox+.RenderAsSection1,#sbo-rt-content .SectionTypeOverview+.RenderAsSection1,#sbo-rt-content .SectionTypeQuestionnaire+.RenderAsSection1{border-top:0;}#sbo-rt-content .SectionTypeBox>.Heading,#sbo-rt-content .SectionTypeOverview>.Heading,#sbo-rt-content .SectionTypeQuestionnaire>.Heading,#sbo-rt-content .SectionTypeProcedure>.Heading,#sbo-rt-content .SectionTypeRecipe>.Heading{margin-top:0}#sbo-rt-content .InternalRefSidebarLexicon{background-image:url(sidebar.gif);background-repeat:no-repeat;font-weight:bold;padding-left:20px}#sbo-rt-content .SidebarDialog{border:1px solid;margin-left:1.5em;margin-top:.4em;margin-bottom:.2em;padding:.2em;text-indent:0}#sbo-rt-content .SidebarNumber{font-weight:bold;padding-right:.5em}#sbo-rt-content .SimplePara+.SimplePara{margin-top:0;text-indent:1.5em}#sbo-rt-content .Stack{display:inline-table;vertical-align:top}#sbo-rt-content .Stack sub{display:table-row}#sbo-rt-content .Stack sup{display:table-header-group}#sbo-rt-content table{border-collapse:collapse;font-size:80%;max-width:100%;text-indent:0}#sbo-rt-content table .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content table,#sbo-rt-content tr,#sbo-rt-content td{border-color:#bbb !important}#sbo-rt-content th{border-color:#999 !important}#sbo-rt-content thead{background:#bbb;color:#000 !important}#sbo-rt-content .Table{margin-bottom:1em;text-indent:0}#sbo-rt-content .Caption .Table{margin-bottom:0}#sbo-rt-content .Table img{height:auto;margin:0;max-width:100%}#sbo-rt-content th div{text-align:left}#sbo-rt-content td div,#sbo-rt-content td p,#sbo-rt-content th div,#sbo-rt-content th p{padding:.2em}#sbo-rt-content .Para+.Table,#sbo-rt-content .Para>.Table{margin-top:1em}#sbo-rt-content .SimplePara>.Table{margin-top:.5em}#sbo-rt-content thead,#sbo-rt-content tdiv{vertical-align:top}#sbo-rt-content tbody+tbody tr:first-child td{padding-top:1em}#sbo-rt-content .ExternalTable{background-color:#F8F8F8;border-top:1px solid;border-bottom:1px solid;margin-top:1em;margin-bottom:1em;padding-top:0;padding-bottom:0}#sbo-rt-content .ExternalTable .Table{padding-bottom:.3em}#sbo-rt-content .UnorderedList>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0}#sbo-rt-content .Heading+.Para>div.UnorderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .UnorderedList li .Para:first-child{text-indent:0}#sbo-rt-content .Heading+ul{margin-top:0}#sbo-rt-content ul{margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.UnorderedListMarkBullet{list-style-type:disc;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkBullet div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkBullet .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkNone{list-style-type:none;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkNone div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkNone .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkDash{list-style:none;padding-left:1.1em;text-indent:-.8em}#sbo-rt-content ul.UnorderedListMarkDash>li>*:first-child{display:inline}#sbo-rt-content ul.UnorderedListMarkDash div{text-indent:0;margin-top:.3em;margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkDash>li:before{content:"– "}#sbo-rt-content .Verse{margin-top:1em;margin-bottom:1em}#sbo-rt-content .Verse .Heading{font-size:1rem;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content .Acknowledgments,#sbo-rt-content .AuthorContribution,#sbo-rt-content .Ethics{margin-top:1em}#sbo-rt-content .Acknowledgments>.Heading,#sbo-rt-content .AuthorContribution>.Heading,#sbo-rt-content .FundingInformation>.Heading,#sbo-rt-content .DataAvailability>.Heading,#sbo-rt-content .Ethics>.Heading{font-size:1.2rem;margin-bottom:0}#sbo-rt-content .License{font-size:.9rem !important;margin-top:1em;margin-bottom:1em}#sbo-rt-content .License>a:first-child img{float:left;height:1.9rem;padding-right:.5em;padding-bottom:0;padding-top:.2em}#sbo-rt-content .Glossary{border-top:1px solid #bbb;margin-top:1em;margin-bottom:1em;padding-top:.3em}#sbo-rt-content .Glossary .Headings{margin-top:.8em;margin-bottom:.8em}#sbo-rt-content .Glossary>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Glossary>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .GlossarySection .Headings{margin-top:.8em;margin-bottom:.4em}#sbo-rt-content .GlossarySection>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .GlossarySection>.Headings>.SubHeading{font-size:100%}#sbo-rt-content .GlossaryTerm{float:left;font-style:italic;padding-right:.5em}#sbo-rt-content .GlossarySeeLabel,#sbo-rt-content .GlossarySeeAlsoLabel{font-style:italic;padding-right:.3em}#sbo-rt-content .GlossaryDef{display:inline;margin-top:.3em}#sbo-rt-content .GlossaryDef>.SimplePara,#sbo-rt-content .GlossaryDef>.GlossarySee,#sbo-rt-content .GlossaryDef>.GlossarySeeAlso{display:block}#sbo-rt-content .GlossaryDef>:first-child{display:inline;margin-top:0;margin-left:0}#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySee,#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySeeAlso{text-indent:0}#sbo-rt-content .GlossaryTerm{display:inline}#sbo-rt-content .GlossaryTerm+.GlossarySee,#sbo-rt-content .GlossaryTerm+.GlossarySeeAlso{display:inline}#sbo-rt-content .InternalRefGlossaryEntry{border-bottom:thin dotted;cursor:help}#sbo-rt-content .InternalRefGlossaryEntry:hover{border-bottom:none}#sbo-rt-content .InternalRefGlossaryEntry a:link,#sbo-rt-content .InternalRefGlossaryEntry a:active,#sbo-rt-content .InternalRefGlossaryEntry a:visited{color:inherit}#sbo-rt-content .InternalRefGlossaryEntry .InlineGlossaryDefinition{background:#fff;display:none;margin:0 3em 0 2em;padding:3px 3px 3px 6px;border-style:solid;border-color:#49546F;border-width:2px;border-radius:5px;box-shadow:5px 5px 5px #888}#sbo-rt-content .InternalRefGlossaryEntry:hover .InlineGlossaryDefinition{display:block;z-index:6}#sbo-rt-content .TocAppendix{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .BookContextInformation+.Appendix>.TocAppendix:first-child{border-top:none;padding-top:0}#sbo-rt-content .TocAppendix .Headings{margin-bottom:.5em}#sbo-rt-content .TocAppendix>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .TocAppendix>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .TocEntry,#sbo-rt-content .TocPart,#sbo-rt-content .TocBack{margin-top:.5em;text-align:left !important}#sbo-rt-content .TocItem{font-weight:bold}#sbo-rt-content .TocPageNumber{display:none}#sbo-rt-content .TocAuthors{padding-left:1.5em}#sbo-rt-content .TocSection1,#sbo-rt-content .TocSection2,#sbo-rt-content .TocSection3,#sbo-rt-content .TocSection4,#sbo-rt-content .TocSection5,#sbo-rt-content .TocSection6,#sbo-rt-content .TocSection7{padding-left:1.5em}#sbo-rt-content .Index{border-top:1px solid #bbb;margin-top:1em;padding-top:.3em;margin-bottom:.8em}#sbo-rt-content .BookBackmatter>.Index:first-child{border-top:none;margin-top:0}#sbo-rt-content .Index .Headings{margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BookBackmatter>.Index:first-child>.Headings{margin-top:0}#sbo-rt-content .Index>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Index>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .IndexDiv .Headings{margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .IndexDiv>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .IndexDiv>.Headings>.SubHeading{font-size:100%;font-style:italic}#sbo-rt-content .IndexEntrySeeLabel{font-style:italic;margin-left:1em;padding-right:.3em}#sbo-rt-content .SecondaryIE{margin-left:1em}#sbo-rt-content .TertiaryIE{margin-left:2em}#sbo-rt-content .ChangeHistory{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ChangeHistory>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.3em}#sbo-rt-content .ChangeDate{font-weight:bold;padding-right:1em}#sbo-rt-content .ChangeDetails{display:inline}#sbo-rt-content .ChangeDetails>p:first-of-type{display:inline}#sbo-rt-content .Bibliography{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .BookBackmatter>.Bibliography:first-child{border-top:none}#sbo-rt-content .Bibliography>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BibliographyWrapper{display:table;margin:0;padding:0}#sbo-rt-content .Bibliography>.BibliographyWrapper{padding-top:1em}#sbo-rt-content .Bibliography>.Heading+.BibliographyWrapper{padding-top:0}#sbo-rt-content .BibSection>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.2em}#sbo-rt-content .BibliographyWrapper>.BibSection:first-child>.Heading:first-child{margin-top:.3em}#sbo-rt-content .Citation{display:table-row;font-size:90%}#sbo-rt-content .CitationNumber{display:table-cell}#sbo-rt-content .CitationNumber+.CitationContent{padding-left:.5em;text-align:left}#sbo-rt-content .CitationContent{padding-top:1em;display:table-cell}#sbo-rt-content .BibliographyWrapper>.Citation:first-child>.CitationContent{padding-top:0}#sbo-rt-content .Occurrences{display:block}#sbo-rt-content .Occurrence{margin-right:0}#sbo-rt-content .Occurrence:before{content:"["}#sbo-rt-content .Occurrence:after{content:"]"}#sbo-rt-content .Citation .ArticleTitle:before,#sbo-rt-content .Citation .ChapterTitle:before{content:" “";}#sbo-rt-content .Citation .ArticleTitle,#sbo-rt-content .Citation .ChapterTitle{display:inline}#sbo-rt-content .Citation .ArticleTitle:after{content:"”\ ";}#sbo-rt-content .Citation .ChapterTitle:after{content:"”\ In: ";}#sbo-rt-content .Citation .Year:before{content:" ("}#sbo-rt-content .Citation .Year:after{content:") "}#sbo-rt-content .Citation .JournalTitle:after{content:" "}#sbo-rt-content .Citation .VolumeID:after{content:":"}#sbo-rt-content .BibChapter .FirstPage:before,#sbo-rt-content .BibBook .FirstPage:before{content:", pp "}#sbo-rt-content .Citation .FirstPage+.LastPage:before{content:"–";}#sbo-rt-content .Citation .BookTitle:after,#sbo-rt-content .Citation .BibEditorName:after,#sbo-rt-content .Citation .EditionNumber:after,#sbo-rt-content .Citation .PublisherName:after{content:", "}#sbo-rt-content .BibComments{display:block}#sbo-rt-content .CoverFigure img{margin:0 auto 6px;width:100%;max-width:480px;height:auto}#sbo-rt-content .SeriesTitlePage{padding-bottom:1.5em;padding-top:1em}#sbo-rt-content .SeriesTitlePage .VolumeNumber{font-size:1.44rem}#sbo-rt-content .SeriesTitlePage span.SeriesTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SeriesSubTitle{display:block;font-size:1.44rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .SubSeriesTitle{display:block;font-size:1.44rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SubSeriesSubTitle{display:block;font-size:1.2rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .CollaboratorDesignation{display:block;font-weight:bold;padding-top:3em}#sbo-rt-content .SeriesTitlePage .Collaborators{display:block}#sbo-rt-content .SeriesTitlePage .AffiliationText{font-style:italic;margin-left:0}#sbo-rt-content .SeriesTitlePage .Affiliation+.CollaboratorName{display:inline-block;margin-top:1em}#sbo-rt-content .SeriesInformationText{padding-top:3em}#sbo-rt-content .BookTitlePage{padding-top:1em}#sbo-rt-content .BookTitlePageAfterSeriesTitlePage{border-top:1px solid #bbb;page-break-before:always}#sbo-rt-content .BookContextInformation+.BookTitlePage{border-top:none;padding-top:0}#sbo-rt-content .BookTitlePage .BookEditors,#sbo-rt-content .BookTitlePage .BookAuthors,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{text-align:left !important}#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{margin-top:1em}#sbo-rt-content .BookTitlePage .BookEditorGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup .CollaboratorDesignation{font-style:italic}#sbo-rt-content .BookTitlePage .BookTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:1em}#sbo-rt-content .BookTitlePage .BookSubTitle{display:block;font-size:1.44rem;font-weight:bold;margin-bottom:.5em}#sbo-rt-content .BookTitlePage .BookEdition{display:block;font-size:1rem;font-weight:normal;margin-top:.5em}#sbo-rt-content .BookTitlePage .CollaboratorLine{padding-top:.5em}#sbo-rt-content .BookFeatureText{margin-top:.5em}#sbo-rt-content .BookTitlePage .PublisherLogo .Figure,#sbo-rt-content .BookTitlePage .PublisherImprintName{font-size:1.2rem;margin-top:4em;margin-bottom:1.5em;text-align:left}#sbo-rt-content .CopyrightPage{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .CopyrightPage .CollaboratorDesignation{display:block;font-style:italic;padding-bottom:.5em}#sbo-rt-content .CopyrightPageOriginators{padding-bottom:4em}#sbo-rt-content .CopyrightPage div+.CollaboratorDesignation{padding-top:2em}#sbo-rt-content .CopyrightPage .EditorGroup+.AuthorGroup{padding-top:2em}#sbo-rt-content .CopyrightPage .Author+.Author,#sbo-rt-content .CopyrightPage .Author+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.Author,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .Editor+.Editor,#sbo-rt-content .CopyrightPage .Editor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.Editor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .Collaborator+.Collaborator{padding-top:1em}#sbo-rt-content .CopyrightPage .Affiliation{margin-top:0}#sbo-rt-content .CopyrightPage .AffiliationText{margin-left:0}#sbo-rt-content .CopyrightPage .CollaboratorLine{padding-top:1em}#sbo-rt-content .CopyrightPage .CollaboratorLineTranslatedBy{padding-top:2em}#sbo-rt-content .CopyrightPage .CollaboratorLine .CollaboratorDesignation{display:inline;font-style:normal}#sbo-rt-content .BookFrontmatter .CopyrightPage .ArticleNoteESMHint{border:none;padding-bottom:0;page-break-before:auto}#sbo-rt-content .CopyrightPageISBNs,#sbo-rt-content .CopyrightPageISSNs,#sbo-rt-content .SpringerLocationsLine,#sbo-rt-content .CatalogingInformation,#sbo-rt-content .MathematicsSubjectClassification,#sbo-rt-content .CopyrightLine,#sbo-rt-content .CopyrightPage .CopyrightComment,#sbo-rt-content .BookCopublishingInformation .SimplePara,#sbo-rt-content .CopyrightStandardText,#sbo-rt-content .TrademarkQualifierText,#sbo-rt-content .ProductLiability,#sbo-rt-content .LegalNotice,#sbo-rt-content .CoverDesigner,#sbo-rt-content .BookCoverFigureText,#sbo-rt-content .PaperInfo,#sbo-rt-content .SpringerReferenceLine{margin-top:1em}#sbo-rt-content .CopyrightComment+.CopyrightLine{margin-top:.5em}#sbo-rt-content .SeriesTitle+.CopyrightPageISBNs,#sbo-rt-content .SubSeriesTitle+.CopyrightPageISBNs{margin-top:0}#sbo-rt-content .CopyrightPage .SeriesTitle{display:block;margin-top:1em}#sbo-rt-content .SeriesTitle+.CopyrightPageISSNs,#sbo-rt-content .CopyrightPageISSNs+.SeriesTitle,#sbo-rt-content .CopyrightPageISSNs+.SubSeriesTitle{margin-top:0}#sbo-rt-content .CopyrightPagePrintISSN,#sbo-rt-content .CopyrightPagePrintISBN{display:inline-block;min-width:12em}#sbo-rt-content .SpringerReferenceLine .SimplePara+.SimplePara,#sbo-rt-content .BookCoverFigureText .SimplePara+.SimplePara,#sbo-rt-content .BookCopublishingInformation .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .CopyrightPagePrintISSN+.CopyrightPageElectronicISSN{padding-left:1.5em}#sbo-rt-content .CopyrightPagePrintISBN+.CopyrightPageElectronicISBN{padding-left:1.5em}#sbo-rt-content .CopyrightComment .SimplePara+.SimplePara{padding-top:.5em;text-indent:0}#sbo-rt-content .MathematicsSubjectClassificationCode+.MathematicsSubjectClassificationCode:before{content:", "}#sbo-rt-content .Endorsement{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Frontispiece{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Dedication{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Foreword{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter h1:first-child+.Foreword{border-top:none;padding-top:0;page-break-before:auto}#sbo-rt-content .ForewordTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Foreword .AuthorName{margin-top:.2em}#sbo-rt-content .Foreword .AuthorName,#sbo-rt-content .ForewordLocations,#sbo-rt-content .ForewordDate{font-weight:bold;text-align:right}#sbo-rt-content .ForewordLocation+.ForewordLocation:before{content:", "}#sbo-rt-content .Foreword .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Foreword .RenderAsSection2>.Heading,#sbo-rt-content .Foreword .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .Preface{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PrefaceTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Preface .AuthorName{margin-top:.2em}#sbo-rt-content .Preface .AuthorName,#sbo-rt-content .PrefaceLocations,#sbo-rt-content .PrefaceDate{font-weight:bold;text-align:right}#sbo-rt-content .PrefaceLocation+.PrefaceLocation:before{content:", "}#sbo-rt-content .Preface .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Preface .RenderAsSection2>.Heading,#sbo-rt-content .Preface .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookFrontmatterArticleNote{border-top:1px solid #bbb;margin-top:0;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .ArticleNote{padding-bottom:1em}#sbo-rt-content .PartFrontmatter h1:first-child+.ArticleNote{border-top:none;page-break-before:auto}#sbo-rt-content .BookFrontmatter .ArticleNote .Heading,#sbo-rt-content .PartFrontmatter .ArticleNote .Heading{font-size:1.44rem;font-style:normal;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookAcknowledgmentsTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments .AuthorName{font-weight:bold;margin-top:1em}#sbo-rt-content .BookAcknowledgments .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .BookAcknowledgments .RenderAsSection2>.Heading,#sbo-rt-content .BookAcknowledgments .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookNotes{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookNotesTitle{font-size:1.44rem;font-weight:bold;margin-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookNotes .AuthorName{font-weight:bold}#sbo-rt-content .BookFrontmatterAbbreviationGroup{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .AbbreviationGroup{padding-bottom:1em;margin-top:1em}#sbo-rt-content .BookFrontmatter .AbbreviationGroup .Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroup .Heading{font-size:1.44rem;font-weight:bold;padding-top:1em;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection>.Heading{font-size:1.2rem;padding-top:1em;padding-bottom:0}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading{padding-top:.5em}#sbo-rt-content .Toc{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Toc .Headings{margin-bottom:.5em}#sbo-rt-content .Toc>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Toc>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .Loh{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loh .Headings{margin-bottom:.1em}#sbo-rt-content .Loh>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Loh>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LohPageNumber{display:none}#sbo-rt-content .LocWithHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loc .Headings{margin-bottom:.1em}#sbo-rt-content .LocWithHeading>.Headings>.Heading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .LocWithHeading>.Headings>.SubHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LocWithHeading .LocDiv{margin-top:1em}#sbo-rt-content .LocWithHeading .LocDiv .Heading{font-size:1.2rem;margin-bottom:.1em}#sbo-rt-content .LocWithHeading .LocDiv .SubHeading{font-size:100%;font-style:italic;font-weight:normal}#sbo-rt-content .LocDiv .FormalPara .Heading{font-size:100%}#sbo-rt-content .Loc .AuthorGroup+.AuthorGroup,#sbo-rt-content .Loc .AuthorGroup+.EditorGroup,#sbo-rt-content .Loc .EditorGroup+.AuthorGroup,#sbo-rt-content .Loc .EditorGroup+.EditorGroup{margin-top:1em}#sbo-rt-content .Loc .Author,#sbo-rt-content .Loc .Editor,#sbo-rt-content .Loc .InstitutionalAuthor,#sbo-rt-content .Loc .InstitutionalEditor{font-weight:bold}#sbo-rt-content .Loc .AffiliationText{margin-left:0}#sbo-rt-content .Loc .Email+.Email:before{content:", "}#sbo-rt-content .Loc .Emails,#sbo-rt-content .Loc .URLs{display:inline}#sbo-rt-content .Loc .Emails+.URLs:before{content:", "}#sbo-rt-content .Loc .URL+.URL:before{content:", "}#sbo-rt-content .BookFrontmatterFootnoteSection{border-top:1px solid #bbb;margin-top:0;page-break-before:always}#sbo-rt-content .PartFrontmatter .FootnoteSection{border-top:none;margin-top:0}#sbo-rt-content .Colophon{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em;font-style:italic}#sbo-rt-content .ConferenceInfo{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em}#sbo-rt-content .ConfEventAbbreviation,#sbo-rt-content .ConfNumber+.ConfSeriesName,#sbo-rt-content .ConfEventAbbreviation+.Year,#sbo-rt-content .ConfEventDateStart,#sbo-rt-content .ConfEventDateEnd{display:inline}#sbo-rt-content .ConfEventAbbreviation:after{content:" "}#sbo-rt-content .ConfEventLocation .City:after{content:", "}#sbo-rt-content .ConfEventDateEnd:before{content:"–"}#sbo-rt-content .ConfEventDateStart .Year:after,#sbo-rt-content .ConfEventDateStart .Month:after,#sbo-rt-content .ConfEventDateEnd .Year:after,#sbo-rt-content .ConfEventDateEnd .Month:after{content:"/"}#sbo-rt-content .ConfEventDate .Month:after{content:"/"}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781484226018/chapter/html/425975_1_En_6_Chapter.xhtml",
          "book_id": "9781484226018",
          "chapter_uri": "html/425975_1_En_6_Chapter.xhtml",
          "position": 0,
          "user_uuid": "39a88cd5-54f5-4d61-aec6-7884d06dfba1",
          "next_chapter_uri": "/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_7_Chapter.xhtml"
        
      },
      title: "Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software",
      author_list: "Michael Schwartz, Maciej Machulak",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml"><meta name="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_6 6. Proxy Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   A proxy is a ...!--end&gt;!--begin&gt; "><meta property="og:title" content="6. Proxy"><meta itemprop="isPartOf" content="/library/view/securing-the-perimeter/9781484226018/"><meta itemprop="name" content="6. Proxy"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9781484226018/"><meta property="og:description" itemprop="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_6 6. Proxy Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   A proxy is a ...!--end&gt;!--begin&gt; "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781484226018"><meta property="og:book:author" itemprop="author" content="Michael Schwartz"><meta property="og:book:author" itemprop="author" content="Maciej Machulak"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '39a88cd5-54f5-4d61-aec6-7884d06dfba1';
      dataLayer.push({userIdentifier: '39a88cd5-54f5-4d61-aec6-7884d06dfba1'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'c1ff3208-121f-489a-a3cd-0b219a28ba6e';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/vendor.667e7ada497a.js"></script><script defer="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/reader.d25c5547507a.js"></script><iframe src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource.html"></iframe><iframe src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(2).html"></iframe><iframe src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(3).html"></iframe><link rel="stylesheet" type="text/css" href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/container.40a6b605d29a66b083aa6d74c07bb73eae19e31b.css"><iframe src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(4).html"></iframe><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(1).txt"></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(2).txt"></script><script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(3).txt"></script><script async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 2147483667;
}
.annotator-filter {
  z-index: 2147483657;
}</style><link href="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/840a321d95.css" media="all" rel="stylesheet"><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav nav-collapsed scalefonts subscribe-panel library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/39a88cd5-54f5-4d61-aec6-7884d06dfba1/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=collection&amp;sort=date_added&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Expert Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Practice</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/" class="l2 nav-icn"><span>Katacoda Scenarios</span></a></li><li><a href="https://learning.oreilly.com/interactive/#notebooks" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M10.0440191,12.1582649 C10.177209,12.3351976 10.2476998,12.552011 10.2434767,12.7742985 L10.2434767,13.9482829 L1.96869684,13.9482829 L1.96869684,12.7742985 C1.96418597,12.536863 2.04491894,12.3056731 2.19625329,12.1226596 L2.20142503,12.1226596 C3.18373453,10.9898864 4.60930376,10.339179 6.10867266,10.339179 C7.30793519,10.339179 8.45998426,10.7554703 9.37576632,11.5017585 L14.3434936,11.5017585 L14.3434936,3.65650645 L1.65650645,3.65650645 L1.65650645,11.5017585 L2.06682298,11.5017585 L1.82063306,12.1582649 L1.32825322,12.1582649 C1.14771395,12.1582649 1,12.010551 1,11.8300117 L1,3.32825322 C1,3.14771395 1.14771395,3 1.32825322,3 L14.6717468,3 C14.852286,3 15,3.14771395 15,3.32825322 L15,11.8300117 C15,12.010551 14.852286,12.1582649 14.6717468,12.1582649 L10.0440191,12.1582649 Z M12.5483683,7.16419284 C12.6159362,7.20929881 12.6563112,7.2853432 12.6558247,7.36658194 C12.6553382,7.44782068 12.6140555,7.5233761 12.5459522,7.56766966 L10.4270949,8.91581376 C10.3903366,8.94010203 10.3431312,8.9419685 10.3045699,8.9206583 C10.2660086,8.89934811 10.2424712,8.85838696 10.2434767,8.81434055 L10.2434767,5.91510593 C10.2420711,5.86982855 10.2666257,5.82771857 10.3067229,5.80664182 C10.3468202,5.78556507 10.3954292,5.7892172 10.431927,5.81604875 L12.5483683,7.16419284 Z M6.10608679,9.81089299 C4.9635781,9.81089299 4.03739181,8.8847067 4.03739181,7.74219802 C4.03739181,6.59968933 4.9635781,5.67350304 6.10608679,5.67350304 C7.24859547,5.67350304 8.17478176,6.59968933 8.17478176,7.74219802 C8.17478176,8.8847067 7.24859547,9.81089299 6.10608679,9.81089299 Z"></path></svg><span>Sandboxes</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/kubernetes-sandbox/9781492062820/" class="l2 nav-icn"><span>Kubernetes</span></a></li><li><a href="https://learning.oreilly.com/scenarios/python-sandbox/9781492062844/" class="l2 nav-icn"><span>Python</span></a></li><li><a href="https://learning.oreilly.com/scenarios/tensorflow-sandbox/9781492062851/" class="l2 nav-icn"><span>TensorFlow</span></a></li><li><a href="https://learning.oreilly.com/scenarios/ubuntu-sandbox/9781492062837/" class="l2 nav-icn"><span>Ubuntu</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/r/" class="l2 nav-icn"><span>Recommendations</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Release</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.4 9.8a.6.6 0 0 1 .6.6v1.2h-1.2l-.6 2.4H3.8l-.6-2.4H2v-1.2a.6.6 0 0 1 .6-.6h10.8zM8 5.6a1.8 1.8 0 1 1-.001-3.599A1.8 1.8 0 0 1 8 5.6zm3.6 2.35v.95H4.4v-.95c0-.167.066-.33.19-.443A5.08 5.08 0 0 1 8 6.2a5.08 5.08 0 0 1 3.41 1.307c.124.113.19.276.19.444z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Training</span></a></li></ul></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781484226018/chapter/html/425975_1_En_6_Chapter.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml&amp;text=Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%206.%C2%A0Proxy&amp;body=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml%0D%0Afrom%20Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/djangoMessagesPage.61a28d591d16.js"></script>


        <script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/48743.js"></script>
<script>
  var userId = "6866040";

  var userObject = {
    firstName: "MACKYNZIE",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "April 4, 2020, 9:28 a.m.",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">5.&nbsp;OpenID Connect</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_7_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">7.&nbsp;Strong Authentication</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><div class="ChapterContextInformation"><div class="ContextInformation" id="b978-1-4842-2601-8_6"><div class="ChapterCopyright">©&nbsp;Michael Schwartz, Maciej Machulak&nbsp;2018</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" epub:type="title" lang="en">Securing the Perimeter</span></span><span class="ChapterDOI"><a href="https://doi.org/10.1007/978-1-4842-2601-8_6">https://doi.org/10.1007/978-1-4842-2601-8_6</a></span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" lang="en">6.&nbsp;Proxy</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#Aff3" class="totri-footnote">1</a>&nbsp;<span class="ContactIcon"></span></sup> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#Aff4" class="totri-footnote">2</a></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff3"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Austin, TX, USA</div></div><div class="Affiliation" id="Aff4"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">London, UK</div></div><div class="ClearBoth">&nbsp;</div></div></div><!--End Abstract--><div class="Fulltext"><div class="Para" id="Par2">A proxy is a web server middle-man. It receives an HTTP request from a client, forwards it to another web server, and after receiving a response, returns it to the client (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#Fig1">6-1</a></span>). Proxies should be “transparent,” meaning they don’t impact either the client or the backend web service.<figure class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img alt="../images/425975_1_En_6_Chapter/425975_1_En_6_Fig1_HTML.jpg" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_6_Fig1_HTML.jpg" style="height:14.32em" width="1713" height="573" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_6_Chapter/425975_1_En_6_Fig1_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 6-1</span><p class="SimplePara">Proxy <span id="ITerm1">overview</span></p></div></figcaption></figure></div><p class="Para" id="Par3">In some cases, the proxy uses a path to map the <span id="ITerm2">upstream web service</span>. For example, consider the URL <span class="EmphasisFontCategoryNonProportional ">https://www.example.com/myService</span>. In this case, the proxy answers to the hostname <span class="EmphasisFontCategoryNonProportional ">www.example.com</span>, but <span id="ITerm3">
            <span class="EmphasisFontCategoryNonProportional ">myService</span>
            
          </span> is used as a “junction” to the location of the upstream web resource. Alternately, a web server could use a hostname to map an upstream service. For example, <span class="EmphasisFontCategoryNonProportional ">https://myservice.example.com</span>.</p><p class="Para" id="Par4">You may hear your peers use the term “<span id="ITerm4">reverse”</span> proxy. As proxies, by definition, go in both directions, you may have trouble figuring out what’s reverse about it. You’re not alone. Maybe people used the term “proxy” to describe the type that is used to intercept web browser traffic within an organization. If they considered this the “normal” direction for a proxy, i.e., outbound web requests, then proxying inbound traffic is reverse.</p><p class="Para" id="Par5">Many <span id="ITerm5">web application frameworks</span> include a web server component. For example, J2EE applications are deployed inside a servlet container (i.e., a web server). Python Flask builds in a web server implementation. Many system administrators feel uncomfortable exposing these web servers directly to the Internet. Although fairly secure—most vulnerabilities are identified and patched quickly by the community—correctly configuring any web server requires familiarity with the platform. Thus, in a heterogeneous environment, with developers using many web frameworks and tools, it’s hard for system administrators to know them all. It’s a good practice to minimize the number of Internet-facing web server implementations, so administrators have a smaller surface area to protect from the riskiest network segment.</p><p class="Para" id="Par6">Configuration of Internet-facing web services is not a trivial task. Many web servers utilize security plugins that prevent attacks. As a result, although a platform like <span id="ITerm6">Apache Tomcat</span> (a J2EE servlet container) isn’t insecure, there are fewer tools available to protect it. Minimizing the systems on which administrators have to manage TLS may also be a goal. Generating and storing private keys and updating X.509 certificates (which expire every few months) requires more effort than many developers appreciate. Although if your organization has a “secure communication” <span id="ITerm7">policy</span>, which assumes no network is safe, you will have to use SSL on both the proxy and the application.</p><p class="Para" id="Par7">Another reason to use a proxy is because the web server is “dumber”. If TLS is breached (and TLS implementations have been targeted in the past, such as by Heartbleed), it may have access to sensitive files, databases, and services. File system resources may include private keys. The impact of a breach can be worse on the application server than on the web proxy. The proxy may have lot of data going through it, so a <span id="ITerm8">breached proxy</span><span id="ITerm9">
            
            
          </span> is bad too, but if you have to pick your poison, many security experts will choose the proxy.</p><p class="Para" id="Par8">From a pure network standpoint, most large organizations want to put Internet-facing proxies on a different network segment, i.e., the “DMZ”. An Internet-facing firewall protects the DMZ, and a second firewall protects the private network. This strategy prevents Internet-connected servers from directly communicating with internal databases, or other services that require additional security.</p><p class="Para" id="Par9">While security was the initial driver, proxies created new opportunities to do some other handy stuff. The following is a discussion of those features.</p><section class="Section1 RenderAsSection1" id="Sec1"><h2 class="Heading">Load Balancing</h2><div class="Para" id="Par10">If you are building a robust web service, you need to eliminate single points of failure. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#Fig2">6-2</a></span> is a high-level representation of a typical approach.<figure class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img alt="../images/425975_1_En_6_Chapter/425975_1_En_6_Fig2_HTML.jpg" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_6_Fig2_HTML.jpg" style="height:15.22em" width="1719" height="609" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_6_Chapter/425975_1_En_6_Fig2_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 6-2</span><p class="SimplePara">Overview of <span id="ITerm10">load balancing</span></p></div></figcaption></figure></div><p class="Para" id="Par11">When a browser or client makes an HTTP request, the host portion of the request resolves to one IP address. We don’t want the proxy itself to be a single point of failure. The network load balancer infrastructure normally handles this requirement and routes the request to an available proxy. At this point, the proxy has to route the request to the “upstream” web server. It would be silly to fail if another server could handle the request.</p><p class="Para" id="Par12">The proxy infrastructure also provides a path to upgrading the upstream applications without incurring downtime. For example, you can take an upstream server out of the available pool, upgrade it, and then add it back.</p><p class="Para" id="Par13">Network load balancers and proxies normally can handle timeouts automatically. The sophistication of health checks vary. At the simplest level, you can look at the TCP/IP connection—can you connect to the host and port? Of course, a service might listen on a port and still be non-responsive (i.e., hang). Some proxies and load balancers implement “active health checks” to a predetermined URL. “Passive health checks” monitor every request and response. The health checks operate as circuit breakers by switching traffic from an unhealthy service instance to a healthy one. The proxy must use active health checks to restore the circuit breaker automatically, since there is no regular traffic to monitor. Alternately, an administrator can manually reset the circuit breaker.</p></section><section class="Section1 RenderAsSection1" id="Sec2"><h2 class="Heading">Access Control and Security</h2><p class="Para" id="Par14">As a funnel for incoming web requests, the proxy is a very good place to enforce <span id="ITerm11">security</span> policies. In fact, several early commercial web access management products used the proxy for this purpose, e.g., IBM WebSEAL and Novell Access Manager (subsequently NetIQ and then Micro Focus).</p><p class="Para" id="Par15">The proxy makes an excellent policy enforcement point (PEP) in a P*P architecture (PEP, PDP, PAP, etc.). You don’t want the proxy doing too much policy evaluation because the main goal is speed. The proxy might be checking to make sure a valid token exists, or looking at a token to make sure it has the appropriate level of access. For example, an OAuth-based proxy might check the token expiration or check to make sure the token has the correct scopes. But of course a proxy can use any access control architecture, not just OAuth.</p><p class="Para" id="Par16">The proxy is a good place to run intrusion detection software. If it gets breached, you want to know quickly. The proxy’s logs should also be monitored, in addition to the upstream web server logs. If an attack happens, the logs will contain vital information, such as the network source of the web request.</p><p class="Para" id="Par17">There is also a security benefit to masking the upstream servers. In security, you always want to expose as little information as possible to potential attackers. By proxying, you hide potentially useful information such as the web server type and network information.</p></section><section class="Section1 RenderAsSection1" id="Sec3"><h2 class="Heading">Rate Limiting</h2><p class="Para" id="Par18">An organization may have a mix of web performance requirements. For example, an organization’s web services may handle requests from internal departments, partners, customers, or even anonymous Internet clients. Each of these client classes may have different expectations, or even service level agreements. To appropriately deliver web content, it may be necessary for an organization to prioritize certain requests. Proxy implementations can either block requests beyond a threshold amount or delay them. Rate limiting can also help prevent data scraping—although attackers may still attempt to scrape data while living within the rate limit.</p><p class="Para" id="Par19"><span id="ITerm12">Rate limiting</span> can also be an important security feature. Hackers may launch a denial of service attack (DoS) by overloading your web services. By specifying maximum traffic limits, the proxy can prevent overloading the upstream web services. However, the proxy by itself might not be enough to protect you from a DoS attack, which can swamp the proxy itself, so you may need to implement hardware and network strategies as well.</p><p class="Para" id="Par20">Organizations that charge for web services may use rate limiting for monetization. It’s not uncommon for companies that sell APIs to offer a certain number of calls for a given time period. For example, two requests a minute are free.</p><p class="Para" id="Par21">Proxies<span id="ITerm13">
              
              
            </span> use different algorithms to implement rate limiting. There is a tradeoff between performance and precision. A discussion of rate-limiting algorithms is beyond the scope of this book, as there is a large existing body of work on this topic. The algorithms are more complex when multiple proxies are deployed in a clustered solution. In this case, communication is needed between the proxies, normally via a high-speed in-memory network cache, like Redis or memcached. This shared state between the systems will obviously incur some overhead and hence add latency to the traffic. As with any database application, the algorithm needs to mitigate the risk of race conditions and blocking. The different algorithms define various mechanisms to minimize latency, usually at the cost of real-time accuracy.</p></section><section class="Section1 RenderAsSection1" id="Sec4"><h2 class="Heading">Caching and Compression</h2><p class="Para" id="Par22">The goal of <span id="ITerm14">caching and compression</span> is to gain speed, to minimize network traffic, and to reduce load on upstream servers. It is superfluous for the upstream server to generate the same response twice. Caching is a win-win: it’s more efficient for the organization hosting the web service, and it results in a faster response for the web client. Caching only makes sense for the HTTP <span class="EmphasisFontCategoryNonProportional ">GET</span> method. The <span class="EmphasisFontCategoryNonProportional ">POST</span>, <span class="EmphasisFontCategoryNonProportional ">PUT</span>, and <span class="EmphasisFontCategoryNonProportional ">DELETE</span> methods are write requests and can’t be cached.</p><p class="Para" id="Par23">The client can use the <span class="EmphasisFontCategoryNonProportional ">Cache-Control</span> HTTP header to control how the proxy handles caching. The following is not a full discussion of how to use this header, but it should give you an idea of some of the options.</p><div class="Para" id="Par24">If the client wishes to prevent the proxy from caching a response, such as to protect sensitive information like a credit card number, it can specify:<div class="ProgramCode" id="PC1"><div class="LineGroup"><div class="FixedLine">Cache-Control: no-store</div></div></div></div><div class="Para" id="Par25">If a client does not want to get back cached results, it can specify:<div class="ProgramCode" id="PC2"><div class="LineGroup"><div class="FixedLine">Cache-Control: no-cache</div></div></div></div><div class="Para" id="Par26">The client can also specify a maximum age or request that a proxy not return cached response, even if it has expired (a proxy may do this if a backend service is unavailable):<div class="ProgramCode" id="PC3"><div class="LineGroup"><div class="FixedLine">Cache-Control: max-age=3600, proxy-revalidate</div></div></div></div><p class="Para" id="Par27">Cache implementations vary—read the documentation for your proxy.</p></section><section class="Section1 RenderAsSection1" id="Sec5"><h2 class="Heading">Telemetry</h2><p class="Para" id="Par28">Human evolution favored those of us who were able to detect changes in our visual environment. Was that flash of stripes a tiger? In information technology, we can put our visual acuity to work by looking at graphs and other reports. Due to the complexity of our infrastructures, it is hard to even diagnose problems if you can’t literally see them.</p><p class="Para" id="Par29">Pretty pictures are not possible without data. Telemetry is the process of recording and transmitting the readings of an instrument—in this case our proxy. Web servers create logs with lots of data. These logs must be processed to produce graphs. Newer proxies send the data needed for analytics at runtime and enable integration with visualization tools like Grafana.</p><p class="Para" id="Par30">Beyond passively capturing <span id="ITerm15">data</span><span id="ITerm16">
              
              
            </span>, the proxy can play an active role by inserting tracking identifiers into the request and response. Tools can use these tracking identifiers to report on transactions through their lifecycle, such as using an open source tool like OpenTracing. It’s helpful if system administrators can see execution times and latencies of an entire request cycle, and even configure monitoring tools to send alerts if thresholds are exceeded.</p></section><section class="Section1 RenderAsSection1" id="Sec6"><h2 class="Heading">Monetization</h2><p class="Para" id="Par31">The API <span id="ITerm17">proxy</span> is like the gate at a large concert—someone has to take the tickets before you get to see the rock band! API monetization can integrate with accounting or e-commerce platforms to transform web traffic into currency!</p><p class="Para" id="Par32">Amazon, the e-commerce juggernaut of the world, does a really good job at this. <span id="ITerm18">Amazon Web Service (AWS)</span> enables developers to monetize APIs built with the AWS API Gateway using Amazon bill calculation and collection mechanisms. API usage plans allow developers to set rate limits and quotas, and to create multiple usage plans with different limits (e.g., Silver, Gold, or Platinum) and offer them as different API products on the Amazon Web Service (AWS) Marketplace.</p><div class="Para" id="Par33">There are three <span id="ITerm19">API monetization models</span><span id="ITerm20">
              
              
            </span>:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par34"><strong class="EmphasisTypeBold ">Tiered</strong>—Access is differentiated by either features, response time, rate limits, volume, or data depth. Additional costs may be incurred for overages, or discounts may be applied for volume.</p></li><li><p class="Para" id="Par35"><strong class="EmphasisTypeBold ">Flat fees—</strong>APIs are billed uniformly based on usage.</p></li><li><p class="Para" id="Par36"><strong class="EmphasisTypeBold ">Freemium</strong>—Try-buy-fly. APIs are free for a certain length of time or for a certain quantity of <span id="ITerm21">calls</span><span id="ITerm22">
                    
                    
                  </span>.</p></li></ul></div></div><p class="Para" id="Par37">Points or credits may be used in lieu of fiat currency. For example, maybe you get 2,500 credits for free, but if you pay $50 per month, you get 5,000 credits. The advantage of this strategy is that it reduces some of the financial friction in the technical infrastructure, especially when customers are global and may want to pay in various fiat or crypto currencies.</p><p class="Para" id="Par38">In some cases, you could build the billing into the code of the APIs themselves. The intersection of monetization and APIs definitely occurs where billing is a factor in access <span id="ITerm23">control</span>.</p></section><section class="Section1 RenderAsSection1" id="Sec7"><h2 class="Heading">API vs Web Proxy</h2><p class="Para" id="Par39">A front-channel HTTP request is sent from a person’s browser to a web server (or user agent). A back-channel request is sent from a software agent—it can even be a machine-to-machine operation that doesn’t involve a person. Therefore, front-channel requests require a web proxy, while back-channel requests use an API <span id="ITerm24">proxy</span><span id="ITerm25">
              
              
            </span>.</p><p class="Para" id="Par40">From the perspective of a proxy, this is a subtle difference. You may even wonder why it matters.</p><p class="Para" id="Par41">Web proxies need to think about the user experience. A web proxy will need to brand messages to a person. If everything goes well, the web proxy is invisible to the person using a browser. However, if there is an error, for example a non-existent page is requested, the response will vary based on who is making it. A response to a user agent will need to format pages appropriately with the right CSS, JavaScript, and images, while error responses to a software agent are informational only. Web proxies need to be smarter about the variety of browsers, perhaps sending a different response based on the type of browser or logging the information.</p><p class="Para" id="Par42">Web applications use cookies to track sessions. Session validation is an important feature for a Web proxy. It’s easier for a software agent to use the path to request parameters or HTTP headers to communicate information to a web service. And software agents are normally stateless—each request is self-contained and, from the proxy perspective, doesn’t depend on previous requests. The software agent equivalent of a session is a token, typically sent in the Authorization header.</p><p class="Para" id="Par43">Protocols like OpenID Connect, which involve multiple steps—they get the code, use the code to get an access token, and then use the access token to get <span class="EmphasisFontCategoryNonProportional ">user_info</span>—are more complex to implement in a proxy and require more advanced handling of state across a series of requests. Also if a web proxy is responsible for authenticating a person, it will need to convey the resulting authentication information to the upstream application. For example, the proxy may set the person’s username in the <span class="EmphasisFontCategoryNonProportional ">HTTP_REMOTE_USER</span> header variable. Other HTTP headers may convey other user claims (e.g., <span class="EmphasisFontCategoryNonProportional ">HTTP_EMAIL</span> and <span class="EmphasisFontCategoryNonProportional ">HTTP_NAME</span>). Alternately, the web proxy may just send the identity assertion (e.g., <span class="EmphasisFontCategoryNonProportional ">HTTP_ID_TOKEN</span> and <span class="EmphasisFontCategoryNonProportional ">HTTP_USER_INFO</span>).</p><p class="Para" id="Par44">The security policies may differ for a web proxy. While a user agent primarily specifies the <span class="EmphasisFontCategoryNonProportional ">GET</span> and <span class="EmphasisFontCategoryNonProportional ">POST</span> methods, software agents may use all available methods, like <span class="EmphasisFontCategoryNonProportional ">PUT</span> and <span class="EmphasisFontCategoryNonProportional ">DELETE</span>, and even extension methods like <span class="EmphasisFontCategoryNonProportional ">PATCH</span>. Web proxies may want to block these <span id="ITerm26">methods</span><span id="ITerm27">
              
              
            </span>.</p></section><section class="Section1 RenderAsSection1" id="Sec8"><h2 class="Heading">Open Source Web Proxies</h2><p class="Para" id="Par45">The <span id="ITerm28">open source web proxies</span> are as follows.</p><section class="Section2 RenderAsSection2" id="Sec9"><h3 class="Heading">Apache httpd</h3><div class="Para" id="Par46">The first web server to be used as a proxy was <span id="ITerm29">Apache httpd</span><span id="ITerm30">
                
                
              </span>. There are two commonly used approaches:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par47">The <span class="EmphasisFontCategoryNonProportional ">ProxyPass</span> and <span class="EmphasisFontCategoryNonProportional ">ProxyPassReverse</span> directives</p></li><li><p class="Para" id="Par48">The <span class="EmphasisFontCategoryNonProportional ">Rewrite</span> directive</p></li></ul></div></div><p class="Para" id="Par49">The upstream API is mapped to a folder or hostname using the Apache <span class="EmphasisFontCategoryNonProportional ">Directory</span> or <span class="EmphasisFontCategoryNonProportional ">VirtualHost</span> configuration directives.</p><div class="Para" id="Par50">It’s possible to combine directives. For example, you can require authentication and proxy at the same time. This is a common strategy for handling SAML authentication. A Shibboleth SP proxy configuration might look like Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC4">6-1</a></span>.<div class="ProgramCode" id="PC4"><div class="LineGroup"><div class="FixedLine">&lt;VirtualHost _default_:443&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ServerName proxy.example.com</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;Location /&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AuthType shibboleth</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ShibRequestSetting requireSession 1</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Require shib-attr memberOf Manager</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Location&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPreserveHost On</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPass /target https://target.example.com/mySite</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPassReverse /target https://target.example.com/mySite</div><div class="FixedLine">&lt;/VirtualHost&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-1</span><p class="SimplePara">Apache ProxyPass Example</p></div></div></div></div><div class="Para" id="Par51">Here is a summary of the commands:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par52"><span class="EmphasisFontCategoryNonProportional ">AuthType shibboleth</span>—This signals to Apache to use the <span class="EmphasisFontCategoryNonProportional ">Shibboleth</span> filter for authentication.</p></li><li><p class="Para" id="Par53"><span class="EmphasisFontCategoryNonProportional ">Location</span>—This directive limits the scope of the enclosed directives by URL, which is different than <span class="EmphasisFontCategoryNonProportional ">Directory</span>, where you control access rights to a directory (and its subdirectories) in the file system. In this example, we are using base URL <span class="EmphasisFontCategoryNonProportional ">/</span>.</p></li><li><p class="Para" id="Par54"><span class="EmphasisFontCategoryNonProportional ">Require shib-attr memberOf Manager</span>—This directive requires that certain attributes must contain the specified values in the request. In this case, the <span class="EmphasisFontCategoryNonProportional ">memberOf</span> attribute must be <span class="EmphasisFontCategoryNonProportional ">Manager</span> in order to pass the authentication.</p></li><li><p class="Para" id="Par55"><span class="EmphasisFontCategoryNonProportional ">ProxyPass</span>—This directive allows remote servers to be mapped into the space of the local server. The local server does not act as a proxy in the conventional sense, but appears to be a mirror of the remote server.</p></li><li><p class="Para" id="Par56"><span class="EmphasisFontCategoryNonProportional ">ProxyPassReverse</span>—This directive lets Apache Httpd adjust the URL in the <span class="EmphasisFontCategoryNonProportional ">Location</span>, <span class="EmphasisFontCategoryNonProportional ">Content-Location</span>, and <span class="EmphasisFontCategoryNonProportional ">URI</span> headers on the HTTP redirect responses.</p></li></ul></div></div><p class="Para" id="Par57">In the discussed configuration, the client attempting to access <span class="ExternalRef"><a href="https://proxy.example.com/target"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://proxy.example.com/target</span>
                </span></a></span> is first required to be authenticated by Shibboleth, and then Apache makes a reverse proxy request to <span class="ExternalRef"><a href="http://target.example.com/"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">http://target.example.com/</span>
                </span></a></span> to get the final content displayed on the <span id="ITerm31">browser </span><span id="ITerm32">
                
              </span>.</p></section><section class="Section2 RenderAsSection2" id="Sec10"><h3 class="Heading">mod_auth_openidc</h3><p class="Para" id="Par58">This Apache module functions as an OpenID <span id="ITerm33">Connect</span><span id="ITerm34">
                
                
              </span> relying party, authenticating users against an OpenID Connect provider, after which it receives user identity information either via the <span class="EmphasisFontCategoryNonProportional ">id_token</span> or the <span class="EmphasisFontCategoryNonProportional ">UserInfo</span> JWT.</p><div class="Para" id="Par59">Sample configuration to use Gluu as an OpenID Connect provider is shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC5">6-2</a></span>.<div class="ProgramCode" id="PC5"><div class="LineGroup"><div class="FixedLine">&lt;VirtualHost *:443&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ServerAdmin webmaster@localhost</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;DocumentRoot /var/www/html</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCProviderMetadataURL https://idp.mydomain.com/.well-known/openid-configuration</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCClientID (client-id)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCClientSecret (your-client-secret)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCRedirectURI https://www.mydomain.com/callback</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCResponseType code</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCScope "openid profile email"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCSSLValidateServer Off</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCCryptoPassphrase (a-random-seed-value)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCClaimPrefix USERINFO_</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;OIDCPassIDTokenAs payload</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;Location "/"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Require valid-user</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AuthType openid-connect</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/Location&gt;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPreserveHost On</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPass /target http://target.host.org/resource.html</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPassReverse /target http://target.host.org/resource.html</div><div class="FixedLine">&lt;/VirtualHost&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-2</span><p class="SimplePara">Sample Configuration to Use Gluu as an OpenID Connect Provider <span id="ITerm35">
                        
                        
                      </span><span id="ITerm36">
                        
                      </span></p></div></div></div></div><div class="Para" id="Par60">A summary of the various directives follows:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par61"><span class="EmphasisFontCategoryNonProportional ">OIDCProviderMetadataURL</span>—The URL for the OP configuration metadata, i.e., the location of the <span class="EmphasisFontCategoryNonProportional ">.well-known/openid-configuration</span> file.</p></li><li><p class="Para" id="Par62"><span class="EmphasisFontCategoryNonProportional ">OIDCClientID</span>—The client identifier (<span class="EmphasisFontCategoryNonProportional ">client_id</span>) issued by the OP.</p></li><li><p class="Para" id="Par63"><span class="EmphasisFontCategoryNonProportional ">OIDCClientSecret</span>—The secret corresponding to the <span class="EmphasisFontCategoryNonProportional ">client_id</span>.</p></li><li><p class="Para" id="Par64"><span class="EmphasisFontCategoryNonProportional ">OIDCRedirectURI</span>—This path will be used by <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span> to receive the callback from the OP with the response. It should not map to content on the website.</p></li><li><p class="Para" id="Par65"><span class="EmphasisFontCategoryNonProportional ">OIDCResponseType</span>—The response type expected from the authorization endpoint. Use <span class="EmphasisFontCategoryNonProportional ">code</span> for code flow and <span class="EmphasisFontCategoryNonProportional ">code id_token</span> for hybrid flow.</p></li><li><p class="Para" id="Par66"><span class="EmphasisFontCategoryNonProportional ">OIDCScope</span>—The scopes requested from the OP. <span id="ITerm37">
                      
                      
                    </span><span id="ITerm38">
                      
                    </span></p></li></ul></div></div></section><section class="Section2 RenderAsSection2" id="Sec11"><h3 class="Heading">Nginx</h3><div class="Para" id="Par67">Many system administrators prefer <span id="ITerm39">Nginx</span> as a lightweight web server, especially for proxying. A basic <span class="EmphasisFontCategoryNonProportional ">nginx.conf</span> file<span id="ITerm40">
                
                
              </span> for proxying would look something like Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC6">6-3</a></span>.<div class="ProgramCode" id="PC6"><div class="LineGroup"><div class="FixedLine">events {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;worker_connections 1024;</div><div class="FixedLine">}</div><div class="FixedLine">http {</div><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;proxy.example.com;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;301 https://proxy.example.com$request_uri;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;443;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;server_name proxy.example.com;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl on;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/ssl/cert.crt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate_key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/ssl/key.key;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location / {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass https://backend.example.com/</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location /items {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass https://backend.example.com/items</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;}</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-3</span><p class="SimplePara">Sample Nginx Proxy Configuration</p></div></div></div></div><div class="Para" id="Par68">Some explanation:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par69">The <span class="EmphasisFontCategoryNonProportional ">worker_connections</span> directive under the <span class="EmphasisFontCategoryNonProportional ">events</span> context defines how many clients can be served simultaneously by Nginx. The default is 1024.</p></li><li><p class="Para" id="Par70">The <span class="EmphasisFontCategoryNonProportional ">server</span> directives under the <span class="EmphasisFontCategoryNonProportional ">http</span> context are where we define the behaviors of the Nginx web server and see how to handle different requests.</p></li><li><div class="Para" id="Par71">As you can see in the first <span class="EmphasisFontCategoryNonProportional ">server</span> directive, requests are automatically redirected from <span class="EmphasisFontCategoryNonProportional ">http</span> calls to <span class="EmphasisFontCategoryNonProportional ">https</span>. This is done by listening on port 80 and returning a 301 redirect to the port 443 equivalent of the web server.<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par72">Inside the following <span class="EmphasisFontCategoryNonProportional ">server</span> directive block, we defined our SSL/TLS capabilities with the following declarations: <span class="EmphasisFontCategoryNonProportional ">ssl on</span>, <span class="EmphasisFontCategoryNonProportional ">ssl_certificate</span>, and <span class="EmphasisFontCategoryNonProportional ">ssl_certificate_key</span>.</p></li><li><p class="Para" id="Par73">Next is the <span class="EmphasisFontCategoryNonProportional ">location</span> directive, which defines what should happen to client requests. For example, a client request to <span class="ExternalRef"><a href="https://proxy.example.com/items"><span class="RefSource">
                              <span class="EmphasisFontCategoryNonProportional ">https://proxy.example.com/items</span>
                            </span></a></span> will proxy on the backend to <span class="ExternalRef"><a href="https://backend.example.com/items"><span class="RefSource">
                              <span class="EmphasisFontCategoryNonProportional ">https://backend.example.com/items</span>
                            </span></a></span>. This will also route traffic to all “children” of this directory, unless another hardcoded location is defined. For instance, <span class="EmphasisFontCategoryNonProportional ">/items/shoes/</span> will be handled by this directive unless you have a <span class="EmphasisFontCategoryNonProportional ">location /items/shoes/ {}</span> directive, which will override this one.</p></li></ul></div></div></li></ul></div></div><div class="Para" id="Par74">A way to further enhance the proxying <span id="ITerm41">capability</span> with more complex requirements is to use the <span class="EmphasisFontCategoryNonProportional ">upstream</span> context<span id="ITerm42">
                
                
              </span>. In that block, multiple servers can be pooled together with more complex redundancy processes and load balancing. For an example, see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC7">6-4</a></span>.<div class="ProgramCode" id="PC7"><div class="LineGroup"><div class="FixedLine">http {</div><div class="FixedLine">&nbsp;&nbsp;upstream backend_items {</div><div class="FixedLine">&nbsp;&nbsp;server backend01.example.com:443 max_fails=2 fail_timeout=10s;</div><div class="FixedLine">&nbsp;&nbsp;server backend02.example.com:443 max_fails=2 fail_timeout=10s;</div><div class="FixedLine">&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;upstream backend_users {</div><div class="FixedLine">&nbsp;&nbsp;server backend03.example.com:443 max_fails=2 fail_timeout=10s;</div><div class="FixedLine">&nbsp;&nbsp;server backend04.example.com:443 max_fails=2 fail_timeout=10s;</div><div class="FixedLine">&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;80;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;server_name&nbsp;&nbsp;proxy.example.com;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;301 https://proxy.example.com$request_uri;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;listen&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;443;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;server_name proxy.example.com;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl on;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/ssl/cert.crt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate_key&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/etc/nginx/ssl/key.key;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location / {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass https://backend.example.com/</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location /items {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass https://backend_items/items</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_next_upstream&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error timeout invalid_header http_403&nbsp;&nbsp;http_404 http_500 http_502 http_503 http_504;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_connect_timeout&nbsp;&nbsp;&nbsp;2;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location /users {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_pass https://backend_users/users</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_next_upstream&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error timeout invalid_header http_403&nbsp;&nbsp;http_404 http_500 http_502 http_503 http_504;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;proxy_connect_timeout&nbsp;&nbsp;&nbsp;2;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;}<span id="ITerm43">
                      
                      
                    </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-4</span><p class="SimplePara">Sample upstream Context</p></div></div></div></div><div class="Para" id="Par75">Some explanation:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><div class="Para" id="Par76">To expand on our previous configuration, the <span class="EmphasisFontCategoryNonProportional ">upstream</span> directives were added to the <span class="EmphasisFontCategoryNonProportional ">http</span> context. Here, we define the server pools, <span class="EmphasisFontCategoryNonProportional ">backend_items</span> and <span class="EmphasisFontCategoryNonProportional ">backend_users</span>. These blocks contain each server in that proxy pool. By default, Nginx handles the server pools in a round-robin fashion: each server is requested in order until it rolls back to the first server and the process begins again.<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par77">Note that each server added must begin with <span class="EmphasisFontCategoryNonProportional ">server</span> followed by the path to the server. Optional ports can be defined as well. In our example, 443 is used.</p></li><li><p class="Para" id="Par78">To control failover, Nginx provides <span class="EmphasisFontCategoryNonProportional ">max_fails</span> and <span class="EmphasisFontCategoryNonProportional ">fail_timeout</span>. The former sets the maximum amount of connection failures a server can have before it’s considered unavailable. The latter defines how long Nginx should wait for a connection and also how long the server should be considered <span id="ITerm44">unavailable</span>.</p></li></ul></div></div></li><li><div class="Para" id="Par79">Now moving to the <span class="EmphasisFontCategoryNonProportional ">location</span> blocks, the <span class="EmphasisFontCategoryNonProportional ">proxy_pass</span> directive for <span class="EmphasisFontCategoryNonProportional ">/items</span> and <span class="EmphasisFontCategoryNonProportional ">/users</span> points to the <span class="EmphasisFontCategoryNonProportional ">upstream</span> pools defined previously, as opposed to any single URL. Anytime a user or agent tries to access <span class="ExternalRef"><a href="https://proxy.example.com/users"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">https://proxy.example.com/users</span>
                      </span></a></span>, Nginx will route that request to one of the servers defined in the <span class="EmphasisFontCategoryNonProportional ">backend_users pool</span> (<span class="ExternalRef"><a href="https://backend03.example.com/users"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">https://backend03.example.com/users</span>
                      </span></a></span> for example).<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par80">The <span class="EmphasisFontCategoryNonProportional ">proxy_next_upstream</span> directive will forcefully route traffic to the next server in the <span class="EmphasisFontCategoryNonProportional ">upstream</span> block if any of the following conditions are met. So if the server that Nginx is trying to route a request to presents an <span class="EmphasisFontCategoryNonProportional ">error</span>, has a <span class="EmphasisFontCategoryNonProportional ">timeout</span>, returns an <span class="EmphasisFontCategoryNonProportional ">invalid_header</span>, or returns any of the HTTP response codes 403, 404, 500, 502, 503, or 504, Nginx will then switch to the next server in the pool.</p></li></ul></div></div></li></ul></div></div><p class="Para" id="Par81">These are only some of the tools available with Nginx. Let’s examine a more complex example and extend the functionality to limit access to people authenticated using OpenID Connect. This example uses the <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc</span> module<span id="ITerm45">
                
              </span>, written by Hans Zandbelt (who also wrote the Apache module <span class="EmphasisFontCategoryNonProportional ">mod_auth_openidc</span> plugin). The instructions for installation can be found at <span class="ExternalRef"><a href="https://github.com/zmartzone/lua-resty-openidc"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://github.com/zmartzone/lua-resty-openidc</span>
                </span></a></span>. At this point you should have two servers: one is the OpenID Connect provider, which is <span class="EmphasisFontCategoryNonProportional ">idp.example.com</span> in our example. The other server hosts the Nginx web server (tested with version 1.11.2.5) with the <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc</span> dependency properly configured. This second server will be called <span class="EmphasisFontCategoryNonProportional ">rp.example.com</span>.</p><p class="Para" id="Par82">The <span id="ITerm46">
                <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc</span>
                
                
              </span> Nginx library uses the OpenID Connect Authorization Code Flow. The Nginx OpenResty server in this example is the OpenID Connect RP. After navigating to the Nginx OpenResty server, the user will be redirected to the OP. After authentication and authorization, the RP will gather user information from the OP and send the user to the proxied content.</p><p class="Para" id="Par83">First, let’s register the OpenResty client with the OpenID Provider, in this case the Gluu Server. Navigate to your Gluu Server, and on the left panel, click OpenID Connect, and then Clients. Click the Add Client button. Choose a descriptive name for your client, like <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc</span> for convenience (this is only for human readability). Jump down to the bottom, where you will choose Add Login Redirect URI, Add Scope, Add Response Type, and Add Grant Type. For our example, our Redirect Login URI will be <span class="ExternalRef"><a href="https://rp.example.com/welcome"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://rp.example.com/welcome</span>
                </span></a></span> to match the hostname of the OpenResty server we will configure shortly.</p><p class="Para" id="Par84">Now, click Add Scope and Search to display all scope options. Check email, openid, and profile. Next, click Add Response Type and check Code. Click Add Grant Type and check authorization_code. For our simple example, this is enough, and we can click the Add button at the bottom of the page. Once we’ve done this, we can gather our inum of the client we just created from the OpenID Connect -&gt; Clients dashboard next to the Display Name. OpenResty’s Nginx configuration will use this inum as the <span class="EmphasisFontCategoryNonProportional ">client_id</span> and the secret we created before will be our <span class="EmphasisFontCategoryNonProportional ">client_secret</span>. That’s all we need to configure the Gluu Server as the OP.</p><div class="Para" id="Par85">Take a look at the OpenResty Nginx configuration. By default OpenResty installs their build of Nginx at <span class="EmphasisFontCategoryNonProportional ">/usr/local/openresty/nginx/conf/nginx.conf</span>. We want to replace this configuration with our own, as shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC8">6-5</a></span>.<div class="ProgramCode" id="PC8"><div class="LineGroup"><div class="FixedLine">events {</div><div class="FixedLine">&nbsp;&nbsp;worker_connections 1024;</div><div class="FixedLine">}</div></div><div class="LineGroup"><div class="FixedLine">http {</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;lua_package_path "/usr/local/openresty/?.lua;;";</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;resolver 8.8.8.8;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;lua_ssl_trusted_certificate /etc/ssl/certs/ca-certificates.crt;</div><div class="FixedLine">&nbsp;&nbsp;lua_ssl_verify_depth 5;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;# cache for discovery metadata documents</div><div class="FixedLine">&nbsp;&nbsp;lua_shared_dict discovery 1m;</div><div class="FixedLine">&nbsp;&nbsp;# cache for JWKs</div><div class="FixedLine">&nbsp;&nbsp;lua_shared_dict jwks 1m;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;listen 80 default_server;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server_name _;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 301 https://$host$request_uri;</div><div class="FixedLine">&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;server {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;listen 443 ssl;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate /usr/local/ssl/nginx.crt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ssl_certificate_key /usr/local//ssl/nginx.key;</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;location / {</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_by_lua_block {</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local opts = {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri_path = "/welcome",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discovery = "https://idp.example.com/.well-known/openid-configuration",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_id = "$INUM",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client_secret = "$SECRET",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssl_verify = "no",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scope = "openid email profile",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;redirect_uri_scheme = "https",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- call OIDC user authentication</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;local res, err = require("resty.openidc").authenticate(opts)</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if err then</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ngx.status = 500</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ngx.say(err)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ngx.exit(ngx.HTTP_INTERNAL_SERVER_ERROR)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ngx.req.set_header("X-USER", res.id_token.sub)</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;}</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-5</span><p class="SimplePara">
                      <span id="ITerm47">OpenResty Nginx Configuration</span>
                    </p></div></div></div></div><p class="Para" id="Par86">There are a couple of things to be aware of with this <span id="ITerm48">configuration</span>. <span id="ITerm49">
                <span class="EmphasisFontCategoryNonProportional ">lua_package_path</span>
                
              </span> must point to the proper location of <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc.lua</span> and its dependencies. If you installed the packages with the OpenResty Package Manager, this can be left as shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC7">6-4</a></span>. The <span class="EmphasisFontCategoryNonProportional ">ssl_certificate</span> and <span class="EmphasisFontCategoryNonProportional ">ssl_certificate_key</span> options<span id="ITerm50">
                
              </span> should point to the web certificates for this web server. Creating self-signed certificates isn’t difficult and is the reason we have the <span class="EmphasisFontCategoryNonProportional ">ssl_verify</span> option set to no. Replace the <span class="EmphasisFontCategoryNonProportional ">$INUM</span> and <span class="EmphasisFontCategoryNonProportional ">$SECRET</span> terms with <span class="EmphasisFontCategoryNonProportional ">client_id</span> and <span class="EmphasisFontCategoryNonProportional ">client_secret</span> we created earlier in the Gluu Server.</p><p class="Para" id="Par87">That’s it. Now you can start OpenResty from OpenResty’s bin directory. After that, navigate to <span class="ExternalRef"><a href="https://rp.example.com/"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://rp.example.com</span>
                </span></a></span> and you should be redirected to the IDP where you can log in. After giving consent, you’ll be redirected to the default OpenResty landing page in the <span class="EmphasisFontCategoryNonProportional ">/usr/local/openresty/nginx/html/index.html</span> directory.</p><p class="Para" id="Par88">Looking through the examples and issues in the <span class="EmphasisFontCategoryNonProportional ">lua-resty-openidc</span> GitHub repo will give you a better understanding of the robust nature of what you can achieve with these tools.</p></section><section class="Section2 RenderAsSection2" id="Sec12"><h3 class="Heading">Kong</h3><div class="Para" id="Par89"><span id="ITerm51">Kong</span> is an open source API gateway that is free to use (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#Fig3">6-3</a></span>). It originated from the Mashape API marketplace (now RapidAPI), where it served tens of thousands of APIs. After the API Marketplace was sold to RapidAPI, Kong Inc. (rebranded from Mashape) focused on extending the <span id="ITerm52">API gateway</span> as an open source project.<figure class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img alt="../images/425975_1_En_6_Chapter/425975_1_En_6_Fig3_HTML.jpg" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_6_Fig3_HTML.jpg" style="height:5.88em" width="709" height="235" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_6_Chapter/425975_1_En_6_Fig3_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 6-3</span><p class="SimplePara">Kong</p></div></figcaption></figure></div><p class="Para" id="Par90">There are two versions of the product. One is the Enterprise Edition, which includes additional tools for documentation and analytics, as well as additional features on the gateway itself. There is also the Community Edition of Kong, which is the bare gateway.</p><div class="Para" id="Par91">Some of Kong’s <span id="ITerm53">key features</span> are:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par92">Very fast, sub-millisecond latency on the core gateway</p></li><li><p class="Para" id="Par93">Small footprint, suitable for sidecar patterns</p></li><li><p class="Para" id="Par94">Extensible through custom plugins</p></li><li><p class="Para" id="Par95">Open source, no black box</p></li><li><p class="Para" id="Par96">Extensive and active community</p></li><li><p class="Para" id="Par97">Over 60 plugins available</p></li></ul></div></div><section class="Section3 RenderAsSection3" id="Sec13"><h4 class="Heading">Kong Technical Component Overview</h4><p class="Para" id="Par98">Kong as a gateway is built on top of the well-known Nginx web <span id="ITerm54">server</span>. It is written in Lua (with the OpenResty framework) and as such is easy to extend. For its configuration, it uses a database. You can choose either Postgres or Cassandra. Many Kong nodes can be connected to the same database, and they will then form a Kong cluster. A Kong cluster scales horizontally; all you need to do is add Kong nodes. The Kong configuration is dynamic, which means that any changes made to the configuration will automatically propagate over the entire Kong cluster and take effect within seconds, without having to deploy and push configurations.</p><p class="Para" id="Par99">Kong is available in packages for more than 12 platforms, from Docker images to source code.</p></section><section class="Section3 RenderAsSection3" id="Sec14"><h4 class="Heading">Kong Functional Component Overview</h4><div class="Para" id="Par100">The <span id="ITerm55">relationship</span><span id="ITerm56">
                  
                  
                </span> between several entities determines how you can configure Kong. The entities are: <span class="EmphasisFontCategoryNonProportional ">route</span>, <span class="EmphasisFontCategoryNonProportional ">service</span>, <span class="EmphasisFontCategoryNonProportional ">consumer</span>, <span class="EmphasisFontCategoryNonProportional ">plugin</span>, <span class="EmphasisFontCategoryNonProportional ">upstream</span>, and <span class="EmphasisFontCategoryNonProportional ">target</span>. The last two, <span class="EmphasisFontCategoryNonProportional ">upstream</span> and <span class="EmphasisFontCategoryNonProportional ">target</span>, are specific for load-balancing and health-check purposes. We’ll not address those here, but the Kong website has excellent documentation.<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par101">Route—A route is a set of matching rules. Whenever a request is received, its characteristics will be matched against the configured <span class="EmphasisFontCategoryNonProportional ">route</span> entities, and the best match is assigned as the route for this request. Matching can be done on the requested hostname (<span class="EmphasisFontCategoryNonProportional ">host-header</span>), the requested path, and/or the requested HTTP method. Every route is always connected to one <span class="EmphasisFontCategoryNonProportional ">service</span> (services can have multiple routes).</p></li><li><p class="Para" id="Par102"><strong class="EmphasisTypeBold ">Service</strong>—A service is the representation of the backend service, where the request will be routed. This means that a service contains all properties for an upstream connection, including host, port, path, connection timeouts, connection retries, and other information to control Kong’s proxy behavior. A service can contain many routes.</p></li><li><p class="Para" id="Par103"><strong class="EmphasisTypeBold ">Consumer</strong>—Software that is calling the API. In OAuth, this is mapped to a client. In more primitive API access control implementations, you might use HTTP Basic Authentication, or some other type of shared secret (e.g., an API key or a signed JWT).</p></li><li><p class="Para" id="Par104"><strong class="EmphasisTypeBold ">Plugin</strong>—Plugins add functionality to Kong. Plugins can be attached to any combination of service, route, or consumer. A plugin will be executed when a request is received for any of the items it is attached to. When plugins are not attached to anything, they are global and will be executed on every request. Many standard plugins are included for functions like authentication, security, traffic control, serverless, analytics/monitoring, transformations, and logging. There are also many community-contributed plugins. It is possible to write your own plugins if you’re up for learning about Lua and publishing some Lua rocks! <span id="ITerm57">
                        
                        
                      </span><span id="ITerm58">
                        
                        
                      </span></p></li></ul></div></div></section><section class="Section3 RenderAsSection3" id="Sec15"><h4 class="Heading">Getting Started with Kong</h4><p class="Para" id="Par105">To get started with Kong, you can use the Docker distribution to quickly create a setup that is fully functional without too much hassle. We’ll take the following steps here: (1) Set up Kong and database, (2) Create an API in Kong, and (3) Enable authentication on that API, using <span id="ITerm59">plugins</span>.</p><p class="Para" id="Par106">To get started with Docker, execute the following shell commands.</p><div class="Para" id="Par107"><strong class="EmphasisTypeBold ">Step 1:</strong> Set up a local PostgreSQL instance (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC9">6-6</a></span>).<div class="ProgramCode" id="PC9"><div class="LineGroup"><div class="FixedLine">&gt; docker run -d --name kong-database \</div><div class="FixedLine">-p 5432:5432 \</div><div class="FixedLine">-e "POSTGRES_USER=kong" \</div><div class="FixedLine">-e "POSTGRES_DB=kong" \ postgres:9.5</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-6</span><p class="SimplePara">Installing <span id="ITerm60">Dockerized Kong</span></p></div></div></div></div><p class="Para" id="Par108">The command will start a new container running PostgreSQL version <span class="EmphasisFontCategoryNonProportional ">9.5</span>. The container goes by the name <span class="EmphasisFontCategoryNonProportional ">kong-database</span> and exposes a single port <span class="EmphasisFontCategoryNonProportional ">5432</span> to connect to the database. <span class="EmphasisFontCategoryNonProportional ">kong</span> is both the username and password.</p><div class="Para" id="Par109"><strong class="EmphasisTypeBold ">Step 2</strong>: Initialize the Kong database by running Kong migrations up (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC10">6-7</a></span>).<div class="ProgramCode" id="PC10"><div class="LineGroup"><div class="FixedLine">&gt; docker run --rm --link kong-database:kong-database \</div><div class="FixedLine">-e "KONG_DATABASE=postgres" \</div><div class="FixedLine">-e "KONG_PG_HOST=kong-database" \ kong:latest \</div><div class="FixedLine">kong migrations up</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-7</span><p class="SimplePara">Initializing the Kong <span id="ITerm61">Database</span></p></div></div></div></div><p class="Para" id="Par110">This will start an ephemeral container with Kong running its <span class="EmphasisFontCategoryNonProportional ">migrations up</span> command. When completed, it will simply exit. The command will pull the latest version of Kong (as per <span class="EmphasisFontCategoryNonProportional ">kong:latest</span>).</p><p class="Para" id="Par111">The previously created PostgreSQL container <span class="EmphasisFontCategoryNonProportional ">kong-database</span> is made available as hostname <span class="EmphasisFontCategoryNonProportional ">kong-database</span>. The two environment variables, <span class="EmphasisFontCategoryNonProportional ">KONG_DATABASE</span> and <span class="EmphasisFontCategoryNonProportional ">KONG_PG_HOST</span>, are passed to Kong to tell it to use PostgreSQL as the database and connect to it as <span class="EmphasisFontCategoryNonProportional ">kong-database</span>.</p><p class="Para" id="Par112">We do not need to pass the port nor any credentials, as Kong defaults to port <span class="EmphasisFontCategoryNonProportional ">5432</span> and <span class="EmphasisFontCategoryNonProportional ">kong</span> for both the username and password (all according to the previously created PostgreSQL container). Obviously, they can be altered and passed along using other settings from Kong’s configuration file.</p><div class="Para" id="Par113"><strong class="EmphasisTypeBold ">Step 3:</strong> Start Kong (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC11">6-8</a></span>).<div class="ProgramCode" id="PC11"><div class="LineGroup"><div class="FixedLine">&gt; docker run -d --name kong --link kong-database:kong-database \</div><div class="FixedLine">-e "KONG_DATABASE=postgres" \</div><div class="FixedLine">-e "KONG_PG_HOST=kong-database" \</div><div class="FixedLine">-e "KONG_PROXY_ACCESS_LOG=/dev/stdout" \</div><div class="FixedLine">-e "KONG_ADMIN_ACCESS_LOG=/dev/stdout" \</div><div class="FixedLine">-e "KONG_PROXY_ERROR_LOG=/dev/stderr" \</div><div class="FixedLine">-e "KONG_ADMIN_ERROR_LOG=/dev/stderr" \</div><div class="FixedLine">-e "KONG_ADMIN_LISTEN=0.0.0.0:8001, 0.0.0.0:8444 ssl" \</div><div class="FixedLine">-p 8000:8000 \</div><div class="FixedLine">-p 8443:8443 \</div><div class="FixedLine">-p 8001:8001 \</div><div class="FixedLine">-p 8444:8444 \</div><div class="FixedLine">kong</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-8</span><p class="SimplePara"><span id="ITerm62">Starting</span> Kong</p></div></div></div></div><p class="Para" id="Par114">This will now actually start Kong and run the container as a daemon (the <span class="EmphasisFontCategoryNonProportional ">-d</span> option). From the previous command, there are a few new options passed along. First of all, exposing the Kong ports for the proxy (<span class="EmphasisFontCategoryNonProportional ">8000</span> for http and <span class="EmphasisFontCategoryNonProportional ">8443</span> for https traffic) and for the Kong administrator interface (<span class="EmphasisFontCategoryNonProportional ">8001</span> for http and <span class="EmphasisFontCategoryNonProportional ">8444</span> for https). Second, the log files are set to <span class="EmphasisFontCategoryNonProportional ">stdout</span> and <span class="EmphasisFontCategoryNonProportional ">stderr</span> as per Docker best <span id="ITerm63">practices</span>.</p><p class="Para" id="Par115">Finally, there is the <span class="EmphasisFontCategoryNonProportional ">KONG_ADMIN_LISTEN</span> option<span id="ITerm64">
                  
                  
                </span> that tells Kong to listen on all interfaces for the administrator interface. The default here is to only listen on <span class="EmphasisFontCategoryNonProportional ">localhost</span>, but since it runs inside a container, that would make it unreachable from outside the container, and hence prevent us from configuring anything.</p><p class="Para" id="Par116"><strong class="EmphasisTypeBold ">Step 4</strong>: <span id="ITerm65">Check</span> your installation.</p><div class="Para" id="Par117">Run the command <span class="EmphasisFontCategoryNonProportional ">docker ps</span> and it should show two containers running, <span class="EmphasisFontCategoryNonProportional ">kong</span> and <span class="EmphasisFontCategoryNonProportional ">kong-database</span>. To test Kong itself, try making an HTTP <span class="EmphasisFontCategoryNonProportional ">GET</span> request on the Kong proxy port <span class="EmphasisFontCategoryNonProportional ">8000</span> using the following command:<div class="ProgramCode" id="PC12"><div class="LineGroup"><div class="FixedLine">&gt; http get :8000</div></div></div></div><div class="Para" id="Par118">This uses the <span class="EmphasisFontCategoryNonProportional ">http</span> command provided by <span class="EmphasisFontCategoryNonProportional ">httpie</span> (see <span class="ExternalRef"><a href="https://httpie.org/"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://httpie.org</span>
                  </span></a></span>), which is a utility that is similar in functionality to <span class="EmphasisFontCategoryNonProportional ">curl</span> but provides an easier command line and nicer output, shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#PC13">6-9</a></span>.<div class="ProgramCode" id="PC13"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 404 Not Found Connection: keep-alive</div><div class="FixedLine">Content-Type: application/json; charset=utf-8 Date: Thu, 19 Apr 2018 18:09:14 GMT</div><div class="FixedLine">Server: kong/0.13.0 Transfer-Encoding: chunked</div><div class="FixedLine">{</div><div class="FixedLine">"message": "no route and no API found with those values"</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 6-9</span><p class="SimplePara"><span id="ITerm66">Testing</span> Kong</p></div></div></div></div><p class="Para" id="Par119">The output (despite being an error) clearly shows that Kong is running but cannot find a matching route for the simple test request.</p><p class="Para" id="Par120"><strong class="EmphasisTypeBold ">Step 5:</strong> Create a service and <span id="ITerm67">route</span>.</p><div class="Para" id="Par121">To actually start using the system, we need to create a route (to catch incoming requests) and a service (where to send them).<div class="ProgramCode" id="PC14"><div class="LineGroup"><div class="FixedLine">&gt; http post :8001/services name=test url=http://mockbin.org</div><div class="FixedLine">&gt; http -f post :8001/services/test/routes hosts[]=myapi.com</div></div></div></div><p class="Para" id="Par122">The route catches any request destined for host <span class="EmphasisFontCategoryNonProportional ">myapi.com</span>, then the service will forward it to <span class="EmphasisFontCategoryNonProportional ">mockbin.org</span> (a test service to create and debug test requests)</p><p class="Para" id="Par123"><strong class="EmphasisTypeBold ">Step 6:</strong> <span id="ITerm68">Test the activated API</span>.</p><div class="Para" id="Par124">Make the following request to get a returned copy of your request from <span class="EmphasisFontCategoryNonProportional ">mockbin.org</span>.<div class="ProgramCode" id="PC15"><div class="LineGroup"><div class="FixedLine">&gt; http get :8000/request host:myapi.com</div></div></div></div><p class="Para" id="Par125">This inserts a host header that matches the route we created earlier. This makes Kong forward the request as expected, and we get a result with a body containing all details of the request we send.</p><p class="Para" id="Par126"><strong class="EmphasisTypeBold ">Step 7:</strong> <span id="ITerm69">Add client authentication</span> using HTTP <span id="ITerm70">basic</span>.</p><div class="Para" id="Par127">By using the <span class="EmphasisFontCategoryNonProportional ">key-auth</span> plugin, we can quickly secure our test API. Execute the following:<div class="ProgramCode" id="PC16"><div class="LineGroup"><div class="FixedLine">&gt; http post :8001/services/test/plugins name=key-auth</div></div></div></div><p class="Para" id="Par128">If you now test the API again (Step 6), you’ll get a <span class="EmphasisFontCategoryNonProportional ">401 unauthorized</span> response. The API is now protected and can only be accessed by providing proper credentials.</p><p class="Para" id="Par129"><strong class="EmphasisTypeBold ">Step 8:</strong> Add a <span id="ITerm71">consumer and credentials</span>.</p><div class="Para" id="Par130">Since credentials are bound to consumers, we first create a consumer, and then provide credentials for that consumer.<div class="ProgramCode" id="PC17"><div class="LineGroup"><div class="FixedLine">&gt; http post :8001/consumers username=aladdin</div><div class="FixedLine">&gt; http post :8001/consumers/aladdin/key-auth key=OpenSesame</div></div></div></div><div class="Para" id="Par131">Now we can test again (same as Step 6), but we only need to add our key to the request:<div class="ProgramCode" id="PC18"><div class="LineGroup"><div class="FixedLine">&gt; http get :8000/request host:myapi.com apikey:OpenSesame</div></div></div></div><p class="Para" id="Par132"><strong class="EmphasisTypeBold ">Step 9:</strong> Examine the <span id="ITerm72">response</span>.</p><p class="Para" id="Par133">When examining the response from Step 8, there are a number of artifacts inserted by Kong into the request and the response.</p><div class="Para" id="Par134">If you look at the response headers, you’ll notice some extra headers:<div class="ProgramCode" id="PC19"><div class="LineGroup"><div class="FixedLine">Via: kong/0.13.0</div><div class="FixedLine">X-Kong-Proxy-Latency: 0</div><div class="FixedLine">X-Kong-Upstream-Latency: 114</div></div></div></div><p class="Para" id="Par135">The <span class="EmphasisFontCategoryNonProportional ">Proxy-Latency</span> header<span id="ITerm73">
                  
                  
                </span> shows the latency it took Kong to process the request/response (in milliseconds, so 0 means less than a millisecond). The <span class="EmphasisFontCategoryNonProportional ">Upstream-Latency</span> is the time it took the upstream to respond.</p><div class="Para" id="Par136">In the response body, you’ll see that our <span class="EmphasisFontCategoryNonProportional ">mockbin.org</span> test API returned a copy of the request we sent it. And here you can find the details of the authenticated consumer:<div class="ProgramCode" id="PC20"><div class="LineGroup"><div class="FixedLine">"apikey": "OpenSesame",</div><div class="FixedLine">"x-consumer-id":&nbsp;&nbsp;"3469667b-f4e0-44ca-8356-120563e7c897", "x-consumer-username": "aladdin",</div></div></div></div><p class="Para" id="Par137">The backend does not have to do its own authentication; it can just grab the details it needs from the headers of the request.</p><p class="Para" id="Par138"><strong class="EmphasisTypeBold ">Step 10:</strong> Consider some <span id="ITerm74">warnings</span>.</p><div class="Para" id="Par139">These example steps demonstrate the basics of Kong, although obviously this is not a recipe for a secure production deployment. Here are some obvious points to consider:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par140">All requests are plain HTTP—all APIs should be HTTPS.</p></li><li><p class="Para" id="Par141">The example backend is reachable by bypassing Kong. Your network firewalls should only allow access through Kong.</p></li><li><p class="Para" id="Par142">The <span class="EmphasisFontCategoryNonProportional ">apikey</span> header is forwarded to the backend—configure Kong to remove it.</p></li><li><p class="Para" id="Par143">Kong’s admin API is <span id="ITerm75">accessible</span><span id="ITerm76">
                        
                        
                      </span>.</p></li></ul></div></div></section></section><section class="Section2 RenderAsSection2" id="Sec16"><h3 class="Heading">Istio</h3><div class="Para" id="Par144">Launched in 2017 by IBM, Google, and Lyft, <span id="ITerm77">Istio</span><span id="ITerm78">
                
              </span> is setting the bar for a containerized proxy platform. Istio requires Kubernetes v1.9 or newer. In addition to the elasticity that comes with Kubernetes, Istio provides a few compelling features:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par145"><strong class="EmphasisTypeBold ">Traffic management</strong>—The ability to route requests based on flexible rules is a compelling advantage of Istio. For example, let’s say you want to route 10% of your traffic to version 1.1 of your API, while routing 90% to version 1.0. You can implement these kinds of rules in Istio quickly, which is quite difficult in other API gateway platforms.</p></li><li><p class="Para" id="Par146"><strong class="EmphasisTypeBold ">Telemetry Istio</strong>—It’s built on a new web server, Envoy (see <span class="ExternalRef"><a href="https://envoyproxy.io/"><span class="RefSource">
                        <span class="EmphasisFontCategoryNonProportional ">https://envoyproxy.io</span>
                      </span></a></span>), which provides quite a bit of telemetry out of the box. This enables you to use a tool life Grafana to provide a visual representation of what’s happing in your proxy deployment.</p></li><li><p class="Para" id="Par147"><strong class="EmphasisTypeBold ">Mutual TLS</strong>—You can configure mutual TLS on a per service basis. You can also configure role-based access control (RBAC) for each service.</p></li></ul></div></div><p class="Para" id="Par148">Istio facilitates accurate monitoring of the health and activity of your micro-services. It also makes it possible to apply policy across dozens or hundreds of micro-services all at once. This is where powerful tooling helps give you control and an accurate picture of your service ecosystem.</p><p class="Para" id="Par149">For more information on Istio, see the website at <span class="ExternalRef"><a href="https://istio.io/"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://istio.io</span>
                </span></a></span>. Because it’s so new, there wasn’t enough time to provide a detailed overview here. But given its potential, it seemed remiss not to mention it. Check it out!</p></section></section><section class="Section1 RenderAsSection1" id="Sec17"><h2 class="Heading">Conclusion</h2><p class="Para" id="Par150">Proxying is a powerful technology that keeps getting better. New tools are getting faster, more flexible, more reliable, and easier to manage. Controlling access to web content via the proxy is an essential part of any IAM strategy. In Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml" class="totri-footnote"><span class="RefSource">8</span></a></span>, we’ll introduce one more proxy: the Gluu Gateway. This is an open source distribution that uses Kong community edition, but adds some extra IAM management components.</p></section></div><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">5.&nbsp;OpenID Connect</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_7_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">7.&nbsp;Strong Authentication</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          
          
            <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          

          
        
        

      </div>

    
    



        
      </div>
      
        


<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/u/preferences/">Settings</a></li>
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"applicationID":"172641827,79672898,93931619","agent":"","applicationTime":173,"errorBeacon":"bam.nr-data.net","transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","beacon":"bam.nr-data.net","queueTime":2,"licenseKey":"510f1a6865"}</script>

      
    
    <script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource" charset="utf-8"></script><script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1732687426968531");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1732687426968531&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/embed.js"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("set","agent","tmgoogletagmanager","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>
<script type="text/javascript" id="">window._pp=window._pp||[];if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_6_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/register/")_pp.targetUrl="/confirm/trial";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_6_Chapter.xhtml"=="/confirmation/nv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/subscribe/")_pp.targetUrl="/confirm/paid";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_6_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/signup/")_pp.targetUrl="/confirm/paid";_pp.siteId="2508";
_pp.siteUId="39a88cd5-54f5-4d61-aec6-7884d06dfba1";_pp.orderValue="undefined";_pp.orderId="undefined";(function(){var ppjs=document.createElement("script");ppjs.type="text/javascript";ppjs.async=true;ppjs.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.pbbl.co/r/"+_pp.siteId+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ppjs,s)})();</script>
    <script src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(1)" charset="utf-8"></script><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.587009619804892"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.5586143571271487" width="0" height="0" alt="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/0"></div><iframe height="0" width="0" frameborder="0" style="display: none;" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pp.html"></iframe>
  

<div></div><div></div><iframe id="nr-ext-rsicon" style="position: absolute; display: none; width: 50px; height: 50px; z-index: 2147483647; border-style: none; background: transparent;" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(5).html"></iframe><div class="annotator-notice"></div><div class="font-flyout" style="top: 151.003px; left: 1583px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml#">Reset</a>
</div>
</div><script type="text/javascript" async="" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/generic1585109433606.js" charset="UTF-8"></script><span></span><div style="display: none; visibility: hidden;"><script>(function(){if(null!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')&&void 0!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')){var a=!1;window.addEventListener("blur",function(){a&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"facebook",eventVal:0,nonInteraction:0})});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseover",function(){window.focus();
a=!0});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseout",function(){a=!1})}if(null!==document.querySelector("iframe.twitter-share-button")&&void 0!==document.querySelector("iframe.twitter-share-button")){var b=!1;window.addEventListener("blur",function(){b&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0})});document.querySelector("iframe.twitter-share-button").addEventListener("mouseover",
function(){window.focus();b=!0});document.querySelector("iframe.twitter-share-button").addEventListener("mouseout",function(){b=!1})}try{window.twttr=function(a,b,d){var c,e=a.getElementsByTagName(b)[0];if(!a.getElementById(d))return a=a.createElement(b),a.id=d,a.src="//platform.twitter.com/widgets.js",e.parentNode.insertBefore(a,e),window.twttr||(c={_e:[],ready:function(a){c._e.push(a)}})}(document,"script","twitter-wjs"),twttr.ready(function(a){a.events.bind("tweet",trackTwitter)})}catch(c){}})();
null!==document.querySelector(".IN-widget")&&void 0!==document.querySelector(".IN-widget")&&document.querySelector(".IN-widget").addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"linkedin",eventVal:0,nonInteraction:0})});
function trackTwitter(a){a&&(a.target&&"IFRAME"==a.target.nodeName&&(opt_target=extractParamFromUri(a.target.src,"url")),dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0}))}function extractParamFromUri(a,b){if(a&&(b=new RegExp("[\\?\x26#]"+b+"\x3d([^\x26#]*)"),a=b.exec(a),null!=a))return unescape(a[1])};</script></div><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./6. Proxy - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widget_iframe.d0f13be8321eb432fba28cfc1c3351b1.html" title="Twitter settings iframe" style="display: none;"></iframe><div id="eJOY__extension_root" style="all: unset;"></div></body><div class="XTranslate"></div></html>