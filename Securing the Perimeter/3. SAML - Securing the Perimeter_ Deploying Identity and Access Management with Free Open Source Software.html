<!DOCTYPE html>
<!-- saved from url=(0111)https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml -->
<html class="js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom fa-events-icons-ready" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="6866040" data-user-uuid="39a88cd5-54f5-4d61-aec6-7884d06dfba1" data-username="vrad201" data-account-type="Trial" data-activated-trial-date="04/04/2020" data-archive="9781484226018" data-publishers="Apress" data-htmlfile-name="425975_1_En_3_Chapter.xhtml" data-epub-title="Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781484226018"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script id="twitter-wjs" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widgets.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/cool-2.1.15.min.js"></script><script type="text/javascript" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/510f1a6865"></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/nr-1167.min.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ec.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/2508.js"></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/443792972845831" async=""></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/1732687426968531" async=""></script><script async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/fbevents.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/analytics.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/bat.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/insight.min.js"></script><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script crossorigin="anonymous" integrity="sha256-4ZnAISy2+rbOaVUOBtJrqxBTrJ5kctu9r4qBJBt0Oo0=" type="text/javascript" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/appcues.main.40a6b605d29a66b083aa6d74c07bb73eae19e31b.js" async=""></script><script async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/gtm.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"510f1a6865",applicationID:"172641827"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/css" rel="stylesheet" type="text/css"><title>3.&nbsp;SAML - Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software</title><link rel="stylesheet" href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/output.8054605313ed.css" type="text/css"><link rel="stylesheet" type="text/css" href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content a{text-decoration:none}#sbo-rt-content a:link,#sbo-rt-content a:active{color:#0176C3}#sbo-rt-content a:visited{color:#5f5f5f}#sbo-rt-content div{font-family:"Cambria","Minion Pro","Times New Roman","Times",serif;}#sbo-rt-content img{border:0;vertical-align:middle}#sbo-rt-content video{display:block;margin-top:1em;max-width:100%;text-indent:0;width:100%}#sbo-rt-content p{margin:0}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading,#sbo-rt-content .ContextInformation,#sbo-rt-content .MainTitleSection,#sbo-rt-content .PartTitle,#sbo-rt-content .SeriesTitle,#sbo-rt-content .SeriesSubTitle,#sbo-rt-content .SubSeriesTitle,#sbo-rt-content .SubSeriesSubTitle,#sbo-rt-content .BookTitle,#sbo-rt-content .BookSubTitle,#sbo-rt-content .ForewordTitle,#sbo-rt-content .PrefaceTitle,#sbo-rt-content .BookAcknowledgmentsTitle,#sbo-rt-content .BookNotesTitle{text-align:left !important}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading{display:block;font-weight:bold}#sbo-rt-content .ArticleContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ArticleContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ArticleContextInformation .JournalTitle:after,#sbo-rt-content .ArticleContextInformation .JournalSubTitle:after{content:", "}#sbo-rt-content .ArticleCopyright{display:inline}#sbo-rt-content .ArticleCopyright .CopyrightComment,#sbo-rt-content .ArticleContextInformation .ArticleDOI{display:block}#sbo-rt-content .ChapterContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ChapterContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ChapterCopyright .CopyrightComment{display:block}#sbo-rt-content .ChapterContextInformation .BookEdition:before{content:", "}#sbo-rt-content .ChapterContextInformation .ContextInformationAuthorEditorNames:after{content:", "}#sbo-rt-content .ChapterContextInformation .BookTitle{font-style:italic}#sbo-rt-content .ChapterContextInformation .SeriesTitle:before{content:", "}#sbo-rt-content .ChapterContextInformation .SeriesSubTitle:before{content:": "}#sbo-rt-content .ChapterContextInformation .ContextInformationVolumeNumber:before{content:" "}#sbo-rt-content .ChapterContextInformation .ChapterDOI{display:block}#sbo-rt-content .Categories{color:#666;margin-bottom:1em;margin-top:1em}#sbo-rt-content .ArticleCategory,#sbo-rt-content .ChapterCategory{font-size:1.2rem}#sbo-rt-content .ArticleSubCategory,#sbo-rt-content .ChapterSubCategory{font-size:1rem}#sbo-rt-content .MainTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1.2em}#sbo-rt-content .ArticleSuperTitle{font-size:1.2rem}#sbo-rt-content .MainTitleSection .ArticleTitle,#sbo-rt-content .ForeignLanguageHeader .ArticleTitle,#sbo-rt-content .MainTitleSection .ChapterTitle,#sbo-rt-content .ForeignLanguageHeader .ChapterTitle{font-size:1.73rem;margin:0}#sbo-rt-content .ArticleSubTitle,#sbo-rt-content .ChapterSubTitle{font-size:1.2rem;padding-top:.2em}#sbo-rt-content div>.AuthorGroup .AuthorNames,#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-size:100%;margin-bottom:1em;margin-top:1em;text-align:left !important}#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-weight:bold}#sbo-rt-content .AuthorNames sup{font-size:70%}#sbo-rt-content .Prefix:after{content:" "}#sbo-rt-content .Suffix:before{content:" "}#sbo-rt-content .Degrees:before{content:", "}#sbo-rt-content .NativeName:before,#sbo-rt-content .Role:before{content:" ("}#sbo-rt-content .NativeName:after,#sbo-rt-content .Role:after{content:")"}#sbo-rt-content .AffiliationNumber{float:left;padding-right:.5em}#sbo-rt-content .AffiliationText{margin-left:2em}#sbo-rt-content .AffiliationHint{font-style:italic}#sbo-rt-content .AuthorNames .DeceasedSymbol:before{content:"†";padding-left:3px}#sbo-rt-content .AuthorNames .EqualContributionSymbol:before{content:"*";padding-left:3px}#sbo-rt-content .InstitutionMembers:before{content:" ("}#sbo-rt-content .InstitutionMembers:after{content:")"}#sbo-rt-content .AffiliationLegend .DeceasedSymbol:before{content:"†";display:inline-block;width:14px}#sbo-rt-content .AffiliationLegend .EqualContributionSymbol:before{content:"*";display:inline-block;width:14px}#sbo-rt-content .ClearBoth{clear:both;font-size:0;line-height:0 !important}#sbo-rt-content .Contact,#sbo-rt-content .AffiliationLegend{margin-bottom:1em;margin-top:1em}#sbo-rt-content .ContactIcon{background-image:url(envelope.png);background-repeat:no-repeat;background-size:contain;width:.8rem}#sbo-rt-content .AuthorNames .ContactIcon{display:inline-block}#sbo-rt-content .Contact .ContactIcon{float:left;margin-top:4px;margin-right:4px}#sbo-rt-content .ContactAuthorLine{padding-left:20px;font-weight:bold}#sbo-rt-content .ContactAdditionalLine{padding-left:20px}#sbo-rt-content .ContactType{font-weight:bold}#sbo-rt-content .ArticleHistory{margin-bottom:1em;margin-top:1em}#sbo-rt-content .HistoryLabel{font-weight:bold}#sbo-rt-content .History+.History{padding-left:.5em}#sbo-rt-content .ArticleOrChapterToc{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .ArticleOrChapterToc .HeadingNumber{font-weight:bold;padding-right:.3em}#sbo-rt-content .Abstract{margin-top:1em}#sbo-rt-content .Abstract>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbstractSection{margin-top:.3em}#sbo-rt-content .Heading+.AbstractSection{margin-top:0}#sbo-rt-content .AbstractSection>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin:0}#sbo-rt-content .KeywordGroup{margin-top:1em}#sbo-rt-content .KeywordGroup .Heading{display:inline;font-size:1em;margin:0;padding-right:.5em}#sbo-rt-content .Keyword+.Keyword:before{content:" – "}#sbo-rt-content .ArticleExternalID{margin-top:1em}#sbo-rt-content .ArticleExternalIDLabel{font-weight:bold}#sbo-rt-content .ForeignLanguageHeader{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ForeignLanguageTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1rem}#sbo-rt-content .AbbreviationGroup{margin-top:1em}#sbo-rt-content .ForeignLanguageHeader+.AbbreviationGroup{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .AbbreviationGroup>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbbreviationGroup .DefinitionList{margin-top:0;margin-bottom:0;padding-right:.1em;padding-top:.1em;padding-bottom:.1em}#sbo-rt-content .AbbreviationGroupSection>.Heading{font-size:1em;margin:0;padding-top:.2em}#sbo-rt-content .ArticleNote{margin-top:1em}#sbo-rt-content .ArticleNote>.Heading{font-size:1em;margin:0}#sbo-rt-content .ArticleNoteMotto{font-style:italic;margin-left:1.5em;margin-right:1.5em;text-align:right}#sbo-rt-content .Biography{display:block;margin-top:.8em;padding-bottom:0;width:100%}#sbo-rt-content .Loc .AuthorGroup .Biography{margin-top:0}#sbo-rt-content .Biography .FormalPara,#sbo-rt-content .Biography .BiographyFigure{display:block;margin-top:0;margin-bottom:0}#sbo-rt-content .Biography .BiographyFigure{float:right;margin-left:6px}#sbo-rt-content .Biography .Figure{border-bottom:none;margin-top:.5em;margin-bottom:0}#sbo-rt-content .Fulltext>.Para:first-of-type>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .BlockQuote{margin:1em 1.5em}#sbo-rt-content .BlockQuote>.Heading{font-size:1em;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .BlockQuote>.Para{text-indent:0}#sbo-rt-content .Heading+.Para>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .Caption,#sbo-rt-content .TableFooter{display:block;text-align:left}#sbo-rt-content .TableFooter .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .Caption{margin-top:.5em}#sbo-rt-content .CaptionContent{font-size:90%}#sbo-rt-content .TableFooter{margin-top:1em}#sbo-rt-content .Table .Caption{margin-top:.5em}#sbo-rt-content .Figure .Caption,#sbo-rt-content video+.Caption{margin-bottom:1em}#sbo-rt-content .Table .Caption{margin-bottom:.5em}#sbo-rt-content .CaptionNumber{font-style:italic;font-weight:bold;padding-right:.6em}#sbo-rt-content .CaptionContent>span.Heading{display:inline}#sbo-rt-content .CaptionContent>span.SimplePara{display:block}#sbo-rt-content .CaptionContent>.SimplePara:first-child,#sbo-rt-content .CaptionContent>.CaptionNumber+.SimplePara,#sbo-rt-content .CaptionContent>a+.SimplePara{display:inline;margin-top:0}#sbo-rt-content .Credit>.SimplePara{text-indent:1.5em}#sbo-rt-content .DefinitionList{margin-top:1em;margin-bottom:1em;padding:.1em}#sbo-rt-content .DefinitionList>.Heading{font-size:1rem;margin:0;text-indent:0}#sbo-rt-content dl{margin:0}#sbo-rt-content .DefinitionList:after{content:"";clear:both;display:table}#sbo-rt-content .Term{clear:both;float:left;font-style:italic;padding-right:1em;text-indent:0;vertical-align:top}#sbo-rt-content .Description{padding-bottom:.3em;margin-left:0}#sbo-rt-content .Description .Para:first-child{text-indent:0}#sbo-rt-content .Heading+.Para>div.DefinitionList:first-child{margin-top:0}#sbo-rt-content .EmphasisTypeBold{font-weight:bold}#sbo-rt-content .EmphasisTypeItalic{font-style:italic}#sbo-rt-content .EmphasisTypeUnderline{text-decoration:underline}#sbo-rt-content .EmphasisTypeDoubleUnderline{border-bottom-style:double}#sbo-rt-content .EmphasisTypeSmallCaps{font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalic{font-weight:bold;font-style:italic}#sbo-rt-content .EmphasisTypeBoldUnderline{font-weight:bold;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldDoubleUnderline{font-weight:bold;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldSmallCaps{font-weight:bold;font-variant:small-caps}#sbo-rt-content .EmphasisTypeItalicUnderline{font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeItalicDoubleUnderline{font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeItalicSmallCaps{font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalicUnderline{font-weight:bold;font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldItalicDoubleUnderline{font-weight:bold;font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldItalicSmallCaps{font-weight:bold;font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeUnderlineSmallCaps{text-decoration:underline;font-variant:small-caps}#sbo-rt-content .EmphasisTypeDoubleUnderlineSmallCaps{border-bottom-style:double;font-variant:small-caps}#sbo-rt-content .EmphasisFontCategoryNonProportional{font-family:"Courier New",Courier,monospace}#sbo-rt-content :not(.ParaTypeProgramcode)>.EmphasisFontCategoryNonProportional{font-size:95%}#sbo-rt-content .EmphasisFontCategorySansSerif{font-family:"Arial","Helvetica",sans-serif;font-size:75%}#sbo-rt-content .EmphasisTypeStrikethrough{text-decoration:line-through}#sbo-rt-content .Equation{display:block;text-indent:0;vertical-align:middle}#sbo-rt-content .NumberedEquation{display:table;width:100%}#sbo-rt-content .NumberedEquation .EquationWrapper{display:table-row}#sbo-rt-content .NumberedEquation .EquationContent{display:table-cell}#sbo-rt-content .EquationContent{margin-top:.5em;margin-bottom:0;width:100%;text-align:center;text-indent:0;vertical-align:middle}#sbo-rt-content .EquationContent div{margin-top:.5em}#sbo-rt-content .EquationContent .MediaObject{margin-left:auto;margin-right:auto}#sbo-rt-content .EquationContent img{background:white;max-width:100%}#sbo-rt-content .EquationNumber{display:table-cell;margin-bottom:.4em;text-align:right;vertical-align:middle}#sbo-rt-content .EquationSourceXml{white-space:nowrap}#sbo-rt-content .InlineEquation img{background:white;vertical-align:text-top}#sbo-rt-content .Figure{margin-top:1em;margin-bottom:1em;margin-left:0;margin-right:0;text-align:center;text-indent:0}#sbo-rt-content .Figure img{height:auto;margin:0;max-width:100%;padding:2px}#sbo-rt-content .MediaObject{display:block;text-align:center}#sbo-rt-content .MediaObject:last-child{margin-bottom:1em}#sbo-rt-content .EquationContent>.MediaObject:last-child{margin-bottom:0}#sbo-rt-content .MediaObject+.MediaObject{margin-top:1em}#sbo-rt-content .FootnoteSection{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .FootnoteSection>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Footnote{clear:both;font-size:90%;text-align:left}#sbo-rt-content .FootnoteNumber{float:left;padding-right:.5em}#sbo-rt-content .FootnoteParas>div{margin-left:1em;margin-top:.3em}#sbo-rt-content .FormalPara{margin-top:1em;margin-bottom:1em}#sbo-rt-content .FormalPara .Heading{font-size:1em;margin:0}#sbo-rt-content .FormalParaRenderingStyle1>.Heading{display:inline;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle2>.Heading{display:inline;font-style:italic;font-weight:normal;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle3>.Heading{padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle1>p:first-of-type,#sbo-rt-content .FormalParaRenderingStyle2>p:first-of-type{display:inline}#sbo-rt-content .Heading+.FormalPara{margin-top:0}#sbo-rt-content .FormalPara .AuthorNames{font-style:italic;font-weight:normal !important}#sbo-rt-content .HeadingNumber{padding-right:.3em}#sbo-rt-content .RenderAsSection1>.Heading{font-size:1.44rem;margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .RenderAsSection2>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section2>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection3>.Heading{font-size:1.2rem;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section3>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection4>.Heading{font-size:100%;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section4>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection5>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section5>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection6>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section6>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection7>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section7>.Heading:first-child{margin-top:0}#sbo-rt-content .Literal{font-family:"Courier New",Courier,monospace}#sbo-rt-content .OrderedList{margin-top:.5em;margin-bottom:.5em;text-indent:0;display:table}#sbo-rt-content .OrderedList>ol{margin:0;padding:0}#sbo-rt-content .OrderedList .Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0;display:table-caption}#sbo-rt-content .OrderedList .Heading+.ListItem{margin-top:0}#sbo-rt-content .Heading+.Para>div.OrderedList:first-child,#sbo-rt-content .Heading+.Para>div.OrderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .ListItem{margin-top:.5em;display:table-row}#sbo-rt-content .ItemNumber{padding-right:.5em;display:table-cell;vertical-align:top}#sbo-rt-content .ItemContent{display:table-cell}#sbo-rt-content .Fulltext>.Para:first-of-type{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .Fulltext>.Para~.Para:first-of-type{border-top:none;margin-top:0;padding-top:0}#sbo-rt-content .Para+.Para{margin-top:0;text-indent:1.5em}#sbo-rt-content .ParaTextBreak{margin-top:1em !important;text-indent:0 !important}#sbo-rt-content .ParaTypeExample{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:1em}#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeTip{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:.5em}#sbo-rt-content .ParaTypeImportant{background:#bbb;border:2px solid;padding:.5em;margin-top:.8em !important;margin-bottom:.8em}#sbo-rt-content .ParaTypeImportant img{background-color:transparent}#sbo-rt-content .ParaTypeGeneticSequence,#sbo-rt-content .ParaTypeLiteral,#sbo-rt-content .ParaTypeProgramcode{font-family:"Courier New",Courier,monospace;font-size:95%}#sbo-rt-content .ParaTypeProgramcode{text-indent:0 !important;word-wrap:break-word}#sbo-rt-content .Para:not(.ParaTypeProgramcode)+.ParaTypeProgramcode{margin-top:.5em}#sbo-rt-content .ParaTypeProgramcode+.Para:not(.ParaTypeProgramcode){margin-top:.5em}#sbo-rt-content .ParaTypeLegalText{font-weight:bold;margin-left:1em;text-align:left}#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .ParaTypeSource{font-style:italic}#sbo-rt-content .ParaTypeTrailer,#sbo-rt-content .ParaTypeLearningGoals{font-weight:bold;padding-left:.5em;padding-right:.5em}#sbo-rt-content .ParaTypeWarning{font-weight:bold}#sbo-rt-content .ParaTypeExample,#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeImportant,#sbo-rt-content .ParaTypeLegalText,#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeTip,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{text-indent:0 !important}#sbo-rt-content .Para+.ParaOneEmphasisChild{margin-top:1em;text-indent:0 !important}#sbo-rt-content .ParaOneEmphasisChild+.Para{text-indent:0 !important}#sbo-rt-content .PartNumber{display:block;font-size:1.73rem}#sbo-rt-content .PartTitle{display:block;font-size:1.73rem}#sbo-rt-content .SubPartTitle{display:block;font-size:1.44rem}#sbo-rt-content .ProgramCode{margin-top:1em;margin-bottom:1em}#sbo-rt-content .ProgramCode .FixedLine{font-family:"Courier New",Courier,monospace;font-size:95%;word-wrap:break-word}#sbo-rt-content .LineGroup+.LineGroup{margin-top:1em}#sbo-rt-content .Heading+.Para>.Quiz>.Heading{margin-top:0;}#sbo-rt-content .Quiz .Heading{font-size:1rem;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .QuizTask{display:table;margin-top:.5em;margin-bottom:.5em;width:100%;text-indent:0}#sbo-rt-content .QuizTask+.QuizTask{margin-top:1.5em}#sbo-rt-content .QuizItem{padding:.1em}#sbo-rt-content .QuizItemTypeSolution{border:2px solid #aaa;margin-top:.5em;padding:10px}#sbo-rt-content .QuizTask>input{display:none}#sbo-rt-content .QuizItem>label{color:#0176C3}#sbo-rt-content .QuizTask>input~.QuizItem>label+div{display:none}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label+div{display:table-cell}#sbo-rt-content .QuizTask>input~.QuizItem>label:after{content:"  »"}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label:after{content:"  «"}#sbo-rt-content .QuizTask>input~.QuizItemTypeCorrectAnswer{background-color:transparent;transition:background .4s}#sbo-rt-content .QuizTask>input:checked~.QuizItemTypeCorrectAnswer{background-color:#EAF2DB;transition:background .4s}#sbo-rt-content .ReviewTitle{font-weight:bold;margin-top:1em;text-indent:0}#sbo-rt-content .Review .AuthorName+.AuthorName:before{content:", "}#sbo-rt-content .Review .ISBN,#sbo-rt-content .ReviewDataUnstructured{text-indent:0}#sbo-rt-content .Review .Para:first-of-type{margin-top:1em;text-indent:0}#sbo-rt-content .BookBackmatter>.Appendix:first-child>div:first-child{border-top:none !important;margin-top:0 !important;padding-top:0 !important}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child,#sbo-rt-content .BookNotesBody>.RenderAsSection1:first-child,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child,#sbo-rt-content .BookBackmatter>.Appendix:first-child>.RenderAsSection1:first-child{border-top:none;margin-top:0}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child>.Heading{margin-top:0}#sbo-rt-content .Section1 .AuthorNames,#sbo-rt-content .Section2 .AuthorNames,#sbo-rt-content .Section3 .AuthorNames{font-weight:bold;margin-top:.3em;margin-bottom:.5em}#sbo-rt-content .Section1 .AuthorNames sup,#sbo-rt-content .Section2 .AuthorNames sup,#sbo-rt-content .Section3 .AuthorNames sup{font-size:70%}#sbo-rt-content .Section1 .Affiliations,#sbo-rt-content .Section2 .Affiliations,#sbo-rt-content .Section3 .Affiliations{margin-bottom:.5em}#sbo-rt-content .SectionTypeBackgroundInformation,#sbo-rt-content .SectionTypeExcurse{font-size:90%}#sbo-rt-content .SectionTypeBox,#sbo-rt-content .SectionTypeOverview,#sbo-rt-content .SectionTypeQuestionnaire{background-color:#BBB;margin-top:1em !important;padding:.5em}#sbo-rt-content .SectionTypeCaseStudy,#sbo-rt-content .SectionTypeExample,#sbo-rt-content .SectionTypeTip{border-left:4px solid;margin-top:1em !important;padding-top:0;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}#sbo-rt-content .SectionTypeTrailer,#sbo-rt-content .SectionTypeLearningGoals{font-weight:bold;text-align:left}#sbo-rt-content .SectionTypeLegalText{font-weight:bold;margin-left:1em;text-align:left;text-indent:0 !important}#sbo-rt-content .SectionTypeProcedure,#sbo-rt-content .SectionTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .SectionTypeWarning{font-weight:bold}#sbo-rt-content .RenderAsSection1{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .SectionTypeBox+.RenderAsSection1,#sbo-rt-content .SectionTypeOverview+.RenderAsSection1,#sbo-rt-content .SectionTypeQuestionnaire+.RenderAsSection1{border-top:0;}#sbo-rt-content .SectionTypeBox>.Heading,#sbo-rt-content .SectionTypeOverview>.Heading,#sbo-rt-content .SectionTypeQuestionnaire>.Heading,#sbo-rt-content .SectionTypeProcedure>.Heading,#sbo-rt-content .SectionTypeRecipe>.Heading{margin-top:0}#sbo-rt-content .InternalRefSidebarLexicon{background-image:url(sidebar.gif);background-repeat:no-repeat;font-weight:bold;padding-left:20px}#sbo-rt-content .SidebarDialog{border:1px solid;margin-left:1.5em;margin-top:.4em;margin-bottom:.2em;padding:.2em;text-indent:0}#sbo-rt-content .SidebarNumber{font-weight:bold;padding-right:.5em}#sbo-rt-content .SimplePara+.SimplePara{margin-top:0;text-indent:1.5em}#sbo-rt-content .Stack{display:inline-table;vertical-align:top}#sbo-rt-content .Stack sub{display:table-row}#sbo-rt-content .Stack sup{display:table-header-group}#sbo-rt-content table{border-collapse:collapse;font-size:80%;max-width:100%;text-indent:0}#sbo-rt-content table .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content table,#sbo-rt-content tr,#sbo-rt-content td{border-color:#bbb !important}#sbo-rt-content th{border-color:#999 !important}#sbo-rt-content thead{background:#bbb;color:#000 !important}#sbo-rt-content .Table{margin-bottom:1em;text-indent:0}#sbo-rt-content .Caption .Table{margin-bottom:0}#sbo-rt-content .Table img{height:auto;margin:0;max-width:100%}#sbo-rt-content th div{text-align:left}#sbo-rt-content td div,#sbo-rt-content td p,#sbo-rt-content th div,#sbo-rt-content th p{padding:.2em}#sbo-rt-content .Para+.Table,#sbo-rt-content .Para>.Table{margin-top:1em}#sbo-rt-content .SimplePara>.Table{margin-top:.5em}#sbo-rt-content thead,#sbo-rt-content tdiv{vertical-align:top}#sbo-rt-content tbody+tbody tr:first-child td{padding-top:1em}#sbo-rt-content .ExternalTable{background-color:#F8F8F8;border-top:1px solid;border-bottom:1px solid;margin-top:1em;margin-bottom:1em;padding-top:0;padding-bottom:0}#sbo-rt-content .ExternalTable .Table{padding-bottom:.3em}#sbo-rt-content .UnorderedList>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0}#sbo-rt-content .Heading+.Para>div.UnorderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .UnorderedList li .Para:first-child{text-indent:0}#sbo-rt-content .Heading+ul{margin-top:0}#sbo-rt-content ul{margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.UnorderedListMarkBullet{list-style-type:disc;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkBullet div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkBullet .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkNone{list-style-type:none;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkNone div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkNone .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkDash{list-style:none;padding-left:1.1em;text-indent:-.8em}#sbo-rt-content ul.UnorderedListMarkDash>li>*:first-child{display:inline}#sbo-rt-content ul.UnorderedListMarkDash div{text-indent:0;margin-top:.3em;margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkDash>li:before{content:"– "}#sbo-rt-content .Verse{margin-top:1em;margin-bottom:1em}#sbo-rt-content .Verse .Heading{font-size:1rem;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content .Acknowledgments,#sbo-rt-content .AuthorContribution,#sbo-rt-content .Ethics{margin-top:1em}#sbo-rt-content .Acknowledgments>.Heading,#sbo-rt-content .AuthorContribution>.Heading,#sbo-rt-content .FundingInformation>.Heading,#sbo-rt-content .DataAvailability>.Heading,#sbo-rt-content .Ethics>.Heading{font-size:1.2rem;margin-bottom:0}#sbo-rt-content .License{font-size:.9rem !important;margin-top:1em;margin-bottom:1em}#sbo-rt-content .License>a:first-child img{float:left;height:1.9rem;padding-right:.5em;padding-bottom:0;padding-top:.2em}#sbo-rt-content .Glossary{border-top:1px solid #bbb;margin-top:1em;margin-bottom:1em;padding-top:.3em}#sbo-rt-content .Glossary .Headings{margin-top:.8em;margin-bottom:.8em}#sbo-rt-content .Glossary>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Glossary>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .GlossarySection .Headings{margin-top:.8em;margin-bottom:.4em}#sbo-rt-content .GlossarySection>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .GlossarySection>.Headings>.SubHeading{font-size:100%}#sbo-rt-content .GlossaryTerm{float:left;font-style:italic;padding-right:.5em}#sbo-rt-content .GlossarySeeLabel,#sbo-rt-content .GlossarySeeAlsoLabel{font-style:italic;padding-right:.3em}#sbo-rt-content .GlossaryDef{display:inline;margin-top:.3em}#sbo-rt-content .GlossaryDef>.SimplePara,#sbo-rt-content .GlossaryDef>.GlossarySee,#sbo-rt-content .GlossaryDef>.GlossarySeeAlso{display:block}#sbo-rt-content .GlossaryDef>:first-child{display:inline;margin-top:0;margin-left:0}#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySee,#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySeeAlso{text-indent:0}#sbo-rt-content .GlossaryTerm{display:inline}#sbo-rt-content .GlossaryTerm+.GlossarySee,#sbo-rt-content .GlossaryTerm+.GlossarySeeAlso{display:inline}#sbo-rt-content .InternalRefGlossaryEntry{border-bottom:thin dotted;cursor:help}#sbo-rt-content .InternalRefGlossaryEntry:hover{border-bottom:none}#sbo-rt-content .InternalRefGlossaryEntry a:link,#sbo-rt-content .InternalRefGlossaryEntry a:active,#sbo-rt-content .InternalRefGlossaryEntry a:visited{color:inherit}#sbo-rt-content .InternalRefGlossaryEntry .InlineGlossaryDefinition{background:#fff;display:none;margin:0 3em 0 2em;padding:3px 3px 3px 6px;border-style:solid;border-color:#49546F;border-width:2px;border-radius:5px;box-shadow:5px 5px 5px #888}#sbo-rt-content .InternalRefGlossaryEntry:hover .InlineGlossaryDefinition{display:block;z-index:6}#sbo-rt-content .TocAppendix{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .BookContextInformation+.Appendix>.TocAppendix:first-child{border-top:none;padding-top:0}#sbo-rt-content .TocAppendix .Headings{margin-bottom:.5em}#sbo-rt-content .TocAppendix>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .TocAppendix>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .TocEntry,#sbo-rt-content .TocPart,#sbo-rt-content .TocBack{margin-top:.5em;text-align:left !important}#sbo-rt-content .TocItem{font-weight:bold}#sbo-rt-content .TocPageNumber{display:none}#sbo-rt-content .TocAuthors{padding-left:1.5em}#sbo-rt-content .TocSection1,#sbo-rt-content .TocSection2,#sbo-rt-content .TocSection3,#sbo-rt-content .TocSection4,#sbo-rt-content .TocSection5,#sbo-rt-content .TocSection6,#sbo-rt-content .TocSection7{padding-left:1.5em}#sbo-rt-content .Index{border-top:1px solid #bbb;margin-top:1em;padding-top:.3em;margin-bottom:.8em}#sbo-rt-content .BookBackmatter>.Index:first-child{border-top:none;margin-top:0}#sbo-rt-content .Index .Headings{margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BookBackmatter>.Index:first-child>.Headings{margin-top:0}#sbo-rt-content .Index>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Index>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .IndexDiv .Headings{margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .IndexDiv>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .IndexDiv>.Headings>.SubHeading{font-size:100%;font-style:italic}#sbo-rt-content .IndexEntrySeeLabel{font-style:italic;margin-left:1em;padding-right:.3em}#sbo-rt-content .SecondaryIE{margin-left:1em}#sbo-rt-content .TertiaryIE{margin-left:2em}#sbo-rt-content .ChangeHistory{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ChangeHistory>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.3em}#sbo-rt-content .ChangeDate{font-weight:bold;padding-right:1em}#sbo-rt-content .ChangeDetails{display:inline}#sbo-rt-content .ChangeDetails>p:first-of-type{display:inline}#sbo-rt-content .Bibliography{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .BookBackmatter>.Bibliography:first-child{border-top:none}#sbo-rt-content .Bibliography>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BibliographyWrapper{display:table;margin:0;padding:0}#sbo-rt-content .Bibliography>.BibliographyWrapper{padding-top:1em}#sbo-rt-content .Bibliography>.Heading+.BibliographyWrapper{padding-top:0}#sbo-rt-content .BibSection>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.2em}#sbo-rt-content .BibliographyWrapper>.BibSection:first-child>.Heading:first-child{margin-top:.3em}#sbo-rt-content .Citation{display:table-row;font-size:90%}#sbo-rt-content .CitationNumber{display:table-cell}#sbo-rt-content .CitationNumber+.CitationContent{padding-left:.5em;text-align:left}#sbo-rt-content .CitationContent{padding-top:1em;display:table-cell}#sbo-rt-content .BibliographyWrapper>.Citation:first-child>.CitationContent{padding-top:0}#sbo-rt-content .Occurrences{display:block}#sbo-rt-content .Occurrence{margin-right:0}#sbo-rt-content .Occurrence:before{content:"["}#sbo-rt-content .Occurrence:after{content:"]"}#sbo-rt-content .Citation .ArticleTitle:before,#sbo-rt-content .Citation .ChapterTitle:before{content:" “";}#sbo-rt-content .Citation .ArticleTitle,#sbo-rt-content .Citation .ChapterTitle{display:inline}#sbo-rt-content .Citation .ArticleTitle:after{content:"”\ ";}#sbo-rt-content .Citation .ChapterTitle:after{content:"”\ In: ";}#sbo-rt-content .Citation .Year:before{content:" ("}#sbo-rt-content .Citation .Year:after{content:") "}#sbo-rt-content .Citation .JournalTitle:after{content:" "}#sbo-rt-content .Citation .VolumeID:after{content:":"}#sbo-rt-content .BibChapter .FirstPage:before,#sbo-rt-content .BibBook .FirstPage:before{content:", pp "}#sbo-rt-content .Citation .FirstPage+.LastPage:before{content:"–";}#sbo-rt-content .Citation .BookTitle:after,#sbo-rt-content .Citation .BibEditorName:after,#sbo-rt-content .Citation .EditionNumber:after,#sbo-rt-content .Citation .PublisherName:after{content:", "}#sbo-rt-content .BibComments{display:block}#sbo-rt-content .CoverFigure img{margin:0 auto 6px;width:100%;max-width:480px;height:auto}#sbo-rt-content .SeriesTitlePage{padding-bottom:1.5em;padding-top:1em}#sbo-rt-content .SeriesTitlePage .VolumeNumber{font-size:1.44rem}#sbo-rt-content .SeriesTitlePage span.SeriesTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SeriesSubTitle{display:block;font-size:1.44rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .SubSeriesTitle{display:block;font-size:1.44rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SubSeriesSubTitle{display:block;font-size:1.2rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .CollaboratorDesignation{display:block;font-weight:bold;padding-top:3em}#sbo-rt-content .SeriesTitlePage .Collaborators{display:block}#sbo-rt-content .SeriesTitlePage .AffiliationText{font-style:italic;margin-left:0}#sbo-rt-content .SeriesTitlePage .Affiliation+.CollaboratorName{display:inline-block;margin-top:1em}#sbo-rt-content .SeriesInformationText{padding-top:3em}#sbo-rt-content .BookTitlePage{padding-top:1em}#sbo-rt-content .BookTitlePageAfterSeriesTitlePage{border-top:1px solid #bbb;page-break-before:always}#sbo-rt-content .BookContextInformation+.BookTitlePage{border-top:none;padding-top:0}#sbo-rt-content .BookTitlePage .BookEditors,#sbo-rt-content .BookTitlePage .BookAuthors,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{text-align:left !important}#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{margin-top:1em}#sbo-rt-content .BookTitlePage .BookEditorGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup .CollaboratorDesignation{font-style:italic}#sbo-rt-content .BookTitlePage .BookTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:1em}#sbo-rt-content .BookTitlePage .BookSubTitle{display:block;font-size:1.44rem;font-weight:bold;margin-bottom:.5em}#sbo-rt-content .BookTitlePage .BookEdition{display:block;font-size:1rem;font-weight:normal;margin-top:.5em}#sbo-rt-content .BookTitlePage .CollaboratorLine{padding-top:.5em}#sbo-rt-content .BookFeatureText{margin-top:.5em}#sbo-rt-content .BookTitlePage .PublisherLogo .Figure,#sbo-rt-content .BookTitlePage .PublisherImprintName{font-size:1.2rem;margin-top:4em;margin-bottom:1.5em;text-align:left}#sbo-rt-content .CopyrightPage{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .CopyrightPage .CollaboratorDesignation{display:block;font-style:italic;padding-bottom:.5em}#sbo-rt-content .CopyrightPageOriginators{padding-bottom:4em}#sbo-rt-content .CopyrightPage div+.CollaboratorDesignation{padding-top:2em}#sbo-rt-content .CopyrightPage .EditorGroup+.AuthorGroup{padding-top:2em}#sbo-rt-content .CopyrightPage .Author+.Author,#sbo-rt-content .CopyrightPage .Author+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.Author,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .Editor+.Editor,#sbo-rt-content .CopyrightPage .Editor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.Editor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .Collaborator+.Collaborator{padding-top:1em}#sbo-rt-content .CopyrightPage .Affiliation{margin-top:0}#sbo-rt-content .CopyrightPage .AffiliationText{margin-left:0}#sbo-rt-content .CopyrightPage .CollaboratorLine{padding-top:1em}#sbo-rt-content .CopyrightPage .CollaboratorLineTranslatedBy{padding-top:2em}#sbo-rt-content .CopyrightPage .CollaboratorLine .CollaboratorDesignation{display:inline;font-style:normal}#sbo-rt-content .BookFrontmatter .CopyrightPage .ArticleNoteESMHint{border:none;padding-bottom:0;page-break-before:auto}#sbo-rt-content .CopyrightPageISBNs,#sbo-rt-content .CopyrightPageISSNs,#sbo-rt-content .SpringerLocationsLine,#sbo-rt-content .CatalogingInformation,#sbo-rt-content .MathematicsSubjectClassification,#sbo-rt-content .CopyrightLine,#sbo-rt-content .CopyrightPage .CopyrightComment,#sbo-rt-content .BookCopublishingInformation .SimplePara,#sbo-rt-content .CopyrightStandardText,#sbo-rt-content .TrademarkQualifierText,#sbo-rt-content .ProductLiability,#sbo-rt-content .LegalNotice,#sbo-rt-content .CoverDesigner,#sbo-rt-content .BookCoverFigureText,#sbo-rt-content .PaperInfo,#sbo-rt-content .SpringerReferenceLine{margin-top:1em}#sbo-rt-content .CopyrightComment+.CopyrightLine{margin-top:.5em}#sbo-rt-content .SeriesTitle+.CopyrightPageISBNs,#sbo-rt-content .SubSeriesTitle+.CopyrightPageISBNs{margin-top:0}#sbo-rt-content .CopyrightPage .SeriesTitle{display:block;margin-top:1em}#sbo-rt-content .SeriesTitle+.CopyrightPageISSNs,#sbo-rt-content .CopyrightPageISSNs+.SeriesTitle,#sbo-rt-content .CopyrightPageISSNs+.SubSeriesTitle{margin-top:0}#sbo-rt-content .CopyrightPagePrintISSN,#sbo-rt-content .CopyrightPagePrintISBN{display:inline-block;min-width:12em}#sbo-rt-content .SpringerReferenceLine .SimplePara+.SimplePara,#sbo-rt-content .BookCoverFigureText .SimplePara+.SimplePara,#sbo-rt-content .BookCopublishingInformation .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .CopyrightPagePrintISSN+.CopyrightPageElectronicISSN{padding-left:1.5em}#sbo-rt-content .CopyrightPagePrintISBN+.CopyrightPageElectronicISBN{padding-left:1.5em}#sbo-rt-content .CopyrightComment .SimplePara+.SimplePara{padding-top:.5em;text-indent:0}#sbo-rt-content .MathematicsSubjectClassificationCode+.MathematicsSubjectClassificationCode:before{content:", "}#sbo-rt-content .Endorsement{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Frontispiece{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Dedication{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Foreword{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter h1:first-child+.Foreword{border-top:none;padding-top:0;page-break-before:auto}#sbo-rt-content .ForewordTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Foreword .AuthorName{margin-top:.2em}#sbo-rt-content .Foreword .AuthorName,#sbo-rt-content .ForewordLocations,#sbo-rt-content .ForewordDate{font-weight:bold;text-align:right}#sbo-rt-content .ForewordLocation+.ForewordLocation:before{content:", "}#sbo-rt-content .Foreword .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Foreword .RenderAsSection2>.Heading,#sbo-rt-content .Foreword .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .Preface{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PrefaceTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Preface .AuthorName{margin-top:.2em}#sbo-rt-content .Preface .AuthorName,#sbo-rt-content .PrefaceLocations,#sbo-rt-content .PrefaceDate{font-weight:bold;text-align:right}#sbo-rt-content .PrefaceLocation+.PrefaceLocation:before{content:", "}#sbo-rt-content .Preface .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Preface .RenderAsSection2>.Heading,#sbo-rt-content .Preface .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookFrontmatterArticleNote{border-top:1px solid #bbb;margin-top:0;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .ArticleNote{padding-bottom:1em}#sbo-rt-content .PartFrontmatter h1:first-child+.ArticleNote{border-top:none;page-break-before:auto}#sbo-rt-content .BookFrontmatter .ArticleNote .Heading,#sbo-rt-content .PartFrontmatter .ArticleNote .Heading{font-size:1.44rem;font-style:normal;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookAcknowledgmentsTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments .AuthorName{font-weight:bold;margin-top:1em}#sbo-rt-content .BookAcknowledgments .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .BookAcknowledgments .RenderAsSection2>.Heading,#sbo-rt-content .BookAcknowledgments .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookNotes{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookNotesTitle{font-size:1.44rem;font-weight:bold;margin-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookNotes .AuthorName{font-weight:bold}#sbo-rt-content .BookFrontmatterAbbreviationGroup{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .AbbreviationGroup{padding-bottom:1em;margin-top:1em}#sbo-rt-content .BookFrontmatter .AbbreviationGroup .Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroup .Heading{font-size:1.44rem;font-weight:bold;padding-top:1em;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection>.Heading{font-size:1.2rem;padding-top:1em;padding-bottom:0}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading{padding-top:.5em}#sbo-rt-content .Toc{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Toc .Headings{margin-bottom:.5em}#sbo-rt-content .Toc>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Toc>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .Loh{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loh .Headings{margin-bottom:.1em}#sbo-rt-content .Loh>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Loh>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LohPageNumber{display:none}#sbo-rt-content .LocWithHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loc .Headings{margin-bottom:.1em}#sbo-rt-content .LocWithHeading>.Headings>.Heading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .LocWithHeading>.Headings>.SubHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LocWithHeading .LocDiv{margin-top:1em}#sbo-rt-content .LocWithHeading .LocDiv .Heading{font-size:1.2rem;margin-bottom:.1em}#sbo-rt-content .LocWithHeading .LocDiv .SubHeading{font-size:100%;font-style:italic;font-weight:normal}#sbo-rt-content .LocDiv .FormalPara .Heading{font-size:100%}#sbo-rt-content .Loc .AuthorGroup+.AuthorGroup,#sbo-rt-content .Loc .AuthorGroup+.EditorGroup,#sbo-rt-content .Loc .EditorGroup+.AuthorGroup,#sbo-rt-content .Loc .EditorGroup+.EditorGroup{margin-top:1em}#sbo-rt-content .Loc .Author,#sbo-rt-content .Loc .Editor,#sbo-rt-content .Loc .InstitutionalAuthor,#sbo-rt-content .Loc .InstitutionalEditor{font-weight:bold}#sbo-rt-content .Loc .AffiliationText{margin-left:0}#sbo-rt-content .Loc .Email+.Email:before{content:", "}#sbo-rt-content .Loc .Emails,#sbo-rt-content .Loc .URLs{display:inline}#sbo-rt-content .Loc .Emails+.URLs:before{content:", "}#sbo-rt-content .Loc .URL+.URL:before{content:", "}#sbo-rt-content .BookFrontmatterFootnoteSection{border-top:1px solid #bbb;margin-top:0;page-break-before:always}#sbo-rt-content .PartFrontmatter .FootnoteSection{border-top:none;margin-top:0}#sbo-rt-content .Colophon{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em;font-style:italic}#sbo-rt-content .ConferenceInfo{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em}#sbo-rt-content .ConfEventAbbreviation,#sbo-rt-content .ConfNumber+.ConfSeriesName,#sbo-rt-content .ConfEventAbbreviation+.Year,#sbo-rt-content .ConfEventDateStart,#sbo-rt-content .ConfEventDateEnd{display:inline}#sbo-rt-content .ConfEventAbbreviation:after{content:" "}#sbo-rt-content .ConfEventLocation .City:after{content:", "}#sbo-rt-content .ConfEventDateEnd:before{content:"–"}#sbo-rt-content .ConfEventDateStart .Year:after,#sbo-rt-content .ConfEventDateStart .Month:after,#sbo-rt-content .ConfEventDateEnd .Year:after,#sbo-rt-content .ConfEventDateEnd .Month:after{content:"/"}#sbo-rt-content .ConfEventDate .Month:after{content:"/"}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781484226018/chapter/html/425975_1_En_3_Chapter.xhtml",
          "book_id": "9781484226018",
          "chapter_uri": "html/425975_1_En_3_Chapter.xhtml",
          "position": 0,
          "user_uuid": "39a88cd5-54f5-4d61-aec6-7884d06dfba1",
          "next_chapter_uri": "/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml"
        
      },
      title: "Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software",
      author_list: "Michael Schwartz, Maciej Machulak",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml"><meta name="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_3 3. SAML Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   By the late 1990s, ...!--end&gt;!--begin&gt; "><meta property="og:title" content="3. SAML"><meta itemprop="isPartOf" content="/library/view/securing-the-perimeter/9781484226018/"><meta itemprop="name" content="3. SAML"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9781484226018/"><meta property="og:description" itemprop="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_3 3. SAML Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   By the late 1990s, ...!--end&gt;!--begin&gt; "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781484226018"><meta property="og:book:author" itemprop="author" content="Michael Schwartz"><meta property="og:book:author" itemprop="author" content="Maciej Machulak"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '39a88cd5-54f5-4d61-aec6-7884d06dfba1';
      dataLayer.push({userIdentifier: '39a88cd5-54f5-4d61-aec6-7884d06dfba1'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'c1ff3208-121f-489a-a3cd-0b219a28ba6e';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/vendor.667e7ada497a.js"></script><script defer="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/reader.d25c5547507a.js"></script><script async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 100019;
}
.annotator-filter {
  z-index: 100009;
}</style><iframe src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource.html"></iframe><iframe src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(2).html"></iframe><iframe src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(3).html"></iframe><link rel="stylesheet" type="text/css" href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/container.40a6b605d29a66b083aa6d74c07bb73eae19e31b.css"><iframe src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(4).html"></iframe><link href="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/840a321d95.css" media="all" rel="stylesheet"><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(1).txt"></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(2).txt"></script><script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(3).txt"></script><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav nav-collapsed scalefonts subscribe-panel library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/39a88cd5-54f5-4d61-aec6-7884d06dfba1/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=collection&amp;sort=date_added&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Expert Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Practice</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/" class="l2 nav-icn"><span>Katacoda Scenarios</span></a></li><li><a href="https://learning.oreilly.com/interactive/#notebooks" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M10.0440191,12.1582649 C10.177209,12.3351976 10.2476998,12.552011 10.2434767,12.7742985 L10.2434767,13.9482829 L1.96869684,13.9482829 L1.96869684,12.7742985 C1.96418597,12.536863 2.04491894,12.3056731 2.19625329,12.1226596 L2.20142503,12.1226596 C3.18373453,10.9898864 4.60930376,10.339179 6.10867266,10.339179 C7.30793519,10.339179 8.45998426,10.7554703 9.37576632,11.5017585 L14.3434936,11.5017585 L14.3434936,3.65650645 L1.65650645,3.65650645 L1.65650645,11.5017585 L2.06682298,11.5017585 L1.82063306,12.1582649 L1.32825322,12.1582649 C1.14771395,12.1582649 1,12.010551 1,11.8300117 L1,3.32825322 C1,3.14771395 1.14771395,3 1.32825322,3 L14.6717468,3 C14.852286,3 15,3.14771395 15,3.32825322 L15,11.8300117 C15,12.010551 14.852286,12.1582649 14.6717468,12.1582649 L10.0440191,12.1582649 Z M12.5483683,7.16419284 C12.6159362,7.20929881 12.6563112,7.2853432 12.6558247,7.36658194 C12.6553382,7.44782068 12.6140555,7.5233761 12.5459522,7.56766966 L10.4270949,8.91581376 C10.3903366,8.94010203 10.3431312,8.9419685 10.3045699,8.9206583 C10.2660086,8.89934811 10.2424712,8.85838696 10.2434767,8.81434055 L10.2434767,5.91510593 C10.2420711,5.86982855 10.2666257,5.82771857 10.3067229,5.80664182 C10.3468202,5.78556507 10.3954292,5.7892172 10.431927,5.81604875 L12.5483683,7.16419284 Z M6.10608679,9.81089299 C4.9635781,9.81089299 4.03739181,8.8847067 4.03739181,7.74219802 C4.03739181,6.59968933 4.9635781,5.67350304 6.10608679,5.67350304 C7.24859547,5.67350304 8.17478176,6.59968933 8.17478176,7.74219802 C8.17478176,8.8847067 7.24859547,9.81089299 6.10608679,9.81089299 Z"></path></svg><span>Sandboxes</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/kubernetes-sandbox/9781492062820/" class="l2 nav-icn"><span>Kubernetes</span></a></li><li><a href="https://learning.oreilly.com/scenarios/python-sandbox/9781492062844/" class="l2 nav-icn"><span>Python</span></a></li><li><a href="https://learning.oreilly.com/scenarios/tensorflow-sandbox/9781492062851/" class="l2 nav-icn"><span>TensorFlow</span></a></li><li><a href="https://learning.oreilly.com/scenarios/ubuntu-sandbox/9781492062837/" class="l2 nav-icn"><span>Ubuntu</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/r/" class="l2 nav-icn"><span>Recommendations</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Release</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.4 9.8a.6.6 0 0 1 .6.6v1.2h-1.2l-.6 2.4H3.8l-.6-2.4H2v-1.2a.6.6 0 0 1 .6-.6h10.8zM8 5.6a1.8 1.8 0 1 1-.001-3.599A1.8 1.8 0 0 1 8 5.6zm3.6 2.35v.95H4.4v-.95c0-.167.066-.33.19-.443A5.08 5.08 0 0 1 8 6.2a5.08 5.08 0 0 1 3.41 1.307c.124.113.19.276.19.444z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Training</span></a></li></ul></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781484226018/chapter/html/425975_1_En_3_Chapter.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml&amp;text=Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%203.%C2%A0SAML&amp;body=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml%0D%0Afrom%20Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/djangoMessagesPage.61a28d591d16.js"></script>


        <script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/48743.js"></script>
<script>
  var userId = "6866040";

  var userObject = {
    firstName: "MACKYNZIE",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "April 4, 2020, 9:28 a.m.",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_2_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2.&nbsp;LDAP</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4.&nbsp;OAuth</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><div class="ChapterContextInformation"><div class="ContextInformation" id="b978-1-4842-2601-8_3"><div class="ChapterCopyright">©&nbsp;Michael Schwartz, Maciej Machulak&nbsp;2018</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" epub:type="title" lang="en">Securing the Perimeter</span></span><span class="ChapterDOI"><a href="https://doi.org/10.1007/978-1-4842-2601-8_3">https://doi.org/10.1007/978-1-4842-2601-8_3</a></span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" lang="en">3.&nbsp;SAML</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Aff3" class="totri-footnote">1</a>&nbsp;<span class="ContactIcon"></span></sup> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Aff4" class="totri-footnote">2</a></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff3"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Austin, TX, USA</div></div><div class="Affiliation" id="Aff4"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">London, UK</div></div><div class="ClearBoth">&nbsp;</div></div></div><!--End Abstract--><div class="Fulltext"><p class="Para" id="Par2">By the late 1990s, people were starting to get tired of entering the same username and password on different websites. LDAP helped organizations implement “single-password,” but didn’t enable web “single sign-on” (SSO). While some vendors were offering solutions for web <span id="ITerm1">SSO</span>, SAML—the Security Assertion Markup Language—emerged as one of the first standards to enable a person to authenticate once and access websites both inside and outside their organization. The use case of a person accessing websites outside their home domain came to be known as <span id="ITerm2">
            <em class="EmphasisTypeItalic ">identity federation</em>
            
            
          </span>. And the protocols that enable this are known as <em class="EmphasisTypeItalic ">federation protocols</em>.</p><p class="Para" id="Par3">Not surprisingly for technology from 2005, SAML is an <span id="ITerm3">XML standard</span>. SAML was developed by a diverse group of interested parties—29 organizations and several individuals contributed to the SAML 2.0 core specification. The standard represents the confluence of several previous efforts to standardize a protocol for SSO, including SAML 1.1, Liberty Alliance ID-FF 1.2 and Shibboleth 1.3. All of these previous standards should be avoided.</p><p class="Para" id="Par4">Like LDAP, SAML is not defined in one document, but a number of related documents. <span id="ITerm4">SAML 2.0</span> was developed at OASIS, a nonprofit consortium that provides support for the development, convergence and adoption of open standards. At the time of this writing, OASIS has published 146 standards and 145 committee specifications. OASIS was a good home for <span id="ITerm5">SAML 2.0</span> because many organizations were already members and had agreed to its intellectual property guidelines. For more information about OASIS, you can visit their website at <span class="ExternalRef"><a href="https://www.oasis-open.org/"><span class="RefSource">
              <span class="EmphasisFontCategoryNonProportional ">https://www.oasis-open.org</span>
            </span></a></span>.</p><p class="Para" id="Par5">The terms defined by SAML have become an important part of the IAM lexicon. For example, a “SAML assertion” is a statement written in XML and issued by an “identity provider” about a “subject” (person) for a “relying party” (the recipient of the assertion) who is normally a “service provider” (website). Identity provider is abbreviated simply as “IDP” and service provider as “SP”. <span id="ITerm6">Assertions</span> contain contextual information about the authentication procedure, as well as “attributes”—similar to LDAP attributes, these are little pieces of information about the person, such as first name or last name.</p><p class="Para" id="Par6">SAML is a mature standard, and it’s been successfully deployed to solve many business challenges. Its <span id="ITerm7">stability</span> is one of its advantages—it has not been significantly updated since its 2.0 inception. Don’t feel bad if you find SAML somewhat hard to understand at first. SAML was finalized before the age of developer-friendly APIs—ease of use was not a design goal. When you first start learning about SAML, it's common to get the terms <span id="ITerm8">IDP and SP</span> confused. If you’re new to SAML, think of the IDP as the server that holds the identity information for the person and the credentials (i.e., username and password). In most cases, you can substitute SP with “website”. If SAML were LDAP, the IDP would be the LDAP server, and the SP would be the LDAP client.</p><p class="Para" id="Par7">Like other federation protocols, SAML uses <span id="ITerm9">public key cryptography</span> to sign or encrypt messages and documents. The use of such keys enables the parties to protect and verify the integrity of information. By convention, most SAML servers use self-signed X.509 certificates, whereas browsers make use of certificates issued by <span id="ITerm10">Certificate Authorities (CA)</span><span id="ITerm11">
            
            
          </span>. For browsers, using a CA makes sense—it enables validation of a certificate by trusting the root certificate that was used to issue it, enabling vendors to ship browsers with pre-trusted keys that save most people from having to know much about certificate trust. However, in SAML, the use of self-signed certificates has the security benefit of making trust management explicit—when you trust a certain self-signed certificate, you are trusting a specific entity. Self-signed certificates are not shared between services. For example, if you have several SAML services, each would use its own certificate. And, of course, any SAML certificates would be different from the SSL certificate used by a web server (which is generally not self-signed anyway).</p><p class="Para" id="Par8">If you’re reading this chapter, you need to learn at least the basics about SAML, so the goal is to make this as painless as possible and to discuss some of the tools at our disposal to manage <span id="ITerm12">SSO</span> using SAML. We will stick to the most common SAML use cases and ignore the more esoteric SAML capabilities.</p><p class="Para" id="Par9">For a <span id="ITerm13">test IDP</span>, you can use the Shibboleth IDP deployed in the Gluu Server. There are many other excellent free open source SAML tools—we will cover only some of the more common ones. But, hopefully, the concepts and methodologies will be transferable to other software solutions and libraries. So, without further ado, let’s start with a slightly deeper dive into the standard itself, and then move onto the software!</p><section class="Section1 RenderAsSection1" id="Sec1"><h2 class="Heading">Assertions, Bindings, Protocols, and Profiles</h2><div class="Para" id="Par10">In this section, we talk about assertions, bindings, protocols, and profiles (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig1">3-1</a></span>).<figure class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig1_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig1_HTML.jpg" style="height:24.02em" width="1418" height="961" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig1_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-1</span><p class="SimplePara">SAML profiles, assertions, protocols, and bindings</p></div></figcaption></figure></div><section class="Section2 RenderAsSection2" id="Sec2"><h3 class="Heading">Assertions</h3><div class="Para" id="Par11">Assertions<span id="ITerm14">
                
              </span><span id="ITerm15">
                
                
              </span> contain the goods—the information that a web application needs from the Identity Provider about the person accessing the site. A SAML assertion can be composed of four different sections:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par12"><strong class="EmphasisTypeBold ">Subject</strong> is an identifier for the person. This can be a one-time identifier that will change each time the person visits the site, or it can be a consistent identifier that will enable continuity with a person’s previous activity.</p></li><li><p class="Para" id="Par13"><strong class="EmphasisTypeBold ">Authentication statements</strong> contain information about when and how the person was authenticated.</p></li><li><p class="Para" id="Par14"><strong class="EmphasisTypeBold ">Attribute statements</strong> contain information about the subject, like first name, last name, email address, role or group memberships.</p></li><li><p class="Para" id="Par15"><strong class="EmphasisTypeBold ">Authorization statements</strong> contain information about whether the subject should be granted access to a requested resource. This is a somewhat esoteric part of SAML, which you will probably not encounter for SSO use cases.</p></li></ul></div></div><div class="Para" id="Par16">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig2">3-2</a></span> shows a sample SAML <span id="ITerm16">assertion</span> sent from an IDP (<span class="EmphasisFontCategoryNonProportional ">idp.example.org</span>) to a SP (<span class="EmphasisFontCategoryNonProportional ">sp.example.com</span>) that contains both an authentication and attribute statements, abbreviated to increase <span id="ITerm17">readability</span>.<figure class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig2_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig2_HTML.jpg" style="height:44.78em" width="1615" height="1791" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig2_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-2</span><p class="SimplePara">Sample SAML <span id="ITerm18">assertion</span><span id="ITerm19">
                        
                      </span></p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec3"><h3 class="Heading">Protocols</h3><div class="Para" id="Par17">While SAML is commonly referenced as a protocol, it’s actually more than that. As a matter of fact, inside the SAML specification the word “protocol” is also defined, and these protocols specify how to understand the different messages that are exchanged between the sender and receiver. The core specification defines requests sent (usually by the SP), and the responses sent (usually by the IDP) (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig3">3-3</a></span>). The core specification defines certain information that must be present in every message and then describes the details of messages that are sent for specific use cases.<figure class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig3_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig3_HTML.jpg" style="height:34.9em" width="1418" height="1396" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig3_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-3</span><p class="SimplePara">SAML protocol <span id="ITerm20">visualization</span></p></div></figcaption></figure></div><div class="Para" id="Par18">SAML <span id="ITerm21">defines</span> six protocols:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par19"><strong class="EmphasisTypeBold ">Assertion Query and Request Protocol</strong> defines messages and processing rules for requesting existing assertions if the requester knows the unique identifier of an assertion, or if the requester can identify the subject and statement type.</p></li><li><p class="Para" id="Par20"><strong class="EmphasisTypeBold ">Authentication Request Protocol</strong> is one of the most important protocols. It defines how an SP can find out who the subject is, as well as details about the authentication, such as when and how the authentication occurred. If a server can respond to this protocol, it is an identity provider!</p></li><li><p class="Para" id="Par21"><strong class="EmphasisTypeBold ">Artifact Resolution Protocol</strong> is used for direct communication between the IDP and SP—sometimes referred to as a “back-channel”. The browser may pass along a reference identifier (artifact) used to obtain a protocol message. (Spoiler alert: It’s the “code” in the OpenID Connect authorization code flow.) The IDP or SP can use that reference identifier to pick up the full payload directly from the sender without the browser’s further involvement. There are some security advantages to this, as well as the opportunity to transfer larger data files more efficiently. We will not touch on this protocol in this chapter, as it’s not widely used.</p></li><li><p class="Para" id="Par22"><strong class="EmphasisTypeBold ">Name Identifier Management Protocol</strong> is used by an SP to request an IDP to provide a name identifier for a subject in a particular format or context.</p></li><li><p class="Para" id="Par23"><strong class="EmphasisTypeBold ">Single Logout Protocol</strong> is a protocol that can be initiated by either the IDP or SP to affect logout. There are a lot of issues with session management due to different standards in use, so this protocol isn’t very reliable.</p></li><li><p class="Para" id="Par24"><strong class="EmphasisTypeBold ">Name Identifier Mapping Protocol</strong><span id="ITerm22">
                      
                      
                    </span> is used by an SP request and an IDP to provide a name identifier for a subject in a particular format.</p></li></ul></div></div><section class="Section3 RenderAsSection3" id="Sec4"><h4 class="Heading">IDP-Initiated vs SP-Initiated Authentication</h4><div class="Para" id="Par25">What comes first, the chicken or the egg? The equivalent question in SAML is “What comes first, logging into the IDP or the SP?” Today, we know the answer to this question: log into the SP first—keep it simple and avoid all the complexity and corner cases that entertaining IDP—initiated authentication will cause by trying to figure out how to enable authentication without an authentication request! This is the reason OpenID Connect, a more modern federation protocol, did not support <span id="ITerm23">IDP-initiated authentication</span>. Consider Figures <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig4">3-4</a></span> and <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig5">3-5</a></span>, which represent typical (and really oversimplified) SAML flows for the purpose of highlighting the differences between these two flows.<figure class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig4_HTML.png" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig4_HTML.png" style="height:18.55em" width="1169" height="742" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig4_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-4</span><p class="SimplePara">Very simplified SP initiated authentication <span id="ITerm24">flow</span></p></div></figcaption></figure><figure class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig5_HTML.png" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig5_HTML.png" style="height:17.9em" width="1169" height="716" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig5_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-5</span><p class="SimplePara">Very simplified sample IDP-initiated authentication <span id="ITerm25">flow</span></p></div></figcaption></figure></div><p class="Para" id="Par26">Some websites see advantages to IDP initiated authentication because it may seem like a simpler way to embed links. For example, consider a hypothetical banking site that uses an external service provider to handle foreign currency trades. The customer uses the bank’s portal and then clicks on the link to buy some Euros. A SAML response with an assertion is created by the IDP and sent along with the customer to the third-party SP, who can validate the assertion and provide its service.</p><p class="Para" id="Par27">There are several reasons why IDP initiated authentication is currently discouraged. One of the main concerns is that, while this process is defined in the standard, it is not interoperable. When a website receives an unsolicited SAML response, how does it know where to send redirect the browser after consumption of the assertion, i.e., the relay state? Each website that supports IDP initiated authentication may have a different way to communicate what is the correct relay state. It requires out-of-band communication and is therefore a “one-off”. The more one-offs your organization supports, the more expensive your infrastructure is to maintain over the long term. Net-net, this solution is better for the website than for the <span id="ITerm26">IDP</span>.</p><p class="Para" id="Par28">The idea of sending a response without a corresponding request is generally troubling. In OAuth, the state parameter is used to reject any unsolicited response. You should deprecate IDP initiated authentication—SP initiated authentication is more scalable and futureproofs the design for OAuth.</p></section></section><section class="Section2 RenderAsSection2" id="Sec5"><h3 class="Heading">Protocol Bindings</h3><div class="Para" id="Par29">There are several technical solutions that will enable SAML messages to be passed from a sender to a receiver. For example, short messages may be carried directly in the URL query string of an HTTP GET request, while longer messages may use HTTP <span class="EmphasisFontCategoryNonProportional ">POST</span> or web services. Mapping a SAML exchange onto a communication protocol is called a SAML binding, and several bindings may be combined to create a protocol <span id="ITerm27">flow</span>:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par30"><strong class="EmphasisTypeBold ">HTTP Redirect (</strong><span class="EmphasisFontCategoryNonProportional ">GET</span><strong class="EmphasisTypeBold ">)</strong> defines a mechanism by which SAML protocol messages can be transmitted within URL parameters, intended to be used through the HTTP-redirect mechanism.</p></li><li><p class="Para" id="Par31"><strong class="EmphasisTypeBold ">HTTP</strong> <strong class="EmphasisTypeBold EmphasisFontCategoryNonProportional ">POST</strong> defines a mechanism by which SAML protocol messages may be transmitted within the base64-encoded content of an HTML form control.</p></li><li><p class="Para" id="Par32"><strong class="EmphasisTypeBold ">Simple Sign</strong> defines an HTTP <span class="EmphasisFontCategoryNonProportional ">POST</span> mechanism that employs a simpler strategy to digitally sign the message. Instead of signing components of the message, the entire SAML protocol message is signed.</p></li><li><p class="Para" id="Par33"><strong class="EmphasisTypeBold ">SAML SOAP</strong> defines how to use SOAP, an XML web services standard, to send and receive SAML requests and responses.</p></li><li><p class="Para" id="Par34"><strong class="EmphasisTypeBold ">Reverse SOAP</strong> defines a mechanism in which an HTTP request is sent to a SP, which in turn returns a SAML request, normally an authentication request in a SOAP envelope. It’s used in the ECP profile, which will be covered later.</p></li><li><p class="Para" id="Par35"><strong class="EmphasisTypeBold ">HTTP Artifact</strong> is a mechanism to use a reference value (or artifact), which the receiver can use to establish a direct communication channel with the sender to request the full message.</p></li><li><p class="Para" id="Par36"><strong class="EmphasisTypeBold ">SAML URI</strong> is not a request/response binding, but a mechanism to retrieve an assertion via a URI, normally via <span id="ITerm28">HTTPS</span>.</p></li></ul></div></div><p class="Para" id="Par37">SAML bindings provide some flexibility. Consider the Web Browser SSO profile: there are four SP bindings and three IDP bindings, making twelve different deployments scenarios possible. In this chapter, we focus on the two most common protocol binding: <span id="ITerm29">
                <span class="EmphasisFontCategoryNonProportional ">Redirect-POST</span>
                
              </span> and <span id="ITerm30">
                <span class="EmphasisFontCategoryNonProportional ">POST-POST</span>
                
              </span>.</p><section class="Section3 RenderAsSection3" id="Sec6"><h4 class="Heading">HTTP Redirect Binding</h4><div class="Para" id="Par38">One of the most important <span id="ITerm31">bindings</span><span id="ITerm32">
                  
                  
                </span>, it defines a mechanism by which SAML messages can be transmitted within parameters, including the signature. One advantage of this binding is that it is easy to debug in the case of unexpected behavior. The SAML Request must be compressed (see IETF RFC 1951), base64-encoded, and then URL-encoded. If you inspect the <span class="EmphasisFontCategoryNonProportional ">GET</span> URL<span id="ITerm33">
                  
                </span>, it will be quite long. Signatures are not included in the SAML Request; they are specified with the additional parameters. One reason to leave signatures out is to decrease the size of the parameter payload. It is inadvisable to send very long URLs, and it can cause problems with old browsers. The request may also include the <span class="EmphasisFontCategoryNonProportional ">RelayState</span> parameter<span id="ITerm34">
                  
                </span>, which is used in SP-initiated authentication to drop unsolicited responses, or in IDP-initiated authentication to convey the final landing page. While the SAML request itself may be short, the responses may be longer. As it is inadvisable to send excessively long URLs, in practice this binding may be combined with others in a single protocol exchange. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig6">3-6</a></span> details a typical HTTP redirect binding for SP-initiated <span id="ITerm35">authentication</span><span id="ITerm36">
                  
                </span>.<figure class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig6_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig6_HTML.jpg" style="height:25.32em" width="1724" height="1013" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig6_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-6</span><p class="SimplePara">Sample SP-initiated authentication flow using <span id="ITerm37">HTTP redirect bindings</span></p></div></figcaption></figure></div><p class="Para" id="Par39">There are a few important security considerations when using this binding. Notice that the SP and IDP do not directly communicate, which means that this binding does not support confidentiality of messages from the browser. Also, if you don’t want an eavesdropper seeing the SAML response and request, you must use TLS (SSL) from the browser to both the IDP and SP to hide the GET parameters. You should use a secure communication channel for all APIs and websites, but especially for authentication! It’s also important for the browser not to cache the SAML response. Normally the IDP will use the HTTP Headers’ <span class="EmphasisFontCategoryNonProportional ">Cache-Control</span> field set to <span class="EmphasisFontCategoryNonProportional ">no-cache, no-store</span> and the Pragma header set to <span class="EmphasisFontCategoryNonProportional ">no-cache</span>. But, if this is missing, there is a danger of a replay attack by someone other than the subject. Another thing to keep in mind is that by using <span class="EmphasisFontCategoryNonProportional ">GET</span> requests, there is a chance a web server or proxy may persist SAML messages log files, which is not desirable from a security or privacy perspective. You also need to consider that a <span class="EmphasisFontCategoryNonProportional ">GET</span> URL<span id="ITerm38">
                  
                </span> may be retained by the browser as the referrer URL. This summary is not an exhaustive discussion, but a starting point for your <span id="ITerm39">research</span><span id="ITerm40">
                  
                </span>.</p></section><section class="Section3 RenderAsSection3" id="Sec7"><h4 class="Heading">HTTP POST Binding</h4><div class="Para" id="Par40">Another common binding, it uses an HTML form with the hidden fields named either <span class="EmphasisFontCategoryNonProportional ">SAMLRequest</span> or <span class="EmphasisFontCategoryNonProportional ">SAMLResponse</span> to send messages. The action attribute of the form is used to specify the URL to which to send the message, and JavaScript is normally used to automate submission of the form. For example, see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC1">3-1</a></span>.<div class="ProgramCode" id="PC1"><div class="LineGroup"><div class="FixedLine">&lt;form method="post"</div><div class="FixedLine">&nbsp;&nbsp;action="https://idp.example.com/SAML2/SSO/POST" ...&gt;</div><div class="FixedLine">&lt;input type="hidden" name="SAMLRequest"</div><div class="FixedLine">&nbsp;&nbsp;value="(base-64 encoded xml)" /&gt;</div><div class="FixedLine">&lt;/form&gt;</div></div><div class="LineGroup"><div class="FixedLine">&lt;form method="post"</div><div class="FixedLine">&nbsp;&nbsp;action="https://sp.example.com/SAML2/SSO/POST" ...&gt;</div><div class="FixedLine">&lt;input type="hidden" name="SAMLResponse"</div><div class="FixedLine">&nbsp;&nbsp;value="(base-64 encoded xml)" /&gt;</div><div class="FixedLine">&lt;/form&gt;</div></div><div class="LineGroup"><div class="FixedLine">window.onload = function() {document.forms[0].submit();}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-1</span><p class="SimplePara">Sample HTML Form Used for Form POST <span id="ITerm41">Response</span><span id="ITerm42">
                          
                          
                        </span></p></div></div></div></div><div class="Para" id="Par41">This strategy is handy because it can handle longer messages, and some of the security considerations around logging the <span class="EmphasisFontCategoryNonProportional ">GET</span> request go away. In this scenario, the browser is also in the middle, so you won’t be able to hide anything from it. As with the <span id="ITerm43">HTTP redirect binding</span>, HTTP <span class="EmphasisFontCategoryNonProportional ">POST</span> sends identity information embedded in SAML protocol messages across the wire (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig7">3-7</a></span>). A secure communication channel to both the SP and IDP is highly recommended. Caching the form containing SAML messages should also be <span id="ITerm44">discouraged</span>.<figure class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig7_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig7_HTML.jpg" style="height:25.9em" width="1714" height="1036" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig7_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-7</span><p class="SimplePara">Sample SP-initiated authentication flow using <span id="ITerm45">HTTP POST bindings</span><span id="ITerm46">
                          
                          
                        </span></p></div></figcaption></figure></div></section></section><section class="Section2 RenderAsSection2" id="Sec8"><h3 class="Heading">Profiles</h3><div class="Para" id="Par42">SAML<span id="ITerm47">
                
                
                
              </span> provides a great deal of flexibility or “optionality”. However, optionality is the enemy of interoperability! Profiles are used to provide more specific guidelines for how to use a combination of assertions, protocols, and bindings. By adhering to profiles that define more specifically how to use the <span id="ITerm48">building blocks</span>, including the naming, syntax, and values of such elements, profiles make interoperability more likely. While the first two profiles listed here are the most important, the OASIS SAML specifications include details about five profile categories:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par43"><strong class="EmphasisTypeBold ">SSO Profiles</strong> define how to use <span id="ITerm49">SAML</span> for single sign-on of browsers (and hypothetically other devices, but such use cases are rather esoteric).</p></li><li><p class="Para" id="Par44"><strong class="EmphasisTypeBold ">SAML Attribute Profiles</strong> define how information about a person is conveyed in SAML.</p></li><li><p class="Para" id="Par45"><strong class="EmphasisTypeBold ">Artifact Resolution Profiles</strong> define a back-channel mechanism for the IDP and SP to communicate directly to pass SAML protocol messages by reference identifiers. Although it’s potentially more secure, it’s infrequently used for Enterprise IAM.</p></li><li><p class="Para" id="Par46"><strong class="EmphasisTypeBold ">Assertion Query/Request Profiles</strong> define how to request assertions by referencing an identifier or by querying based on a subject (person). It’s not normally needed because the assertion included in the SSO Profiles normally contain both an authentication and attribute statement.</p></li><li><p class="Para" id="Par47"><strong class="EmphasisTypeBold ">Name Identifier Mapping Profiles</strong> define how to request an alternate name identifier for the same person in a different format. This also won’t be covered due to its esoteric appeal.</p></li></ul></div></div><section class="Section3 RenderAsSection3" id="Sec9"><h4 class="Heading">Web Browser SSO Profile</h4><div class="Para" id="Par48">This is the most important profile defined by the SAML specifications. Some people might not even realize that there is any purpose to SAML other than <span id="ITerm50">Web Browser SSO</span><span id="ITerm51">
                  
                  
                </span>. In this profile, a person authenticates to the IDP, which produces an assertion that the SP uses to establish a session. This profile defines two important services, or roles, in the message exchange:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par49"><strong class="EmphasisTypeBold ">Single Sign-On Service,</strong> which specifies the IDP’s endpoints (URLs) to which the browser sends the message from the SP.</p></li><li><p class="Para" id="Par50"><strong class="EmphasisTypeBold ">Assertion Consumer Endpoint,</strong> which is the SP’s endpoint to which the browser sends the message from the IDP.</p></li></ul></div></div><p class="Para" id="Par51">This <span id="ITerm52">profile</span><span id="ITerm53">
                  
                  
                </span> spells out more of the details about the flow of messages between the SP and IDP. We’ve already covered many of these details. The profile also specifies some important information about the use of “metadata,” which will be covered subsequently.</p></section><section class="Section3 RenderAsSection3" id="Sec10"><h4 class="Heading">
                <span id="ITerm54">Single Logout Profile (SLO)</span>
              </h4><p class="Para" id="Par52">Don’t get your hopes up that the <span id="ITerm55">SLO</span><span id="ITerm56">
                  
                  
                </span> profile is a logout panacea. It doesn’t work in practice with many applications, even if they are all SAML—even if they support SLO! Logout requests should be signed by the SP—otherwise a malicious website could log out a person just by knowing a subject identifier. There are two mechanisms for logout—“front-channel” and “back-channel”. In a front-channel logout, the browser loads a page with logout URLs for all applications to which the subject has logged in. Each of these requests are hopefully automatically sent by the browser (this can be accomplished with iframe, script or img HTML tags). With any luck, when the browser calls the logout URLs at the respective applications, the person is logged out. In back-channel logout, a notification is sent directly from the IDP to the SP to log out a specific browser session.</p><div class="Para" id="Par53">The likely success of front-channel logout for all the people in your domain is tenuous at best. First of all, if an error is encountered while the browser calls the logout URL (maybe the network is down?), the IDP (or the person) will usually never know something failed. To log out of an application, normally it needs to clear the application cookie it set post-authentication. A common problem with front-channel logout is that some browsers block “third-party cookies,” or cookies from a domain other than that of the page. Because the IDP presents the front-channel logout page, but the iframes (or script or img tags) call logout URLs in a different domain (the application), these will be seen by the browser as third-party. Most browsers have a setting to block third-party cookies, and some even do so as the default setting. For example, Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig8">3-8</a></span> shows the setting on Chrome (which is not the default setting).<figure class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig8_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig8_HTML.jpg" style="height:14.95em" width="1068" height="598" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig8_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-8</span><p class="SimplePara">Chrome settings interface to block third-party <span id="ITerm57">cookies</span><span id="ITerm58">
                          
                          
                        </span></p></div></figcaption></figure></div><p class="Para" id="Par54">So, what about back-channel logout? If the browser sends a logout request to the IDP, as the SLO profile states is preferred, the IDP would need to execute back-channel requests in parallel to all SPs to which it has sent a response. This is not a trivial undertaking, as the IDP and SP may not even have a direct connection (in the <span class="EmphasisFontCategoryNonProportional ">POST</span> and redirect bindings, the browser is used as an intermediary). Also complicating the mess is that if the website relies on cookies in the browser, a back-channel notification has no way to remove the cookie in the browser.</p></section><section class="Section3 RenderAsSection3" id="Sec11"><h4 class="Heading">Attribute Profile</h4><p class="Para" id="Par55">In SAML, attributes refer to data about a person—the subject. In order to achieve interoperability, the <span id="ITerm59">IDP and SP</span> must exchange attribute information in a standard manner. The SAML attribute profile provides a way to name attributes, to enable syntax validation, and to provide other attribute information using XML. The two most common attribute profile formats are generically referred to as “basic” and “LDAP”.</p></section><section class="Section3 RenderAsSection3" id="Sec12"><h4 class="Heading">Basic Attributes</h4><div class="Para" id="Par56">The first thing that you might notice is that there are two elements: <span class="EmphasisFontCategoryNonProportional ">Attribute</span> and <span class="EmphasisFontCategoryNonProportional ">AttributeValue</span>. The <span class="EmphasisFontCategoryNonProportional ">NameFormat</span> attribute specifies that this is a “basic” attribute (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC2">3-2</a></span>). The only other XML attribute of the SAML <span class="EmphasisFontCategoryNonProportional ">Attribute</span> element is the <span class="EmphasisFontCategoryNonProportional ">Name</span> attribute, which is used for comparison. Note that in this example, there are two <span class="EmphasisFontCategoryNonProportional ">AttributeValue</span> elements—don’t forget that attributes can be multi-value. The type of the attribute is also specified using XML schema types. The main types you might expect to see are <span class="EmphasisFontCategoryNonProportional ">string</span>, <span class="EmphasisFontCategoryNonProportional ">boolean</span>, <span class="EmphasisFontCategoryNonProportional ">decimal</span>, <span class="EmphasisFontCategoryNonProportional ">float</span>, <span class="EmphasisFontCategoryNonProportional ">double</span>, <span class="EmphasisFontCategoryNonProportional ">duration</span>, <span class="EmphasisFontCategoryNonProportional ">dateTime</span>, <span class="EmphasisFontCategoryNonProportional ">time</span>, and <span class="EmphasisFontCategoryNonProportional ">date</span>. For more information about these values, and their exact syntax and values, see the “XML Schema Part 2: Datatypes” document published by the W3C: <span class="ExternalRef"><a href="https://www.w3.org/TR/xmlschema-2/"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://www.w3.org/TR/xmlschema-2/</span>
                  </span></a></span>.<div class="ProgramCode" id="PC2"><div class="LineGroup"><div class="FixedLine">&lt;saml:Attribute Name="FirstName"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;NameFormat=</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"urn:oasis:names:tc:SAML:2.0:attrname-format:basic"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&lt;saml:AttributeValue xsi:type="xs:string"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Michael</div><div class="FixedLine">&nbsp;&nbsp;&lt;/saml:AttributeValue&gt;</div><div class="FixedLine">&nbsp;&nbsp;&lt;saml:AttributeValue xsi:type="xs:string"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Mike</div><div class="FixedLine">&nbsp;&nbsp;&lt;/saml:AttributeValue&gt;</div><div class="FixedLine">&lt;/saml:Attribute&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-2</span><p class="SimplePara">SAML <span id="ITerm60">Basic Attribute Element</span></p></div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec13"><h4 class="Heading">SAML V2.0 X.500/LDAP Attributes</h4><div class="Para" id="Par57">The other common format you might see for attributes is based on LDAP, because organizations understandably wanted to re-use the schema they previously defined (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC3">3-3</a></span>). The name used is based on the object identifier (OID) that is commonly used in LDAP. A FriendlyName is used, because no one could possible remember these abstruse OIDs. The <span class="EmphasisFontCategoryNonProportional ">AttributeValue</span> part is the same, but the type will always be “string” if the value can be defined as a UTF-8 string, for example, all of the following in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC4">3-4</a></span>.<div class="ProgramCode" id="PC3"><div class="LineGroup"><div class="FixedLine">&lt;saml:Attribute Name="urn:oid:2.5.4.42"</div><div class="FixedLine">&nbsp;&nbsp;FriendlyName="givenName" x500:Encoding="LDAP"</div><div class="FixedLine">&nbsp;xmlns:x500=</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"urn:oasis:names:tc:SAML:2.0:profiles:attribute:X500"</div><div class="FixedLine">&nbsp;NameFormat=</div><div class="FixedLine">&nbsp;&nbsp;"urn:oasis:names:tc:SAML:2.0:attrname-format:uri"</div><div class="FixedLine">&gt;</div><div class="FixedLine">&nbsp;&nbsp;&lt;saml:AttributeValue xsi:type="xsd:string"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Michael</div><div class="FixedLine">&nbsp;&nbsp;&lt;/saml:AttributeValue&gt;</div><div class="FixedLine">&nbsp;&nbsp;&lt;saml:AttributeValue xsi:type="xsd:string"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Mike</div><div class="FixedLine">&nbsp;&nbsp;&lt;/saml:AttributeValue&gt;</div><div class="FixedLine">&lt;/saml:Attribute&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-3</span><p class="SimplePara">SAML LDAP Attribute <span id="ITerm61">Element</span></p></div></div></div><div class="ProgramCode" id="PC4"><div class="LineGroup"><div class="FixedLine">Attribute Type Description 1.3.6.1.4.1.1466.115.121.1.3</div><div class="FixedLine">Bit String 1.3.6.1.4.1.1466.115.121.1.6</div><div class="FixedLine">Boolean 1.3.6.1.4.1.1466.115.121.1.7</div><div class="FixedLine">Country String 1.3.6.1.4.1.1466.115.121.1.11</div><div class="FixedLine">DN 1.3.6.1.4.1.1466.115.121.1.12</div><div class="FixedLine">Directory String 1.3.6.1.4.1.1466.115.121.1.15</div><div class="FixedLine">Facsimile Telephone Number 1.3.6.1.4.1.1466.115.121.1.22 Generalized Time 1.3.6.1.4.1.1466.115.121.1.24</div><div class="FixedLine">IA5 String 1.3.6.1.4.1.1466.115.121.1.26</div><div class="FixedLine">INTEGER 1.3.6.1.4.1.1466.115.121.1.27</div><div class="FixedLine">LDAP Syntax Description 1.3.6.1.4.1.1466.115.121.1.54</div><div class="FixedLine">Matching Rule Description 1.3.6.1.4.1.1466.115.121.1.30 Matching Rule Use Description 1.3.6.1.4.1.1466.115.121.1.31 Name And Optional UID 1.3.6.1.4.1.1466.115.121.1.34</div><div class="FixedLine">Name Form Description 1.3.6.1.4.1.1466.115.121.1.35</div><div class="FixedLine">Numeric String 1.3.6.1.4.1.1466.115.121.1.36</div><div class="FixedLine">Object Class Description 1.3.6.1.4.1.1466.115.121.1.37</div><div class="FixedLine">Octet String 1.3.6.1.4.1.1466.115.121.1.40</div><div class="FixedLine">OID 1.3.6.1.4.1.1466.115.121.1.38</div><div class="FixedLine">Other Mailbox 1.3.6.1.4.1.1466.115.121.1.39</div><div class="FixedLine">Postal Address 1.3.6.1.4.1.1466.115.121.1.41</div><div class="FixedLine">Presentation Address 1.3.6.1.4.1.1466.115.121.1.43</div><div class="FixedLine">Printable String 1.3.6.1.4.1.1466.115.121.1.44</div><div class="FixedLine">Substring Assertion 1.3.6.1.4.1.1466.115.121.1.58</div><div class="FixedLine">Telephone Number 1.3.6.1.4.1.1466.115.121.1.50</div><div class="FixedLine">UTC Time 1.3.6.1.4.1.1466.115.121.1.53</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-4</span><p class="SimplePara">Attribute Type OIDs</p></div></div></div></div><p class="Para" id="Par58">If the <span id="ITerm62">
                  <span class="EmphasisFontCategoryNonProportional ">AttributeValue</span>
                  
                </span> can’t be expressed as a UTF-8 string, the <span class="EmphasisFontCategoryNonProportional ">xsi:type</span> should be base-64 encoded and the <span class="EmphasisFontCategoryNonProportional ">xsi:type</span> must be set to <span class="EmphasisFontCategoryNonProportional ">xsd:base64Binary</span><span id="ITerm63">
                  
                  
                  
                </span>.</p></section></section><section class="Section2 RenderAsSection2" id="Sec14"><h3 class="Heading">SAML Metadata</h3><p class="Para" id="Par59"><span id="ITerm64">SAML metadata</span><span id="ITerm65">
                
                
              </span> is an XML document that groups together all necessary SAML-related details of one party. Included are the roles the service fulfills, details on how to communicate with these services, information of the organization and its operators, as well as information on the cryptographic keys and certificates that the party uses to sign or encrypt different SAML messages.</p><p class="Para" id="Par60">Metadata is also used by federation operators, which are organizations that enhance trust between organizations by vetting participants. The purpose of a federation is to drive down the legal and technical costs of collaboration. Multi-party federations are covered in more detail in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_10_Chapter.xhtml"><span class="RefSource">10</span></a></span>. At a technical level, the federation aggregates the metadata of many participants and publishes one large metadata document, which includes as sub-elements the metadata for all participants. This approach can lead to large files.</p><div class="Para" id="Par61">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig9">3-9</a></span> provides an overview of a metadata document for an IDP. The document itself contains a signature so that its integrity can be verified. One of the most important attributes is the <span class="EmphasisFontCategoryNonProportional ">entityID</span> of the <span class="EmphasisFontCategoryNonProportional ">EntityDescriptor</span>. Your SAML partners will need this in their configuration to identify your IDP. If this entity is an SP, it must define an <span class="EmphasisFontCategoryNonProportional ">SPSSODescriptor</span>, which contains an <span class="EmphasisFontCategoryNonProportional ">AssertionConsumerService</span> element, i.e., where the IDP should send the SAML response. An organization could operate an entity that fulfills both the role of SP as well as IDP. This would be reflected in the metadata defining both an <span class="EmphasisFontCategoryNonProportional ">IDPSSODescriptor</span> element as well as an <span class="EmphasisFontCategoryNonProportional ">SPSSODEscriptor</span> element. This is not typical, but it’s not unusual either—for example a SAML proxy might have both IDP and SP endpoints. As you can see, the metadata contains a lot of descriptive information that enables SAML partners to configure their respective services without a lot of back-and-forth about what formats or data is required. Metadata saves time and enables <span id="ITerm66">automation</span><span id="ITerm67">
                
              </span>.<figure class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig9_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig9_HTML.jpg" style="height:31.28em" width="1714" height="1251" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig9_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-9</span><p class="SimplePara">Sample SAML IDP metadata <span id="ITerm68">structure</span><span id="ITerm69">
                        
                      </span></p></div></figcaption></figure></div></section></section><section class="Section1 RenderAsSection1" id="Sec15"><h2 class="Heading">Open Source SAML Software</h2><p class="Para" id="Par62">Congratulations, you made it through the theoretical section of this chapter! Now it’s time to roll up your sleeves and get to work. This section walks you through a number of examples that involve configuring websites for SSO with a SAML IDP. We use the Gluu Server we set up in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_1_Chapter.xhtml" class="totri-footnote"><span class="RefSource">1</span></a></span> as the IDP. For the websites, we try the <span id="ITerm70">Shibboleth SP software</span>, <span id="ITerm71">
              <span class="EmphasisFontCategoryNonProportional ">SimpleSAMLPhp</span>
              
            </span>, and a custom Python script.</p><section class="Section2 RenderAsSection2" id="Sec16"><h3 class="Heading">Gluu Server Shibboleth Identity Provider Overview</h3><p class="Para" id="Par63">If you installed the <span id="ITerm72">Gluu Server</span> in the first chapter, then you already have a SAML IDP up and running, waiting for you to configure websites for SSO! This is because the Gluu Server bundles the Shibboleth Identity Provider in its distribution. As a test, you can view the SAML metadata for your IDP. Navigate to this URL: <span class="EmphasisFontCategoryNonProportional ">https://&lt;your-hostname&gt;/idp/shibboleth</span>, replacing the <span class="EmphasisFontCategoryNonProportional ">&lt;your-hostname&gt;</span>, of course, with that of your installation. If this URL returns an XML document, you’re in business! The Shibboleth IDP is working.</p><div class="Para" id="Par64">If you’re wondering why the name Shibboleth was chosen, its biblical origins tell of a word whose proper pronunciation was a way to prove membership to a tribe. It’s a nice metaphor for federated identity. But why name a project after a word whose claim to fame is difficulty in pronunciation? Your guess is as good as ours. But back to the Gluu Server, to view the <span id="ITerm73">configuration</span> of your IDP, you’ll need to log in to the chroot container.<div class="ProgramCode" id="PC5"><div class="LineGroup"><div class="FixedLine"># service gluu-server-3.1.3 login</div></div></div></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar1"><h3 class="Heading">Note</h3><p class="Para" id="Par65">If you are using a later version of the Gluu Server, adjust this command accordingly.</p></div><p class="Para" id="Par66">chroot is a file system container. It’s a handy trick to simplify distribution of the Gluu Server software. Chroot containers have been around for a while. They only offer file system isolation—new Linux kernel containers also provide process and network isolation. For example, if a hacker were to get access to an application constrained to a file system container and were to run <span class="EmphasisFontCategoryNonProportional "># rm -rf /*</span> (normally fatal for UNIX systems), only the application folder would be deleted.</p><p class="Para" id="Par67">You’ll notice that the chroot container contains an entire Linux distribution. The Shibboleth IDP is installed in <span class="EmphasisFontCategoryNonProportional ">/opt/idp</span>. The Gluu Server creates the initial configuration during setup and you can configure the IDP through the oxTrust graphical admin interface. By default, the Gluu Server supports the redirect and <span class="EmphasisFontCategoryNonProportional ">POST</span> bindings via the front-channel (browser). Back-channel protocols (like the artifact and attribute profiles) can be supported through the use of custom templates.</p><p class="Para" id="Par68">The Gluu Server <span id="ITerm74">ships</span> with a Shibboleth IDP login handler that leverages OpenID Connect authentication. OpenID Connect is covered in more detail in Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml" class="totri-footnote"><span class="RefSource">5</span></a></span>, but for now, think of it as a modern version of SAML using JSON instead of XML. The goal of this login handler is to enable SSO across websites using either SAML or OpenID Connect, and to enable you to define authentication workflows in one place. For example, to support two-factor authentication, you would not want to configure one plugin for SAML and a different plugin for OpenID Connect.</p></section><section class="Section2 RenderAsSection2" id="Sec17"><h3 class="Heading">Shibboleth Service Provider Example</h3><p class="Para" id="Par69">The <span id="ITerm75">Shibboleth SP solution</span> consists of two parts. The first is an <span id="ITerm76">Apache or IIS web server plugin</span> that enables you to specify that certain web folders require an authenticated user. The second is a service called “<span id="ITerm77">shibd</span>,” which runs on the same server as the web server (listening on a localhost socket) and provides the SAML operations needed by the web server plugin. The <span id="ITerm78">advantage</span> of this architecture is that the web server plugin is relatively “thin,” as most of the heavy lifting for the SAML protocol is performed by the shibd service software.</p><p class="Para" id="Par70">To get you started as quickly as possible, this section will provide an end-to-end example using Ubuntu 14.04.4, and I’ll explain as we go along. Prior to developing this example, install a new <span id="ITerm79">Ubuntu server</span>. The only software you should select when running the Ubuntu Server installation is OpenSSH. If you want to do this with Centos, the concepts are the same but the commands and locations are a little different. Check Gluu documentation for an equivalent procedure at <span class="ExternalRef"><a href="https://gluu.org/docs"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://gluu.org/docs</span>
                </span></a></span>.</p><p class="Para" id="Par71">In this example, the hostname for the Gluu Server (IDP) is <span class="EmphasisFontCategoryNonProportional ">albacore.gluu.info</span>. The hostname for the web server (SP) is <span class="EmphasisFontCategoryNonProportional ">squid.gluu.info</span>.</p><section class="Section3 RenderAsSection3" id="Sec18"><h4 class="Heading">Installing the Web Server, Certificates, and SP Metadata</h4><div class="Para" id="Par72">Most of Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC6">3-5</a></span> is standard Apache web server administration tasks. In this process we’re generating self-signed certificates, which we’re using for HTTPS and to generate the Shibboleth SP metadata. For a more secure deployment, each service should have a different private key. By convention, the certificates used by the SAML SP should be self-signed. The HTTPS certificate would normally be issued by a well-known certification authority, like GoDaddy, Verisign, or Let’s Encrypt.<div class="ProgramCode" id="PC6"><div class="LineGroup"><div class="FixedLine"># apt-get install apache2 libshibsp6 libapache2-mod-shib2</div><div class="FixedLine"># a2enmod cgi</div><div class="FixedLine"># a2enmod ssl</div><div class="FixedLine"># a2enmod shib2</div><div class="FixedLine"># a2ensite default-ssl</div><div class="FixedLine"># mkdir /etc/certs</div><div class="FixedLine"># cd /etc/certs</div><div class="FixedLine"># openssl genrsa -des3 -out squid.key 2048</div><div class="FixedLine"># openssl rsa -in squid.key -out squid.key.insecure</div><div class="FixedLine"># mv squid.key.insecure squid.key</div><div class="FixedLine"># openssl req -new -key squid.key -out squid.csr</div><div class="FixedLine"># openssl x509 -req -days 365 -in squid.csr -signkey squid.key -out squid.crt</div><div class="FixedLine"># shib-metagen -c /etc/certs/squid.crt -h squid.gluu.info &gt;</div><div class="FixedLine">/etc/shibboleth/squid-metadata.xml</div><div class="FixedLine"># service apache2 start</div><div class="FixedLine"># service shibd start</div><div class="FixedLine"># mkdir /var/www/html/sp</div><div class="FixedLine"># ln -s /etc/shibboleth/squid-metadata.xml /var/www/html/sp/metadata.xml</div><div class="FixedLine"># mkdir /var/www/protected</div><div class="FixedLine"># cd /var/www/protected</div><div class="FixedLine"># wget</div><div class="FixedLine">https://raw.githubusercontent.com/GluuFederation/community-edition-setup/master/sta tic/scripts/printHeaders.py</div><div class="FixedLine"># chmod ugo+x printHeaders.py<span id="ITerm80">
                        
                        
                        
                      </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-5</span><p class="SimplePara"><span id="ITerm81">Ubuntu 14.04 Apache2</span> and Shibboleth SP Installation</p></div></div></div></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar2"><h3 class="Heading">Note</h3><p class="Para" id="Par73">If you are not using DN, don’t forget to update all the hosts files—this includes the hosts file on the Gluu Server VM, your test web server VM, and your laptop (or workstation). The Windows host file location is <span class="EmphasisFontCategoryNonProportional ">c:\windows\system32\drivers\etc\hosts</span>. Run notepad.exe as Administrator!</p></div><div class="Para" id="Par74">For this sample, we are creating a public folder to publish the SP metadata. This will make it easier when we configure the IDP. There is nothing secret about SAML metadata—it contains a public certificate and information about public HTTPS endpoints. The nice thing about publishing your SP metadata is that the IDP can obtain an updated document automatically. In the last two lines of Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC6">3-5</a></span>, we’re creating a simple <span id="ITerm82">
                  <span class="EmphasisFontCategoryNonProportional ">cgi-script</span>
                  
                </span> that prints the environment variables, which will include the HTTP headers inserted by the Shibboleth SP. The script looks like Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC7">3-6</a></span>.<div class="ProgramCode" id="PC7"><div class="LineGroup"><div class="FixedLine">#!/usr/bin/python import os</div><div class="FixedLine">d = os.environ k = d.keys() k.sort()</div><div class="FixedLine">print "Content-type: text/html\n\n"</div></div><div class="LineGroup"><div class="FixedLine">print&nbsp;&nbsp;"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;printHeaders.cgi&lt;/TITLE&gt;&lt;/Head&gt;&lt;BODY&gt;" print "&lt;h1&gt;Environment Variables&lt;/H1&gt;"</div><div class="FixedLine">for item in k:</div><div class="FixedLine">print "&lt;p&gt;&lt;B&gt;%s&lt;/B&gt;: %s &lt;/p&gt;" % (item, d[item])</div><div class="FixedLine">print "&lt;/BODY&gt;&lt;/HTML&gt;"<span id="ITerm83">
                        
                        
                        
                      </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-6</span><p class="SimplePara">Python Script to Print <span id="ITerm84">Headers</span></p></div></div></div></div><div class="Para" id="Par75">To activate the Shibboleth SP, we need to update the Apache web server configuration: Edit the default site at <span class="EmphasisFontCategoryNonProportional ">/etc/apache2/sites-available/default-ssl.conf</span>, adding what’s shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC8">3-7</a></span> inside the <span class="EmphasisFontCategoryNonProportional ">VirtualHost</span> directive. Then restart the <span class="EmphasisFontCategoryNonProportional ">apache2</span> service.<div class="ProgramCode" id="PC8"><div class="LineGroup"><div class="FixedLine">ScriptAlias /protected/ /var/www/protected/</div><div class="FixedLine">&lt;Directory /var/www/protected&gt;</div><div class="FixedLine">&nbsp;&nbsp;AddHandler cgi-script .py</div><div class="FixedLine">&nbsp;&nbsp;Options +ExecCGI SSLOptions +StdEnvVars</div><div class="FixedLine">&nbsp;&nbsp;AuthType shibboleth</div><div class="FixedLine">&nbsp;&nbsp;ShibRequestSetting requireSession true</div><div class="FixedLine">&nbsp;&nbsp;Require valid-user</div><div class="FixedLine">&lt;/Directory&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-7</span><p class="SimplePara">Sample Apache2 Folder <span id="ITerm85">Protected</span> by the Shibboleth SP Apache plugin</p></div></div></div></div></section><section class="Section3 RenderAsSection3" id="Sec19"><h4 class="Heading">Configure the Shibboleth SP</h4><div class="Para" id="Par76">This is probably the hardest part. We need to finish updating our Shibboleth SP to customize it for our environment. We’ll want to <span id="ITerm86">update</span> a few files in <span class="EmphasisFontCategoryNonProportional ">/etc/shibboleth</span>:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par77"><span class="EmphasisFontCategoryNonProportional ">shibboleth2.xml</span> specifies our entityID, which IDP we’re using and some other important configuration options.</p></li><li><p class="Para" id="Par78"><span class="EmphasisFontCategoryNonProportional ">attribute-map.xml</span> defines which attributes we’re requesting from the IDP.</p></li><li><p class="Para" id="Par79">Get the metadata from your IDP.</p></li></ul></div></div><div class="Para" id="Par80">In the <span class="EmphasisFontCategoryNonProportional ">attribute-map.xml</span> file in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig10">3-10</a></span>, we are mapping four user attributes: <span class="EmphasisFontCategoryNonProportional ">givenName</span> (first name), <span class="EmphasisFontCategoryNonProportional ">sn</span> (last name), <span class="EmphasisFontCategoryNonProportional ">displayName</span>, and <span class="EmphasisFontCategoryNonProportional ">uid</span> (username). The <span class="EmphasisFontCategoryNonProportional ">name</span> attribute refers to the SAML name, and the <span class="EmphasisFontCategoryNonProportional ">id</span> refers to the attribute name that we’ll see in the HTTP headers. If you don’t know the right SAML name, you can check the SAML 2 URI value in the Gluu Server, in the Configuration/Attribute section (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig11">3-11</a></span>).<figure class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig10_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig10_HTML.jpg" style="height:10.4em" width="1716" height="416" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig10_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-10</span><p class="SimplePara">Sample <span id="ITerm87">attribute-map.xml</span></p></div></figcaption></figure><figure class="Figure" id="Fig11"><div class="MediaObject" id="MO11"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig11_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig11_HTML.jpg" style="height:26.62em" width="1725" height="1065" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig11_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-11</span><p class="SimplePara">Attribute configuration in the <span id="ITerm88">Gluu Server</span><span id="ITerm89">
                          
                          
                          
                        </span></p></div></figcaption></figure></div><div class="Para" id="Par81">Most of the Shibboleth configuration that you’ll need to edit is contained in the <span class="EmphasisFontCategoryNonProportional ">shibboleth2.xml</span> file<span id="ITerm90">
                  
                  
                  
                </span>. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig12">3-12</a></span> is a simple example. When you first install the Shibboleth SP, the <span class="EmphasisFontCategoryNonProportional ">/etc/shibboleth</span> folder will contain a file called <span class="EmphasisFontCategoryNonProportional ">example-shibboleth2.xml</span>. You can copy this file, so you don’t have to type in everything in everything by hand. There are a few things you’ll have to change.<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par82"><span id="ITerm91">
                        <span class="EmphasisFontCategoryNonProportional ">entityID</span>
                        
                        
                        
                      </span> is the identifier for your SP, and it should match the value of <span class="EmphasisFontCategoryNonProportional ">entityID</span> in your SP metadata that you generated when you ran <span class="EmphasisFontCategoryNonProportional ">shib-metagen</span>.</p></li><li><p class="Para" id="Par83">You should update the <span id="ITerm92">
                        <span class="EmphasisFontCategoryNonProportional ">Errors</span>
                        
                        
                        
                      </span> section with an email address that makes sense for support in case something goes wrong, and also update the copy of the help HTML file.</p></li><li><p class="Para" id="Par84">Note, you only specify two bindings in the sample configuration. We won’t need the others in the example, so just leave them out! You can also remove the SAML 1 configuration.</p></li><li><p class="Para" id="Par85">Leave the Status and Session endpoints. You can get to these by navigating to <span class="EmphasisFontCategoryNonProportional ">https:///Shibboleth.sso/Session</span> and <span class="EmphasisFontCategoryNonProportional ">https:///Shibboleth.sso/Status</span>. In production, you might want to remove these.</p></li><li><p class="Para" id="Par86">Leave the <span id="ITerm93">
                        <span class="EmphasisFontCategoryNonProportional ">AttributeChecker</span>
                        
                        
                        
                      </span> configuration. If <span class="EmphasisFontCategoryNonProportional ">uid</span> is not present, the SP will display an error.</p></li><li><p class="Para" id="Par87">We are just pointing at one IDP, albacore in our example. The <span id="ITerm94">
                        <span class="EmphasisFontCategoryNonProportional ">entityID</span>
                        
                        
                        
                      </span> of the IDP is specified in the <span class="EmphasisFontCategoryNonProportional ">SessionInitiator</span> element<span id="ITerm95">
                        
                        
                        
                      </span>, and the metadata for the IDP is specified in the <span class="EmphasisFontCategoryNonProportional ">MetadataProvider</span> element.</p></li><li><p class="Para" id="Par88">The private key and public certificate (that we created) for the SP is specified in the <span class="EmphasisFontCategoryNonProportional ">CredentialResolver</span> element<span id="ITerm96">
                        
                        
                        
                      </span>.</p></li><li><p class="Para" id="Par89">Change <span id="ITerm97">
                        <span class="EmphasisFontCategoryNonProportional ">handlerSSL</span>
                        
                        
                        
                      </span> to <span class="EmphasisFontCategoryNonProportional ">true</span>! You never want to use HTTP for any APIs. Always use HTTPS!</p></li></ul></div><figure class="Figure" id="Fig12"><div class="MediaObject" id="MO12"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig12_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig12_HTML.jpg" style="height:56.32em" width="1301" height="2253" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig12_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-12</span><p class="SimplePara">Sample <span id="ITerm98">shibboleth2.xml</span></p></div></figcaption></figure></div></section><section class="Section3 RenderAsSection3" id="Sec20"><h4 class="Heading">Configure the Gluu Server Shibboleth IDP</h4><div class="Para" id="Par90">Now we need to finish up by configuring the Shibboleth IDP in the <span id="ITerm99">Gluu Server</span> to trust the SP and to release certain attributes. Since we didn’t publish the <span id="ITerm100">metadata</span> anywhere on a public URL—which you can do if you want, just copy it into <span class="EmphasisFontCategoryNonProportional ">/var/www/html</span>—you’ll need to make sure you have a copy of <span class="EmphasisFontCategoryNonProportional ">squid-metadata.xml</span> sftp’d to your local workstation. Log in to the Gluu Server admin interface (oxTrust) and navigate to SAML/Outbound/Trust Relations. Then click the Add Relationship button. You’ll be presented with a form similar to the one in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig13">3-13</a></span>.<figure class="Figure" id="Fig13"><div class="MediaObject" id="MO13"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig13_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig13_HTML.jpg" style="height:30.08em" width="1725" height="1203" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig13_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-13</span><p class="SimplePara">Gluu Server <span id="ITerm101">SAML SP Trust Relationship</span> Sample</p></div></figcaption></figure></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar3"><h3 class="Heading">Note</h3><p class="Para" id="Par91">Always release the <span class="EmphasisFontCategoryNonProportional ">TransientID</span> attribute. It’s a non-persistent session identifier that doesn’t reveal any personal information about the subject. The default <span class="EmphasisFontCategoryNonProportional ">nameID</span> format in the Gluu Server uses this attribute, so releasing it will save you some headaches later on.</p></div><p class="Para" id="Par92">The Gluu Server supports four workflows for uploading the SP metadata: <span id="ITerm102">File</span>, URI, Federation, and Generate. In this case, we’re going to use File because you have downloaded the metadata to your workstation, and you’re going to upload it. <span id="ITerm103">URI</span> is actually a better mechanism in practice, because if the SP updates their metadata, it will be picked up automatically. However, because this is only a test with self-signed HTTPS certificates, the Gluu Server is going to complain, so let’s keep it simple.</p><p class="Para" id="Par93"><span id="ITerm104">Federation</span> is also a good mechanism if the SP is part of a federation that you trust (more on federations later!) <span id="ITerm105">Generate</span> is used when the website doesn’t have a SAML SP installed yet. It enables you to generate the <span class="EmphasisFontCategoryNonProportional ">shibboleth2.xml</span> configuration file on the Gluu Server and download a ZIP file that has instructions on how to install and configure the Shibboleth SP.</p><p class="Para" id="Par94">After naming the trust relationship and <span id="ITerm106">uploading</span> the metadata, you need to release attributes (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig14">3-14</a></span>). No attributes are released by default—you must explicitly configure all attributes about the person that you want to release to the website. These attributes should match those required by the website—release attributes on a need-to-know basis. It’s always a good idea to release the <span id="ITerm107">
                  <span class="EmphasisFontCategoryNonProportional ">TransientID</span>
                  
                  
                  
                </span> attribute, because the Gluu Server uses it as the default <span id="ITerm108">
                  <span class="EmphasisFontCategoryNonProportional ">NameID</span>
                  
                </span>. <span id="ITerm109">
                  <span class="EmphasisFontCategoryNonProportional ">TransientID</span>
                  
                </span> is a session identifier—it doesn’t release any personal or correlatable data about the subject. Finally, you’ll need to click on the Configure RP, which will display a modal window, where you’ll select the SAML2SSO profile. The Shibboleth SP supports signing and encryption.</p><div class="Para" id="Par95">In this example, I signed the whole response (instead of signing individual assertions). Signed means that integrity is assured from the IDP. As the response is not encrypted, if the response was intercepted, anyone could read it. Encryption happens with the public key of the SP, and since the SP’s private key is secret, even if an attacker intercepts the response, they would not be able to read the <span id="ITerm110">
                  <span class="EmphasisFontCategoryNonProportional ">nameID</span>
                  
                  
                  
                </span> or assertions that contain the meaningful data.<figure class="Figure" id="Fig14"><div class="MediaObject" id="MO14"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig14_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig14_HTML.jpg" style="height:25.3em" width="1418" height="1012" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig14_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-14</span><p class="SimplePara">Gluu Server <span id="ITerm111">SAML relying party options</span></p></div></figcaption></figure></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar4"><h3 class="Heading">Note</h3><p class="Para" id="Par96">If you get tired of waiting five minutes for the Shibboleth IDP to reload its configuration, you can make the polling interval shorter by editing <span class="EmphasisFontCategoryNonProportional ">/opt/idp/conf/service.xml</span>. Change it to one minute for all configurations you want to speed up: <span class="EmphasisFontCategoryNonProportional ">configurationResourcePollingFrequency="PT1M"</span>. You can tail <span class="EmphasisFontCategoryNonProportional ">-f /opt/idp/logs/idp-process.log</span> to see when the files get reloaded.</p></div><div class="Para" id="Par97">Once you click the <span id="ITerm112">Update button</span>, you’ll also have to “activate” the <span id="ITerm113">trust relationship</span>. This gives you an extra step to review the configuration or a way to take an SP out of service without removing its configuration. Also, you’ll need to wait five minutes for the Shibboleth IDP to <span id="ITerm114">reload</span> the new XML configuration that was rendered by oxTrust. So assuming everything is configured correctly, when you navigate to the url <span class="ExternalRef"><a href="https://squid.gluu.info/protected/printHeaders.py"><span class="RefSource">
                    <span class="EmphasisFontCategoryNonProportional ">https://squid.gluu.info/protected/printHeaders.py</span>
                  </span></a></span>, you should see a page that looks like Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC9">3-8</a></span>, which is slightly edited for brevity. Note that you can see the <span id="ITerm115">user claims</span> (<span class="EmphasisFontCategoryNonProportional ">uid</span>, <span class="EmphasisFontCategoryNonProportional ">givenName</span>, <span class="EmphasisFontCategoryNonProportional ">sn</span>, and <span class="EmphasisFontCategoryNonProportional ">displayName</span>) and also the <span class="EmphasisFontCategoryNonProportional ">REMOTE_USER</span> variable has been populated with the <span class="EmphasisFontCategoryNonProportional ">uid</span>. The SP sets a session cookie so it knows not to authenticate this user until its local session expires. Congratulations! You set up your first SAML protected website!<div class="ProgramCode" id="PC9"><div class="LineGroup"><div class="FixedLine">AUTH_TYPE: shibboleth</div><div class="FixedLine">CONTEXT_DOCUMENT_ROOT: /var/www/protected/</div><div class="FixedLine">DOCUMENT_ROOT: /var/www/html</div><div class="FixedLine">HTTPS: on</div><div class="FixedLine">HTTP_ACCEPT:</div><div class="FixedLine">text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div><div class="FixedLine">HTTP_CACHE_CONTROL: max-age=0</div><div class="FixedLine">HTTP_COOKIE:</div><div class="FixedLine">_shibsession_64656661756c7468747470733a2f2f73717569642e676c75752e696e666f2f73686962 626f6c657468=_e4359a17513cf53c447ab26455fe4e58</div><div class="FixedLine">HTTP_HOST: squid.gluu.info</div><div class="FixedLine">HTTP_REFERER:&nbsp;&nbsp;https://albacore.gluu.info/idp/profile/SAML2/Redirect/SSO</div><div class="FixedLine">REMOTE_ADDR: 192.168.88.1</div><div class="FixedLine">REMOTE_USER: admin</div><div class="FixedLine">REQUEST_METHOD: GET</div><div class="FixedLine">REQUEST_SCHEME: https</div><div class="FixedLine">SERVER_ADDR: 192.168.88.148</div><div class="FixedLine">SERVER_ADMIN: webmaster@localhost</div><div class="FixedLine">SERVER_NAME: squid.gluu.info</div><div class="FixedLine">SERVER_PORT: 443</div><div class="FixedLine">SERVER_PROTOCOL: HTTP/1.1</div><div class="FixedLine">Shib_Application_ID: default</div><div class="FixedLine">Shib_Authentication_Instant:&nbsp;&nbsp;2016-08-19T19:27:31.356Z</div><div class="FixedLine">Shib_Authentication_Method: urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</div><div class="FixedLine">Shib_AuthnContext_Class: urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</div><div class="FixedLine">Shib_Identity_Provider: https://albacore.gluu.info/idp/shibboleth</div><div class="FixedLine">Shib_Session_ID:&nbsp;&nbsp;_e4359a17513cf53c447ab26455fe4e58 Shib_Session_Index:&nbsp;&nbsp;_38903d1a68e40bbeab09ff376b49e414</div><div class="FixedLine">displayName: Default Admin User</div><div class="FixedLine">givenName: Admin</div><div class="FixedLine">sn: User uid: admin<span id="ITerm116">
                        
                        
                        
                      </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-8</span><p class="SimplePara">Sample Output from <span id="ITerm117">printHeaders.py</span></p></div></div></div></div></section></section></section><section class="Section1 RenderAsSection1" id="Sec21"><h2 class="Heading">simpleSAMLphp Service Provider Example</h2><div class="Para" id="Par98"><span id="ITerm118">
              <span class="EmphasisFontCategoryNonProportional ">simpleSAMLphp</span>
              
              
            </span> is one of the most popular platforms for SAML. Although <span class="EmphasisFontCategoryNonProportional ">simpleSAMLphp</span> has both IDP and SP components, in this example (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC10">3-9</a></span>), we’re just going to refer to the SP example and use the Gluu Server as our IDP. These instructions will be shown using Ubuntu 14.04, but similar processes exist for most popular Linux platforms.<div class="ProgramCode" id="PC10"><div class="LineGroup"><div class="FixedLine"># apt-get install php5</div><div class="FixedLine"># apt-get install simplesamlphp</div><div class="FixedLine"># apt-get install php5-mcrypt</div><div class="FixedLine"># php5enmod mcrypt</div><div class="FixedLine"># a2enconf simplesamlphp</div><div class="FixedLine"># service apache2 restart</div><div class="FixedLine"># grep adminpassword /var/lib/simplesamlphp/secrets.inc.php</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-9</span><p class="SimplePara">SimpleSAMLphp <span id="ITerm119">Installation</span></p></div></div></div></div><div class="FormalPara FormalParaRenderingStyle1 ParaTypeImportant" id="FPar5"><h3 class="Heading">Note</h3><p class="Para" id="Par99">This is the default password! You can use this to log in to the <span class="EmphasisFontCategoryNonProportional ">simpleSAMLphp</span> web interface.</p></div><div class="Para" id="Par100">
            <div class="ProgramCode" id="PC11"><div class="LineGroup"><div class="FixedLine">https://&lt;hostname&gt;/simplesamlphp</div></div></div>
          </div><div class="Para" id="Par101">The configuration is stored in <span class="EmphasisFontCategoryNonProportional ">/etc/SimpleSAMLphp</span>. The libraries are installed in <span class="EmphasisFontCategoryNonProportional ">/usr/share/simplesamlphp</span>. The Apache configuration looks like Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC12">3-10</a></span>.<div class="ProgramCode" id="PC12"><div class="LineGroup"><div class="FixedLine">Alias /simplesamlphp /usr/share/simplesamlphp/www</div><div class="FixedLine">&lt;Directory /usr/share/simplesamlphp/www/&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Order allow,deny</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;Allow from all</div><div class="FixedLine">&lt;/Directory&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-10</span><p class="SimplePara"><span id="ITerm120">Apache2 Configuration</span> for simpleSAMLphp</p></div></div></div></div><div class="Para" id="Par102">The first thing you want to do is edit <span class="EmphasisFontCategoryNonProportional ">/etc/simplesamplephp/config.php</span>. Update the <span id="ITerm121">
              <span class="EmphasisFontCategoryNonProportional ">technicalcontact_name</span>
              
            </span> and <span class="EmphasisFontCategoryNonProportional ">technicalcontact_email</span> to something that is appropriate for your organization. While you are testing, you may want to set the <span class="EmphasisFontCategoryNonProportional ">logging.level</span> to <span class="EmphasisFontCategoryNonProportional ">DEBUG</span>, but don’t forget to change it back to <span class="EmphasisFontCategoryNonProportional ">WARNING</span> or <span class="EmphasisFontCategoryNonProportional ">ERR</span> when you move into production. Then, we’ll need to specify the Gluu Server IDP as the default authentication source. Edit <span id="ITerm122">
              <span class="EmphasisFontCategoryNonProportional ">authsources</span>
              
              
            </span> and set the <span class="EmphasisFontCategoryNonProportional ">idp</span> value<span id="ITerm123">
              
              
            </span> (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC13">3-11</a></span>).<div class="ProgramCode" id="PC13"><div class="LineGroup"><div class="FixedLine">'idp' =&gt; 'https://albacore.gluu.info/idp/shibboleth',</div><div class="FixedLine">'default-sp' =&gt; array(</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'saml:SP',</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'privatekey' =&gt; '/etc/certs/squid.key',</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'certificate' =&gt; '/etc/certs/squid.crt')</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-11</span><p class="SimplePara">SimpleSAMLphp Sample <span id="ITerm124">Configuration</span></p></div></div></div></div><div class="Para" id="Par103">Next, we’re going to have to add the metadata of our IDP in the requisite PHP format. You can do this in the <span class="EmphasisFontCategoryNonProportional ">SimpleSAMLphp</span> web admin <span class="EmphasisFontCategoryNonProportional ">https:///simplesamlphp/admin/metadata-converter.php</span>. You can copy the XML for your Gluu Server Shibboleth IDP from the URL <span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/idp/shibboleth</span> and paste it into the form. If the conversion is successful, you should copy the content under the heading <span id="ITerm125">
              <span class="EmphasisFontCategoryNonProportional ">saml20-idp-remote</span>
              
              
            </span> and create a file <span class="EmphasisFontCategoryNonProportional ">/etc/simplesamlphp/metadata/saml20-idp-remote.php</span> inside a <span class="EmphasisFontCategoryNonProportional ">php</span> tag, like this:<div class="ProgramCode" id="PC14"><div class="LineGroup"><div class="FixedLine">&lt;?php</div><div class="FixedLine">{paste content in here}</div><div class="FixedLine">&nbsp;?&gt;</div></div></div></div><div class="Para" id="Par104">You’re done with your <span class="EmphasisFontCategoryNonProportional ">simpleSAMLphp</span> configuration, but now you need to configure the Gluu Server Shibboleth IDP to trust your SP. Download the <span id="ITerm126">metadata</span> to your laptop and use the File method described above. You can download the SP metadata at <span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/simplesamlphp/module.php/saml/sp/metadata.php/default-sp</span>, or you can copy it from the SimpleSAMLphp admin web interface in the federation section. Use the same configuration as detailed above for the Shibboleth SP. To test, the <span class="EmphasisFontCategoryNonProportional ">SimpleSAMLphp</span> <span id="ITerm127">web interface</span> has a test application under Authentication/Test configured authentication sources/default-sp. When you click on this link, it should send you to the Gluu Server IDP. After successful authentication, you should see a page like Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig15">3-15</a></span>. <span id="ITerm128">
              
              
            </span><figure class="Figure" id="Fig15"><div class="MediaObject" id="MO15"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig15_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig15_HTML.jpg" style="height:33.32em" width="1731" height="1333" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig15_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-15</span><p class="SimplePara">Sample output from simpleSAMLphp <span id="ITerm129">test default-sp</span></p></div></figcaption></figure></div></section><section class="Section1 RenderAsSection1" id="Sec22"><h2 class="Heading">Python-SAML</h2><p class="Para" id="Par105">The <span id="ITerm130">Python-SAML library</span>, written by Sixto Pablo Martín García of OneLogin and others in the community. The <span id="ITerm131">code</span> can be found in the Python package index at <span class="ExternalRef"><a href="https://pypi.python.org/pypi/python-saml"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional ">https://pypi.python.org/pypi/python-saml</span>
              </span></a></span>. This is a really cool library, and it ships with a few sample applications.</p><div class="Para" id="Par106">In this example, we use the Flask application. Like many things SAML, it was a little harder to get it working than anticipated, especially compared with the Shibboleth SP and <span class="EmphasisFontCategoryNonProportional ">SimpleSAMLphp</span> approaches. The first steps are to install the required packages, as shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC15">3-12</a></span>.<div class="ProgramCode" id="PC15"><div class="LineGroup"><div class="FixedLine"># apt-get install python-pip python-libxml2 libxml2-dev \</div><div class="FixedLine">&nbsp;&nbsp;libxmlsec1 libxmlsec1-dev python-dev python-virtualenv subversion</div><div class="FixedLine"># a2enmod proxy</div><div class="FixedLine"># a2enmod proxy_http</div><div class="FixedLine"># a2enmod rewrite</div><div class="FixedLine"># a2enmod headers</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-12</span><p class="SimplePara">Installing Python-SAML</p></div></div></div></div><div class="Para" id="Par107">The next steps involve setting up the local Python environment in my home directory (not root) (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC16">3-13</a></span>).<div class="ProgramCode" id="PC16"><div class="LineGroup"><div class="FixedLine">$ cd ~</div><div class="FixedLine">$ virtualenv env</div><div class="FixedLine">$ env/bin/pip install -r demo-flask/requirements.txt</div><div class="FixedLine">$ env/bin/pip install python-saml</div><div class="FixedLine">$ svn export https://github.com/onelogin/python-saml.git/trunk/demo-flask</div><div class="FixedLine">$ cd demo-flask/saml/certs</div><div class="FixedLine">$ openssl req -new -x509 -days 3652 -nodes -out sp.crt -keyout sp.key</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-13</span><p class="SimplePara">Python-SAML <span id="ITerm132">Installation</span> Continued</p></div></div></div></div><div class="Para" id="Par108">Now we’ve installed the SAML libraries and checked out the sample Flask application from <span id="ITerm133">GitHub</span>. The next step is to configure the application to use our test IDP (in this sample, <span class="EmphasisFontCategoryNonProportional ">albacore.gluu.info</span>). The first configuration file is called <span class="EmphasisFontCategoryNonProportional ">settings.json</span>, and it’s included in its entirety in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC17">3-14</a></span>. The use of <span class="EmphasisFontCategoryNonProportional ">strict=false—not</span> is something you’d want to do in production. The IDP certificate is truncated in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC17">3-14</a></span> for readability. It’s worth noting that I acquired this certificate from the IDP metadata page (<span class="EmphasisFontCategoryNonProportional ">https://&lt;hostname&gt;/idp/shibboleth</span>), but I removed all the spaces and line returns so that the certificate was transformed into one long string.<div class="ProgramCode" id="PC17"><div class="LineGroup"><div class="FixedLine">$ vi ~/demo-flask/saml/settings.json</div><div class="FixedLine">{</div><div class="FixedLine">"strict": false,</div><div class="FixedLine">"debug": true,</div><div class="FixedLine">"sp": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"entityId": "https://squid.gluu.info/python-saml-sp/metadata/",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"assertionConsumerService": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url": "https://squid.gluu.info/python-saml-sp/?acs",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"singleLogoutService": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url": "https://squid.gluu.info/python-saml-sp/?sls",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"NameIDFormat": "urn:oasis:names:tc:SAML:2.0:nameid-format:transient"</div><div class="FixedLine">},</div><div class="FixedLine">"idp": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"entityId": "https://albacore.gluu.info/idp/shibboleth",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"singleSignOnService": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url": "https://albacore.gluu.info/idp/profile/SAML2/Redirect/SSO",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"singleLogoutService": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url": "https://albacore.gluu.info//idp/logout.jsp",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"binding": "urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"x509cert": "MIIDZjCCA....jC8Ec/aQ=="</div><div class="FixedLine">}</div><div class="FixedLine">}<span id="ITerm134">
                    
                    
                  </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-14</span><p class="SimplePara">Python-SAML <span id="ITerm135">Configuration Settings</span></p></div></div></div></div><div class="Para" id="Par109">Although the <span id="ITerm136">Flask app</span> runs on port 8000, Apache2 is used to terminate SSL on port 443:<div class="ProgramCode" id="PC18"><div class="LineGroup"><div class="FixedLine"># vi /etc/apache2/sites-available/default-ssl.conf</div></div></div></div><div class="Para" id="Par110">Add the directives shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC19">3-15</a></span> and then restart Apache2.<div class="ProgramCode" id="PC19"><div class="LineGroup"><div class="FixedLine">ProxyPreserveHost On</div><div class="FixedLine">ProxyPass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/python-saml-sp/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://127.0.0.1:8000/</div><div class="FixedLine">ProxyPassReverse /python-saml-sp/&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://127.0.0.1:8000/</div><div class="FixedLine">ProxyPass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/python-saml-sp/metadata/&nbsp;&nbsp;&nbsp;http://127.0.0.1:8000/metadata/</div><div class="FixedLine">ProxyPassReverse /python-saml-sp/metadata/&nbsp;&nbsp;http://127.0.0.1:8000/metadata/</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-15</span><p class="SimplePara">Python-SAML Apache2 SSL <span id="ITerm137">Configuration</span></p></div></div></div></div><div class="Para" id="Par111">Added the directives shown in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC20">3-16</a></span>, right above the final <span class="EmphasisFontCategoryNonProportional ">&lt;/VirtualHost&gt;</span> tag there.<div class="ProgramCode" id="PC20"><div class="LineGroup"><div class="FixedLine"># vi /etc/apache2/sites-available/000-default.conf</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/attrs/ http://127.0.0.1:8000/attrs/</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ProxyPassReverse /attrs/ http://127.0.0.1:8000/attrs/</div></div><div class="LineGroup"><div class="FixedLine"># service apache2 restart</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-16</span><p class="SimplePara">Python-SAML <span id="ITerm138">Apache2 Default Configuration</span></p></div></div></div></div><div class="Para" id="Par112">Next, start the <span id="ITerm139">Flask server</span> (not as root):<div class="ProgramCode" id="PC21"><div class="LineGroup"><div class="FixedLine">$ cd ~/demo-flask</div><div class="FixedLine">$ ../env/bin/python index.py</div></div></div></div><div class="Para" id="Par113">Now, in your browser, navigate to view the metadata (note the trailing <span class="EmphasisFontCategoryNonProportional ">/</span>): <span class="ExternalRef"><a href="https://squid.gluu.info/python-saml-sp/metadata/"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional ">https://squid.gluu.info/python-saml-sp/metadata/</span>
              </span></a></span> and save the XML to your desktop (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig16">3-16</a></span>). Configure the Gluu Server by adding a trust relationship for the Flask website exactly as you configured for the Shibboleth SP and <span class="EmphasisFontCategoryNonProportional ">SimpleSAMLphp</span>—sign responses and encrypt assertions. Also don’t forget to release the TransientID. After waiting for the IDP to load the new configuration, click on the “Login and Access to attrs Page” link.<figure class="Figure" id="Fig16"><div class="MediaObject" id="MO16"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig16_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig16_HTML.jpg" style="height:11.55em" width="1725" height="462" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig16_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-16</span><p class="SimplePara">python-saml <span id="ITerm140">Flask SAML application login page</span></p></div></figcaption></figure></div><p class="Para" id="Par114">At this point, instead of displaying the expected login page, you should see an error page from the Shibboleth IDP. This happens a lot in SAML. In this next section, we describe our debugging procedure—being able to debug is essential to working with SAML. You need to look at the request and response, without which, you may never figure out what’s wrong.</p><div class="Para" id="Par115">First we turned up the logging on the IDP to <span class="EmphasisFontCategoryNonProportional ">TRACE</span> by editing <span class="EmphasisFontCategoryNonProportional ">/opt/idp/conf/logging.conf</span>:<div class="ProgramCode" id="PC22"><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;root level="TRACE"&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;appender-ref ref="IDP_PROCESS"/&gt;</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/root&gt;</div></div></div></div><div class="Para" id="Par116">Then we stared for a while at the request sent by the <span class="EmphasisFontCategoryNonProportional ">python-saml</span> library, which can be viewed in the <span class="EmphasisFontCategoryNonProportional ">/opt/idp/idp-process.log</span>. We compared the request to a request from the <span id="ITerm141">Shibboleth SP</span>, which was working well. What we noticed was that there was this little extra piece of XML in the request from <span class="EmphasisFontCategoryNonProportional ">python-saml</span> (see Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC23">3-17</a></span>).<div class="ProgramCode" id="PC23"><div class="LineGroup"><div class="FixedLine">&lt;samlp:RequestedAuthnContext Comparison="exact"&gt;</div><div class="FixedLine">&lt;saml:AuthnContextClassRef&gt;</div><div class="FixedLine">urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport</div><div class="FixedLine">&lt;/saml:AuthnContextClassRef&gt;</div><div class="FixedLine">&lt;/samlp:RequestedAuthnContext&gt;</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-17</span><p class="SimplePara">Python-SAML <span id="ITerm142">Debug Delta</span></p></div></div></div></div><div class="Para" id="Par117">We searched the Internet for <span class="EmphasisFontCategoryNonProportional ">AuthnContextClassRef python-saml</span> and saw that there was an interesting line of code that looked like this in the <span class="EmphasisFontCategoryNonProportional ">authn_request.py</span> module:<div class="ProgramCode" id="PC24"><div class="LineGroup"><div class="FixedLine">if 'requestedAuthnContext' in security.keys() and security['requestedAuthnContext'] is not False:</div></div></div></div><div class="Para" id="Par118">We didn’t see any documentation for the <span class="EmphasisFontCategoryNonProportional ">requestedAuthnContext</span> property, but I added it to the <span class="EmphasisFontCategoryNonProportional ">advanced_settings.json</span> file<span id="ITerm143">
              
              
            </span>, included in Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#PC25">3-18</a></span>.<div class="ProgramCode" id="PC25"><div class="LineGroup"><div class="FixedLine">$ vi demo-flask/saml/advanced_settings.json</div><div class="FixedLine">{</div><div class="FixedLine">"security": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"requestedAuthnContext": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"nameIdEncrypted": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"authnRequestsSigned": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"logoutRequestSigned": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"logoutResponseSigned": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"signMetadata": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"wantMessagesSigned": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"wantAssertionsSigned": true,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"wantNameId" : false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"wantNameIdEncrypted": false,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"wantAssertionsEncrypted": true,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"signatureAlgorithm": "http://www.w3.org/2000/09/xmldsig#rsa-sha1"</div><div class="FixedLine">},</div><div class="FixedLine">"contactPerson": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"technical": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"givenName": "technical_name",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"emailAddress": "technical@example.com"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"support": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"givenName": "support_name",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"emailAddress": "support@example.com"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">},</div><div class="FixedLine">"organization": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;"en-US": {</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name": "sp_test",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"displayname": "SP test",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"url": "http://sp.example.com"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">}</div><div class="FixedLine">}<span id="ITerm144">
                    
                    
                  </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 3-18</span><p class="SimplePara">Adding a Fix for Python-SAML Settings</p></div></div></div></div><div class="Para" id="Par119">And voilà, it worked! At least, we got the login page of the Shibboleth IDP. After authenticating as the admin user, we were re-directed to the attrs page, as pictured in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig17">3-17</a></span>.<figure class="Figure" id="Fig17"><div class="MediaObject" id="MO17"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig17_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig17_HTML.jpg" style="height:22.42em" width="1725" height="897" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig17_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-17</span><p class="SimplePara">Sample output from the python-saml <span id="ITerm145">Flask demo app attrs page</span></p></div></figcaption></figure></div><p class="Para" id="Par120">Things don’t always go as planned with SAML. Sometimes, the only way to figure out what is wrong is to be patient, read the XML requests and responses, read the log messages, use browser-based tools, tail <span class="EmphasisFontCategoryNonProportional ">-f</span> logs, and to do all the other stuff that developers and system administrators do when the unexpected happens.</p><section class="Section2 RenderAsSection2" id="Sec23"><h3 class="Heading">Inbound SAML</h3><p class="Para" id="Par121">When you’re working with SAML, it may be helpful to consider if the identity information is flowing into or out of your organization. Outbound SAML is more common. If your organization is using a SaaS <span id="ITerm146">service</span>, that is outbound—your organization manages the identity data and credentials of the person, who is accessing a third-party service. If you are accepting credentials from a partner or customer's IDP—that is inbound.</p><div class="Para" id="Par122">If you are the <span id="ITerm147">SaaS provider</span>, finding a solution for inbound SAML is critical. Some large customers will not do business with you otherwise. To drive down the cost of inbound SAML, you need to normalize the process of onboarding new customers. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig18">3-18</a></span> shows the difference between inbound and outbound SAML.<figure class="Figure" id="Fig18"><div class="MediaObject" id="MO18"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig18_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig18_HTML.jpg" style="height:28.62em" width="1181" height="1145" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig18_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-18</span><p class="SimplePara">Inbound <span id="ITerm148">vs. Outbound SAML</span></p></div></figcaption></figure></div><p class="Para" id="Par123">One of the challenges with inbound SAML is that if you are a SaaS provider, your customer will say “send your metadata”. They are expecting to get metadata for one SAML SP—not a whole bunch of them. But your “website” might actually consist of many websites, working together. A SAML proxy can help solve this problem. A proxy has both SP and IDP interfaces. Your customers use the one SP interface, while your internal websites use the IDP interface.</p><p class="Para" id="Par124">Another challenge with inbound SAML is how to provide a discovery service to solve the WAYF challenge—where are you from. In Step 1, we need to direct the person to a SAML IDP, but as the person has not been authenticated, we don’t know to which <span id="ITerm149">IDP</span> to send them! The easiest solution to this problem is to simply present the person with a list of available IDPs on a web page, and let the person select the right one. This solution works well if the IDPs are all public. For example, on the higher education website for Educause, this is exactly what’s done—which universities are members of Educause is not a secret. However, if the list of IDPs is your company’s customer list, you might not want to publish it in so public a manner, so you’ll need another strategy.</p><p class="Para" id="Par125">There are several strategies that <span id="ITerm150">SaaS providers</span> should perhaps consider. The first is to use the DNS name of the website to provide a hint to the person. For example, if we have a customer named Acme, and the landing page for this customer is <span class="ExternalRef"><a href="https://acme.saas.com/"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://acme.saas.com</span>
                </span></a></span>, we can figure out that any person visiting this site should be directed to Acme’s IDP. A similar strategy is to use the URL path. For example, Acme could also use the URL <span class="ExternalRef"><a href="https://www.saas.com/acme"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://www.saas.com/acme</span>
                </span></a></span>. Another strategy is to present a form and ask the person to enter some information about themselves, like their email address. Then look up this information in a database and redirect to the corresponding IDP. It would be helpful in this situation to also write a persistent cookie, so that when the person returns, you can remember the previous decision, unless they are using a new browser or erased all their cookies.</p><p class="Para" id="Par126">Inbound SAML is a <span id="ITerm151">challenging requirement</span>. There are many SAML IDP implementations your partners may use. In a worst case scenario, your partner may enlist your help configuring a SAML IDP you have never encountered. This process can be time consuming. It’s a good idea to normalize the process for onboarding IDPs, outlining all the legal and technical requirements, and implementing a standard testing process to make sure the connection is functioning properly.</p><p class="Para" id="Par127">Another issue you may have to consider is attribute mapping. What if the IDP releases attributes other than you are expecting, and you need to map these attributes to different internal attributes? Or another possibility is that the format of the value of the attribute doesn’t meet your requirements. It may be handy to have some capability to map the attributes and transform the <span id="ITerm152">values</span>.</p><div class="Para" id="Par128">The Gluu Server <span id="ITerm153">leverages</span> a component called <span id="ITerm154">Passport-js</span> to manage all kinds of inbound identity, including SAML, but also social login and OpenID Connect. Gluu’s recommended solution for inbound SAML adds another level of control into the solution. oxAuth is used to just-in-time create a record in the Gluu LDAP server for a person authenticated at an external IDP, using the attributes provided by the source IDP. An overview of this process is provided in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig19">3-19</a></span>.<figure class="Figure" id="Fig19"><div class="MediaObject" id="MO19"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig19_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig19_HTML.jpg" style="height:33.18em" width="1725" height="1327" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig19_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-19</span><p class="SimplePara">Overview of Gluu Server inbound SAML <span id="ITerm155">process</span></p></div></figcaption></figure></div><div class="Para" id="Par129">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#Fig20">3-20</a></span> provides a more detailed sequence diagram for inbound SAML using the Gluu Server. We're jumping ahead a little here, because the flow described in this section assumes the initial client is OpenID Connect. This is perfectly feasible—an organization may use OpenID Connect internally, but still have customers who have SAML IDPs. You can read about OAuth and OpenID Connect in the following chapters. But just go with it for now! Let’s go over each of the components and the authentication flow:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par130">The OpenID Connect client redirects the browser to the OpenID Connect Provider authorization endpoint (i.e., oxAuth), using a special base-64 encoded JSON object as the <span class="EmphasisFontCategoryNonProportional ">state</span> parameter. This solves the discovery (WAYF) challenge, so Passport-js knows where to send the unauthenticated browser session. For example, the state would look like this:</p></li></ul></div></div><div class="Para" id="Par131">
              <div class="ProgramCode" id="PC26"><div class="LineGroup"><div class="FixedLine">{"salt":"&lt;SALTVALUE&gt;",provider":"&lt;idp_name&gt;"}(base64-encoded)</div></div></div>
              <div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par132">If a session for the user doesn't exist yet, the browser is redirected to its oxAuth component for authentication, triggering the SAML Passport Authenticator script. The script either retrieves the target IDP's ID from the <span class="EmphasisFontCategoryNonProportional ">state</span> parameter or just presents an IDP selection page to the person.</p></li><li><p class="Para" id="Par133">The script arranges a call to the Gluu Passport-js server requesting a JWT token (used to control access to the Passport APIs) <span id="ITerm156">
                      
                      
                      
                    </span>.</p></li><li><p class="Para" id="Par134">Passport-js generates a JWT token and returns it back to oxAuth.</p></li><li><p class="Para" id="Par135">The oxAuth script constructs a URL, which Passport-js will need in order the delegate the authentication request to the selected IDP.</p></li><li><p class="Para" id="Par136">The script makes a request to Passport-js, including the JWT token, and initiates the authentication flow.</p></li><li><p class="Para" id="Par137">The Passport-js server redirects the person's browser to the specified external SAML IDP.</p></li><li><p class="Para" id="Par138">After successful authentication, the person's browser is redirected back to Passport-js, and their personal data (i.e., attributes) are passed within the SAML response to the Passport-js callback endpoint.</p></li><li><p class="Para" id="Par139">Passport-js redirects the user back to the oxAuth passport's custom interception script, submitting the user's attributes and access token to its <span class="EmphasisFontCategoryNonProportional ">passportpostlogin.xhtml</span> page.</p></li><li><p class="Para" id="Par140">The interception script verifies if an account exists in Gluu's LDAP server. If the account exists, then an oxAuth SSO session is created. If some of their attributes are changed, oxAuth updates the person's entry in LDAP.</p></li><li><p class="Para" id="Par141">If an account for the person does not exist, the oxAuth interception script adds an entry in the Gluu LDAP <span id="ITerm157">server</span>, and then creates the SSO session.</p></li></ul></div>
              <figure class="Figure" id="Fig20"><div class="MediaObject" id="MO20"><img alt="../images/425975_1_En_3_Chapter/425975_1_En_3_Fig20_HTML.jpg" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_3_Fig20_HTML.jpg" style="height:37.6em" width="1948" height="1504" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_3_Chapter/425975_1_En_3_Fig20_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 3-20</span><p class="SimplePara"><span id="ITerm158">Gluu Server</span> inbound SAML sequence diagram</p></div></figcaption></figure>
            </div><p class="Para" id="Par142">This solution may seem complex, but it is also modular. If you don’t need inbound identity, don’t install Passport-js. Likewise, if you don’t need outbound SAML, you don’t install the Shibboleth IDP.</p><p class="Para" id="Par143"><span id="ITerm159">oxAuth</span> is the place where business logic is defined for authentication, and inbound SAML is just one more possible way a person’s session might be validated. One of the great aspects of this solution is that it makes it possible for developers to use OpenID Connect internally and still leverage a partner’s SAML IDP.</p></section></section><section class="Section1 RenderAsSection1" id="Sec24"><h2 class="Heading">Conclusion</h2><p class="Para" id="Par144">Surely, much more can be said, many more examples can be presented, and many corner cases were left unexposed. But hopefully you’ll be ready to at least face the world of SAML with a little more confidence than when you started this chapter! The best way to learn is by doing. Try some of the examples and just keep at it. Simplify and then incrementally add more complexity. In the end, SAML usually works!</p></section></div><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_2_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">2.&nbsp;LDAP</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">4.&nbsp;OAuth</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          
          
            <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          

          
        
        

      </div>

    
    



        
      </div>
      
        


<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/u/preferences/">Settings</a></li>
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"agent":"","beacon":"bam.nr-data.net","applicationTime":188,"queueTime":2,"applicationID":"172641827,79672898,93931619","errorBeacon":"bam.nr-data.net","transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","licenseKey":"510f1a6865"}</script>

      
    
    <script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource" charset="utf-8"></script><script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1732687426968531");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1732687426968531&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/embed.js"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("set","agent","tmgoogletagmanager","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>
<script type="text/javascript" id="">window._pp=window._pp||[];if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_3_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/register/")_pp.targetUrl="/confirm/trial";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_3_Chapter.xhtml"=="/confirmation/nv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/subscribe/")_pp.targetUrl="/confirm/paid";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_3_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/signup/")_pp.targetUrl="/confirm/paid";_pp.siteId="2508";
_pp.siteUId="39a88cd5-54f5-4d61-aec6-7884d06dfba1";_pp.orderValue="undefined";_pp.orderId="undefined";(function(){var ppjs=document.createElement("script");ppjs.type="text/javascript";ppjs.async=true;ppjs.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.pbbl.co/r/"+_pp.siteId+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ppjs,s)})();</script>
    <script src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(1)" charset="utf-8"></script>
  

<div class="annotator-notice"></div><div class="font-flyout" style="top: 201.004px; left: 1583px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_3_Chapter.xhtml#">Reset</a>
</div>
</div><iframe id="nr-ext-rsicon" style="position: absolute; display: none; width: 50px; height: 50px; z-index: 2147483647; border-style: none; background: transparent;" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(5).html"></iframe><div></div><div></div><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.9621529290234432"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.1662230241655509" width="0" height="0" alt="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/0"></div><iframe height="0" width="0" frameborder="0" style="display: none;" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pp.html"></iframe><script type="text/javascript" async="" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/generic1585109433606.js" charset="UTF-8"></script><span></span><div style="display: none; visibility: hidden;"><script>(function(){if(null!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')&&void 0!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')){var a=!1;window.addEventListener("blur",function(){a&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"facebook",eventVal:0,nonInteraction:0})});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseover",function(){window.focus();
a=!0});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseout",function(){a=!1})}if(null!==document.querySelector("iframe.twitter-share-button")&&void 0!==document.querySelector("iframe.twitter-share-button")){var b=!1;window.addEventListener("blur",function(){b&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0})});document.querySelector("iframe.twitter-share-button").addEventListener("mouseover",
function(){window.focus();b=!0});document.querySelector("iframe.twitter-share-button").addEventListener("mouseout",function(){b=!1})}try{window.twttr=function(a,b,d){var c,e=a.getElementsByTagName(b)[0];if(!a.getElementById(d))return a=a.createElement(b),a.id=d,a.src="//platform.twitter.com/widgets.js",e.parentNode.insertBefore(a,e),window.twttr||(c={_e:[],ready:function(a){c._e.push(a)}})}(document,"script","twitter-wjs"),twttr.ready(function(a){a.events.bind("tweet",trackTwitter)})}catch(c){}})();
null!==document.querySelector(".IN-widget")&&void 0!==document.querySelector(".IN-widget")&&document.querySelector(".IN-widget").addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"linkedin",eventVal:0,nonInteraction:0})});
function trackTwitter(a){a&&(a.target&&"IFRAME"==a.target.nodeName&&(opt_target=extractParamFromUri(a.target.src,"url")),dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0}))}function extractParamFromUri(a,b){if(a&&(b=new RegExp("[\\?\x26#]"+b+"\x3d([^\x26#]*)"),a=b.exec(a),null!=a))return unescape(a[1])};</script></div><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./3. SAML - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widget_iframe.d0f13be8321eb432fba28cfc1c3351b1.html" title="Twitter settings iframe" style="display: none;"></iframe><div id="eJOY__extension_root" style="all: unset;"></div></body><div class="XTranslate"></div></html>