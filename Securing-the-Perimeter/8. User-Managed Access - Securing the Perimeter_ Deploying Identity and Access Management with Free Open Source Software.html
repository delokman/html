<!DOCTYPE html>
<!-- saved from url=(0111)https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml -->
<html class="js flexbox flexboxlegacy no-touch websqldatabase indexeddb history csscolumns csstransforms localstorage sessionstorage applicationcache svg inlinesvg zoom fa-events-icons-ready" lang="en" prefix="og: http://ogp.me/ns/# og:book: http://ogp.me/ns/book# og:video: http://ogp.me/ns/video#" itemscope="" itemtype="http://schema.org/Book http://schema.org/ItemPage" data-login-url="/accounts/login/" data-offline-url="/" data-url="/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml" data-csrf-cookie="csrfsafari" data-highlight-privacy="" data-user-id="6866040" data-user-uuid="39a88cd5-54f5-4d61-aec6-7884d06dfba1" data-username="vrad201" data-account-type="Trial" data-activated-trial-date="04/04/2020" data-archive="9781484226018" data-publishers="Apress" data-htmlfile-name="425975_1_En_8_Chapter.xhtml" data-epub-title="Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software" data-debug="0" data-testing="0" style=""><!--<![endif]--><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="author" content="Safari Books Online"><meta name="format-detection" content="telephone=no"><meta http-equiv="cleartype" content="on"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="apple-itunes-app" content="app-id=881697395, app-argument=safaridetail://9781484226018"><link rel="shortcut icon" href="https://www.oreilly.com/favicon.ico"><meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, maximum-scale=1.0"><meta property="twitter:account_id" content="4503599627559754"><script id="twitter-wjs" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widgets.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/cool-2.1.15.min.js"></script><script type="text/javascript" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/510f1a6865"></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/nr-1167.min.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ec.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/2508.js"></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/443792972845831" async=""></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/1732687426968531" async=""></script><script async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/fbevents.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/analytics.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/bat.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/insight.min.js"></script><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f.txt"></script><script crossorigin="anonymous" integrity="sha256-4ZnAISy2+rbOaVUOBtJrqxBTrJ5kctu9r4qBJBt0Oo0=" type="text/javascript" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/appcues.main.40a6b605d29a66b083aa6d74c07bb73eae19e31b.js" async=""></script><script async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/gtm.js"></script><script type="text/javascript">(window.NREUM||(NREUM={})).loader_config={licenseKey:"510f1a6865",applicationID:"172641827"};window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var i=n[t]={exports:{}};e[t][0].call(i.exports,function(n){var i=e[t][1][n];return r(i||n)},i,i.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<t.length;i++)r(t[i]);return r}({1:[function(e,n,t){function r(){}function i(e,n,t){return function(){return o(e,[u.now()].concat(f(arguments)),n?null:this,t),n?void 0:this}}var o=e("handle"),a=e(4),f=e(5),c=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var p=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],l="api-",d=l+"ixn-";a(p,function(e,n){s[n]=i(l+n,!0,"api")}),s.addPageAction=i(l+"addPageAction",!0),s.setCurrentRouteName=i(l+"routeName",!0),n.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,n){var t={},r=this,i="function"==typeof n;return o(d+"tracer",[u.now(),e,t],r),function(){if(c.emit((i?"":"no-")+"fn-start",[u.now(),r,i],t),i)try{return n.apply(this,arguments)}catch(e){throw c.emit("fn-err",[arguments,this,e],t),e}finally{c.emit("fn-end",[u.now()],t)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,n){m[n]=i(d+n)}),newrelic.noticeError=function(e,n){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,n])}},{}],2:[function(e,n,t){function r(e,n){var t=e.getEntries();t.forEach(function(e){"first-paint"===e.name?c("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&c("timing",["fcp",Math.floor(e.startTime)])})}function i(e,n){var t=e.getEntries();t.length>0&&c("lcp",[t[t.length-1]])}function o(e){if(e instanceof s&&!l){var n,t=Math.round(e.timeStamp);n=t>1e12?Date.now()-t:u.now()-t,l=!0,c("timing",["fi",t,{type:e.type,fid:n}])}}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var a,f,c=e("handle"),u=e("loader"),s=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){a=new PerformanceObserver(r),f=new PerformanceObserver(i);try{a.observe({entryTypes:["paint"]}),f.observe({entryTypes:["largest-contentful-paint"]})}catch(p){}}if("addEventListener"in document){var l=!1,d=["click","keydown","mousedown","pointerdown","touchstart"];d.forEach(function(e){document.addEventListener(e,o,!1)})}}},{}],3:[function(e,n,t){function r(e,n){if(!i)return!1;if(e!==i)return!1;if(!n)return!0;if(!o)return!1;for(var t=o.split("."),r=n.split("."),a=0;a<r.length;a++)if(r[a]!==t[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var f=navigator.userAgent,c=f.match(a);c&&f.indexOf("Chrome")===-1&&f.indexOf("Chromium")===-1&&(i="Safari",o=c[1])}n.exports={agent:i,version:o,match:r}},{}],4:[function(e,n,t){function r(e,n){var t=[],r="",o=0;for(r in e)i.call(e,r)&&(t[o]=n(r,e[r]),o+=1);return t}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],5:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(i<0?0:i);++r<i;)o[r]=e[n+r];return o}n.exports=r},{}],6:[function(e,n,t){n.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,n,t){function r(){}function i(e){function n(e){return e&&e instanceof r?e:e?c(e,f,o):o()}function t(t,r,i,o){if(!l.aborted||o){e&&e(t,r,i);for(var a=n(i),f=v(t),c=f.length,u=0;u<c;u++)f[u].apply(a,r);var p=s[y[t]];return p&&p.push([b,t,r,a]),a}}function d(e,n){h[e]=v(e).concat(n)}function m(e,n){var t=h[e];if(t)for(var r=0;r<t.length;r++)t[r]===n&&t.splice(r,1)}function v(e){return h[e]||[]}function g(e){return p[e]=p[e]||i(t)}function w(e,n){u(e,function(e,t){n=n||"feature",y[t]=n,n in s||(s[n]=[])})}var h={},y={},b={on:d,addEventListener:d,removeEventListener:m,emit:t,get:g,listeners:v,context:n,buffer:w,abort:a,aborted:!1};return b}function o(){return new r}function a(){(s.api||s.feature)&&(l.aborted=!0,s=l.backlog={})}var f="nr@context",c=e("gos"),u=e(4),s={},p={},l=n.exports=i();l.backlog=s},{}],gos:[function(e,n,t){function r(e,n,t){if(i.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[n]=r,r}var i=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){i.buffer([e],r),i.emit(e,n,t)}var i=e("ee").get("handle");n.exports=r,r.ee=i},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!x++){var e=E.info=NREUM.info,n=d.getElementsByTagName("script")[0];if(setTimeout(s.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&n))return s.abort();u(y,function(n,t){e[n]||(e[n]=t)}),c("mark",["onload",a()+E.offset],null,"api");var t=d.createElement("script");t.src="https://"+e.agent,n.parentNode.insertBefore(t,n)}}function i(){"complete"===d.readyState&&o()}function o(){c("mark",["domContent",a()+E.offset],null,"api")}function a(){return O.exists&&performance.now?Math.round(performance.now()):(f=Math.max((new Date).getTime(),f))-E.offset}var f=(new Date).getTime(),c=e("handle"),u=e(4),s=e("ee"),p=e(3),l=window,d=l.document,m="addEventListener",v="attachEvent",g=l.XMLHttpRequest,w=g&&g.prototype;NREUM.o={ST:setTimeout,SI:l.setImmediate,CT:clearTimeout,XHR:g,REQ:l.Request,EV:l.Event,PR:l.Promise,MO:l.MutationObserver};var h=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1167.min.js"},b=g&&w&&w[m]&&!/CriOS/.test(navigator.userAgent),E=n.exports={offset:f,now:a,origin:h,features:{},xhrWrappable:b,userAgent:p};e(1),e(2),d[m]?(d[m]("DOMContentLoaded",o,!1),l[m]("load",r,!1)):(d[v]("onreadystatechange",i),l[v]("onload",r)),c("mark",["firstbyte",f],null,"api");var x=0,O=e(6)},{}],"wrap-function":[function(e,n,t){function r(e){return!(e&&e instanceof Function&&e.apply&&!e[a])}var i=e("ee"),o=e(5),a="nr@original",f=Object.prototype.hasOwnProperty,c=!1;n.exports=function(e,n){function t(e,n,t,i){function nrWrapper(){var r,a,f,c;try{a=this,r=o(arguments),f="function"==typeof t?t(r,a):t||{}}catch(u){l([u,"",[r,a,i],f])}s(n+"start",[r,a,i],f);try{return c=e.apply(a,r)}catch(p){throw s(n+"err",[r,a,p],f),p}finally{s(n+"end",[r,a,c],f)}}return r(e)?e:(n||(n=""),nrWrapper[a]=e,p(e,nrWrapper),nrWrapper)}function u(e,n,i,o){i||(i="");var a,f,c,u="-"===i.charAt(0);for(c=0;c<n.length;c++)f=n[c],a=e[f],r(a)||(e[f]=t(a,u?f+i:i,o,f))}function s(t,r,i){if(!c||n){var o=c;c=!0;try{e.emit(t,r,i,n)}catch(a){l([a,t,r,i])}c=o}}function p(e,n){if(Object.defineProperty&&Object.keys)try{var t=Object.keys(e);return t.forEach(function(t){Object.defineProperty(n,t,{get:function(){return e[t]},set:function(n){return e[t]=n,n}})}),n}catch(r){l([r])}for(var i in e)f.call(e,i)&&(n[i]=e[i]);return n}function l(n){try{e.emit("internal-error",n)}catch(t){}}return e||(e=i),t.inPlace=u,t.flag=a,t}},{}]},{},["loader"]);</script><link rel="shortcut icon" href="https://learning.oreilly.com/favicon.ico" type="image/x-icon"><link href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/css" rel="stylesheet" type="text/css"><title>8.&nbsp;User-Managed Access - Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software</title><link rel="stylesheet" href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/output.8054605313ed.css" type="text/css"><link rel="stylesheet" type="text/css" href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/annotator.e3b0c44298fc.css"><link rel="stylesheet" href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/font-awesome.min.css"><style type="text/css" title="ibis-book">
    #sbo-rt-content a{text-decoration:none}#sbo-rt-content a:link,#sbo-rt-content a:active{color:#0176C3}#sbo-rt-content a:visited{color:#5f5f5f}#sbo-rt-content div{font-family:"Cambria","Minion Pro","Times New Roman","Times",serif;}#sbo-rt-content img{border:0;vertical-align:middle}#sbo-rt-content video{display:block;margin-top:1em;max-width:100%;text-indent:0;width:100%}#sbo-rt-content p{margin:0}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading,#sbo-rt-content .ContextInformation,#sbo-rt-content .MainTitleSection,#sbo-rt-content .PartTitle,#sbo-rt-content .SeriesTitle,#sbo-rt-content .SeriesSubTitle,#sbo-rt-content .SubSeriesTitle,#sbo-rt-content .SubSeriesSubTitle,#sbo-rt-content .BookTitle,#sbo-rt-content .BookSubTitle,#sbo-rt-content .ForewordTitle,#sbo-rt-content .PrefaceTitle,#sbo-rt-content .BookAcknowledgmentsTitle,#sbo-rt-content .BookNotesTitle{text-align:left !important}#sbo-rt-content .Heading,#sbo-rt-content .SubHeading{display:block;font-weight:bold}#sbo-rt-content .ArticleContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ArticleContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ArticleContextInformation .JournalTitle:after,#sbo-rt-content .ArticleContextInformation .JournalSubTitle:after{content:", "}#sbo-rt-content .ArticleCopyright{display:inline}#sbo-rt-content .ArticleCopyright .CopyrightComment,#sbo-rt-content .ArticleContextInformation .ArticleDOI{display:block}#sbo-rt-content .ChapterContextInformation{border-bottom:1px solid;margin-bottom:.8em;padding-bottom:.3em}#sbo-rt-content .ChapterContextInformation .ContextInformation{display:block;font-size:80%}#sbo-rt-content .ChapterCopyright .CopyrightComment{display:block}#sbo-rt-content .ChapterContextInformation .BookEdition:before{content:", "}#sbo-rt-content .ChapterContextInformation .ContextInformationAuthorEditorNames:after{content:", "}#sbo-rt-content .ChapterContextInformation .BookTitle{font-style:italic}#sbo-rt-content .ChapterContextInformation .SeriesTitle:before{content:", "}#sbo-rt-content .ChapterContextInformation .SeriesSubTitle:before{content:": "}#sbo-rt-content .ChapterContextInformation .ContextInformationVolumeNumber:before{content:" "}#sbo-rt-content .ChapterContextInformation .ChapterDOI{display:block}#sbo-rt-content .Categories{color:#666;margin-bottom:1em;margin-top:1em}#sbo-rt-content .ArticleCategory,#sbo-rt-content .ChapterCategory{font-size:1.2rem}#sbo-rt-content .ArticleSubCategory,#sbo-rt-content .ChapterSubCategory{font-size:1rem}#sbo-rt-content .MainTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1.2em}#sbo-rt-content .ArticleSuperTitle{font-size:1.2rem}#sbo-rt-content .MainTitleSection .ArticleTitle,#sbo-rt-content .ForeignLanguageHeader .ArticleTitle,#sbo-rt-content .MainTitleSection .ChapterTitle,#sbo-rt-content .ForeignLanguageHeader .ChapterTitle{font-size:1.73rem;margin:0}#sbo-rt-content .ArticleSubTitle,#sbo-rt-content .ChapterSubTitle{font-size:1.2rem;padding-top:.2em}#sbo-rt-content div>.AuthorGroup .AuthorNames,#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-size:100%;margin-bottom:1em;margin-top:1em;text-align:left !important}#sbo-rt-content .BookBackmatter>.AuthorGroup .AuthorNames{font-weight:bold}#sbo-rt-content .AuthorNames sup{font-size:70%}#sbo-rt-content .Prefix:after{content:" "}#sbo-rt-content .Suffix:before{content:" "}#sbo-rt-content .Degrees:before{content:", "}#sbo-rt-content .NativeName:before,#sbo-rt-content .Role:before{content:" ("}#sbo-rt-content .NativeName:after,#sbo-rt-content .Role:after{content:")"}#sbo-rt-content .AffiliationNumber{float:left;padding-right:.5em}#sbo-rt-content .AffiliationText{margin-left:2em}#sbo-rt-content .AffiliationHint{font-style:italic}#sbo-rt-content .AuthorNames .DeceasedSymbol:before{content:"†";padding-left:3px}#sbo-rt-content .AuthorNames .EqualContributionSymbol:before{content:"*";padding-left:3px}#sbo-rt-content .InstitutionMembers:before{content:" ("}#sbo-rt-content .InstitutionMembers:after{content:")"}#sbo-rt-content .AffiliationLegend .DeceasedSymbol:before{content:"†";display:inline-block;width:14px}#sbo-rt-content .AffiliationLegend .EqualContributionSymbol:before{content:"*";display:inline-block;width:14px}#sbo-rt-content .ClearBoth{clear:both;font-size:0;line-height:0 !important}#sbo-rt-content .Contact,#sbo-rt-content .AffiliationLegend{margin-bottom:1em;margin-top:1em}#sbo-rt-content .ContactIcon{background-image:url(envelope.png);background-repeat:no-repeat;background-size:contain;width:.8rem}#sbo-rt-content .AuthorNames .ContactIcon{display:inline-block}#sbo-rt-content .Contact .ContactIcon{float:left;margin-top:4px;margin-right:4px}#sbo-rt-content .ContactAuthorLine{padding-left:20px;font-weight:bold}#sbo-rt-content .ContactAdditionalLine{padding-left:20px}#sbo-rt-content .ContactType{font-weight:bold}#sbo-rt-content .ArticleHistory{margin-bottom:1em;margin-top:1em}#sbo-rt-content .HistoryLabel{font-weight:bold}#sbo-rt-content .History+.History{padding-left:.5em}#sbo-rt-content .ArticleOrChapterToc{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .ArticleOrChapterToc .HeadingNumber{font-weight:bold;padding-right:.3em}#sbo-rt-content .Abstract{margin-top:1em}#sbo-rt-content .Abstract>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbstractSection{margin-top:.3em}#sbo-rt-content .Heading+.AbstractSection{margin-top:0}#sbo-rt-content .AbstractSection>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin:0}#sbo-rt-content .KeywordGroup{margin-top:1em}#sbo-rt-content .KeywordGroup .Heading{display:inline;font-size:1em;margin:0;padding-right:.5em}#sbo-rt-content .Keyword+.Keyword:before{content:" – "}#sbo-rt-content .ArticleExternalID{margin-top:1em}#sbo-rt-content .ArticleExternalIDLabel{font-weight:bold}#sbo-rt-content .ForeignLanguageHeader{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ForeignLanguageTitleSection{font-weight:bold;margin-bottom:1.2em;margin-top:1rem}#sbo-rt-content .AbbreviationGroup{margin-top:1em}#sbo-rt-content .ForeignLanguageHeader+.AbbreviationGroup{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .AbbreviationGroup>.Heading{font-size:1em;margin:0}#sbo-rt-content .AbbreviationGroup .DefinitionList{margin-top:0;margin-bottom:0;padding-right:.1em;padding-top:.1em;padding-bottom:.1em}#sbo-rt-content .AbbreviationGroupSection>.Heading{font-size:1em;margin:0;padding-top:.2em}#sbo-rt-content .ArticleNote{margin-top:1em}#sbo-rt-content .ArticleNote>.Heading{font-size:1em;margin:0}#sbo-rt-content .ArticleNoteMotto{font-style:italic;margin-left:1.5em;margin-right:1.5em;text-align:right}#sbo-rt-content .Biography{display:block;margin-top:.8em;padding-bottom:0;width:100%}#sbo-rt-content .Loc .AuthorGroup .Biography{margin-top:0}#sbo-rt-content .Biography .FormalPara,#sbo-rt-content .Biography .BiographyFigure{display:block;margin-top:0;margin-bottom:0}#sbo-rt-content .Biography .BiographyFigure{float:right;margin-left:6px}#sbo-rt-content .Biography .Figure{border-bottom:none;margin-top:.5em;margin-bottom:0}#sbo-rt-content .Fulltext>.Para:first-of-type>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .BlockQuote{margin:1em 1.5em}#sbo-rt-content .BlockQuote>.Heading{font-size:1em;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .BlockQuote>.Para{text-indent:0}#sbo-rt-content .Heading+.Para>.BlockQuote:first-child{margin-top:0}#sbo-rt-content .Caption,#sbo-rt-content .TableFooter{display:block;text-align:left}#sbo-rt-content .TableFooter .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .Caption{margin-top:.5em}#sbo-rt-content .CaptionContent{font-size:90%}#sbo-rt-content .TableFooter{margin-top:1em}#sbo-rt-content .Table .Caption{margin-top:.5em}#sbo-rt-content .Figure .Caption,#sbo-rt-content video+.Caption{margin-bottom:1em}#sbo-rt-content .Table .Caption{margin-bottom:.5em}#sbo-rt-content .CaptionNumber{font-style:italic;font-weight:bold;padding-right:.6em}#sbo-rt-content .CaptionContent>span.Heading{display:inline}#sbo-rt-content .CaptionContent>span.SimplePara{display:block}#sbo-rt-content .CaptionContent>.SimplePara:first-child,#sbo-rt-content .CaptionContent>.CaptionNumber+.SimplePara,#sbo-rt-content .CaptionContent>a+.SimplePara{display:inline;margin-top:0}#sbo-rt-content .Credit>.SimplePara{text-indent:1.5em}#sbo-rt-content .DefinitionList{margin-top:1em;margin-bottom:1em;padding:.1em}#sbo-rt-content .DefinitionList>.Heading{font-size:1rem;margin:0;text-indent:0}#sbo-rt-content dl{margin:0}#sbo-rt-content .DefinitionList:after{content:"";clear:both;display:table}#sbo-rt-content .Term{clear:both;float:left;font-style:italic;padding-right:1em;text-indent:0;vertical-align:top}#sbo-rt-content .Description{padding-bottom:.3em;margin-left:0}#sbo-rt-content .Description .Para:first-child{text-indent:0}#sbo-rt-content .Heading+.Para>div.DefinitionList:first-child{margin-top:0}#sbo-rt-content .EmphasisTypeBold{font-weight:bold}#sbo-rt-content .EmphasisTypeItalic{font-style:italic}#sbo-rt-content .EmphasisTypeUnderline{text-decoration:underline}#sbo-rt-content .EmphasisTypeDoubleUnderline{border-bottom-style:double}#sbo-rt-content .EmphasisTypeSmallCaps{font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalic{font-weight:bold;font-style:italic}#sbo-rt-content .EmphasisTypeBoldUnderline{font-weight:bold;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldDoubleUnderline{font-weight:bold;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldSmallCaps{font-weight:bold;font-variant:small-caps}#sbo-rt-content .EmphasisTypeItalicUnderline{font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeItalicDoubleUnderline{font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeItalicSmallCaps{font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeBoldItalicUnderline{font-weight:bold;font-style:italic;text-decoration:underline}#sbo-rt-content .EmphasisTypeBoldItalicDoubleUnderline{font-weight:bold;font-style:italic;border-bottom-style:double}#sbo-rt-content .EmphasisTypeBoldItalicSmallCaps{font-weight:bold;font-style:italic;font-variant:small-caps}#sbo-rt-content .EmphasisTypeUnderlineSmallCaps{text-decoration:underline;font-variant:small-caps}#sbo-rt-content .EmphasisTypeDoubleUnderlineSmallCaps{border-bottom-style:double;font-variant:small-caps}#sbo-rt-content .EmphasisFontCategoryNonProportional{font-family:"Courier New",Courier,monospace}#sbo-rt-content :not(.ParaTypeProgramcode)>.EmphasisFontCategoryNonProportional{font-size:95%}#sbo-rt-content .EmphasisFontCategorySansSerif{font-family:"Arial","Helvetica",sans-serif;font-size:75%}#sbo-rt-content .EmphasisTypeStrikethrough{text-decoration:line-through}#sbo-rt-content .Equation{display:block;text-indent:0;vertical-align:middle}#sbo-rt-content .NumberedEquation{display:table;width:100%}#sbo-rt-content .NumberedEquation .EquationWrapper{display:table-row}#sbo-rt-content .NumberedEquation .EquationContent{display:table-cell}#sbo-rt-content .EquationContent{margin-top:.5em;margin-bottom:0;width:100%;text-align:center;text-indent:0;vertical-align:middle}#sbo-rt-content .EquationContent div{margin-top:.5em}#sbo-rt-content .EquationContent .MediaObject{margin-left:auto;margin-right:auto}#sbo-rt-content .EquationContent img{background:white;max-width:100%}#sbo-rt-content .EquationNumber{display:table-cell;margin-bottom:.4em;text-align:right;vertical-align:middle}#sbo-rt-content .EquationSourceXml{white-space:nowrap}#sbo-rt-content .InlineEquation img{background:white;vertical-align:text-top}#sbo-rt-content .Figure{margin-top:1em;margin-bottom:1em;margin-left:0;margin-right:0;text-align:center;text-indent:0}#sbo-rt-content .Figure img{height:auto;margin:0;max-width:100%;padding:2px}#sbo-rt-content .MediaObject{display:block;text-align:center}#sbo-rt-content .MediaObject:last-child{margin-bottom:1em}#sbo-rt-content .EquationContent>.MediaObject:last-child{margin-bottom:0}#sbo-rt-content .MediaObject+.MediaObject{margin-top:1em}#sbo-rt-content .FootnoteSection{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .FootnoteSection>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Footnote{clear:both;font-size:90%;text-align:left}#sbo-rt-content .FootnoteNumber{float:left;padding-right:.5em}#sbo-rt-content .FootnoteParas>div{margin-left:1em;margin-top:.3em}#sbo-rt-content .FormalPara{margin-top:1em;margin-bottom:1em}#sbo-rt-content .FormalPara .Heading{font-size:1em;margin:0}#sbo-rt-content .FormalParaRenderingStyle1>.Heading{display:inline;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle2>.Heading{display:inline;font-style:italic;font-weight:normal;padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle3>.Heading{padding-right:1em}#sbo-rt-content .FormalParaRenderingStyle1>p:first-of-type,#sbo-rt-content .FormalParaRenderingStyle2>p:first-of-type{display:inline}#sbo-rt-content .Heading+.FormalPara{margin-top:0}#sbo-rt-content .FormalPara .AuthorNames{font-style:italic;font-weight:normal !important}#sbo-rt-content .HeadingNumber{padding-right:.3em}#sbo-rt-content .RenderAsSection1>.Heading{font-size:1.44rem;margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .RenderAsSection2>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section2>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection3>.Heading{font-size:1.2rem;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section3>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection4>.Heading{font-size:100%;font-style:italic;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section4>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection5>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section5>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection6>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section6>.Heading:first-child{margin-top:0}#sbo-rt-content .RenderAsSection7>.Heading{font-size:100%;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .Heading+.Section7>.Heading:first-child{margin-top:0}#sbo-rt-content .Literal{font-family:"Courier New",Courier,monospace}#sbo-rt-content .OrderedList{margin-top:.5em;margin-bottom:.5em;text-indent:0;display:table}#sbo-rt-content .OrderedList>ol{margin:0;padding:0}#sbo-rt-content .OrderedList .Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0;display:table-caption}#sbo-rt-content .OrderedList .Heading+.ListItem{margin-top:0}#sbo-rt-content .Heading+.Para>div.OrderedList:first-child,#sbo-rt-content .Heading+.Para>div.OrderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .ListItem{margin-top:.5em;display:table-row}#sbo-rt-content .ItemNumber{padding-right:.5em;display:table-cell;vertical-align:top}#sbo-rt-content .ItemContent{display:table-cell}#sbo-rt-content .Fulltext>.Para:first-of-type{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .Fulltext>.Para~.Para:first-of-type{border-top:none;margin-top:0;padding-top:0}#sbo-rt-content .Para+.Para{margin-top:0;text-indent:1.5em}#sbo-rt-content .ParaTextBreak{margin-top:1em !important;text-indent:0 !important}#sbo-rt-content .ParaTypeExample{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:1em}#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeTip{border-left:4px solid;padding-left:.5em;margin-top:1em !important;margin-bottom:.5em}#sbo-rt-content .ParaTypeImportant{background:#bbb;border:2px solid;padding:.5em;margin-top:.8em !important;margin-bottom:.8em}#sbo-rt-content .ParaTypeImportant img{background-color:transparent}#sbo-rt-content .ParaTypeGeneticSequence,#sbo-rt-content .ParaTypeLiteral,#sbo-rt-content .ParaTypeProgramcode{font-family:"Courier New",Courier,monospace;font-size:95%}#sbo-rt-content .ParaTypeProgramcode{text-indent:0 !important;word-wrap:break-word}#sbo-rt-content .Para:not(.ParaTypeProgramcode)+.ParaTypeProgramcode{margin-top:.5em}#sbo-rt-content .ParaTypeProgramcode+.Para:not(.ParaTypeProgramcode){margin-top:.5em}#sbo-rt-content .ParaTypeLegalText{font-weight:bold;margin-left:1em;text-align:left}#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .ParaTypeSource{font-style:italic}#sbo-rt-content .ParaTypeTrailer,#sbo-rt-content .ParaTypeLearningGoals{font-weight:bold;padding-left:.5em;padding-right:.5em}#sbo-rt-content .ParaTypeWarning{font-weight:bold}#sbo-rt-content .ParaTypeExample,#sbo-rt-content .ParaTypeEyeCatcher,#sbo-rt-content .ParaTypeImportant,#sbo-rt-content .ParaTypeLegalText,#sbo-rt-content .ParaTypeOverview,#sbo-rt-content .ParaTypeTip,#sbo-rt-content .ParaTypeAnswers,#sbo-rt-content .ParaTypeQuestions,#sbo-rt-content .ParaTypeDefinition,#sbo-rt-content .ParaTypeProcedure,#sbo-rt-content .ParaTypeRecipe{text-indent:0 !important}#sbo-rt-content .Para+.ParaOneEmphasisChild{margin-top:1em;text-indent:0 !important}#sbo-rt-content .ParaOneEmphasisChild+.Para{text-indent:0 !important}#sbo-rt-content .PartNumber{display:block;font-size:1.73rem}#sbo-rt-content .PartTitle{display:block;font-size:1.73rem}#sbo-rt-content .SubPartTitle{display:block;font-size:1.44rem}#sbo-rt-content .ProgramCode{margin-top:1em;margin-bottom:1em}#sbo-rt-content .ProgramCode .FixedLine{font-family:"Courier New",Courier,monospace;font-size:95%;word-wrap:break-word}#sbo-rt-content .LineGroup+.LineGroup{margin-top:1em}#sbo-rt-content .Heading+.Para>.Quiz>.Heading{margin-top:0;}#sbo-rt-content .Quiz .Heading{font-size:1rem;margin-top:1em;margin-bottom:0;text-indent:0}#sbo-rt-content .QuizTask{display:table;margin-top:.5em;margin-bottom:.5em;width:100%;text-indent:0}#sbo-rt-content .QuizTask+.QuizTask{margin-top:1.5em}#sbo-rt-content .QuizItem{padding:.1em}#sbo-rt-content .QuizItemTypeSolution{border:2px solid #aaa;margin-top:.5em;padding:10px}#sbo-rt-content .QuizTask>input{display:none}#sbo-rt-content .QuizItem>label{color:#0176C3}#sbo-rt-content .QuizTask>input~.QuizItem>label+div{display:none}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label+div{display:table-cell}#sbo-rt-content .QuizTask>input~.QuizItem>label:after{content:"  »"}#sbo-rt-content .QuizTask>input:checked~.QuizItem>label:after{content:"  «"}#sbo-rt-content .QuizTask>input~.QuizItemTypeCorrectAnswer{background-color:transparent;transition:background .4s}#sbo-rt-content .QuizTask>input:checked~.QuizItemTypeCorrectAnswer{background-color:#EAF2DB;transition:background .4s}#sbo-rt-content .ReviewTitle{font-weight:bold;margin-top:1em;text-indent:0}#sbo-rt-content .Review .AuthorName+.AuthorName:before{content:", "}#sbo-rt-content .Review .ISBN,#sbo-rt-content .ReviewDataUnstructured{text-indent:0}#sbo-rt-content .Review .Para:first-of-type{margin-top:1em;text-indent:0}#sbo-rt-content .BookBackmatter>.Appendix:first-child>div:first-child{border-top:none !important;margin-top:0 !important;padding-top:0 !important}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child,#sbo-rt-content .BookNotesBody>.RenderAsSection1:first-child,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child,#sbo-rt-content .BookBackmatter>.Appendix:first-child>.RenderAsSection1:first-child{border-top:none;margin-top:0}#sbo-rt-content .BookAcknowledgmentsBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .ForewordBody>.RenderAsSection1:first-child>.Heading,#sbo-rt-content .PrefaceBody>.RenderAsSection1:first-child>.Heading{margin-top:0}#sbo-rt-content .Section1 .AuthorNames,#sbo-rt-content .Section2 .AuthorNames,#sbo-rt-content .Section3 .AuthorNames{font-weight:bold;margin-top:.3em;margin-bottom:.5em}#sbo-rt-content .Section1 .AuthorNames sup,#sbo-rt-content .Section2 .AuthorNames sup,#sbo-rt-content .Section3 .AuthorNames sup{font-size:70%}#sbo-rt-content .Section1 .Affiliations,#sbo-rt-content .Section2 .Affiliations,#sbo-rt-content .Section3 .Affiliations{margin-bottom:.5em}#sbo-rt-content .SectionTypeBackgroundInformation,#sbo-rt-content .SectionTypeExcurse{font-size:90%}#sbo-rt-content .SectionTypeBox,#sbo-rt-content .SectionTypeOverview,#sbo-rt-content .SectionTypeQuestionnaire{background-color:#BBB;margin-top:1em !important;padding:.5em}#sbo-rt-content .SectionTypeCaseStudy,#sbo-rt-content .SectionTypeExample,#sbo-rt-content .SectionTypeTip{border-left:4px solid;margin-top:1em !important;padding-top:0;padding-left:.5em;padding-right:.5em;padding-bottom:.5em}#sbo-rt-content .SectionTypeTrailer,#sbo-rt-content .SectionTypeLearningGoals{font-weight:bold;text-align:left}#sbo-rt-content .SectionTypeLegalText{font-weight:bold;margin-left:1em;text-align:left;text-indent:0 !important}#sbo-rt-content .SectionTypeProcedure,#sbo-rt-content .SectionTypeRecipe{border:2px solid;margin-top:.8em !important;margin-bottom:.8em;padding:.5em}#sbo-rt-content .SectionTypeWarning{font-weight:bold}#sbo-rt-content .RenderAsSection1{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .SectionTypeBox+.RenderAsSection1,#sbo-rt-content .SectionTypeOverview+.RenderAsSection1,#sbo-rt-content .SectionTypeQuestionnaire+.RenderAsSection1{border-top:0;}#sbo-rt-content .SectionTypeBox>.Heading,#sbo-rt-content .SectionTypeOverview>.Heading,#sbo-rt-content .SectionTypeQuestionnaire>.Heading,#sbo-rt-content .SectionTypeProcedure>.Heading,#sbo-rt-content .SectionTypeRecipe>.Heading{margin-top:0}#sbo-rt-content .InternalRefSidebarLexicon{background-image:url(sidebar.gif);background-repeat:no-repeat;font-weight:bold;padding-left:20px}#sbo-rt-content .SidebarDialog{border:1px solid;margin-left:1.5em;margin-top:.4em;margin-bottom:.2em;padding:.2em;text-indent:0}#sbo-rt-content .SidebarNumber{font-weight:bold;padding-right:.5em}#sbo-rt-content .SimplePara+.SimplePara{margin-top:0;text-indent:1.5em}#sbo-rt-content .Stack{display:inline-table;vertical-align:top}#sbo-rt-content .Stack sub{display:table-row}#sbo-rt-content .Stack sup{display:table-header-group}#sbo-rt-content table{border-collapse:collapse;font-size:80%;max-width:100%;text-indent:0}#sbo-rt-content table .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content table,#sbo-rt-content tr,#sbo-rt-content td{border-color:#bbb !important}#sbo-rt-content th{border-color:#999 !important}#sbo-rt-content thead{background:#bbb;color:#000 !important}#sbo-rt-content .Table{margin-bottom:1em;text-indent:0}#sbo-rt-content .Caption .Table{margin-bottom:0}#sbo-rt-content .Table img{height:auto;margin:0;max-width:100%}#sbo-rt-content th div{text-align:left}#sbo-rt-content td div,#sbo-rt-content td p,#sbo-rt-content th div,#sbo-rt-content th p{padding:.2em}#sbo-rt-content .Para+.Table,#sbo-rt-content .Para>.Table{margin-top:1em}#sbo-rt-content .SimplePara>.Table{margin-top:.5em}#sbo-rt-content thead,#sbo-rt-content tdiv{vertical-align:top}#sbo-rt-content tbody+tbody tr:first-child td{padding-top:1em}#sbo-rt-content .ExternalTable{background-color:#F8F8F8;border-top:1px solid;border-bottom:1px solid;margin-top:1em;margin-bottom:1em;padding-top:0;padding-bottom:0}#sbo-rt-content .ExternalTable .Table{padding-bottom:.3em}#sbo-rt-content .UnorderedList>.Heading{font-size:1em;font-style:italic;font-weight:normal;margin-top:0;margin-bottom:0}#sbo-rt-content .Heading+.Para>div.UnorderedList:first-child>.Heading{margin-top:0}#sbo-rt-content .UnorderedList li .Para:first-child{text-indent:0}#sbo-rt-content .Heading+ul{margin-top:0}#sbo-rt-content ul{margin-top:.5em;margin-bottom:.5em}#sbo-rt-content ul.UnorderedListMarkBullet{list-style-type:disc;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkBullet div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkBullet .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkNone{list-style-type:none;padding-left:1em}#sbo-rt-content ul.UnorderedListMarkNone div{margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkNone .Equation div{margin-bottom:0}#sbo-rt-content ul.UnorderedListMarkDash{list-style:none;padding-left:1.1em;text-indent:-.8em}#sbo-rt-content ul.UnorderedListMarkDash>li>*:first-child{display:inline}#sbo-rt-content ul.UnorderedListMarkDash div{text-indent:0;margin-top:.3em;margin-bottom:.3em}#sbo-rt-content ul.UnorderedListMarkDash>li:before{content:"– "}#sbo-rt-content .Verse{margin-top:1em;margin-bottom:1em}#sbo-rt-content .Verse .Heading{font-size:1rem;margin-top:1em;margin-bottom:1em;text-indent:0}#sbo-rt-content .Acknowledgments,#sbo-rt-content .AuthorContribution,#sbo-rt-content .Ethics{margin-top:1em}#sbo-rt-content .Acknowledgments>.Heading,#sbo-rt-content .AuthorContribution>.Heading,#sbo-rt-content .FundingInformation>.Heading,#sbo-rt-content .DataAvailability>.Heading,#sbo-rt-content .Ethics>.Heading{font-size:1.2rem;margin-bottom:0}#sbo-rt-content .License{font-size:.9rem !important;margin-top:1em;margin-bottom:1em}#sbo-rt-content .License>a:first-child img{float:left;height:1.9rem;padding-right:.5em;padding-bottom:0;padding-top:.2em}#sbo-rt-content .Glossary{border-top:1px solid #bbb;margin-top:1em;margin-bottom:1em;padding-top:.3em}#sbo-rt-content .Glossary .Headings{margin-top:.8em;margin-bottom:.8em}#sbo-rt-content .Glossary>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Glossary>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .GlossarySection .Headings{margin-top:.8em;margin-bottom:.4em}#sbo-rt-content .GlossarySection>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .GlossarySection>.Headings>.SubHeading{font-size:100%}#sbo-rt-content .GlossaryTerm{float:left;font-style:italic;padding-right:.5em}#sbo-rt-content .GlossarySeeLabel,#sbo-rt-content .GlossarySeeAlsoLabel{font-style:italic;padding-right:.3em}#sbo-rt-content .GlossaryDef{display:inline;margin-top:.3em}#sbo-rt-content .GlossaryDef>.SimplePara,#sbo-rt-content .GlossaryDef>.GlossarySee,#sbo-rt-content .GlossaryDef>.GlossarySeeAlso{display:block}#sbo-rt-content .GlossaryDef>:first-child{display:inline;margin-top:0;margin-left:0}#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySee,#sbo-rt-content .GlossaryDef .SimplePara+.GlossarySeeAlso{text-indent:0}#sbo-rt-content .GlossaryTerm{display:inline}#sbo-rt-content .GlossaryTerm+.GlossarySee,#sbo-rt-content .GlossaryTerm+.GlossarySeeAlso{display:inline}#sbo-rt-content .InternalRefGlossaryEntry{border-bottom:thin dotted;cursor:help}#sbo-rt-content .InternalRefGlossaryEntry:hover{border-bottom:none}#sbo-rt-content .InternalRefGlossaryEntry a:link,#sbo-rt-content .InternalRefGlossaryEntry a:active,#sbo-rt-content .InternalRefGlossaryEntry a:visited{color:inherit}#sbo-rt-content .InternalRefGlossaryEntry .InlineGlossaryDefinition{background:#fff;display:none;margin:0 3em 0 2em;padding:3px 3px 3px 6px;border-style:solid;border-color:#49546F;border-width:2px;border-radius:5px;box-shadow:5px 5px 5px #888}#sbo-rt-content .InternalRefGlossaryEntry:hover .InlineGlossaryDefinition{display:block;z-index:6}#sbo-rt-content .TocAppendix{border-top:1px solid #bbb;margin-top:1em;padding-top:1em}#sbo-rt-content .BookContextInformation+.Appendix>.TocAppendix:first-child{border-top:none;padding-top:0}#sbo-rt-content .TocAppendix .Headings{margin-bottom:.5em}#sbo-rt-content .TocAppendix>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .TocAppendix>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .TocEntry,#sbo-rt-content .TocPart,#sbo-rt-content .TocBack{margin-top:.5em;text-align:left !important}#sbo-rt-content .TocItem{font-weight:bold}#sbo-rt-content .TocPageNumber{display:none}#sbo-rt-content .TocAuthors{padding-left:1.5em}#sbo-rt-content .TocSection1,#sbo-rt-content .TocSection2,#sbo-rt-content .TocSection3,#sbo-rt-content .TocSection4,#sbo-rt-content .TocSection5,#sbo-rt-content .TocSection6,#sbo-rt-content .TocSection7{padding-left:1.5em}#sbo-rt-content .Index{border-top:1px solid #bbb;margin-top:1em;padding-top:.3em;margin-bottom:.8em}#sbo-rt-content .BookBackmatter>.Index:first-child{border-top:none;margin-top:0}#sbo-rt-content .Index .Headings{margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BookBackmatter>.Index:first-child>.Headings{margin-top:0}#sbo-rt-content .Index>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Index>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .IndexDiv .Headings{margin-top:.5em;margin-bottom:.1em}#sbo-rt-content .IndexDiv>.Headings>.Heading{font-size:1.2rem;margin:0}#sbo-rt-content .IndexDiv>.Headings>.SubHeading{font-size:100%;font-style:italic}#sbo-rt-content .IndexEntrySeeLabel{font-style:italic;margin-left:1em;padding-right:.3em}#sbo-rt-content .SecondaryIE{margin-left:1em}#sbo-rt-content .TertiaryIE{margin-left:2em}#sbo-rt-content .ChangeHistory{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .ChangeHistory>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.3em}#sbo-rt-content .ChangeDate{font-weight:bold;padding-right:1em}#sbo-rt-content .ChangeDetails{display:inline}#sbo-rt-content .ChangeDetails>p:first-of-type{display:inline}#sbo-rt-content .Bibliography{border-top:1px solid #bbb;margin-top:1em}#sbo-rt-content .BookBackmatter>.Bibliography:first-child{border-top:none}#sbo-rt-content .Bibliography>.Heading{font-size:1.44rem;margin-top:.8em;margin-bottom:.1em}#sbo-rt-content .BibliographyWrapper{display:table;margin:0;padding:0}#sbo-rt-content .Bibliography>.BibliographyWrapper{padding-top:1em}#sbo-rt-content .Bibliography>.Heading+.BibliographyWrapper{padding-top:0}#sbo-rt-content .BibSection>.Heading{font-size:1.2rem;margin-top:.8em;margin-bottom:.2em}#sbo-rt-content .BibliographyWrapper>.BibSection:first-child>.Heading:first-child{margin-top:.3em}#sbo-rt-content .Citation{display:table-row;font-size:90%}#sbo-rt-content .CitationNumber{display:table-cell}#sbo-rt-content .CitationNumber+.CitationContent{padding-left:.5em;text-align:left}#sbo-rt-content .CitationContent{padding-top:1em;display:table-cell}#sbo-rt-content .BibliographyWrapper>.Citation:first-child>.CitationContent{padding-top:0}#sbo-rt-content .Occurrences{display:block}#sbo-rt-content .Occurrence{margin-right:0}#sbo-rt-content .Occurrence:before{content:"["}#sbo-rt-content .Occurrence:after{content:"]"}#sbo-rt-content .Citation .ArticleTitle:before,#sbo-rt-content .Citation .ChapterTitle:before{content:" “";}#sbo-rt-content .Citation .ArticleTitle,#sbo-rt-content .Citation .ChapterTitle{display:inline}#sbo-rt-content .Citation .ArticleTitle:after{content:"”\ ";}#sbo-rt-content .Citation .ChapterTitle:after{content:"”\ In: ";}#sbo-rt-content .Citation .Year:before{content:" ("}#sbo-rt-content .Citation .Year:after{content:") "}#sbo-rt-content .Citation .JournalTitle:after{content:" "}#sbo-rt-content .Citation .VolumeID:after{content:":"}#sbo-rt-content .BibChapter .FirstPage:before,#sbo-rt-content .BibBook .FirstPage:before{content:", pp "}#sbo-rt-content .Citation .FirstPage+.LastPage:before{content:"–";}#sbo-rt-content .Citation .BookTitle:after,#sbo-rt-content .Citation .BibEditorName:after,#sbo-rt-content .Citation .EditionNumber:after,#sbo-rt-content .Citation .PublisherName:after{content:", "}#sbo-rt-content .BibComments{display:block}#sbo-rt-content .CoverFigure img{margin:0 auto 6px;width:100%;max-width:480px;height:auto}#sbo-rt-content .SeriesTitlePage{padding-bottom:1.5em;padding-top:1em}#sbo-rt-content .SeriesTitlePage .VolumeNumber{font-size:1.44rem}#sbo-rt-content .SeriesTitlePage span.SeriesTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SeriesSubTitle{display:block;font-size:1.44rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .SubSeriesTitle{display:block;font-size:1.44rem;font-weight:bold;margin-top:.5em}#sbo-rt-content .SeriesTitlePage .SubSeriesSubTitle{display:block;font-size:1.2rem;font-weight:bold}#sbo-rt-content .SeriesTitlePage .CollaboratorDesignation{display:block;font-weight:bold;padding-top:3em}#sbo-rt-content .SeriesTitlePage .Collaborators{display:block}#sbo-rt-content .SeriesTitlePage .AffiliationText{font-style:italic;margin-left:0}#sbo-rt-content .SeriesTitlePage .Affiliation+.CollaboratorName{display:inline-block;margin-top:1em}#sbo-rt-content .SeriesInformationText{padding-top:3em}#sbo-rt-content .BookTitlePage{padding-top:1em}#sbo-rt-content .BookTitlePageAfterSeriesTitlePage{border-top:1px solid #bbb;page-break-before:always}#sbo-rt-content .BookContextInformation+.BookTitlePage{border-top:none;padding-top:0}#sbo-rt-content .BookTitlePage .BookEditors,#sbo-rt-content .BookTitlePage .BookAuthors,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{text-align:left !important}#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup{margin-top:1em}#sbo-rt-content .BookTitlePage .BookEditorGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookEditorInChiefGroup .CollaboratorDesignation,#sbo-rt-content .BookTitlePage .BookSectionEditorGroup .CollaboratorDesignation{font-style:italic}#sbo-rt-content .BookTitlePage .BookTitle{display:block;font-size:1.73rem;font-weight:bold;margin-top:1em}#sbo-rt-content .BookTitlePage .BookSubTitle{display:block;font-size:1.44rem;font-weight:bold;margin-bottom:.5em}#sbo-rt-content .BookTitlePage .BookEdition{display:block;font-size:1rem;font-weight:normal;margin-top:.5em}#sbo-rt-content .BookTitlePage .CollaboratorLine{padding-top:.5em}#sbo-rt-content .BookFeatureText{margin-top:.5em}#sbo-rt-content .BookTitlePage .PublisherLogo .Figure,#sbo-rt-content .BookTitlePage .PublisherImprintName{font-size:1.2rem;margin-top:4em;margin-bottom:1.5em;text-align:left}#sbo-rt-content .CopyrightPage{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .CopyrightPage .CollaboratorDesignation{display:block;font-style:italic;padding-bottom:.5em}#sbo-rt-content .CopyrightPageOriginators{padding-bottom:4em}#sbo-rt-content .CopyrightPage div+.CollaboratorDesignation{padding-top:2em}#sbo-rt-content .CopyrightPage .EditorGroup+.AuthorGroup{padding-top:2em}#sbo-rt-content .CopyrightPage .Author+.Author,#sbo-rt-content .CopyrightPage .Author+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.Author,#sbo-rt-content .CopyrightPage .InstitutionalAuthor+.InstitutionalAuthor,#sbo-rt-content .CopyrightPage .Editor+.Editor,#sbo-rt-content .CopyrightPage .Editor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.Editor,#sbo-rt-content .CopyrightPage .InstitutionalEditor+.InstitutionalEditor,#sbo-rt-content .CopyrightPage .Collaborator+.Collaborator{padding-top:1em}#sbo-rt-content .CopyrightPage .Affiliation{margin-top:0}#sbo-rt-content .CopyrightPage .AffiliationText{margin-left:0}#sbo-rt-content .CopyrightPage .CollaboratorLine{padding-top:1em}#sbo-rt-content .CopyrightPage .CollaboratorLineTranslatedBy{padding-top:2em}#sbo-rt-content .CopyrightPage .CollaboratorLine .CollaboratorDesignation{display:inline;font-style:normal}#sbo-rt-content .BookFrontmatter .CopyrightPage .ArticleNoteESMHint{border:none;padding-bottom:0;page-break-before:auto}#sbo-rt-content .CopyrightPageISBNs,#sbo-rt-content .CopyrightPageISSNs,#sbo-rt-content .SpringerLocationsLine,#sbo-rt-content .CatalogingInformation,#sbo-rt-content .MathematicsSubjectClassification,#sbo-rt-content .CopyrightLine,#sbo-rt-content .CopyrightPage .CopyrightComment,#sbo-rt-content .BookCopublishingInformation .SimplePara,#sbo-rt-content .CopyrightStandardText,#sbo-rt-content .TrademarkQualifierText,#sbo-rt-content .ProductLiability,#sbo-rt-content .LegalNotice,#sbo-rt-content .CoverDesigner,#sbo-rt-content .BookCoverFigureText,#sbo-rt-content .PaperInfo,#sbo-rt-content .SpringerReferenceLine{margin-top:1em}#sbo-rt-content .CopyrightComment+.CopyrightLine{margin-top:.5em}#sbo-rt-content .SeriesTitle+.CopyrightPageISBNs,#sbo-rt-content .SubSeriesTitle+.CopyrightPageISBNs{margin-top:0}#sbo-rt-content .CopyrightPage .SeriesTitle{display:block;margin-top:1em}#sbo-rt-content .SeriesTitle+.CopyrightPageISSNs,#sbo-rt-content .CopyrightPageISSNs+.SeriesTitle,#sbo-rt-content .CopyrightPageISSNs+.SubSeriesTitle{margin-top:0}#sbo-rt-content .CopyrightPagePrintISSN,#sbo-rt-content .CopyrightPagePrintISBN{display:inline-block;min-width:12em}#sbo-rt-content .SpringerReferenceLine .SimplePara+.SimplePara,#sbo-rt-content .BookCoverFigureText .SimplePara+.SimplePara,#sbo-rt-content .BookCopublishingInformation .SimplePara+.SimplePara{text-indent:0}#sbo-rt-content .CopyrightPagePrintISSN+.CopyrightPageElectronicISSN{padding-left:1.5em}#sbo-rt-content .CopyrightPagePrintISBN+.CopyrightPageElectronicISBN{padding-left:1.5em}#sbo-rt-content .CopyrightComment .SimplePara+.SimplePara{padding-top:.5em;text-indent:0}#sbo-rt-content .MathematicsSubjectClassificationCode+.MathematicsSubjectClassificationCode:before{content:", "}#sbo-rt-content .Endorsement{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Frontispiece{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Dedication{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Foreword{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter h1:first-child+.Foreword{border-top:none;padding-top:0;page-break-before:auto}#sbo-rt-content .ForewordTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Foreword .AuthorName{margin-top:.2em}#sbo-rt-content .Foreword .AuthorName,#sbo-rt-content .ForewordLocations,#sbo-rt-content .ForewordDate{font-weight:bold;text-align:right}#sbo-rt-content .ForewordLocation+.ForewordLocation:before{content:", "}#sbo-rt-content .Foreword .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Foreword .RenderAsSection2>.Heading,#sbo-rt-content .Foreword .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .Preface{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PrefaceTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .Preface .AuthorName{margin-top:.2em}#sbo-rt-content .Preface .AuthorName,#sbo-rt-content .PrefaceLocations,#sbo-rt-content .PrefaceDate{font-weight:bold;text-align:right}#sbo-rt-content .PrefaceLocation+.PrefaceLocation:before{content:", "}#sbo-rt-content .Preface .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .Preface .RenderAsSection2>.Heading,#sbo-rt-content .Preface .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookFrontmatterArticleNote{border-top:1px solid #bbb;margin-top:0;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .ArticleNote{padding-bottom:1em}#sbo-rt-content .PartFrontmatter h1:first-child+.ArticleNote{border-top:none;page-break-before:auto}#sbo-rt-content .BookFrontmatter .ArticleNote .Heading,#sbo-rt-content .PartFrontmatter .ArticleNote .Heading{font-size:1.44rem;font-style:normal;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookAcknowledgmentsTitle{font-size:1.44rem;font-weight:bold;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookAcknowledgments .AuthorName{font-weight:bold;margin-top:1em}#sbo-rt-content .BookAcknowledgments .RenderAsSection1>.Heading{font-size:1.2rem}#sbo-rt-content .BookAcknowledgments .RenderAsSection2>.Heading,#sbo-rt-content .BookAcknowledgments .RenderAsSection3>.Heading{font-size:100%}#sbo-rt-content .BookNotes{border-top:1px solid #bbb;padding-top:1em;padding-bottom:1em;page-break-before:always}#sbo-rt-content .BookNotesTitle{font-size:1.44rem;font-weight:bold;margin-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookNotes .AuthorName{font-weight:bold}#sbo-rt-content .BookFrontmatterAbbreviationGroup{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .PartFrontmatter .AbbreviationGroup{padding-bottom:1em;margin-top:1em}#sbo-rt-content .BookFrontmatter .AbbreviationGroup .Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroup .Heading{font-size:1.44rem;font-weight:bold;padding-top:1em;padding-bottom:.1em;page-break-after:avoid}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection>.Heading{font-size:1.2rem;padding-top:1em;padding-bottom:0}#sbo-rt-content .BookFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading,#sbo-rt-content .PartFrontmatter .AbbreviationGroupSection+.AbbreviationGroupSection>.Heading{padding-top:.5em}#sbo-rt-content .Toc{border-top:1px solid #bbb;margin-top:0;padding-bottom:1em;page-break-before:always}#sbo-rt-content .Toc .Headings{margin-bottom:.5em}#sbo-rt-content .Toc>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Toc>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .Loh{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loh .Headings{margin-bottom:.1em}#sbo-rt-content .Loh>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .Loh>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LohPageNumber{display:none}#sbo-rt-content .LocWithHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv{border-top:1px solid #bbb;padding-bottom:1em;padding-top:1em;page-break-before:always}#sbo-rt-content .Loc .Headings{margin-bottom:.1em}#sbo-rt-content .LocWithHeading>.Headings>.Heading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.Heading{font-size:1.44rem;margin:0}#sbo-rt-content .LocWithHeading>.Headings>.SubHeading,#sbo-rt-content .LocWithoutHeading>.LocBody>.LocDiv>.Headings>.SubHeading{font-size:1.2rem}#sbo-rt-content .LocWithHeading .LocDiv{margin-top:1em}#sbo-rt-content .LocWithHeading .LocDiv .Heading{font-size:1.2rem;margin-bottom:.1em}#sbo-rt-content .LocWithHeading .LocDiv .SubHeading{font-size:100%;font-style:italic;font-weight:normal}#sbo-rt-content .LocDiv .FormalPara .Heading{font-size:100%}#sbo-rt-content .Loc .AuthorGroup+.AuthorGroup,#sbo-rt-content .Loc .AuthorGroup+.EditorGroup,#sbo-rt-content .Loc .EditorGroup+.AuthorGroup,#sbo-rt-content .Loc .EditorGroup+.EditorGroup{margin-top:1em}#sbo-rt-content .Loc .Author,#sbo-rt-content .Loc .Editor,#sbo-rt-content .Loc .InstitutionalAuthor,#sbo-rt-content .Loc .InstitutionalEditor{font-weight:bold}#sbo-rt-content .Loc .AffiliationText{margin-left:0}#sbo-rt-content .Loc .Email+.Email:before{content:", "}#sbo-rt-content .Loc .Emails,#sbo-rt-content .Loc .URLs{display:inline}#sbo-rt-content .Loc .Emails+.URLs:before{content:", "}#sbo-rt-content .Loc .URL+.URL:before{content:", "}#sbo-rt-content .BookFrontmatterFootnoteSection{border-top:1px solid #bbb;margin-top:0;page-break-before:always}#sbo-rt-content .PartFrontmatter .FootnoteSection{border-top:none;margin-top:0}#sbo-rt-content .Colophon{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em;font-style:italic}#sbo-rt-content .ConferenceInfo{border-top:1px solid #bbb;margin-top:1em;padding-top:.8em}#sbo-rt-content .ConfEventAbbreviation,#sbo-rt-content .ConfNumber+.ConfSeriesName,#sbo-rt-content .ConfEventAbbreviation+.Year,#sbo-rt-content .ConfEventDateStart,#sbo-rt-content .ConfEventDateEnd{display:inline}#sbo-rt-content .ConfEventAbbreviation:after{content:" "}#sbo-rt-content .ConfEventLocation .City:after{content:", "}#sbo-rt-content .ConfEventDateEnd:before{content:"–"}#sbo-rt-content .ConfEventDateStart .Year:after,#sbo-rt-content .ConfEventDateStart .Month:after,#sbo-rt-content .ConfEventDateEnd .Year:after,#sbo-rt-content .ConfEventDateEnd .Month:after{content:"/"}#sbo-rt-content .ConfEventDate .Month:after{content:"/"}
    </style><script> // <![CDATA[
    var g = {
      position_cache: {
        
          "chapter": "/api/v1/book/9781484226018/chapter/html/425975_1_En_8_Chapter.xhtml",
          "book_id": "9781484226018",
          "chapter_uri": "html/425975_1_En_8_Chapter.xhtml",
          "position": 0,
          "user_uuid": "39a88cd5-54f5-4d61-aec6-7884d06dfba1",
          "next_chapter_uri": "/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_9_Chapter.xhtml"
        
      },
      title: "Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software",
      author_list: "Michael Schwartz, Maciej Machulak",
      format: "book",
      source: "application/epub+zip",
      is_system_book: true,
      is_public: false,
      loaded_from_server: true,
      allow_scripts: false,
      has_mathml: false
    };
    // ]]></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/modernizr.8e35451ddb64.js"></script><script>
    
      

      
        
          window.PUBLIC_ANNOTATIONS = true;
        
      

      window.MOBILE_PUBLIC_ANNOTATIONS = false;

    

    
      window.PRIVACY_CONTROL_OVERRIDE = false;
    

      window.PRIVACY_CONTROL_SWITCH = true;

      window.PUBLISHER_PAGES = true;

      window.SBO = {
        "constants": {
          "SITB_ENDPOINT": "/api/v2/sitb/",
          "SEARCH_SELECT_ENDPOINT": "https://learning.oreilly.com/api/v2/search/select/",
          "ENABLE_ONLINE_TRAINING": true
        }
      };
  </script><link rel="canonical" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml"><meta name="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_8 8. User-Managed Access Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   Today, you use ...!--end&gt;!--begin&gt; "><meta property="og:title" content="8. User-Managed Access"><meta itemprop="isPartOf" content="/library/view/securing-the-perimeter/9781484226018/"><meta itemprop="name" content="8. User-Managed Access"><meta property="og:url" itemprop="url" content="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml"><meta property="og:site_name" content="Safari"><meta property="og:image" itemprop="thumbnailUrl" content="https://learning.oreilly.com/library/cover/9781484226018/"><meta property="og:description" itemprop="description" content="© Michael Schwartz, Maciej Machulak 2018 Michael Schwartz and Maciej MachulakSecuring the Perimeterhttps://doi.org/10.1007/978-1-4842-2601-8_8 8. User-Managed Access Michael Schwartz1  and Maciej Machulak2 (1)Austin, TX, USA (2)London, UK   Today, you use ...!--end&gt;!--begin&gt; "><meta itemprop="inLanguage" content="en"><meta itemprop="publisher" content="Apress"><meta property="og:type" content="book"><meta property="og:book:isbn" itemprop="isbn" content="9781484226018"><meta property="og:book:author" itemprop="author" content="Michael Schwartz"><meta property="og:book:author" itemprop="author" content="Maciej Machulak"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@safari"><style type="text/css" id="font-styles" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-size: &lt;%= font_size %&gt; !important; }"></style><style type="text/css" id="font-family" data-template="#sbo-rt-content, #sbo-rt-content p, #sbo-rt-content div { font-family: &lt;%= font_family %&gt; !important; }"></style><style type="text/css" id="column-width" data-template="#sbo-rt-content { max-width: &lt;%= column_width %&gt;% !important; margin: 0 auto !important; }"></style><noscript><meta http-equiv="refresh" content="0; url=/library/no-js/" /></noscript><script>
    var dataLayer = window.dataLayer || [];

    
      window.medalliaVsgUserIdentifier = '39a88cd5-54f5-4d61-aec6-7884d06dfba1';
      dataLayer.push({userIdentifier: '39a88cd5-54f5-4d61-aec6-7884d06dfba1'});
      dataLayer.push({loggedIn: 'yes'});

      
        window.medalliaVsgAccountIdentifier = 'c1ff3208-121f-489a-a3cd-0b219a28ba6e';
        

        window.medalliaVsgIsIndividual = true;
        
          
          dataLayer.push({learningAccountType: 'free trial'});
          
        

        
      
    

    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5P4V6Z');
    (function () {
      var VERSION = 'V1.1';
      var AUTHOR = 'Awwad';
      if (!window.GtmHelper)
        window.GtmHelper = function () {
          var instance = this;
          var loc = document.location;
          this.version = VERSION;
          this.author = AUTHOR;
          this.readCookie = function (name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
          };
          this.createCookie = function (name, value, days, cookieDomain) {
            var domain = "";
            var expires = "";

            if (days) {
              var date = new Date();
              date.setTime(date.getTime() + Math.ceil(days * 24 * 60 * 60 * 1000));
              var expires = " expires=" + date.toGMTString() + ";";
            }

            if (typeof (cookieDomain) != 'undefined')
              domain = " domain=" + cookieDomain + "; ";

            document.cookie = name + "=" + value + ";" + expires + domain + "path=/";
          };

          this.isDuplicated = function (currentTransactionId) {
            // the previous transaction id:
            var previousTransIdValue = this.readCookie("previousTransId");

            if (currentTransactionId === previousTransIdValue) {
              return true; // Duplication
            } else {
              return false;
            }
          };
        }
    })()
  </script><script defer="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/vendor.667e7ada497a.js"></script><script defer="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/reader.d25c5547507a.js"></script><script async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/MathJax.js"></script><style id="annotator-dynamic-style">.annotator-adder, .annotator-outer, .annotator-notice {
  z-index: 2147483667;
}
.annotator-filter {
  z-index: 2147483657;
}</style><link href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/840a321d95.css" media="all" rel="stylesheet"><iframe src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource.html"></iframe><iframe src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(2).html"></iframe><iframe src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(3).html"></iframe><link rel="stylesheet" type="text/css" href="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/container.40a6b605d29a66b083aa6d74c07bb73eae19e31b.css"><iframe src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(4).html"></iframe><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(1).txt"></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(2).txt"></script><script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/f(3).txt"></script><style type="text/css" id="kampyleStyle">.noOutline{outline: none !important;}.wcagOutline:focus{outline: 1px dashed #595959 !important;outline-offset: 2px !important;transition: none !important;}</style></head>


<body class="reading sidenav nav-collapsed scalefonts subscribe-panel library">

    
  <noscript> 
    <iframe src="//www.googletagmanager.com/ns.html?id=GTM-5P4V6Z"
            height="0" width="0"
            style="display:none;visibility:hidden">
    </iframe>
  </noscript>



    
      <div class="hide working" role="status">
        <div class="working-image"></div>
      </div>
      <div class="sbo-site-nav">
        

  


<a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#container" class="skip">Skip to content</a><header class="topbar t-topbar"><nav role="navigation" class="js-site-nav"><ul class="topnav"><li><a href="https://learning.oreilly.com/home/" class="l0 nav-icn"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.738 14H9.254v-3.676a.617.617 0 0 0-.621-.613H7.39a.617.617 0 0 0-.62.613V14H4.284a.617.617 0 0 1-.622-.613V10.22c0-.327.132-.64.367-.87l3.547-3.493a.627.627 0 0 1 .875 0l3.54 3.499c.234.229.366.54.367.864v3.167a.617.617 0 0 1-.62.613zM7.57 2.181a.625.625 0 0 1 .882 0l5.77 5.692-.93.92-5.28-5.209-5.28 5.208-.932-.919 5.77-5.692z"></path></svg><span>Home</span></a></li><li class="search"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="t-search-nav trigger nav-icn l0" data-dropdown-selector=".searchbox"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>search icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M31.3 0C20.9 0 12.5 8.4 12.5 18.8 12.5 22.5 13.6 25.9 15.4 28.8L1.2 42.9C-0.4 44.5-0.4 47.2 1.2 48.8 2 49.6 3.1 50 4.2 50 5.2 50 6.3 49.6 7.1 48.8L21.2 34.6C24.1 36.5 27.5 37.5 31.3 37.5 41.6 37.5 50 29.1 50 18.8 50 8.4 41.6 0 31.3 0ZM31.3 31.3C24.4 31.3 18.8 25.6 18.8 18.8 18.8 11.9 24.4 6.3 31.3 6.3 38.1 6.3 43.8 11.9 43.8 18.8 43.8 25.6 38.1 31.3 31.3 31.3Z"></path></g></svg><span>Search</span></a></li><li class="usermenu dropdown"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="trigger l0 nav-icn nav-dropdown"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" version="1.1" fill="#4A3C31"><desc>navigation arrow</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M0.1 12.5L9.7 3.1C9.8 3 9.9 3 10 3 10.1 3 10.2 3 10.3 3.1L19.9 12.5C20 12.5 20 12.6 20 12.8 20 12.9 20 13 19.9 13L17 15.9C16.9 16 16.8 16 16.7 16 16.5 16 16.4 16 16.4 15.9L10 9.7 3.6 15.9C3.6 16 3.5 16 3.3 16 3.2 16 3.1 16 3 15.9L0.1 13C0 12.9 0 12.8 0 12.7 0 12.7 0 12.6 0.1 12.5Z"></path></g></svg><span>Expand Nav</span></a><div class="drop-content"><ul><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M8,8 C6.34321755,8 5.00013,6.65691245 5.00013,5.00013 C5.00013,3.34334755 6.34321755,2.00026001 8,2.00026001 C9.65678245,2.00026001 10.99987,3.34334755 10.99987,5.00013 C10.99987,6.65691245 9.65678245,8 8,8 Z M2.33024571,11.3523547 L2.33774538,11.3523547 C3.7622187,9.70968996 5.82947484,8.76608166 8.00374984,8.76608166 C10.1780248,8.76608166 12.245281,9.70968996 13.6697543,11.3523547 C13.8892083,11.6177474 14.0062813,11.9530021 13.99974,12.2973138 L13.99974,13.99974 L2.00026001,13.99974 L2.00026001,12.2973138 C1.99371867,11.9530021 2.11079172,11.6177474 2.33024571,11.3523547 Z" id="path-1"></path></svg><span>Your O'Reilly</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/profile/" class="l2 nav-icn"><span>Profile</span></a></li><li><a href="https://learning.oreilly.com/history/" class="l2 nav-icn"><span>History</span></a></li><li><a href="https://learning.oreilly.com/playlists/" class="l2 nav-icn"><span>Playlists</span></a></li><li><a href="https://learning.oreilly.com/u/39a88cd5-54f5-4d61-aec6-7884d06dfba1/" class="l2 nav-icn"><span>Highlights</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Featured</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/resource-centers/" class="l2 nav-icn"><span>Resource Centers</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=collection&amp;sort=date_added&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Expert Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.6467109,4.35328907 L14.7964612,7.51003884 C15.0678463,7.78304342 15.0678463,8.22395603 14.7964612,8.49696061 L11.6467109,11.6467109 L10.6597892,10.6597892 L13.3055794,8 L10.6597892,5.34021084 L11.6467109,4.35328907 Z M4.35328907,11.6467109 L1.20353875,8.48996116 C0.932153749,8.21695658 0.932153749,7.77604397 1.20353875,7.50303939 L4.35328907,4.35328907 L5.34021084,5.34021084 L2.69442057,8 L5.34021084,10.6597892 L4.35328907,11.6467109 Z M5.84417089,11.4997226 L8.67194674,4.50027742 L10.1838269,4.50027742 L7.35605105,11.4997226 L5.84417089,11.4997226 Z" id="Mask"></path></svg><span>Practice</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/" class="l2 nav-icn"><span>Katacoda Scenarios</span></a></li><li><a href="https://learning.oreilly.com/interactive/#notebooks" class="l2 nav-icn"><span>Jupyter Notebooks</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><!--?xml version="1.0" encoding="UTF-8"?--><svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M10.0440191,12.1582649 C10.177209,12.3351976 10.2476998,12.552011 10.2434767,12.7742985 L10.2434767,13.9482829 L1.96869684,13.9482829 L1.96869684,12.7742985 C1.96418597,12.536863 2.04491894,12.3056731 2.19625329,12.1226596 L2.20142503,12.1226596 C3.18373453,10.9898864 4.60930376,10.339179 6.10867266,10.339179 C7.30793519,10.339179 8.45998426,10.7554703 9.37576632,11.5017585 L14.3434936,11.5017585 L14.3434936,3.65650645 L1.65650645,3.65650645 L1.65650645,11.5017585 L2.06682298,11.5017585 L1.82063306,12.1582649 L1.32825322,12.1582649 C1.14771395,12.1582649 1,12.010551 1,11.8300117 L1,3.32825322 C1,3.14771395 1.14771395,3 1.32825322,3 L14.6717468,3 C14.852286,3 15,3.14771395 15,3.32825322 L15,11.8300117 C15,12.010551 14.852286,12.1582649 14.6717468,12.1582649 L10.0440191,12.1582649 Z M12.5483683,7.16419284 C12.6159362,7.20929881 12.6563112,7.2853432 12.6558247,7.36658194 C12.6553382,7.44782068 12.6140555,7.5233761 12.5459522,7.56766966 L10.4270949,8.91581376 C10.3903366,8.94010203 10.3431312,8.9419685 10.3045699,8.9206583 C10.2660086,8.89934811 10.2424712,8.85838696 10.2434767,8.81434055 L10.2434767,5.91510593 C10.2420711,5.86982855 10.2666257,5.82771857 10.3067229,5.80664182 C10.3468202,5.78556507 10.3954292,5.7892172 10.431927,5.81604875 L12.5483683,7.16419284 Z M6.10608679,9.81089299 C4.9635781,9.81089299 4.03739181,8.8847067 4.03739181,7.74219802 C4.03739181,6.59968933 4.9635781,5.67350304 6.10608679,5.67350304 C7.24859547,5.67350304 8.17478176,6.59968933 8.17478176,7.74219802 C8.17478176,8.8847067 7.24859547,9.81089299 6.10608679,9.81089299 Z"></path></svg><span>Sandboxes</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/scenarios/kubernetes-sandbox/9781492062820/" class="l2 nav-icn"><span>Kubernetes</span></a></li><li><a href="https://learning.oreilly.com/scenarios/python-sandbox/9781492062844/" class="l2 nav-icn"><span>Python</span></a></li><li><a href="https://learning.oreilly.com/scenarios/tensorflow-sandbox/9781492062851/" class="l2 nav-icn"><span>TensorFlow</span></a></li><li><a href="https://learning.oreilly.com/scenarios/ubuntu-sandbox/9781492062837/" class="l2 nav-icn"><span>Ubuntu</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="20" height="20" version="1.1" fill="#4A3C31"><desc>queue icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M25 29.2C25.4 29.2 25.8 29.1 26.1 28.9L48.7 16.8C49.5 16.4 50 15.5 50 14.6 50 13.7 49.5 12.8 48.7 12.4L26.1 0.3C25.4-0.1 24.6-0.1 23.9 0.3L1.3 12.4C0.5 12.8 0 13.7 0 14.6 0 15.5 0.5 16.4 1.3 16.8L23.9 28.9C24.2 29.1 24.6 29.2 25 29.2ZM7.3 14.6L25 5.2 42.7 14.6 25 24 7.3 14.6ZM48.7 22.4L47.7 21.9 25 34.2 2.3 21.9 1.3 22.4C0.5 22.9 0 23.7 0 24.7 0 25.6 0.5 26.5 1.3 26.9L23.9 39.3C24.2 39.5 24.6 39.6 25 39.6 25.4 39.6 25.8 39.5 26.1 39.3L48.7 26.9C49.5 26.5 50 25.6 50 24.7 50 23.7 49.5 22.9 48.7 22.4ZM48.7 32.8L47.7 32.3 25 44.6 2.3 32.3 1.3 32.8C0.5 33.3 0 34.1 0 35.1 0 36 0.5 36.9 1.3 37.3L23.9 49.7C24.2 49.9 24.6 50 25 50 25.4 50 25.8 49.9 26.1 49.7L48.7 37.3C49.5 36.9 50 36 50 35.1 50 34.1 49.5 33.3 48.7 32.8Z"></path></g></svg><span>Explore</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/topics/" class="l2 nav-icn"><span>All Topics</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;formats=case%20study&amp;formats=learning%20path&amp;formats=live%20online%20training&amp;formats=notebook&amp;formats=oriole&amp;formats=video&amp;sort=popularity&amp;facet_json=true&amp;page=0&amp;collection_type=expert" class="l2 nav-icn"><span>Most Popular Titles</span></a></li><li><a href="https://learning.oreilly.com/r/" class="l2 nav-icn"><span>Recommendations</span></a></li><li><a href="https://learning.oreilly.com/search/?query=&amp;extended_publisher_data=true&amp;highlight=true&amp;include_assessments=false&amp;include_case_studies=true&amp;include_courses=true&amp;include_orioles=true&amp;include_playlists=true&amp;include_collections=true&amp;include_notebooks=true&amp;is_academic_institution_account=false&amp;source=user&amp;formats=book&amp;sort=publication_date&amp;facet_json=true&amp;page=0" class="l2 nav-icn"><span>Early Release</span></a></li><li><a href="https://learning.oreilly.com/playlists/discover/" class="l2 nav-icn"><span>Playlists</span></a></li></ul></li><li class="flyout-parent"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M13.4 9.8a.6.6 0 0 1 .6.6v1.2h-1.2l-.6 2.4H3.8l-.6-2.4H2v-1.2a.6.6 0 0 1 .6-.6h10.8zM8 5.6a1.8 1.8 0 1 1-.001-3.599A1.8 1.8 0 0 1 8 5.6zm3.6 2.35v.95H4.4v-.95c0-.167.066-.33.19-.443A5.08 5.08 0 0 1 8 6.2a5.08 5.08 0 0 1 3.41 1.307c.124.113.19.276.19.444z"></path></svg><span>Attend</span></a><ul class="flyout"><li><a href="https://learning.oreilly.com/live-training/" class="l2 nav-icn"><span>Live Training</span></a></li></ul></li><li><a href="https://learning.oreilly.com/certifications/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M12.912 9.18L14 8.014l-1.088-1.18a.304.304 0 01-.075-.268L13.195 5l-1.535-.463a.313.313 0 01-.194-.194l-.462-1.537-1.565.358c-.09.03-.194 0-.269-.074L8.007 2 6.845 3.09a.303.303 0 01-.269.074l-1.565-.358-.462 1.537a.313.313 0 01-.194.194L2.82 5l.358 1.567a.26.26 0 01-.075.269L2 8.015l1.088 1.164c.075.075.09.18.075.269l-.358 1.567 1.535.463c.09.03.164.104.194.194l.462 1.537 1.565-.358c.015 0 .045-.015.075-.015.075 0 .15.03.209.074L8.007 14l1.163-1.09a.303.303 0 01.269-.074l1.565.358.462-1.537a.313.313 0 01.194-.194L13.195 11l-.358-1.567a.338.338 0 01.075-.254zm-6.046 1.37L4.41 8.26l1.16-1.244 1.767 1.649L10.4 5.6l1.202 1.202-4.242 4.243-.495-.495z"></path></svg><span>Certifications</span></a></li><li><a href="https://get.oreilly.com/email-signup.html" class="l1 nav-icn " target="&quot;_blank&quot;"><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M11.564 2.263l2.172 2.174c.17.168.264.397.264.636V11a.6.6 0 0 1-.6.6h-.6V6.2h-6V2.6a.6.6 0 0 1 .6-.6h3.527c.239 0 .468.095.637.263zM2.6 14a.6.6 0 0 1-.6-.6V6.8a.6.6 0 0 1 .6-.6h1.903a1.2 1.2 0 0 1 .849.352L6.2 7.4H11a.6.6 0 0 1 .6.6v5.4a.6.6 0 0 1-.6.6H2.6zM11 5h1.8L11 3.2V5z"></path></svg><span>Newsletters</span></a></li><li><a href="https://learning.oreilly.com/u/preferences/" class="l1 nav-icn "><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 53" width="20" height="20" version="1.1" fill="#4A3C31"><desc>settings icon</desc><g stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M44.6 29.6C44.7 28.6 44.8 27.5 44.8 26.5 44.8 25.5 44.7 24.4 44.6 23.4L49.6 19C50 18.8 50.1 18.3 49.9 17.9 48.9 14.7 47.1 11.7 44.9 9.1 44.6 8.8 44.2 8.7 43.8 8.8L37.4 11.1C35.8 9.8 34 8.7 32.1 8L30.9 1.4C30.8 0.9 30.4 0.6 30 0.5 26.7-0.2 23.3-0.2 20 0.5 19.6 0.6 19.2 0.9 19.1 1.4L17.9 8C16 8.7 14.1 9.8 12.6 11.1L6.2 8.8C5.8 8.7 5.4 8.8 5.1 9.1 2.9 11.7 1.1 14.7 0.1 17.9 -0.1 18.3 0 18.8 0.4 19L5.4 23.4C5.3 24.4 5.2 25.5 5.2 26.5 5.2 27.5 5.3 28.6 5.4 29.6L0.4 34C0 34.2-0.1 34.7 0.1 35.1 1.1 38.3 2.9 41.4 5.1 43.9 5.4 44.2 5.8 44.4 6.2 44.2L12.6 42C14.1 43.2 16 44.3 17.9 45L19.1 51.7C19.2 52.1 19.6 52.5 20 52.5 21.6 52.8 23.3 53 25 53 26.7 53 28.4 52.8 30 52.5 30.4 52.5 30.8 52.1 30.9 51.7L32.1 45C34 44.3 35.8 43.2 37.4 42L43.8 44.2C44.2 44.4 44.6 44.2 44.9 43.9 47.1 41.4 48.9 38.3 49.9 35.1 50.1 34.7 50 34.2 49.6 34L44.6 29.6ZM25 36.4C19.6 36.4 15.2 32 15.2 26.5 15.2 21 19.6 16.6 25 16.6 30.4 16.6 34.8 21 34.8 26.5 34.8 32 30.4 36.4 25 36.4Z"></path></g></svg><span>Settings</span></a></li><li><a href="https://learning.oreilly.com/public/support/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M7.363 6.656a2.692 2.692 0 0 1-2.681-2.703c0-1.493 1.2-2.703 2.681-2.703a2.692 2.692 0 0 1 2.682 2.703c0 1.493-1.2 2.703-2.682 2.703zm4.023 2.027c-1.852 0-3.352 1.513-3.352 3.379H2v-1.534c-.006-.31.099-.612.295-.852a6.666 6.666 0 0 1 9.09-.993zm-.543.676h1.12v.304c.003.284.16.543.408.676a.766.766 0 0 0 .77 0l.303-.176.556.966-.302.176a.772.772 0 0 0-.362.676v.08a.772.772 0 0 0 .362.677l.302.21-.556.965-.302-.175a.766.766 0 0 0-.771 0 .778.778 0 0 0-.409.675v.352h-1.106v-.372a.778.778 0 0 0-.409-.676.766.766 0 0 0-.77 0l-.303.176-.556-.912.302-.176a.772.772 0 0 0 .362-.676v-.04-.04a.772.772 0 0 0-.362-.676l-.302-.176.556-.966.289.155a.766.766 0 0 0 .77 0 .778.778 0 0 0 .41-.676V9.36zm1.562 2.703c0-.271-.108-.531-.3-.722a1.001 1.001 0 0 0-.72-.292 1.01 1.01 0 0 0-.992 1.023 1.01 1.01 0 0 0 1.01 1.004 1.01 1.01 0 0 0 1.002-1.013z"></path></svg><span>Support</span></a></li><li><a href="https://learning.oreilly.com/accounts/logout/" class="l1 nav-icn "><svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2.613 12.63A.607.607 0 0 1 2 12.03V3.602C2 3.269 2.274 3 2.613 3h5.515v1.204H3.226v7.223h4.902v1.203H2.613zM5.677 9.02V6.611h4.903V4.926a.301.301 0 0 1 .19-.274.31.31 0 0 1 .33.063l2.722 2.673a.594.594 0 0 1 0 .849L11.1 10.909a.31.31 0 0 1-.331.063.301.301 0 0 1-.19-.274V9.02H5.677z"></path></svg><span>Sign Out</span></a></li></ul></div></li></ul></nav></header>



      </div>
      <div id="container" class="application" style="height: auto;">
        
          <div class="nav-container clearfix">
            


            
            
          </div>

          

  <div class="js-toc">
    
      <div class="sbo-reading-menu sbo-menu-top"><section class="sbo-toc-container toc-menu"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="sbo-toc-thumb"><span class="sbo-title ss-list"><h1><div class="visuallyhidden">Table of Contents for </div>
      
      Securing the Perimeter: Deploying Identity and Access Management with Free Open Source Software
      
    </h1></span></a><div class="toc-contents"></div></section></div>

    

    <div class="interface-controls interface-controls-top">
      <ul class="interface-control-btns js-bitlist js-reader">
        <li class="js-search-in-archive search-in-archive t-search-in-archive"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" title="Search in archive" class="js-search-controls search-controls" onclick="window.Appcues.track(&#39;SearchBook_HeronBook&#39;)"><span class="icon">Search in book...</span></a><form class="search-archive-bar js-search-form"><input type="search" name="query" placeholder="Search inside this book..." autocomplete="off"></form><div class="search-archive-results"><div class="js-sitb-results-region"></div></div></li><li class="queue-control"><div class="js-content-uri" data-content-uri="/api/v1/book/9781484226018/chapter/html/425975_1_En_8_Chapter.xhtml"><div class="js-collections-dropdown collections-dropdown menu-bit-cards" onclick="window.Appcues.track(&#39;AddPlaylist_HeronBook&#39;)"><div data-reactroot="" class="menu-dropdown-wrapper js-menu-dropdown-wrapper align-right"><img class="hidden" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/ajax-transp.gif" alt="loading spinner"><div class="menu-control"><div class="control "><div class="js-playlists-menu"><button class="js-playlist-icon"><svg class="icon-add-to-playlist-sml" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill-rule="nonzero" fill="#000000"><g transform="translate(-1.000000, 0.000000)"><rect x="5" y="0" width="12" height="2"></rect><title>Playlists</title><path d="M4.5,14 C6.43299662,14 8,12.4329966 8,10.5 C8,8.56700338 6.43299662,7 4.5,7 C2.56700338,7 1,8.56700338 1,10.5 C1,12.4329966 2.56700338,14 4.5,14 Z M2.5,10 L4,10 L4,8.5 L5,8.5 L5,10 L6.5,10 L6.5,11 L5,11 L5,12.5 L4,12.5 L4,11 L2.5,11 L2.5,10 Z"></path><circle cx="2" cy="5" r="1"></circle><circle cx="1.94117647" cy="1" r="1"></circle><rect x="5" y="4" width="12" height="2"></rect><rect x="9" y="8" width="8" height="2"></rect><rect x="9" y="12" width="8" height="2"></rect></g></g></g></svg><div class="js-playlist-addto-label">Add&nbsp;To</div></button></div></div></div></div></div></div></li><li class="js-font-control-panel font-control-activator"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" data-push-state="false" id="font-controls" title="Change font size" aria-label="Change font size" onclick="window.Appcues.track(&#39;ChangeFont_HeronBook&#39;)"><span class="icon">Toggle Font Controls</span></a></li><li class="dropdown sharing-controls"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="trigger" data-push-state="false" title="Share" aria-label="Share" onclick="window.Appcues.track(&#39;Share_HeronBook&#39;)"><i class="fa fa-share"></i></a><ul class="social-sharing dropdown-menu"><li><a class="twitter share-button t-twitter" target="_blank" aria-label="Share this section on Twitter" title="Share this section on Twitter" href="https://twitter.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml&amp;text=Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software&amp;via=safari"><span>Twitter</span></a></li><li><a class="facebook share-button t-facebook" target="_blank" aria-label="Share this section on Facebook" title="Share this section on Facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml"><span>Facebook</span></a></li><li><a class="googleplus share-button t-googleplus" target="_blank" aria-label="Share this secton on Google Plus" title="Share this secton on Google Plus" href="https://plus.google.com/share?url=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml"><span>Google Plus</span></a></li><li><a class="email share-button t-email" aria-label="Share this section via email" title="Share this section via email" href="mailto:?subject=Safari:%208.%C2%A0User-Managed%20Access&amp;body=https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml%0D%0Afrom%20Securing%20the%20Perimeter%3A%20Deploying%20Identity%20and%20Access%20Management%20with%20Free%20Open%20Source%20Software%0D%0A"><span>Email</span></a></li></ul></li>
      </ul>
    </div>

    
    <section role="document">
        
        




  <script defer="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/djangoMessagesPage.61a28d591d16.js"></script>


        <script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/48743.js"></script>
<script>
  var userId = "6866040";

  var userObject = {
    firstName: "MACKYNZIE",
    segment: "Trial",
    admin: "False",
    profileCreatedOn: "April 4, 2020, 9:28 a.m.",
    academic: ""
  };
  window.Appcues.identify(userId, userObject);
  window.Appcues.page();

  setTimeout(function () {
    window.Appcues.track('ViewingBook_HeronBook')
  }, 20000);
</script>


	  <div class="t-sbo-prev sbo-prev sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_7_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">7.&nbsp;Strong Authentication</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-top">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_9_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">9.&nbsp;Identity Management</div>
        </a>
    
  
  </div>



<div id="sbo-rt-content" style="transform: none;"><div class="annotator-wrapper"><div class="ChapterContextInformation"><div class="ContextInformation" id="b978-1-4842-2601-8_8"><div class="ChapterCopyright">©&nbsp;Michael Schwartz, Maciej Machulak&nbsp;2018</div><span class="ContextInformationAuthorEditorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span></span></span><span class="ContextInformationBookTitles"><span class="BookTitle" epub:type="title" lang="en">Securing the Perimeter</span></span><span class="ChapterDOI"><a href="https://doi.org/10.1007/978-1-4842-2601-8_8">https://doi.org/10.1007/978-1-4842-2601-8_8</a></span></div></div><!--Begin Abstract--><div class="MainTitleSection"><h1 class="ChapterTitle" lang="en">8.&nbsp;User-Managed Access</h1></div><div class="AuthorGroup"><div class="AuthorNames"><span class="Author"><span class="AuthorName">Michael&nbsp;Schwartz</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Aff3" class="totri-footnote">1</a>&nbsp;<span class="ContactIcon"></span></sup> and </span><span class="Author"><span class="AuthorName">Maciej&nbsp;Machulak</span><sup><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Aff4" class="totri-footnote">2</a></sup></span></div><div class="Affiliations"><div class="Affiliation" id="Aff3"><span class="AffiliationNumber">(1)</span><div class="AffiliationText">Austin, TX, USA</div></div><div class="Affiliation" id="Aff4"><span class="AffiliationNumber">(2)</span><div class="AffiliationText">London, UK</div></div><div class="ClearBoth">&nbsp;</div></div></div><!--End Abstract--><div class="Fulltext"><p class="Para" id="Par2">Today, you use OAuth 2.0 to authorize software to access your own stuff, but what if you want to let someone else access your stuff? We call this “Alice to Bob sharing”. This is one of the primary use cases for the <span id="ITerm1">User-Managed Access (UMA)</span> protocol. Alice and Bob don’t have to be humans—either can be a <span id="ITerm2">non-person entity (NPE)</span>, such as a software process or company. With UMA, Alice can use any <span id="ITerm3">authorization server</span> to share data with Bob. It’s up to Bob and the clients he is using, to interact with the authorization servers of Alice’s choosing. Moreover, Alice can choose to use the same authorization server for different protected information that she wants to share with Bob—this data can be distributed, yet access to it can be centralized with UMA. An interesting property of UMA is that it also handles asynchronous authorization. For example, Bob may request access to something, and Alice may not approve the request until she’s online. Likewise, Alice can also create a policy at the authorization server that gives access to some data to Bob—she does not have to be online for access to be granted.</p><p class="Para" id="Par3">This chapter covers the second <span id="ITerm4">version</span> of the UMA protocol—UMA 2.0. If you are an implementer of UMA software, this chapter provides a conceptual background, but you must still read the actual UMA specifications. The “UMA 2.0 Grant for OAuth 2.0 Authorization” is what you should read if you are implementing an UMA Client. You need to read the “Federated Authorization for UMA 2.0” specification if you plan to implement an UMA Resource Server or <span id="ITerm5">Authorization Server</span>.</p><p class="Para" id="Par4">UMA was eight years in the making. The working group at <span id="ITerm6">Kantara Initiative</span> formed in 2009, before the existence of either OAuth 2.0 or OpenID Connect. Previous versions of UMA, although OAuth-like, did not perfectly align with OAuth. One of the main goals of UMA 2.0 was to leverage OAuth wherever concepts and syntax overlapped. UMA 2.0 is complementary to OAuth. It adds new capabilities that are not possible to achieve with OAuth alone.</p><p class="Para" id="Par5">Like <span id="ITerm7">OAuth</span>, UMA uses bearer tokens and scopes to convey the “extent of access”. UMA is not a policy expression language. Issuance of an UMA token conveys the successful evaluation of policy by the Authorization Server. But UMA leaves it up to the Authorization Server to decide how to grant access. For example, in the Gluu Server, the oxTrust user management APIs require an UMA access token with the scope <span class="EmphasisFontCategoryNonProportional ">SCIM Access</span>. To obtain this scope, there is an interception script called <span id="ITerm8">
            <span class="EmphasisFontCategoryNonProportional ">scim_access_policy</span>
            
          </span>, whose authorization method returns a boolean. The SCIM APIs are unaware of the policy—it could have been expressed as XML, it could have involved a human pressing a button—the SCIM API doesn’t have to care what happened behinds the scenes at the AS to evaluate the policy.</p><p class="Para" id="Par6">Alice to Bob sharing has many real-world use cases. An interesting potential use case for UMA is federated document sharing. Google Docs works because everyone has a Google account. However, a service provider could launch an UMA-enabled document-sharing service that allows users to authenticate at any OpenID Connect Provider. Another important use cases for UMA is runtime consent management. The European Union <span id="ITerm9">General Data Protection Regulation (GDPR)</span> seeks to give consumers control of their data and require companies to get consent in certain cases, such as sharing personal data with a third party.</p><p class="Para" id="Par7">Let’s use a hypothetical situation: an airline offers you a special deal on a rental car. To complete this transaction, the airline needs to ask you if that’s okay, and the car rental company needs a consent receipt that proves you opted into the offer. Both the airline and rental car company create consent records for audit purposes. Let’s say there is an API that the rental car company has created specifically for receiving referrals from airlines. The API could require an UMA token with a scope that signifies that an appropriate consent record is present. Without the token, the person’s browser redirects to the airline’s authorization server to review and approve the release of their personal information.</p><p class="Para" id="Par8">During development of UMA, the working group considered three possible ecosystems: narrow, medium, and wide. In the narrow ecosystem, one party (like an <span id="ITerm10">enterprise</span>) controls the authorization server and resource servers—it is a tightly controlled environment. A medium ecosystem involves the collaboration of a few authorization servers, but the participants manage trust statically—think about a social login environment where you get to choose from a few large consumer IDPs. The wide ecosystem enables autonomous parties to dynamically establish trust as required. For example, in a wide ecosystem, I can access a previously unknown UMA-protected website, introduce a new IDP, and dynamically register my software client to facilitate future transactions. UMA addresses all three ecosystems. The narrow ecosystem perhaps most closely aligns with enterprise identity and access management, so it is the one we focus on in this chapter.</p><div class="Para" id="Par9">UMA has some special <span id="ITerm11">jargon</span>. Let’s define it now:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par10"><span id="ITerm12">
                  <strong class="EmphasisTypeBold ">Resource owner (RO)</strong>
                  
                </span>—The entity (person or organization) that grants access to a protected resource (i.e., Alice).</p></li><li><p class="Para" id="Par11"><span id="ITerm13">
                  <strong class="EmphasisTypeBold ">Requesting party (RqP)</strong>
                  
                </span><span class="EmphasisFontCategoryNonProportional ">—</span>The entity, using client software, who is trying to get access to a resource (i.e., Bob).</p></li><li><p class="Para" id="Par12"><span id="ITerm14">
                  <strong class="EmphasisTypeBold ">Permission ticket</strong>
                  
                </span>—An identifier used to correlate a request for access to a resource and a certain client. The permission ticket is similar in function to the code in the OAuth authorization code flow—the UMA client presents the ticket plus client credentials at the UMA token endpoint.</p></li><li><p class="Para" id="Par13"><strong class="EmphasisTypeBold ">Client</strong><span id="ITerm15">
                  
                </span>—An OAuth client that supports the UMA Grant.</p></li><li><p class="Para" id="Par14"><span id="ITerm16">
                  <strong class="EmphasisTypeBold ">Resource server (RS)</strong>
                  
                </span>—An OAuth resource server that supports the extra requirements specified by UMA, such as registering resources, returning permission tickets to unauthorized clients, and introspecting access tokens. This is sometimes the API software or an API gateway.</p></li><li><p class="Para" id="Par15"><span id="ITerm17">
                  <strong class="EmphasisTypeBold ">Authorization server (AS)</strong>
                  
                </span>—An OAuth authorization server that supports the extra requirements specified by UMA, such as resource registration and the UMA Grant <span id="ITerm18">type</span>.</p></li><li><p class="Para" id="Par16"><strong class="EmphasisTypeBold ">Scopes</strong>—As in OAuth, an extent of access. The authorization server uses scopes to map to zero or more policies.</p></li><li><p class="Para" id="Par17"><strong class="EmphasisTypeBold ">Claim</strong><span id="ITerm19">
                  
                </span>—An attribute about a person (requesting party) or client.</p></li><li><p class="Para" id="Par18"><span id="ITerm20">
                  <strong class="EmphasisTypeBold ">Protection API token (PAT)</strong>
                  
                </span>—An OAuth access token with scope <span class="EmphasisFontCategoryNonProportional ">uma_protection</span>, used by the RS to call UMA APIs on the authorization server.</p></li><li><p class="Para" id="Par19"><span id="ITerm21">
                  <strong class="EmphasisTypeBold ">Requesting party token (RPT)</strong>
                  
                </span>—An OAuth bearer token used by the client to gain access to a protected resource. This is the most commonly referred to UMA access token! If there is no RPT, the client cannot access an API!</p></li><li><p class="Para" id="Par20"><span id="ITerm22">
                  <strong class="EmphasisTypeBold ">Persisted claims token (PCT)</strong>
                  
                </span>—A reference access token issued to the client to represent a set of claims collected during a previous authorization <span id="ITerm23">process</span>.</p></li></ul></div></div><div class="Para" id="Par21">As UMA is a profile and extension of OAuth 2.0, Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig1">8-1</a></span> should look familiar. The software components (Client, RS, AS) are of course the same as OAuth—it is their interactions that are slightly different. What is new in this diagram is the placement of the <span id="ITerm24">requesting party (RqP)</span> and the <span id="ITerm25">resource owner (RO)</span>. In “plain” OAuth, these are the same person.<figure class="Figure" id="Fig1"><div class="MediaObject" id="MO1"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig1_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig1_HTML.jpg" style="height:30.97em" width="1718" height="1239" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig1_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-1</span><p class="SimplePara">UMA high-level overview</p></div></figcaption></figure></div><p class="Para" id="Par22">The PAT is just an OAuth access token with the scope <span class="EmphasisFontCategoryNonProportional ">uma_protection</span>. It can be obtained from the AS using the OAuth Client Credentials Grant. The PCT token is not an access token, but a reference to data.</p><p class="Para" id="Par23">UMA has two <span id="ITerm26">specifications</span>. The first is the “UMA 2.0 Grant for OAuth 2.0 Authorization”; the second is “Federated Authorization for UMA 2.0”. For brevity, we will call them UMA Grant and UMA FedAuthz, respectively. UMA Grant addresses the information needed by an UMA client developer. If you are calling an UMA protected resource, and you need to obtain an RPT, then you need to understand the UMA Grant specification. If you are a developer who is writing an API that you want to protect using UMA, then you should read both the UMA Grant and UMA FedAuthz specifications.</p><p class="Para" id="Par24">One of the innovations of UMA is a loose bundling between the client and the security infrastructure. Look back again at Figure&nbsp;<span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_4_Chapter.xhtml#Fig1"><span class="RefSource">4-1</span></a></span>, which lists the scopes required to access <span id="ITerm27">Google APIs</span>. Note that Google must publish each scope. If Google releases a new version of the API, it may impact the required scopes, which means that client developers must update their code. UMA uses permission tickets to hide the scopes from the client. The permission ticket is a guess-resistant alpha-numeric code, used as a handle to reference the required scopes. After the AS returns the permission ticket to the <span id="ITerm28">RS</span>, the RS sends it to the client. Importantly, the client never sees the scopes—just the permission ticket (hence, scopes are internal to the client-AS interaction). In this way, the RS is in control of the scopes and can update them without impacting existing client software.</p><div class="Para" id="Par25">UMA still allows for the client to explicitly request scopes. Of course, the RS will need to communicate these scopes out of band with the client. As in OAuth, clients must register “requested” scopes prior to specifying them. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig2">8-2</a></span> uses a Venn diagram to represent the relationship between scopes associated with a ticket, scopes requested by a client, and scopes registered by a client. You could express this as: ticket scopes ∪ (requested scopes ∩ registered scopes). For a more detailed discussion, see the “Interpreting Authorization Assessment Set Math” section of the <em class="EmphasisTypeItalic ">UMA Implementer's Guide</em>.<figure class="Figure" id="Fig2"><div class="MediaObject" id="MO2"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig2_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig2_HTML.jpg" style="height:24.1em" width="944" height="964" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig2_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-2</span><p class="SimplePara">Scopes set math</p></div></figcaption></figure></div><p class="Para" id="Par26">You may have heard of a standard called <span id="ITerm29">XACML</span><span id="ITerm30">
            
          </span>, the “eXtensible Access Control Markup Language”. Unlike XACML, UMA does not specify syntax for policy expression. If you want to use XACML to express polices and an UMA authorization server to issue access tokens —that’s possible! The UMA AS can gather the claims, generate an XACML request, and return an authorization decision based on the response from an XACML <span id="ITerm31">policy</span> decision point. A structured policy expression language is useful in situations where there are many policies, and you need to either perform analysis on policies, or perhaps auto-generate them. If you’re a small organization, you probably don’t need this.</p><p class="Para" id="Par27">UMA does not enable fine-grained access control. This does not mean that policy centralization is not useful. If several APIs share a policy, using an UMA access token to implement this policy centrally makes sense. There is a tradeoff between speed and centralization. For example, if you’re building an auction website with an Update button, visible only to the item seller, should you use UMA to control rendering this button? Probably not. But what if the Update button requires the seller’s consent? In cases like this, centralization may make sense.</p><p class="Para" id="Par28">In the next few sections, we introduce the UMA 2.0 standard and follow up with some real-world examples of how you can put UMA to work to protect APIs and web applications.</p><section class="Section1 RenderAsSection1" id="Sec1"><h2 class="Heading">UMA Grant</h2><p class="Para" id="Par29">UMA registers a new <span class="EmphasisFontCategoryNonProportional ">grant_type</span> in the IANA OAuth Registry: <span class="EmphasisFontCategoryNonProportional ">urn:ietf:params:oauth:grant-type:uma-ticket</span>. From the name of this grant type, you can see how important the permission ticket is to UMA. At the risk of over-simplifying, instead of using a code to obtain a token at the token endpoint, as in the OAuth Authorization Code Grant, you use a permission ticket. UMA does not support token issuance at the authorization endpoint—there is no UMA implicit flow. In most OAuth profiles, policy evaluation happens at the authorization endpoint (the “policy” is normally “did the person approve?”). Policy is in quotes because synchronous human approval is not a policy as we would normally understand it. The AS iterates through the scopes and maps each to a set of policies. Policy enforcement happens at the RS, which maps the request to a resource identifier (<span class="EmphasisFontCategoryNonProportional ">resource_id</span>) and ensures that the required scopes are present in the RPT.</p><section class="Section2 RenderAsSection2" id="Sec2"><h3 class="Heading">UMA RPT Requests with Interactive Claims Gathering</h3><div class="Para" id="Par30">Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig3">8-3</a></span> is a sequence diagram for the UMA Grant when the AS is using <span id="ITerm32">interactive claims gathering</span>. The following is a description of each step for additional context.<div class="OrderedList"><ol><li class="ListItem"><span class="ItemNumber">1.</span><div class="ItemContent"><p class="Para" id="Par31">A person (the RqP) uses a client to access an UMA protected resource at the RS.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">2.</span><div class="ItemContent"><p class="Para" id="Par32">Without an access token, the RS will return HTTP code 401 (Unauthorized) with a permission ticket (obtained from the AS after registering a resource with certain scopes). The RS will also return the URI of the AS at which to obtain an access token.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">3.</span><div class="ItemContent"><p class="Para" id="Par33">The client presents the permission ticket at the token endpoint (along with client credentials). In this example, let’s imagine that the AS needs the RqP to authenticate.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">4.</span><div class="ItemContent"><p class="Para" id="Par34">The AS returns 403 (Forbidden) with an error message contained in a JSON object called <span id="ITerm33">
                        <span class="EmphasisFontCategoryNonProportional ">needs_info</span>
                        
                      </span>. The AS also provides a hint as to where the client can obtain authorization, which in this case is the interactive claims gathering endpoint at the AS.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">5.</span><div class="ItemContent"><p class="Para" id="Par35">The client redirects the RqP’s browser to the claims gathering endpoint at the AS. This is the equivalent of redirecting to the authorization endpoint in the OAuth code flow. The request must include the <span class="EmphasisFontCategoryNonProportional ">client_id</span> and ticket and should include the <span class="EmphasisFontCategoryNonProportional ">claims_redirect_uri</span> and state.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">6.</span><div class="ItemContent"><p class="Para" id="Par36">Which claims the AS needs is outside the scope of UMA. For GDPR compliance, the AS may need the person to consent to the release of personal information. It is possible that the AS may need the person to provide government issued license information. Or the policy may require step-up authentication. The possibilities are <span id="ITerm34">endless</span>.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">7.</span><div class="ItemContent"><p class="Para" id="Par37">The RqP supplies the necessary information (or the flow stops).</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">8.</span><div class="ItemContent"><p class="Para" id="Par38">The AS processes the information and redirects the RqP’s browser back to the client’s previously registered <span class="EmphasisFontCategoryNonProportional ">claims_redirect_uri</span> with a new permission ticket. Note: the client should check the state parameter to prevent cross-site request forgery attacks.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">9.</span><div class="ItemContent"><p class="Para" id="Par39">The client requests a new RPT by presenting the new permission ticket.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">10.</span><div class="ItemContent"><p class="Para" id="Par40">In our example, the AS returns the access token (RPT) on successful evaluation of the policies. Optionally, the AS may return a PCT, which is a token that references the information obtained during interactive claims processing. The client can present this in the future to avoid any redundant interactive claims processing.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">11.</span><div class="ItemContent"><p class="Para" id="Par41">With a valid access token in hand, the client again tries to obtain the resource.</p></div><div class="ClearBoth">&nbsp;</div></li><li class="ListItem"><span class="ItemNumber">12.</span><div class="ItemContent"><p class="Para" id="Par42">The RS is responsible for validating the access token. In our example, it’s good, and the RS returns the protected resource.</p></div><div class="ClearBoth">&nbsp;</div></li></ol></div><figure class="Figure" id="Fig3"><div class="MediaObject" id="MO3"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig3_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig3_HTML.jpg" style="height:34.75em" width="2106" height="1390" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig3_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-3</span><p class="SimplePara">UMA Grant sequence diagram (with <span id="ITerm35">interactive claims gathering</span>)</p></div></figcaption></figure></div><p class="Para" id="Par43">The interactive claims gathering flow is very powerful. It has many applications for both enterprise and consumer facing applications. One particularly important use case is for step-up authentication. When a person traverses a website, performing a certain transaction may require additional risk mitigation. For example, viewing bank information might require one set of security policies, and to transfer funds, another. At the point you transfer funds, the bank might want to require stronger authentication by sending you to the bank’s IDP to perform this additional step-up authentication (e.g., the user will need to provide a second factor). This is just one example of a kind of interaction with the person that may be necessary. Other important use cases are formalized consent management, providing additional information, or invoking a fraud detection <span id="ITerm36">process</span>.</p></section><section class="Section2 RenderAsSection2" id="Sec3"><h3 class="Heading">UMA RPT Requests with a&nbsp;Pushed Claim Token</h3><div class="Para" id="Par44">Pushing a claims token, like an <span id="ITerm37">OpenID Connect JWT</span> or a SAML assertion, is an expedient way to convey some IDP asserted attributes about a person. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig4">8-4</a></span> provides the sequence diagram for the UMA Grant when the client pushes a claim token, like an <span id="ITerm38">id_token</span> or SAML <span id="ITerm39">assertion</span>. This flow is much shorter than interactive claims gathering. However, the AS must be able to parse and validate the claims token, which is outside the scope of UMA. For example, for an identity assertion, it is common to validate the signature using the public key of the issuer. Encrypted claims tokens will work only if the AS has the right private key. For example, the client could encrypt the assertion with a public key of the UMA AS—again this is out of scope of UMA.<figure class="Figure" id="Fig4"><div class="MediaObject" id="MO4"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig4_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig4_HTML.jpg" style="height:20.35em" width="1629" height="814" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig4_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-4</span><p class="SimplePara">UMA Grant sequence diagram (with <span id="ITerm40">pushed claim token</span>)</p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec4"><h3 class="Heading">RPT Request Options</h3><p class="Para" id="Par45">As mentioned earlier, the client can request a specific scope, using the <span class="EmphasisFontCategoryNonProportional ">scope</span> parameter, if such scopes are pre-registered by the client. The AS will add this candidate scope to all resources that appear in the permission <span id="ITerm41">ticket</span>.</p><p class="Para" id="Par46">It is possible that the client already has an RPT from a different transaction. The client may include this previously issued RPT using the <span class="EmphasisFontCategoryNonProportional ">rpt</span> parameter. The client developer should be careful, as the newly issued RPT will contain the previously granted permissions. Unlike OAuth, there is no way to down-scope an UMA RPT. Also, keep in mind that the client may not know the associated scopes for an RPT, as a permission ticket may reference scopes of which it is not aware—there is no requirement to pre-register scopes associated with a permission ticket. However, the UMA FedAuthz spec does recommend in Section 4 that the RS “document its intended pattern of permission requests in order to assist the client in pre-registering for and requesting appropriate scopes at the authorization server”.</p><p class="Para" id="Par47">The client can use the <span class="EmphasisFontCategoryNonProportional ">claim_token</span> and <span class="EmphasisFontCategoryNonProportional ">claim client_token_format</span> parameters to specify the presence of a base64-encoded identity assertion. One issue that may arise is that the assertion may have an audience for a party other than the UMA Authorization Server. How the client and AS determine how to align with audience restrictions is also out of scope of UMA.</p><p class="Para" id="Par48">Finally, there is the <span class="EmphasisFontCategoryNonProportional ">pct</span> parameter, which is used to send a PCT token returned from a previous authorization workflow. The client must only send the PCT token for the same RqP. The point of the <span class="EmphasisFontCategoryNonProportional ">pct</span> parameter<span id="ITerm42">
                
                
              </span> is to save the requesting party from the effort needed to provide the same required information. The AS can still initiate interactive claims-gathering based on the context of the situation.</p></section><section class="Section2 RenderAsSection2" id="Sec5"><h3 class="Heading">Client Credentials</h3><p class="Para" id="Par49">Clients must present <span id="ITerm43">credentials</span> (i.e., <span class="EmphasisFontCategoryNonProportional ">client_id</span> and <span class="EmphasisFontCategoryNonProportional ">client_secret</span>) at the RPT (token) endpoint, but UMA does not define any mechanism for this to happen, except mentioning that RFC 7591 and OpenID Connect also define client registration. Depending on the security requirements, an OAuth client may choose different mechanisms for client authentication. If you are using OpenID Connect client registration, you should consider using <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span>, which avoids any shared secrets between the AS and client.</p></section></section><section class="Section1 RenderAsSection1" id="Sec6"><h2 class="Heading">UMA Federated Authorization</h2><p class="Para" id="Par50">The resource owner (<span id="ITerm44">RO)</span><span id="ITerm45">
              
            </span>—whether a company or person—can manage access at multiple resource servers. The ability to use multiple autonomous resource servers and authorization servers is why we call it “federated authorization”. While the UMA Grant specification provides a protocol for client developers, the UMA FedAuthz specification details the protocol between the RS and AS. How are permission tickets requested, how are resources associated with scopes, and how does the AS enable the RS to request UMA protection for a resource? UMA FedAuthz defines the back-channel communication between the AS and RS. Note: AS and RS developers need to read both UMA Grant and UMA FedAuthz.</p><div class="Para" id="Par51">Authorization model in UMA offers some of the capabilities of its web access management predecessors. While in OAuth the client must know the scopes it needs, in older web access management platforms, that wasn’t the case. The clients just requested a certain URL. See Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig5">8-5</a></span> for an illustration of how a web access management platform could utilize UMA. In this case, the RS is mapping resources to a combination of a certain URL and HTTP method (or methods). This isn’t a requirement—the RS has a lot of flexibility as to “what is a resource”. For example, it may only use UMA tokens when it encounters a certain transaction value, or when required to obtain personal consent.<figure class="Figure" id="Fig5"><div class="MediaObject" id="MO5"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig5_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig5_HTML.jpg" style="height:18.85em" width="1717" height="754" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig5_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-5</span><p class="SimplePara">Mapping resources to scopes and policies with UMA</p></div></figcaption></figure><figure class="Figure" id="Fig6"><div class="MediaObject" id="MO6"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig6_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig6_HTML.jpg" style="height:26.05em" width="1713" height="1042" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig6_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-6</span><p class="SimplePara">Resource <span id="ITerm46">owner’s</span> role: mapping policies to scopes</p></div></figcaption></figure></div><p class="Para" id="Par52">Saving the details for later, let’s say that in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig5">8-5</a></span>, the RS has two APIs: <span class="EmphasisFontCategoryNonProportional ">/someAPI</span> and <span class="EmphasisFontCategoryNonProportional ">/someOtherAPI</span>. To do an HTTP GET request on <span class="EmphasisFontCategoryNonProportional ">/someAPI</span>, you need an RPT with <span class="EmphasisFontCategoryNonProportional ">scope-a</span>. On the AS, the resource owner determines what scope maps to which policies (as shown in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig6">8-6</a></span>). This process is also not in scope of UMA. But just as an example, Policy One could state that the person must authenticate locally, and that the role of the person must be “manager”. In this case the RS is the policy enforcement point—it must ensure that the token is active and contains the proper authorizations for each resource <span id="ITerm47">ID</span>. The AS is the policy decision point—it alone knows the policies, and it must have sufficient information to make a policy decision.</p><p class="Para" id="Par53">One difference between UMA and web access management is that with UMA, the RS can add extra security as it sees fit. This might not be desirable if you want policy centralization, but it’s possible. In UMA, the RS can be a little “smarter” than your typical web access management “agent”—— which as its name suggests, always does the policy server’s bidding.</p><p class="Para" id="Par54">How does this all happen? The next few sections help fill in some of the details.</p><section class="Section2 RenderAsSection2" id="Sec7"><h3 class="Heading">Protection API</h3><p class="Para" id="Par55">The <span id="ITerm48">Protection API</span>, implemented by an UMA AS and utilized by the RS, provides several endpoints that enable the registration of resources. The protection API also enables the RS to manage client permission requests for resources. An OAuth token called the Protection API access <span id="ITerm49">token</span>, or PAT, controls access to the Protection API (apologies for the tautology—great names are self-defining). The <span id="ITerm50">RS</span> is a client of the AS and must use OAuth client credentials, preferably <span class="EmphasisFontCategoryNonProportional ">private_key_jwt</span>.</p></section><section class="Section2 RenderAsSection2" id="Sec8"><h3 class="Heading">Resource Registration</h3><div class="Para" id="Par56">A “resource” is a pretty abstract concept in UMA. By design, only the RS understands the content represented by it. UMA relies on the registration of resources before access management can occur. To accomplish this, the UMA Protection API provides a <span id="ITerm51">resource registration</span> endpoint. The UMA authorization server publishes the URLs for all endpoints in the configuration metadata document found at the issuer URL plus <span class="EmphasisFontCategoryNonProportional ">/.well-known/uma2-configuration</span>. The RS specifies <span class="EmphasisFontCategoryNonProportional ">resource_scopes</span>, which are all those possible for access to this resource. A client can request one or more <span class="EmphasisFontCategoryNonProportional ">resource_scopes</span> during the authorization phase. The AS returns a resource ID on resource creation. The RS needs the resource ID for future calls to the Protection API. Figure&nbsp;<span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig7">8-7</a></span> provides a sequence diagram for resource registration. For more details on resource registration, read the resource registration section of UMA FedAuthz.<figure class="Figure" id="Fig7"><div class="MediaObject" id="MO7"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig7_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig7_HTML.jpg" style="height:44.05em" width="1425" height="1762" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig7_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-7</span><p class="SimplePara"><span id="ITerm52">Resource registration</span> sequence diagram example</p></div></figcaption></figure></div></section><section class="Section2 RenderAsSection2" id="Sec9"><h3 class="Heading">Permission Endpoint</h3><p class="Para" id="Par57">If a client requests a resource without an RPT access <span id="ITerm53">token</span>, if the token is invalid, or lacks sufficient scopes, the RS uses the permission endpoint to obtain a new permission ticket. The RS returns the permission <span id="ITerm54">ticket</span>, along with the URL of the AS to the client.</p><div class="Para" id="Par58">While requesting the permission ticket, the RS specifies the required scopes from the list of previously registered scopes for that resource. For example, the RS might have registered scopes <span class="EmphasisFontCategoryNonProportional ">https://as.example/all</span> <span class="EmphasisFontCategoryNonProportional ">and</span> <span class="EmphasisFontCategoryNonProportional ">https://as.example/view</span>. Let’s say that either of those scopes is acceptable to the RS. Note, that when deciding to issue an RPT to a client, the AS may decide to grant only some of the requested scopes. While in OAuth, the AS would always return a token authorized for the granted scopes (omitting the others), in UMA, the AS may return either a token for a partial list of scopes or an error. This makes sense in cases where granting only a subset of the scopes would not be useful to the client. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig8">8-8</a></span> presents the sequence diagram for the permission endpoint.<figure class="Figure" id="Fig8"><div class="MediaObject" id="MO8"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig8_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig8_HTML.jpg" style="height:21.78em" width="1715" height="871" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig8_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-8</span><p class="SimplePara">Sequence diagram whereby the resource server obtains a permission <span id="ITerm55">ticket</span></p></div></figcaption></figure></div><div class="Para" id="Par59">By now, you are probably wondering what one of these elusive permission tickets looks like during registration. Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#PC1">8-1</a></span> shows an example of an HTTP <span class="EmphasisFontCategoryNonProportional ">POST</span> request that RS makes to AS to register permission (and get permission ticket back).<div class="ProgramCode" id="PC1"><div class="LineGroup"><div class="FixedLine">POST /perm HTTP/1.1</div><div class="FixedLine">Content-Type: application/json</div><div class="FixedLine">Host: as.example.com</div><div class="FixedLine">Authorization: Bearer 74b57da9-b12a-49cc-8026-a97f5a1e8234</div><div class="FixedLine">...</div></div><div class="LineGroup"><div class="FixedLine">[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_id":"c746d6d4-992f-4d93",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_scopes":[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/view"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_id":"8c799def-cd4d-46ee",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_scopes":[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/view",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/all"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">]</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 8-1</span><p class="SimplePara">Sample UMA Permission Ticket <span id="ITerm56">Request</span></p></div></div></div></div><div class="Para" id="Par60">The RS should use HTTP headers to communicate the ticket and the AS location to the client. Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#PC2">8-2</a></span> is the example from the UMA Grant of a response to a client from the RS with the ticket obtained from the AS <span id="ITerm57">permission endpoint</span>.<div class="ProgramCode" id="PC2"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 401 Unauthorized</div><div class="FixedLine">&nbsp;&nbsp;WWW-Authenticate: UMA realm="example",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;as_uri="https://as.example.com",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;ticket="016f84e8-f9b9-11e0-bd6f-0021cc6004de"</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 8-2</span><p class="SimplePara">Sample UMA Permission Ticket Response</p></div></div></div></div></section><section class="Section2 RenderAsSection2" id="Sec10"><h3 class="Heading">Token Introspection</h3><div class="Para" id="Par61">An UMA RPT is an OAuth bearer <span id="ITerm58">token</span>. The RS needs to know if this token is active, and what permissions it grants. While a bearer token could be a base64-encoded JWT, in many implementations, it is just a non-guessable string—a reference to an object stored at the AS. In order to retrieve the corresponding object, UMA aligns with OAuth token introspection (RFC 7662), but adds an UMA specific response parameter: permissions. Also, an UMA token introspection response must not return a <span class="EmphasisFontCategoryNonProportional ">scopes</span> parameter. This would be confusing to an RS, because scopes are bound to resources (instead, it returns the aforementioned <span class="EmphasisFontCategoryNonProportional ">permissions</span> parameter). For example, we could have scopes called <span class="EmphasisFontCategoryNonProportional ">https://as.example.com/view</span> <span class="EmphasisFontCategoryNonProportional ">and</span> <span class="EmphasisFontCategoryNonProportional ">https://as.example.com/all</span>. Let’s say you have two files, <span class="EmphasisFontCategoryNonProportional ">file1</span> (resource identifier is <span class="EmphasisFontCategoryNonProportional ">c746d6d4-992f-4d93</span>) and <span class="EmphasisFontCategoryNonProportional ">file2</span> (resource identifier is <span class="EmphasisFontCategoryNonProportional ">8c799def-cd4d-46ee</span>). It’s conceivable you could grant someone <span class="EmphasisFontCategoryNonProportional ">https://as.example.com/view</span> on <span class="EmphasisFontCategoryNonProportional ">file1</span> but on <span class="EmphasisFontCategoryNonProportional ">file2</span> you would grant both <span class="EmphasisFontCategoryNonProportional ">https://as.example.com/view</span> and <span class="EmphasisFontCategoryNonProportional ">https://as.example.com/all</span> (or just the latter one). Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#PC3">8-3</a></span> shows an example of a response containing the introspection object with the permissions parameter.<div class="ProgramCode" id="PC3"><div class="LineGroup"><div class="FixedLine">HTTP/1.1 200 OK</div><div class="FixedLine">Content-Type: application/json</div><div class="FixedLine">Cache-Control: no-store</div><div class="FixedLine">...</div></div><div class="LineGroup"><div class="FixedLine">{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"active":true,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"exp":1256953732,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"iat":1256912345,</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;"permissions":[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_id":"c746d6d4-992f-4d93",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_scopes":[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/view"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"exp":1256953732</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_id":"8c799def-cd4d-46ee",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"resource_scopes":[</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/view",</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"https://as.example/all"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"exp":1256953732</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;]</div><div class="FixedLine">}</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 8-3</span><p class="SimplePara">Example of a Response Containing the Introspection <span id="ITerm59">Object</span> with the Permissions Parameter</p></div></div></div></div><p class="Para" id="Par62">In a <span id="ITerm60">nutshell</span>, UMA provides a way for a client to obtain an access token to access a resource. How the AS authorizes the access token is the only thing that changes versus “normal” OAuth. In the next few sections, we describe how to put UMA to work.</p></section></section><section class="Section1 RenderAsSection1" id="Sec11"><h2 class="Heading">UMA Authorization Server Software</h2><p class="Para" id="Par63">This section focuses on how to configure the <span id="ITerm61">Gluu Server</span> (specifically the oxAuth component) as an UMA authorization server. Some of these features require no configuration by the administrator. For example, the Gluu Server shows the resources registered by the RS, but there is nothing for the AS administrator to do. Likewise, oxAuth implements the UMA configuration endpoint, but it requires no configuration by the administrator. The primary UMA configuration responsibility of the administrator is to define UMA scopes, RPT policies, and claims gathering workflows.</p><section class="Section2 RenderAsSection2" id="Sec12"><h3 class="Heading">Managing Scopes</h3><div class="Para" id="Par64">Scopes represent the “extent of access”. In UMA, the RS manages access to a resource by specifying the required scopes. When evaluating whether to grant access to a client, oxAuth calculates all the policies associated with the scopes for that permission. Let’s say Alice is sharing a document with <span id="ITerm62">Bob</span>. When Bob tries to read the document, the RS makes a request for a permission ticket with the view and search scopes. Bob’s client must obtain an RPT at the UMA token endpoint, at which point the AS looks up all the policies associated with the view and search scopes (corresponding to the ticket). Policies vary—maybe the AS checks a database to see if Alice has given Bob access to this document, and if Bob has authenticated using a strong two-factor authentication mechanism. In oxAuth, you define Python interception scripts to express policies. The most important method in the UMA RPT Authorization script is the <span class="EmphasisFontCategoryNonProportional ">authorize</span> method<span id="ITerm63">
                
                
              </span>, which returns a boolean. All policies associated with all scopes must evaluate to true for the oxAuth to return an RPT. In the oxTrust administration interface, the admin defines the policies. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig9">8-9</a></span> shows an example of scope management.<figure class="Figure" id="Fig9"><div class="MediaObject" id="MO9"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig9_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig9_HTML.jpg" style="height:38.12em" width="1725" height="1525" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig9_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-9</span><p class="SimplePara">oxTrust screenshot of UMA <span id="ITerm64">scope</span></p></div></figcaption></figure></div><p class="Para" id="Par65">You can use the Gluu Server oxTrust interface to map policies to scopes. The AS must define the scope before an RS can use it. The RS does not know what policies map to the scope. The AS can update the policies, or even add new policies without impacting the RS or client code. It’s recommended to use a URI as the ID of the scope, to avoid collisions in the event of a merger with another organization.</p></section><section class="Section2 RenderAsSection2" id="Sec13"><h3 class="Heading">Managing Authorization Policies</h3><div class="Para" id="Par66">Interception <span id="ITerm65">scripts</span> are the standard mechanism for customizing business logic in oxAuth. Administrators enter scripts directly into the oxTrust web interface, as shown in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig10">8-10</a></span>, in which case oxTrust stores them in the LDAP server. Administrators can author scripts directly on the file system, although LDAP storage is more convenient for clustered deployments. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig10">8-10</a></span> describes the interface for an UMA RPT policy interception script. As you might expect, <span class="EmphasisFontCategoryNonProportional ">init</span> is called before the <span class="EmphasisFontCategoryNonProportional ">authorize</span> method, and <span class="EmphasisFontCategoryNonProportional ">destroy</span> is called after. The <span class="EmphasisFontCategoryNonProportional ">authorize</span> method must return either true or false. The policy may have access to the requesting party’s identity if the client pushed <span id="ITerm66">claims</span> (for example, an OpenID id_token or Userinfo JWT), the PCT token, or a previously issued RPT sent with the token request. The Gluu Server administrator can create many interesting policies about the requesting party, for example if she has a certain role or used a certain type of authentication. You can make policies based on client claims—perhaps internal and third-party clients have access to different APIs. Policies can call external APIs, for example to obtain a fraud score based on the IP address of the client (the AS can determine the IP address in the HTTP Request object).<figure class="Figure" id="Fig10"><div class="MediaObject" id="MO10"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig10_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig10_HTML.jpg" style="height:24.38em" width="1725" height="975" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig10_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-10</span><p class="SimplePara">RPT policy interception script <span id="ITerm67">screenshot</span></p></div></figcaption></figure></div><div class="Para" id="Par67">If a policy fails, the AS may want to provide a hint to the client as to what went wrong. The AS has two ways to communicate this information to the client: via the <span class="EmphasisFontCategoryNonProportional ">need_info</span> response, or as a parameter to the claims gathering endpoint. After all the policies have been evaluated, the response will be returned by oxAuth. See Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#PC4">8-4</a></span>.<div class="ProgramCode" id="PC4"><div class="LineGroup"><div class="FixedLine">class UmaRptPolicy(UmaRptPolicyType):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def __init__(self, currentTimeMillis):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.currentTimeMillis = currentTimeMillis</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def init(self, configurationAttributes):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "RPT Policy. Initialized successfully"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def destroy(self, configurationAttributes):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "RPT Policy. Destroyed successfully"</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getApiVersion(self):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getRequiredClaims(self, context):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json = """[]"""</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.addRedirectUserParam("customUserParam1", "value1")</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return ClaimDefinitionBuilder.build(String.format(json, context.getIssuer()))</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def authorize(self, context):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print "RPT Policy. Authorizing ..."</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True<span id="ITerm68">
                      
                      
                    </span></div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getClaimsGatheringScriptName(self, context):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.addRedirectUserParam("customUserParam2", "value2")</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return "sampleClaimsGathering"</div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 8-4</span><p class="SimplePara">UMA RPT Policy Interception <span id="ITerm69">Script</span></p></div></div></div></div></section><section class="Section2 RenderAsSection2" id="Sec14"><h3 class="Heading">Interactive Claims Gathering Workflows</h3><p class="Para" id="Par68">Sometimes the AS may need to interact with the RqP to make an authorization decision. Using the UMA <span id="ITerm70">claims gathering workflow</span>, the AS may present forms or even redirect the RqP to another website. During this interaction, the AS may look at the context and decide it needs to mitigate additional fraud risk. To do this, it might require a more secure type of authentication. Or it’s even possible the AS may need to facilitate local registration, or to get the consent of the RO to share personal information. The AS may need to communicate instructions for some offline activity. There are many possible use cases where the answer to “can you get a token” is not simply “yes” or “no”.</p><div class="Para" id="Par69">Gluu Server administrators control claims gathering by writing a custom script. Claims gathering is like an authentication script, which is also front-channel. The <span class="EmphasisFontCategoryNonProportional ">getStepsCount</span> method determines the number of steps. For example, step one could be to authenticate the user more strongly, and step two to present a form to request additional information from the RqP. Unless the step involves a redirect, oxAuth will display the page specified in <span class="EmphasisFontCategoryNonProportional ">getPageForStep</span>. The <span class="EmphasisFontCategoryNonProportional ">getClaims</span> method processes the information submitted by a form presented in a step. If there is information it wants to attach to the PCT token, it uses the <span class="EmphasisFontCategoryNonProportional ">storeClaimInPCT</span> method. The <span class="EmphasisFontCategoryNonProportional ">getClaims</span> method returns the PCT after each step. For examples of claims gathering, see the default scripts included with the Gluu Server. See Listing <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#PC5">8-5</a></span>.<div class="ProgramCode" id="PC5"><div class="LineGroup"><div class="FixedLine">Class ClaimsGatheringScript(ClaimsGatheringType):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def init(self, configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def destroy(self,configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def process(self, claimsGatheringContext, configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return pct</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def prepareForStep(self, configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return True</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getExtraParametersForStep(self, configAttrs, step):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return None</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getStepsCount(self, configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1</div></div><div class="LineGroup"><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;def getStepsCount(self, configAttrs):</div><div class="FixedLine">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return 1<span id="ITerm71">
                      
                      
                    </span></div></div><div class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Listing 8-5</span><p class="SimplePara">Claims Gathering Interception <span id="ITerm72">Script</span></p></div></div></div></div></section></section><section class="Section1 RenderAsSection1" id="Sec15"><h2 class="Heading">UMA Resource Server Software</h2><p class="Para" id="Par70">As UMA 2.0 is a relatively new standard, there is not a lot of client software at this time of this first edition. Of course, the RS can implement the protocol directly, but having client software makes the job a lot easier. Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_5_Chapter.xhtml" class="totri-footnote"><span class="RefSource">5</span></a></span> introduced the oxd client middleware server for OpenID Connect. This software also provides interfaces for UMA, for the UMA client, the RS, and the OAuth <span id="ITerm73">client credential grant</span> (to call oxd APIs and the RPT endpoint). You can use the oxd OpenAPI document (i.e., Swagger document) to generate client libraries for Python, Php, Node, Java, C#, Ruby, Go, and many other languages using code generators or SaaS services like <span id="ITerm74">SwaggerHub</span><span id="ITerm75">
              
              
            </span>.</p><p class="Para" id="Par71">The two oxd methods that an API developer needs to use are <span class="EmphasisFontCategoryNonProportional ">uma_rs_protect</span> and <span class="EmphasisFontCategoryNonProportional ">uma_rs_check_access</span>. The <span class="EmphasisFontCategoryNonProportional ">protect</span> method is used to register resources and associate scopes. The <span class="EmphasisFontCategoryNonProportional ">check_access</span> method is used to validate access tokens, before content from an API is returned.</p><section class="Section2 RenderAsSection2" id="Sec16"><h3 class="Heading">Gluu Gateway as UMA Resource Server</h3><div class="Para" id="Par72">In Chapter <span class="ExternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_6_Chapter.xhtml" class="totri-footnote"><span class="RefSource">6</span></a></span> we introduced the Kong API <span id="ITerm76">gateway</span>. In this section, we describe how to turn it into an UMA RS, which verifies that tokens are active and have the scopes required to call certain APIs. Gluu accomplished this by writing two Kong plugins (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig11">8-11</a></span>). The first filters HTTP requests and inspects the Authorization header for a valid token. The second looks at the requested URL and HTTP method and verifies that the right scopes are present.<figure class="Figure" id="Fig11"><div class="MediaObject" id="MO11"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig11_HTML.png" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig11_HTML.png" style="height:13.98em" width="1721" height="559" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig11_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-11</span><p class="SimplePara">Gluu Gateway plugin <span id="ITerm77">overview</span></p></div></figcaption></figure></div><div class="Para" id="Par73">The Gluu Gateway package integrates several components:<div class="UnorderedList"><ul class="UnorderedListMarkBullet"><li><p class="Para" id="Par74">Kong Community Edition</p></li><li><p class="Para" id="Par75">Konga administrative web GUI</p></li><li><p class="Para" id="Par76">oxd</p></li><li><p class="Para" id="Par77">Postgres</p></li><li><p class="Para" id="Par78">Setup script</p></li></ul></div></div><p class="Para" id="Par79">Like the <span id="ITerm78">Gluu Server</span>, the goal of Gluu Gateway is to supply a Linux package to make these components easy to install by providing a straightforward deployment process. The Gluu Gateway is MIT licensed. It should be noted, however, that it uses the oxd client middleware, which is commercial (although up to 10 licenses are free). See the Gluu Gateway and oxd documentation sites for more information on licensing: <span class="ExternalRef"><a href="https://gluu.org/Docs"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://gluu.org/Docs</span>
                </span></a></span>.</p><div class="Para" id="Par80"><span id="ITerm79">Gluu Gateway</span> has three modes: OAuth, UMA, and Mix (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig12">8-12</a></span>). In OAuth mode, the client obtains a token from the OAuth token endpoint and calls OAuth protected endpoints; in UMA mode, the client obtains a token from the UMA token endpoint (RPT) and calls UMA protected endpoints; in Mix mode, the client obtains an OAuth token, but the Gluu Gateway switches it for an UMA token prior to calling the upstream web server. In this section, we cover the UMA mode only. The purpose of Mix mode is to keep it simple for developers—they just need to think about <span id="ITerm80">client credential grant</span> (i.e., they don’t need to read the UMA Grant specification). For more information about Mix mode, see the Gluu Gateway docs at <span class="ExternalRef"><a href="https://gluu.org/docs"><span class="RefSource">
                  <span class="EmphasisFontCategoryNonProportional ">https://gluu.org/docs</span>
                </span></a></span>. This feature may be removed from a future version of Gluu Gateway.<figure class="Figure" id="Fig12"><div class="MediaObject" id="MO12"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig12_HTML.png" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig12_HTML.png" style="height:30em" width="1721" height="1200" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig12_HTML.png"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-12</span><p class="SimplePara">Gluu Gateway <span id="ITerm81">modes</span></p></div></figcaption></figure></div><div class="Para" id="Par81">One of the most important features of the Gluu Gateway is to provide a GUI to enable administrators to specify which UMA scopes are required to call a certain endpoint with a certain method. The Gluu Gateway uses scope expressions, a draft UMA extension, to enable administrators to use complex boolean statements to control access to APIs. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig13">8-13</a></span> shows a sample configuration for a test API.<figure class="Figure" id="Fig13"><div class="MediaObject" id="MO13"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig13_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig13_HTML.jpg" style="height:21.68em" width="1725" height="867" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig13_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-13</span><p class="SimplePara">Gluu Gateway RS <span id="ITerm82">security</span></p></div></figcaption></figure></div></section></section><section class="Section1 RenderAsSection1" id="Sec17"><h2 class="Heading">UMA Client Software</h2><p class="Para" id="Par82">As mentioned, using the oxd middleware is your best bet for client <span id="ITerm83">software</span>. There is a useful sample application included in the <span class="EmphasisFontCategoryNonProportional ">gg-demo</span> folder of the Gluu Gateway GitHub project: <span class="ExternalRef"><a href="https://github.com/GluuFederation/gluu-gateway"><span class="RefSource">
                <span class="EmphasisFontCategoryNonProportional ">https://github.com/GluuFederation/gluu-gateway</span>
              </span></a></span>.</p><div class="Para" id="Par83">This project walks you through each step of what an UMA client needs to do, both with and without claims gathering. The demo deploys as a simple <span class="EmphasisFontCategoryNonProportional ">cgi-script</span> and requires some setup on the AS and RS, which is described in the README. Figure&nbsp;<span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig14">8-14</a></span> provides an overview of the components. Notice that oxd is handling all of the back-channel calls for the client and RS. It’s effectively the same as the standard UMA protocol, except oxd is doing some of the heavy lifting.<figure class="Figure" id="Fig14"><div class="MediaObject" id="MO14"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig14_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig14_HTML.jpg" style="height:29.4em" width="1718" height="1176" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig14_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-14</span><p class="SimplePara"><span id="ITerm84">Gluu Gateway</span> demo overview</p></div></figcaption></figure></div><div class="Para" id="Par84">The following sequence provides an overview of UMA from the perspective of an UMA client using oxd. In the first step, the client calls an API hosted by the <span id="ITerm85">Gluu Gateway</span> acting as an UMA RS (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig15">8-15</a></span>). As the request does not contain a bearer token in the <span class="EmphasisFontCategoryNonProportional ">Authorization</span> header, the RS returns a <span class="EmphasisFontCategoryNonProportional ">HTTP 401 Unauthorized</span> response, but includes a permission ticket in the <span class="EmphasisFontCategoryNonProportional ">WWW-Authenticate</span> header.<figure class="Figure" id="Fig15"><div class="MediaObject" id="MO15"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig15_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig15_HTML.jpg" style="height:13.98em" width="1718" height="559" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig15_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-15</span><p class="SimplePara">Step 1 of UMA client</p></div></figcaption></figure></div><div class="Para" id="Par85">In Step 2, the client obtains a plain <span id="ITerm86">OAuth client</span> token (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig16">8-16</a></span>). This will be needed when the client calls the oxd APIs, and when the client tries to obtain an RPT. Note the AS returns scopes <span class="EmphasisFontCategoryNonProportional ">uma_protection</span> and <span class="EmphasisFontCategoryNonProportional ">openid</span>. This is only because they are configured as default scopes on the Gluu Server—they serve no purpose in this demo. What’s really needed is the access token in the response body.<figure class="Figure" id="Fig16"><div class="MediaObject" id="MO16"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig16_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig16_HTML.jpg" style="height:22.55em" width="1718" height="902" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig16_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-16</span><p class="SimplePara">Step 2 of UMA client</p></div></figcaption></figure></div><div class="Para" id="Par86">In Step 3, the client attempts to get an RPT by calling the oxd <span class="EmphasisFontCategoryNonProportional ">uma-rp-get-rpt</span> endpoint<span id="ITerm87">
              
              
            </span> (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig17">8-17</a></span>). It presents the ticket from Step 1 and uses the access token from Step 2 in the <span class="EmphasisFontCategoryNonProportional ">Authorization</span> header. The AS evaluates all the policies for the scopes required by the respective permission ticket. In this case, they must evaluate to true, as the response contains a new access_token—the RPT!<figure class="Figure" id="Fig17"><div class="MediaObject" id="MO17"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig17_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig17_HTML.jpg" style="height:21.18em" width="1718" height="847" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig17_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-17</span><p class="SimplePara">Step 3 of UMA client</p></div></figcaption></figure></div><div class="Para" id="Par87">In Step 4, the client uses the <span id="ITerm88">RPT</span> to populate the <span class="EmphasisFontCategoryNonProportional ">Authorization</span> header of the request (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig18">8-18</a></span>). The RS introspects the token and evaluates the permissions. Everything is okay, because the RS returns content!<figure class="Figure" id="Fig18"><div class="MediaObject" id="MO18"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig18_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig18_HTML.jpg" style="height:22.5em" width="1725" height="900" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig18_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-18</span><p class="SimplePara">Step 4 of UMA client</p></div></figcaption></figure></div><div class="Para" id="Par88">But what if all the policies don’t evaluate to true? If you call the <span class="EmphasisFontCategoryNonProportional ">demo-client</span> CGI script with the parameter <span class="EmphasisFontCategoryNonProportional ">claim=true</span>, you can see such an example (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig19">8-19</a></span>). Instead of getting back an RPT, as in Step 2, you will get back a <span class="EmphasisFontCategoryNonProportional ">need_info</span> error<span id="ITerm89">
              
              
            </span>. The response also details required claims, which could be useful information for the client. And importantly, the client gets back a <span class="EmphasisFontCategoryNonProportional ">redirect_user</span> value, where it can redirect the user to interact with the AS.<figure class="Figure" id="Fig19"><div class="MediaObject" id="MO19"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig19_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig19_HTML.jpg" style="height:28.03em" width="1713" height="1121" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig19_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-19</span><p class="SimplePara">The <span id="ITerm90">need_info error</span></p></div></figcaption></figure></div><div class="Para" id="Par89">In this demo, there is a two-step claims gathering process. In the first step, shown in Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig20">8-20</a></span>, the AS presents a form for the RqP to enter a country. This is a simple example, but the AS could do anything here. Just a few examples would be to authenticate the RqP, query external fraud detection APIs, or ask the RqP to consent to sharing personal information. Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig21">8-21</a></span> shows Step 2 of the sample <span id="ITerm91">claims gathering workflow</span>, asking for the RqP to enter a city.<figure class="Figure" id="Fig20"><div class="MediaObject" id="MO20"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig20_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig20_HTML.jpg" style="height:5.6em" width="594" height="224" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig20_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-20</span><p class="SimplePara">Claim gathering Step 1 by the AS</p></div></figcaption></figure><figure class="Figure" id="Fig21"><div class="MediaObject" id="MO21"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig21_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig21_HTML.jpg" style="height:5.6em" width="594" height="224" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig21_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-21</span><p class="SimplePara">Claim gathering Step 2 by the <span id="ITerm92">AS</span></p></div></figcaption></figure></div><p class="Para" id="Par90">The claims gathering script is similar to authentication, which also allows for a multi-step front-channel (browser) interaction. In claims gathering, instead of an <span class="EmphasisFontCategoryNonProportional ">Authenticate</span> method, there is a method called <span class="EmphasisFontCategoryNonProportional ">gather</span><span id="ITerm93">
              
            </span>.</p><div class="Para" id="Par91">Once claims gathering is done, if the policies now evaluate to true, a new ticket is generated, which the client can present to the RPT endpoint, or if using oxd, to call the <span class="EmphasisFontCategoryNonProportional ">uma-rp-get-rpt</span> endpoint<span id="ITerm94">
              
              
            </span>. Information gathered during claims gathering is stored and referenceable in the future when the client uses the PCT (see Figure <span class="InternalRef"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#Fig22">8-22</a></span>).<figure class="Figure" id="Fig22"><div class="MediaObject" id="MO22"><img alt="../images/425975_1_En_8_Chapter/425975_1_En_8_Fig22_HTML.jpg" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/425975_1_En_8_Fig22_HTML.jpg" style="height:20.78em" width="1718" height="831" data-mfp-src="/library/view/securing-the-perimeter/9781484226018/images/425975_1_En_8_Chapter/425975_1_En_8_Fig22_HTML.jpg"></div><figcaption class="Caption" lang="en"><div class="CaptionContent"><span class="CaptionNumber">Figure 8-22</span><p class="SimplePara">Successful claims gathering <span id="ITerm95">response</span></p></div></figcaption></figure></div></section><section class="Section1 RenderAsSection1" id="Sec18"><h2 class="Heading">Conclusion</h2><p class="Para" id="Par92">UMA is useful. Hopefully this chapter has given you a basic understanding.</p><p class="Para" id="Par93">UMA and OpenID don’t overlap. In fact, UMA relies on the identity layer provided by OpenID, as well as its advanced client registration and authentication features. In some ways, UMA is backward OpenID Connect. A developer writing an OpenID client always calls the authorization endpoint first, and then if necessary calls the token endpoint. With UMA, the token endpoint is called first, and then if necessary, the RqP is redirected to the authorization endpoint.</p><p class="Para" id="Par94">UMA is very different kind of standard than OpenID. By 2011, many large consumer identity providers were using OAuth for authentication and to enable people to authorize access to their personal information. OpenID aligned the various implementations so developers didn’t have to learn ten different ways to do the same thing. UMA is a “build it and they will come” standard. There is always the risk that such standards are a field of dreams that never become a reality, especially if something else comes along that solves the same problem and gains more adoption. Luckily, this hasn’t happened. Authorization is very much an unsolved problem today, and UMA presents our best chance at an interoperable solution, which resulted from a truly consensus based standards organization. The ball is in our court now to drive adoption!</p></section></div><div class="annotator-outer annotator-viewer viewer annotator-hide">
  <ul class="annotator-widget annotator-listing"></ul>
</div><div class="annotator-modal-wrapper annotator-editor-modal annotator-editor annotator-hide">
	<div class="annotator-outer editor">
		<h2 class="title">Highlight</h2>
		<form class="annotator-widget">
			<ul class="annotator-listing">
			<li class="annotator-item"><textarea id="annotator-field-0" placeholder="Add a note using markdown (optional)" class="js-editor" maxlength="750"></textarea></li></ul>
			<div class="annotator-controls">
				<a class="link-to-markdown" href="https://daringfireball.net/projects/markdown/basics" target="_blank">?</a>
				<ul>
					<li class="delete annotator-hide"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#delete" class="annotator-delete-note button positive">Delete Note</a></li>
					<li class="save"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#save" class="annotator-save annotator-focus button positive">Save Note</a></li>
					<li class="cancel"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#cancel" class="annotator-cancel button">Cancel</a></li>
				</ul>
			</div>
		</form>
	</div>
</div><div class="annotator-modal-wrapper annotator-delete-confirm-modal" style="display: none;">
  <div class="annotator-outer">
    <h2 class="title">Highlight</h2>
      <a class="js-close-delete-confirm annotator-cancel close" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#close">Close</a>
      <div class="annotator-widget">
         <div class="delete-confirm">
            Are you sure you want to permanently delete this note?
         </div>
         <div class="annotator-controls">
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#cancel" class="annotator-cancel button js-cancel-delete-confirm">No, I changed my mind</a>
            <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#delete" class="annotator-delete button positive js-delete-confirm">Yes, delete it</a>
         </div>
       </div>
   </div>
</div><div class="annotator-adder" style="display: none;">
	<ul class="adders">
		
		<li class="copy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#">Copy</a></li>
		
		<li class="add-highlight"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#">Add Highlight</a></li>
		<li class="add-note"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#">
			Add Note
		</a></li>
		
	</ul>
</div></div></div>



  <div class="t-sbo-prev sbo-prev sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_7_Chapter.xhtml" class="prev nav-link">
      
          <span aria-hidden="true" class="pagination-label t-prev-label">Prev</span>
          <span class="visuallyhidden">Previous Chapter</span>
          <div class="pagination-title t-prev-title">7.&nbsp;Strong Authentication</div>
        </a>
    
  
  </div>

  <div class="t-sbo-next sbo-next sbo-nav-bottom">
  
    
      
        <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_9_Chapter.xhtml" class="next nav-link">
      
          <span aria-hidden="true" class="pagination-label t-next-label">Next</span>
          <span class="visuallyhidden">Next Chapter</span>
          <div class="pagination-title t-next-title">9.&nbsp;Identity Management</div>
        </a>
    
  
  </div>


        
    </section>
  </div>
<section class="sbo-saved-archives"></section>



          
          
  




    
    
      <div id="js-subscribe-nag" class="subscribe-nag clearfix trial-panel t-subscribe-nag collapsed slideUp">
        
        
          
          
            <p class="usage-data">Find answers on the fly, or master something new. Subscribe today. <a href="https://learning.oreilly.com/subscribe/" class="ga-active-trial-subscribe-nag">See pricing options.</a></p>
          

          
        
        

      </div>

    
    



        
      </div>
      
        


<footer class="pagefoot t-pagefoot" style="padding-bottom: 69px;">
  <a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" class="icon-up" onclick="window.Appcues.track(&#39;JumpTop_HeronBook&#39;)" style="display: none;"><div class="visuallyhidden">Back to top</div></a>
  <ul class="js-footer-nav">
  
    
    <li><a href="https://learning.oreilly.com/u/preferences/">Settings</a></li>
    
    <li><a href="https://learning.oreilly.com/public/support/">Support</a></li>
    
    <li><a href="https://learning.oreilly.com/accounts/logout/">Sign Out</a></li>
    
  
  
  </ul>
  <span class="copyright">© 2020 <a href="https://learning.oreilly.com/" target="_blank">O'Reilly Media, Inc</a>.</span>
  
    
    <a href="https://www.oreilly.com/terms/">Terms of Service</a> 
     / 
    
    <a href="https://learning.oreilly.com/privacy">Privacy Policy</a> 
    
    
  
</footer>
<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"agent":"","applicationID":"172641827,79672898,93931619","applicationTime":192,"transactionName":"YgdaZ0NSW0cEB0RdWltNfkZfUEFdCgofXFBHDVYdR1pQQxZeRl1QQj1aWkU=","errorBeacon":"bam.nr-data.net","licenseKey":"510f1a6865","queueTime":3,"beacon":"bam.nr-data.net"}</script>

      
    
    <script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource" charset="utf-8"></script>
    <script src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(1)" charset="utf-8"></script>
  

<iframe id="nr-ext-rsicon" style="position: absolute; display: none; width: 50px; height: 50px; z-index: 2147483647; border-style: none; background: transparent;" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/saved_resource(5).html"></iframe><div class="annotator-notice"></div><div class="font-flyout" style="top: 151.003px; left: 1583px;"><div class="font-controls-panel">
	<div class="nightmodes">
		<ul>
			<li class="day"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" id="day-mode" title="Day Mode">
				<i class="fa fa-sun-o"></i>
				<span>Day Mode</span></a></li>
			<li class="cloudy"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" id="cloudy-mode" title="Cloudy Mode">
				<i class="fa fa-cloud"></i>
				<span>Cloud Mode</span>
			</a></li>
			<li class="night"><a href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#" id="night-mode" title="Night Mode">
				<i class="fa fa-moon-o"></i>
				<span>Night Mode</span>
			</a></li>
		</ul>
	</div>

	<div class="font-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-font left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-font-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-font right"></i>
		</div>
	</div>

	<div class="column-resizer resizer">
		<div class="draggable-containment-wrapper">
			<i class="fa fa-compress left"></i>
			<span class="filler" style="width: 50%;"></span>
			<div id="js-column-size-draggable" class="draggable ui-widget-content ui-draggable ui-draggable-handle" style="position: relative; left: 80px;"></div>
			<i class="fa fa-expand right"></i>
		</div>
	</div>

	<a id="reset" class="button" href="https://learning.oreilly.com/library/view/securing-the-perimeter/9781484226018/html/425975_1_En_8_Chapter.xhtml#">Reset</a>
</div>
</div><div></div><div></div><script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","1732687426968531");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=1732687426968531&amp;ev=PageView&amp;noscript=1"></noscript><script type="text/javascript" id="">(function(){window.medalliaUserIdentifier=document.documentElement.dataset.userUuid;window.medalliaUserName=document.documentElement.dataset.username})();</script>
<script type="text/javascript" id="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/embed.js"></script>
<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("set","agent","tmgoogletagmanager","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>

<script type="text/javascript" id="">!function(b,e,f,g,a,c,d){b.fbq||(a=b.fbq=function(){a.callMethod?a.callMethod.apply(a,arguments):a.queue.push(arguments)},b._fbq||(b._fbq=a),a.push=a,a.loaded=!0,a.version="2.0",a.queue=[],c=e.createElement(f),c.async=!0,c.src=g,d=e.getElementsByTagName(f)[0],d.parentNode.insertBefore(c,d))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js");fbq("init","443792972845831");fbq("track","PageView");</script>
<noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=443792972845831&amp;ev=PageView&amp;noscript=1"></noscript>
<script type="text/javascript" id="">window._pp=window._pp||[];if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_8_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/register/")_pp.targetUrl="/confirm/trial";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_8_Chapter.xhtml"=="/confirmation/nv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/subscribe/")_pp.targetUrl="/confirm/paid";else if("\/library\/view\/securing-the-perimeter\/9781484226018\/html\/425975_1_En_8_Chapter.xhtml"=="/confirmation/nnv/"&&"https:\/\/learning.oreilly.com\/library\/view\/securing-the-perimeter\/9781484226018\/html\/Cover.xhtml"=="https://learning.oreilly.com/signup/")_pp.targetUrl="/confirm/paid";_pp.siteId="2508";
_pp.siteUId="39a88cd5-54f5-4d61-aec6-7884d06dfba1";_pp.orderValue="undefined";_pp.orderId="undefined";(function(){var ppjs=document.createElement("script");ppjs.type="text/javascript";ppjs.async=true;ppjs.src=("https:"==document.location.protocol?"https:":"http:")+"//cdn.pbbl.co/r/"+_pp.siteId+".js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(ppjs,s)})();</script><div style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.8861113484870409"><img style="width:0px; height:0px; display:none; visibility:hidden;" id="batBeacon0.846435903333139" width="0" height="0" alt="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/0"></div><iframe height="0" width="0" frameborder="0" style="display: none;" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pp.html"></iframe><iframe src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/pixel.html" style="display: none;"></iframe><script type="text/javascript" async="" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/generic1585109433606.js" charset="UTF-8"></script><span></span><div style="display: none; visibility: hidden;"><script>(function(){if(null!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')&&void 0!==document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]')){var a=!1;window.addEventListener("blur",function(){a&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"facebook",eventVal:0,nonInteraction:0})});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseover",function(){window.focus();
a=!0});document.querySelector('iframe[title\x3d"fb:share_button Facebook Social Plugin"]').addEventListener("mouseout",function(){a=!1})}if(null!==document.querySelector("iframe.twitter-share-button")&&void 0!==document.querySelector("iframe.twitter-share-button")){var b=!1;window.addEventListener("blur",function(){b&&dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0})});document.querySelector("iframe.twitter-share-button").addEventListener("mouseover",
function(){window.focus();b=!0});document.querySelector("iframe.twitter-share-button").addEventListener("mouseout",function(){b=!1})}try{window.twttr=function(a,b,d){var c,e=a.getElementsByTagName(b)[0];if(!a.getElementById(d))return a=a.createElement(b),a.id=d,a.src="//platform.twitter.com/widgets.js",e.parentNode.insertBefore(a,e),window.twttr||(c={_e:[],ready:function(a){c._e.push(a)}})}(document,"script","twitter-wjs"),twttr.ready(function(a){a.events.bind("tweet",trackTwitter)})}catch(c){}})();
null!==document.querySelector(".IN-widget")&&void 0!==document.querySelector(".IN-widget")&&document.querySelector(".IN-widget").addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"linkedin",eventVal:0,nonInteraction:0})});
function trackTwitter(a){a&&(a.target&&"IFRAME"==a.target.nodeName&&(opt_target=extractParamFromUri(a.target.src,"url")),dataLayer.push({event:"eventTracker",eventCat:"social",eventAct:"share",eventLbl:"twitter",eventVal:0,nonInteraction:0}))}function extractParamFromUri(a,b){if(a&&(b=new RegExp("[\\?\x26#]"+b+"\x3d([^\x26#]*)"),a=b.exec(a),null!=a))return unescape(a[1])};</script></div><script type="text/javascript" id="">function forceInputUppercase(a){var b=a.target.selectionStart,c=a.target.selectionEnd;a.target.value=a.target.value.toUpperCase();a.target.setSelectionRange(b,c)}void 0!=document.getElementById("id_promotion")&&null!=document.getElementById("id_promotion")&&document.getElementById("id_promotion").addEventListener("keyup",forceInputUppercase,!1);
void 0!=document.getElementsByName("promotionCode")[0]&&null!=document.getElementsByName("promotionCode")[0]&&document.getElementsByName("promotionCode")[0].addEventListener("keyup",forceInputUppercase,!1);</script><script type="text/javascript" id="">var nonwExpandable=document.querySelectorAll(".orm-ff-NavigationSubnav-headerListItem a, .orm-ff-NavigationView-headerListItem a");nonwExpandable.forEach(function(a,b){b+1!=nonwExpandable.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):b+1==nonwExpandable.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var nonwExpandableFo=document.querySelectorAll(".drop-content li:not(.flyout-parent) a");
nonwExpandableFo.forEach(function(a,b){"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1!=nonwExpandableFo.length?a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.childNodes[1].textContent})}):"drop-content"==a.parentNode.parentNode.parentNode.className&&b+1==nonwExpandableFo.length&&a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"user login",eventAct:"logout",eventLbl:"global nav | unified"})})});
var expandable=document.querySelectorAll(".orm-ff-NavigationSubnav-toggleControls a, .orm-ff-NavigationView-toggleControls a");expandable.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.parentNode.parentNode.parentNode.querySelectorAll(".orm-Button-btnContentWrap span")[0].childNodes[1].textContent+" | "+a.textContent})})});var flyoutLinks=document.querySelectorAll(".flyout a");
flyoutLinks.forEach(function(a){a.addEventListener("click",function(){dataLayer.push({event:"eventTracker",eventCat:"global nav",eventAct:"navigation",eventLbl:a.closest("li.flyout-parent").getElementsByTagName("a")[0].textContent+" | "+a.textContent})})});</script><iframe scrolling="no" frameborder="0" allowtransparency="true" src="./8. User-Managed Access - Securing the Perimeter_ Deploying Identity and Access Management with Free Open Source Software_files/widget_iframe.d0f13be8321eb432fba28cfc1c3351b1.html" title="Twitter settings iframe" style="display: none;"></iframe><div id="eJOY__extension_root" style="all: unset;"></div></body><div class="XTranslate"></div></html>